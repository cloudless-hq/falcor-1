{"version":3,"sources":["../../src/components/withSchema.js"],"names":["withSchema","FalcorRouteHandlers","schemaDesc","schema","get","set","Component","displayName","props","context","SchemaContainer","constructor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBAOwBA,U;;AAPxB;;;;AACA;;;;AACA;;IAAYC,mB;;AACZ;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEe,SAASD,UAAT,CAAoBE,UAApB,EAAgC;;AAE3C,6BAAUA,eACA,eAAe,OAAOA,UAAtB,IACA,qBAAsBA,UAAtB,yCAAsBA,UAAtB,MACA,eAAe,OAAOA,WAAWC,MAHjC,CAAV;;AAOA,QAAI,OAAOD,UAAP,KAAsB,UAA1B,EAAsC;AAClCA,qBAAa,EAAEC,QAAQD,UAAV,EAAb;AACH;;AAEDA,eAAWE,GAAX,GAAiBF,WAAWE,GAAX,IAAkBH,oBAAoBG,GAAvD;AACAF,eAAWG,GAAX,GAAiBH,WAAWG,GAAX,IAAkBJ,oBAAoBI,GAAvD;;AAEA,WAAO,4BAAa,UAACC,SAAD,EAAe;AAAA;;AAC/B,YAAMC,cAAc,+BAAgBD,SAAhB,EAA2B,QAA3B,CAApB;AACA;AAAA;;AAGI,+BAAYE,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,0IAClBD,KADkB,EACXC,OADW;;AAExB,sBAAKH,SAAL,GAAiBA,SAAjB;AAFwB;AAG3B;;AANL;AAAA,UAA+BI,eAA/B,UACWH,WADX,GACyBA,WADzB,SAEWJ,MAFX,GAEoB,oCAAqBD,UAArB,EAAiCK,WAAjC,CAFpB;AAQH,KAVM,CAAP;AAWH;;IAEKG,e;;;AACF,6BAAYF,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,+IAClBD,KADkB,EACXC,OADW;;AAExB,eAAKH,SAAL,GAAiB,OAAKK,WAAL,CAAiBL,SAAlC;AAFwB;AAG3B;;;;+CACsB;AACnB,iBAAKA,SAAL,GAAiB,IAAjB;AACH;;;iCACQ;AAAA,gBACGA,SADH,GACiB,IADjB,CACGA,SADH;;AAEL,mBAAO,CAACA,SAAD,GAAa,IAAb,GAAoB,8BAAC,SAAD,EAAe,KAAKE,KAApB,CAA3B;AACH;;;;EAXyB,gBAAMF,S","file":"withSchema.js","sourcesContent":["import React from 'react';\nimport invariant from 'invariant';\nimport * as FalcorRouteHandlers from '../falcor';\nimport hoistStatics from 'recompose/hoistStatics';\nimport wrapDisplayName from 'recompose/wrapDisplayName';\nimport wrapSchemaDescriptor from '../wrapSchemaDescriptor';\n\nexport default function withSchema(schemaDesc) {\n\n    invariant(schemaDesc && (\n              'function' === typeof schemaDesc || (\n              'object'   === typeof schemaDesc &&\n              'function' === typeof schemaDesc.schema)),\n`Attempted to create a Schema container component without a schema definition.\nSchema containers must be created with a schema function, or an Object with a \"schema\" function.`);\n\n    if (typeof schemaDesc === 'function') {\n        schemaDesc = { schema: schemaDesc };\n    }\n\n    schemaDesc.get = schemaDesc.get || FalcorRouteHandlers.get;\n    schemaDesc.set = schemaDesc.set || FalcorRouteHandlers.set;\n\n    return hoistStatics((Component) => {\n        const displayName = wrapDisplayName(Component, 'Schema');\n        return class Container extends SchemaContainer {\n            static displayName = displayName;\n            static schema = wrapSchemaDescriptor(schemaDesc, displayName);\n            constructor(props, context) {\n                super(props, context);\n                this.Component = Component;\n            }\n        };\n    });\n}\n\nclass SchemaContainer extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n        this.Component = this.constructor.Component;\n    }\n    componentWillUnmount() {\n        this.Component = null;\n    }\n    render() {\n        const { Component } = this;\n        return !Component ? null : <Component {...this.props}/>;\n    }\n}\n"]}