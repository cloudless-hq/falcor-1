/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("falcor",[],d):"object"===typeof exports?exports.falcor=d():b.falcor=d()})(this,function(){return function(b){function d(e){if(a[e])return a[e].exports;var f=a[e]={i:e,l:!1,exports:{}};b[e].call(f.exports,f,f.exports,d);f.l=!0;return f.exports}var a={};d.m=b;d.c=a;d.i=function(a){return a};d.d=function(a,f,c){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:c})};
d.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(e,"a",e);return e};d.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};d.p="";return d(d.s=108)}([function(b,d,a){var e=a(59),f=a(34),c=a(60);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===c?!1:a===f?b:a<e()}},function(b,d,a){var e=a(54);b.exports=function(a,c,n){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,c.push(a),e(n,a));return a}},function(b,
d,a){(function(a){function e(a){a?(this["\u001e\u0192_meta"]=a["\u001e\u0192_meta"])||(this["\u001e\u0192_meta"]=a):this["\u001e\u0192_meta"]={}}function c(a){function c(){return c.fn.apply(this,arguments)}return(c.fn=a)&&c}function n(c){var e=typeof c,h=arguments.length;if(0===h)c=this;else if(e!==x){if(!c||e!==w)return c}else{if(1!==h)return c;c=this}return c===a?void 0:c}function r(){return q(n.apply(this,arguments),r)}function l(a){a=n.apply(this,arguments);var c,e,g=0,f=q(a,l,!0,!0);a&&(c=a["\u001e\u0192_meta"])&&
(g=c.version);f&&typeof f===w&&(e=f["\u001e\u0192_meta"])&&(e.version=g);return f}function q(a,c,f,g){if(!a||typeof a!==w)return a;var h,n,k,v,y,u;if(m(a))u=a;else{h=-1;v=Object.keys(a);n=v.length;u={};g&&(u.__proto__=e.prototype);if(f&&(k=a["\u001e\u0192_meta"])){var q=k.$code,l=k.abs_path,b=k.deref_to,r=k.deref_from;k={};q&&(k.$code=q);l&&(k.abs_path=l);b&&(k.deref_to=b);r&&(k.deref_from=r);u["\u001e\u0192_meta"]=k;g&&(g={},g.__proto__=u,u=g)}for(;++h<n;)"\u001e\u0192_meta"!==(y=v[h])&&(u[y]=c(a[y],
c,f))}return u}Object.defineProperties(e.prototype,"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,e){a[e]={writable:!0,enumerable:!1,value:c(Array.prototype[e])};return a},{toJSON:{enumerable:!1,value:r},toProps:{enumerable:!1,value:l},toString:{enumerable:!1,value:function(a){return JSON.stringify(q(n.call(this,this),q,!0===
a))}},$__hash:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__path:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.abs_path||[]}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.version||0}}}));var m=Array.isArray,w="object",x="string";b.exports=e}).call(d,a(35))},function(b,d,a){d=a(4);b.exports=d("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,
d){b.exports=function(a,e){function f(a){this.message=a;e&&e.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}f.prototype=Object.create(Error.prototype);f.prototype.name=a;f.prototype.constructor=f;f.is=function(c){return c.name===a};return f}},function(b,d){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,d){b.exports={$type:"atom"}},function(b,d,a){var e=a(32);b.exports=function(a){for(var c,f=Object.keys(a),
b={},l=-1,q=f.length;++l<q;)c=f[l],e(c)||(b[c]=a[c]);return b}},function(b,d,a){b.exports=function(a,f){var c=f["\u001e\u0192_refs_length"]||0;f["\u001e\u0192_ref"+c]=a;f["\u001e\u0192_refs_length"]=c+1;a["\u001e\u0192_ref_index"]=c;a["\u001e\u0192_context"]=f}},function(b,d,a){var e=a(5);b.exports=function(a){return e(a)&&a.$size||0}},function(b,d,a){function e(a,c){var f=a,b,l=0,q=c.length;if(0<q){do for(f=f[c[l]];f&&"ref"===(b=f.$type);)f=e(a,f.value);while(++l<q&&f&&!b)}return f}b.exports=e},
function(b,d,a){var e=a(29),f=a(31);b.exports=function(a,n,b,l){var c=a,m;do 0<(c.$size=(c.$size||0)-n)?(m=c["\u001e\u0192_parent"])?c["\u001e\u0192_version"]!==l&&f(c,l):c["\u001e\u0192_version"]=l:(m=c["\u001e\u0192_parent"])&&e(c,m,c["\u001e\u0192_key"],b,l);while(c=m);return a}},function(b,d,a){d=a(4);b.exports=d("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,
d,a){var e=a(60);b.exports=function(a,c){if(c.$expires!==e){var f=a["\u001e\u0192_head"];if(!f)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=c;else if(f!==c){var b=c["\u001e\u0192_prev"],l=c["\u001e\u0192_next"];l&&(l["\u001e\u0192_prev"]=b);b&&(b["\u001e\u0192_next"]=l);c["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=c;c["\u001e\u0192_next"]=f;f["\u001e\u0192_prev"]=c;c===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=b)}}}},function(b,d,a){function e(a,e,b){"function"===typeof a||"function"===
typeof e||"function"===typeof b?(f.call(this,[]),this.destination={error:e,onError:e,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],e),this.parent=e,this.destination=a)}var f=a(15);b.exports=e;e.prototype=Object.create(f.prototype);e.prototype.next=e.prototype.onNext=function(a){var c=this.destination;if(c)if(c.onNext)c.onNext(a);else c.next&&c.next(a)};e.prototype.error=e.prototype.onError=function(a){var c=!1,e=this.destination;e&&(e.onError?(c=!0,e.onError(a)):e.error&&(c=!0,e.error(a)),
this.dispose());if(!c)throw a;};e.prototype.complete=e.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};e.prototype.dispose=e.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,d){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);
~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,d,a){var e=a(0),f=a(1),c=a(13);b.exports=function(a,b,l,q,m,w,x,u,k,h,g,p,t,D,v,y,z,E,d,C,B,A,G){var n=d;if(b)if(e(a,v))a["\u001e\u0192_invalidated"]||f(a,D,t);else if(c(t,a),void 0===a.value)d=!1,n=E;else{if(w)return p&&(u[m]=null),B(a,b,m,w,x,u,h,
g,p,z,E,C);return}if(E)w&&(x.hasValue=!0);else if(!n)return;return A(q,m,x,u,k,p,h,g,d,E,l,y,z,G,t)}},function(b,d,a){var e=a(10);b.exports=function(a,c){c=c||a._path;var f=a._node;if(!f||void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=null,0===c.length?f=a._root.cache:(f=e(a._root.cache,c),c===a._path&&(a._node=f));return f}},function(b,d,a){function e(a,c,k,h,g,n,b,l,v,y,m,q,r,d,B,A,G,H){var p={},t=c<a.length-1,u=a[c],z=w(u,p),x=q.index;do{m.depth=c;var D=f(k,h,g,n,b,l,
z,t,!1,m,q,r,d,B,A,G,H);m[c]=z;m.index=c;var E=D[0],C=D[1],F=D[4];F[F.index++]=z;E&&(t?e(a,c+1,k,C,E,n,D[3],D[2],v,y,m,F,r,d,B,A,G,H):(v.push(m.slice(0,m.index+1)),y.push(F.slice(0,F.index))));z=w(u,p);if(p.done)break;q.index=x}while(1)}function f(a,e,k,h,g,p,b,D,v,y,z,w,d,C,B,A,G){for(v=k.$type;"ref"===v;){a:{e=a;g=h;z=y;var t=w,u=d,x=C,E=B,F=A,N=G,S,K,Q=k.value;v=Q.slice(0);if(n(k,N))r(k,u,x),k=void 0,S=e,K=g,v.index=Q.length;else{var W=0,R=k,P=Q.length-1;S=k=e;K=p=g;do{var T=Q[W],O=W<P;v.index=
W;K=f(e,S,k,g,K,p,T,O,!0,z,v,t,u,x,E,F,N);k=K[0];v=K[4];if(!k||"object"!==typeof k){v.index=W;z=K;break a}S=K[1];p=K[2];K=K[3]}while(W++<P);v.index=W;R["\u001e\u0192_context"]!==k&&l(R,k)}c[0]=k;c[1]=S;c[2]=p;c[3]=K;c[4]=v;z=c}k=z[0];if(!k||"object"!==typeof k)return z;e=z[1];p=z[2];g=z[3];z=z[4];v=k.$type}if(void 0===v){if(null==b){if(D)throw new m;k&&(b=k["\u001e\u0192_key"])}else e=k,g=p,k=e[b],p=g&&g[b];k=q(e,k,p,b,y,z,w,d,C,B,A,G)}c[0]=k;c[1]=e;c[2]=p;c[3]=g;c[4]=z;return c}var c=Array(5),n=
a(0),r=a(1),l=a(8),q=a(81),m=a(3),w=a(23);b.exports=function(a,f,k,h,g){a=a._root;for(var n=a.expired,b=a.version+1,m=a.cache,v=[],y=[],l=[],q=[],u=-1,w=f.length;++u<w;)for(var r=f[u],x=r.paths,r=r.jsonGraph,d=-1,H=x.length;++d<H;){var I=x[d];y.index=0;e(I,0,m,m,m,r,r,r,l,q,v,y,b,n,a,h,k,g)}c[0]=void 0;c[1]=void 0;c[2]=void 0;c[3]=void 0;c[4]=void 0;return m["\u001e\u0192_version"]===b?(a.version=b,[l,q,!0]):[l,q,!1]}},function(b,d,a){function e(a,c,g,p,b,m,v,y,l,q,u,r,x,d,G){var h;if(a&&"object"===
typeof a&&!a.$type){h=[];var k=0;n(a)&&(h[k++]="length");for(var t in a)w(t)||(h[k++]=t)}else h=void 0;if(h&&h.length){k=0;t=h.length;var z=l.index;do{var D=h[k],E=a[D],C=!(!E||"object"!==typeof E)&&!E.$type;y.depth=c;var F=f(g,p,b,D,E,C,!1,y,l,q,u,r,x,d,G);y[c]=D;y.index=c;var B=F[0],A=F[1],F=F[2];F[F.index++]=D;B&&(C?e(E,c+1,g,A,B,m,v,y,F,q,u,r,x,d,G):(m.push(y.slice(0,y.index+1)),v.push(F.slice(0,F.index))));if(++k>=t)break;l.index=z}while(1)}}function f(a,e,g,n,b,m,v,y,z,w,d,C,B,A,G){for(var h=
g.$type;"ref"===h;){a:{e=b;z=a;var h=y,k,p=w,t=d,D=C,E=B,F=A,K=G,Q,W=g.value;k=W.slice(0);if(r(g,K))l(g,t,D),g=void 0,Q=z,k.index=W.length;else{var R=g;g=g["\u001e\u0192_context"];if(null!=g)Q=g["\u001e\u0192_parent"]||z,k.index=W.length;else{var P=0,T=W.length-1;k.index=P;Q=g=z;do{Q=f(z,Q,g,W[P],e,P<T,!0,h,k,p,t,D,E,F,K);g=Q[0];k=Q[2];if(!g||"object"!==typeof g){k.index=P;z=Q;break a}Q=Q[1]}while(P++<T);k.index=P;R["\u001e\u0192_context"]!==g&&q(R,g)}}c[0]=g;c[1]=Q;c[2]=k;z=c}g=z[0];if(!g||"object"!==
typeof g)return z;e=z[1];z=z[2];h=g&&g.$type}if(!m||void 0===h){if(null==n){if(m)throw new x;g&&(n=g["\u001e\u0192_key"])}else e=g,g=e[n];g=u(e,g,n,b,m,v,y,z,w,d,C,B,A,G)}c[0]=g;c[1]=e;c[2]=z;return c}var c=Array(3),n=Array.isArray,r=a(0),l=a(1),q=a(8),m=a(10),w=a(20),x=a(3),u=a(48);b.exports=function(a,f,g,n,b){var h=a._root,k=h.expired,p=h.version+1;a=a._path;var l=h.cache,q=m(l,a);if(!q)return[[],[],!1];for(var t=q["\u001e\u0192_parent"]||l,u=[],r=[],w=[],x=a.length,d=-1,I=f.length;++d<I;){var L=
f[d],M=a.slice(0);M.index=x;e(L.json,0,l,t,q,r,w,u,M,p,k,h,n,g,b)}c[0]=void 0;c[1]=void 0;c[2]=void 0;return l["\u001e\u0192_version"]===p?(h.version=p,[r,w,!0]):[r,w,!1]}},function(b,d,a){b.exports=function(a){return a&&"$"===a[0]||e(a)};var e=a(32)},function(b,d){function a(e,f,c){c=c||[];f=f||[];if(!e)return f;for(var n=[],b=e.$keys,l=b.length,q=-1;++q<l;){var m=e[q],w=b[q];m&&"object"===typeof m?a(m,f,c.concat([w])):n.push(w)}1===n.length?f.push(c.concat(n)):1<n.length&&f.push(c.concat([n]));
return f}b.exports=a},function(b,d){b.exports=function(a){for(var e=5381,f=a.length;f;)e=33*e^a.charCodeAt(--f);return e>>>0}},function(b,d){function a(a,c){var e=c.from=a.from||0;a=c.to=a.to||"number"===typeof a.length&&c.from+a.length-1||0;c.rangeOffset=c.from;c.loaded=!0;e>a&&(c.empty=!0)}var e=Array.isArray;b.exports=function(f,c){if(void 0===c.isArray){c.done=!1;var n=c.isObject=!(!f||"object"!==typeof f);c.isArray=n&&e(f);c.arrayOffset=0}if(c.isArray){var b;do{c.loaded&&c.rangeOffset>c.to&&
(++c.arrayOffset,c.loaded=!1);if(c.arrayOffset>=f.length){c.done=!0;break}n=f[c.arrayOffset];"object"===typeof n?(c.loaded||a(n,c),c.empty||(b=c.rangeOffset++)):(++c.arrayOffset,b=n)}while(void 0===b);return b}if(c.isObject){c.loaded||a(f,c);if(c.rangeOffset>c.to){c.done=!0;return}return c.rangeOffset++}c.done=!0;return f}},function(b,d,a){b.exports=a(40)},function(b,d,a){b.exports=a(43)},function(b,d){b.exports=function(a,e,f,c,n){var b=0,l;l=c.jsonGraph;l||(c.jsonGraph=l={});do{c=e[b++];if(b>=f){l=
l[c]=!0!==n?a:l[c]||{};break}l=l[c]||(l[c]={})}while(1);return l}},function(b,d){var a=Array.isArray;b.exports=function(e,f,c,n,b,l,q,m,w,x,u,k,h,g,p){if(w||x){for(var t,r=-1,v=(l=b-f)&&Array(l)||void 0;++r<l;){t=e[r+f];var y;y=t;if("object"!==typeof y||null===y)y=!1;else if(a(y))y=0===y.length;else{var z=y.to,d=y.from||0;"number"!==typeof z&&(z=d+(y.length||0));y=d>=z}if(y)return;v[r]=t}var F;e=null===t;t=w;var C;w?(y=b,z=n,C=c.requested||(c.requested=[])):(f=m,z=q,y=m+l-Number(e));do{if(l<b||!t){n=
-1;r=f;for(F=Array(y);++n<r;)F[n]=z[n];for(r=-1;n<y;)F[n++]=v[++r]}if(t=!t){w&&(C[C.length]=F);break}C[C.length]=F||v;f=m;z=q;C=c.missing||(c.missing=[]);y=m+l-Number(e)}while(1);if(x)return g(u,F,f,y,k,h,p)}}},function(b,d,a){function e(a,h,g,n,b,m,v,l,w){var k={},p=h<a.length-1,y=a[h],t=u(y,k);do{c=f(g,n,b,t,p,!1,m,v,l,w);var t=c[0],r=c[1];t&&(p?e(a,h+1,g,r,t,m,v,l,w):x(t,q(t),l,m));t=u(y,k)}while(!k.done)}function f(a,e,g,b,q,u,v,y,w,x){for(u=g.$type;"ref"===u;){a:{e=a;u=v;var h=y,k=w,p=x;if(n(g,
p))r(g,h,k),c[0]=void 0,c[1]=e;else{l(k,g);var t=g,z=g.value,d;g=g["\u001e\u0192_context"];if(null!=g)d=g["\u001e\u0192_parent"]||e;else{var D=0,E=z.length-1;d=g=e;do{c=f(e,d,g,z[D],D<E,!0,u,h,k,p);g=c[0];if(!g&&"object"!==typeof g)break a;d=c[1]}while(D++<E);t["\u001e\u0192_context"]!==g&&m(t,g)}c[0]=g;c[1]=d}}g=c[0];if(!g&&"object"!==typeof g)return c;e=c[1];u=g.$type}if(void 0===u)if(null==b){if(q)throw Error("`null` is not allowed in branch key positions.");}else e=g,g=e[b];c[0]=g;c[1]=e;return c}
var c=Array(2),n=a(0),r=a(1),l=a(13),q=a(9),m=a(8),w=a(17),x=a(11),u=a(23);b.exports=function(a,f,g){var h=a._root,n=h.expired,b=h.version+1,k=h.cache;a=w(a);if(!a)return!1;for(var m=-1,l=f.length,q=a["\u001e\u0192_parent"]||k;++m<l;)e(f[m],0,k,q,a,b,n,h,g);c[0]=void 0;c[1]=void 0;return k["\u001e\u0192_version"]===b?(h.version=b,!0):!1}},function(b,d,a){function e(a,b,w,d,u){if(a&&"object"===typeof a){var k=a.$type;if(void 0===k)for(var h in a)c(h)||e(a[h],a,h,d,u);else"ref"===k&&r(a),f(d,a);n(l(a,
u));b[w]=a["\u001e\u0192_parent"]=void 0;return!0}return!1}var f=a(54),c=a(20),n=a(84),r=a(85),l=a(31);b.exports=e},function(b,d,a){function e(a,c,h,g,b,n,m,v,l,q,d,r,x,B,A,G){var k={},p=h<c.length-1,t=c[h],u=w(t,k),y=q.index;do{l.depth=h;l[h]=u;l.index=h;var z=f(g,b,n,u,a,p,!1,l,q,d,r,x,B,A,G);l[h]=u;l.index=h;var D=z[0],E=z[1],z=z[2];z[z.index++]=u;D&&(p?e(a,c,h+1,g,E,D,m,v,l,z,d,r,x,B,A,G):(m.push(l.slice(0,l.index+1)),v.push(z.slice(0,z.index))));u=w(t,k);if(k.done)break;q.index=y}while(1)}function f(a,
e,h,g,b,t,q,v,y,w,d,F,C,B,A){for(var k=h.$type;"ref"===k;){a:{e=b;y=a;var k=v,p,u=w,z=d,D=F,E=C,N=B,S=A,K,Q=h.value;p=Q.slice(0);if(n(h,S))r(h,z,D),h=void 0,K=y,p.index=Q.length;else{var W=h;h=h["\u001e\u0192_context"];if(null!=h)K=h["\u001e\u0192_parent"]||y,p.index=Q.length;else{var R=0,P=Q.length-1;K=h=y;do{var T=Q[R],O=R<P;p.index=R;K=f(y,K,h,T,e,O,!0,k,p,u,z,D,E,N,S);h=K[0];p=K[2];if(!h||"object"!==typeof h){p.index=R;y=K;break a}K=K[1]}while(R++<P);p.index=R;W["\u001e\u0192_context"]!==h&&l(W,
h)}}c[0]=h;c[1]=K;c[2]=p;y=c}h=y[0];if(!h||"object"!==typeof h)return y;e=y[1];y=y[2];k=h.$type}if(!t||void 0===k){if(null==g){if(t)throw new m;h&&(g=h["\u001e\u0192_key"])}else e=h,h=e[g];h=x(e,h,g,b,t,q,v,y,w,d,F,C,B,A)}c[0]=h;c[1]=e;c[2]=y;return c}var c=Array(3),n=a(0),r=a(1),l=a(8),q=a(10),m=a(3),w=a(23),x=a(48);b.exports=function(a,f,h,g,b){var n=a._root,k=n.expired,p=n.version+1;a=a._path;var l=n.cache,m=q(l,a);if(!m)return[[],[],!1];for(var u=m["\u001e\u0192_parent"]||l,w=[],d=[],r=[],x=a.length,
G=-1,H=f.length;++G<H;){var I=f[G],L=I.path,I=I.value,M=a.slice(0);M.index=x;e(I,L,0,l,u,m,d,r,w,M,p,k,n,g,h,b)}c[0]=void 0;c[1]=void 0;c[2]=void 0;return l["\u001e\u0192_version"]===p?(n.version=p,[d,r,!0]):[d,r,!1]}},function(b,d,a){b.exports=function(a,f){var c=a,e=[],b=0,l,q,m;do{q=-1;l=c["\u001e\u0192_parent"];c["\u001e\u0192_version"]=f;m=c["\u001e\u0192_refs_length"]||0;do if(l&&l["\u001e\u0192_version"]!==f&&(e[b++]=l),++q<m)l=c["\u001e\u0192_ref"+q];else break;while(1)}while(c=e[--b]);return a}},
function(b,d,a){d=a(92);d=new RegExp("^"+d,"i","g");b.exports=d.test.bind(d)},function(b,d,a){var e=a(5);b.exports=function(a){return e(a)&&a.$timestamp||void 0}},function(b,d){b.exports=0},function(b,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(d=window)}b.exports=d},function(b,d,a){var e=a(39),f=a(37),c=a(38);b.exports=function(a){return e(c(f(a)))}},function(b,d,a){var e=Array.isArray,f=a(21);b.exports=function(a,b){if(a)e(a)||
e(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,c){var e=c.length;a[e]||(a[e]=[]);a[e].push(c);return a},b||{})}},function(b,d,a){var e=a(65);b.exports=function(a,c){return Object.keys(a).reduce(function(c,f){c[f]=e(a[f],c[f]);return c},c||{})}},function(b,d,a){function e(a,f,b){var h,g=Object.create(null),k=""+m(""+f),l=[],q=-1,v=0,u=[],w=0,d,r,x,B,A,G;x=[];B=-1;if(f<b-1){for(A=c(a,x);++B<A;)h=x[B],d=e(a[h],f+1,b),r=d.code,g[r]?d=g[r]:(l[v++]=r,d=g[r]={keys:[],sets:d.sets}),k=""+m(k+
h+r),n(h)&&d.keys.push(parseInt(h,10))||d.keys.push(h);for(;++q<v;)if(h=l[q],d=g[h],x=d.keys,A=x.length,0<A)for(a=d.sets,f=-1,b=a.length,B=x[0];++f<b;){h=a[f];d=-1;r=h.length;G=Array(r+1);for(G[0]=1<A&&x||B;++d<r;)G[d+1]=h[d];u[w++]=G}}else for(A=c(a,x),1<A?u[w++]=[x]:u[w++]=x;++B<A;)k=""+m(k+x[B]);return{code:k,sets:u}}function f(a,c){return a-c}function c(a,c,e){var f=0;if(a===w)c[f++]=null;else{for(var g in a)c[f++]=g;1<f&&c.sort(e)}return f}function n(a){var c=a,e=typeof a;if("string"===e){c=
a.length;if(0===c||17<c||!q.test(a))return!1;if(16>c)return!0;c=+a}else if("number"!==e)return!1;return 0===c%1&&9007199254740991>=l(c)}var r=Array.isArray,l=Math.abs,q=/^(0|(\-?[1-9][0-9]*))$/,m=a(22),w=a(6);b.exports=function(a){var c,b=[],h=0,g;for(g in a){var p;if(p=n(g))p=c=a[g],p=null!==p&&"object"===typeof p;if(p){p=e(c,0,parseInt(g,10)).sets;for(var l=-1,m=p.length;++l<m;){for(var v=h++,q=p[l],d=-1,w=q.length;++d<w;){var x=q[d];if(r(x)){var C=q,B=d;for(var A=-1,G=x.length-1,H=0<G;++A<=G;){var I=
x[A];if(!n(I)){H=!1;break}x[A]=parseInt(I,10)}!0===H&&(x.sort(f),A=x[0],H=x[G],H-A<=G&&(x={from:A,to:H}));C[B]=x}}b[v]=q}}}return b};b.exports._isSafeNumber=n},function(b,d,a){var e=Array.isArray,f=a(73),c=a(72),n=a(17),r=a(90),l=a(64),q=a(62);b.exports=function(a,b,d,u,k){var h,g;u=a._path;var p=a._root,m=p.cache,w,v,y,x=u&&u.length||0;if(x){if((h=n(a))&&h.$type)return{error:new r(u,u)};y=[];for(var E=0;E<x;++E)y[E]=u[E];g=a._referenceContainer}else h=m,y=[];w=[];var E=!1,F=d&&d.json,C={data:d},
B=a._boxed,A=p.expired;v=a._recycleJSON;var G=!!a._source,H=p.branchSelector,I=d&&a._materialized,L=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;var M,U=0,N=b.length;if(0<N)if(v){E=!0;if(1<N||e(b[0]))b=[q(l(b,{}))];k=c(m,h,F,b[0],0,d,C,w,y,x,!1,g,p,A,k,H,B,I,G,L,a);F=k[0];k[0]=void 0;k[1]=void 0}else{do M=b[U],v=M.length,F=f(m,h,F,M,0,d,C,w,v,y,x,!1,g,p,A,k,H,B,I,G,L,a);while(++U<N)}k=C.requested;C.args=E&&b||k;if(k&&k.length&&(C.relative=C.args,x)){b=[];E=0;for(x=k.length;E<x;++E)b[E]=u.concat(k[E]);
C.requested=b}C.hasValue&&(d.json=F);return C}},function(b,d,a){var e=Array(3),f=a(13),c=a(0),n=a(8),r=a(52);b.exports=function(a,b,m,d){f(m,b);var l,q,k=0,h=a,g=b.value,p=g,t=g.length;do{if(0===k&&void 0!==(l=b["\u001e\u0192_context"]))h=l,k=t;else if(q=g[k++],void 0===(h=h[q]))break;if(k===t){q=h.$type;if(void 0!==q&&c(h,d))break;else{if(h===b)throw new r(g);h!==l&&n(b,h)}if("ref"===q)f(m,h),k=0,b=h,h=a,g=p=b.value,t=g.length;else break}else if(void 0!==h.$type)break}while(1);k<t&&void 0!==h&&(t=
k);k=-1;for(g=Array(t);++k<t;)g[k]=p[k];e[0]=h;e[1]=g;e[2]=b;return e}},function(b,d,a){var e=a(7),f=a(71);b.exports=function(a,b,d,l,q,m,w,x,u,k,h,g){if("error"===b&&!g)return f(a,d,q,m,u,k);q.hasValue=!0;return k?e(a):a.value}},function(b,d,a){var e=a(76),f=a(88);b.exports=function(a,b,d,l,q){var c,n;c=a._path;l=a._root;var r,u,k=c&&c.length||0;if(k)return{error:new f};u=[];n=c=l.cache;r=[];for(var h=a._boxed,g=l.expired,p=a._materialized,t=!!a._source,D=a._treatErrorsAsValues,v={data:d},y=-1,z=
b.length;++y<z;){var E=b[y];a=E.length;e(n,c,E,0,d,v,r,a,u,k,!1,l,g,q,h,p,t,D)}v.args=v.relative=v.requested;return v}},function(b,d,a){function e(a,b,d,x,u,k,h){if(d===x)return k?c(l):void 0;var g,p,m=d+1,q,v=-1,y=0;p=b[d];a&&"object"===typeof a?((g=a["\u001e\u0192_meta"])||(a["\u001e\u0192_meta"]=g={}),g.version=h.version,g.abs_path=b.slice(0,d)):(a={},a.__proto__=n.prototype,a["\u001e\u0192_meta"]=g={},g.version=h.version,g.abs_path=b.slice(0,d),u&&(a=u(a)));a:do{if("object"!==typeof p)d=p,g=void 0,
p=!1;else if(f(p)){if(void 0!==q)throw new r(b,q);v=0;q=p;y=p.length;if(0===y)break a;p=q[v];continue a}else{g=p.to;d=p.from||0;"number"!==typeof g&&(g=d+(p.length||0)-1);if(0>g-d)break a;p=!0}do a[d]=e(a[d],b,m,x,u,k,h);while(p&&++d<=g);if(++v===y)break a;p=q[v]}while(1);return a}var f=Array.isArray,c=a(7),n=a(2);a(3);var r=a(12),l=a(6);b.exports=e},function(b,d,a){var e=Array.isArray,f=a(103),c=a(57),n=a(58);b.exports=function(a){for(var b=[],d=-1,m=a.length,r,x,u,k;++d<m;)u=a[d],e(u)?(u={path:u},
k="PathValues"):f(u)?k="PathValues":n(u)?k="JSONGraphs":c(u)&&(k="PathMaps"),x!==k&&(x=k,b.push(r={arguments:[],inputType:k})),r.arguments.push(u);return b}},function(b,d,a){b.exports=function(a,b,c,n,d){a["\u001e\u0192_key"]=c;a["\u001e\u0192_parent"]=b;void 0!==n&&(a["\u001e\u0192_version"]=n);a["\u001e\u0192_abs_path"]||(a["\u001e\u0192_abs_path"]=d.slice(0,d.index).concat(c));return b[c]=a}},function(b,d,a){function e(a,b,g,n,l,d,v,m,r,w){if(a&&"object"===typeof a&&!a.$type)for(var h in a)if(!x(h)){var k=
a[h],p=!(!k||"object"!==typeof k)&&!k.$type;c=f(g,n,l,h,k,p,!1,d,v,m,r,w);var t=c[0],y=c[1];t&&(p?e(k,b+1,g,y,t,d,v,m,r,w):u(t,q(t),m,d))}}function f(a,e,g,b,d,q,v,y,u,w,x,C){for(v=g.$type;"ref"===v;){a:{e=d;v=a;var h=y,k=u,p=w,t=x,z=C;if(n(g,z))r(g,k,p),c[0]=void 0,c[1]=v;else{l(p,g);var D=g,E=g.value,F;g=g["\u001e\u0192_context"];if(null!=g)F=g["\u001e\u0192_parent"]||v;else{var N=0,S=E.length-1;F=g=v;do{c=f(v,F,g,E[N],e,N<S,!0,h,k,p,t,z);g=c[0];if(!g&&"object"!==typeof g)break a;F=c[1]}while(N++<
S);D["\u001e\u0192_context"]!==g&&m(D,g)}c[0]=g;c[1]=F}}g=c[0];if(!g&&"object"!==typeof g)return c;e=c[1];v=g.$type}if(void 0===v)if(null==b){if(q)throw Error("`null` is not allowed in branch key positions.");}else e=g,g=e[b];c[0]=g;c[1]=e;return c}var c=Array(2),n=a(0),r=a(1),l=a(13),q=a(9),m=a(8),w=a(17),x=a(20),u=a(11);b.exports=function(a,b,g){var f=a._root,h=f.expired,n=f.version+1,k=f._comparator,l=f.cache;a=w(a);if(!a)return!1;for(var d=-1,m=a["\u001e\u0192_parent"]||l,q=b.length;++d<q;)e(b[d].json,
0,l,m,a,n,h,f,k,g);c[0]=void 0;c[1]=void 0;return l["\u001e\u0192_version"]===n?(f.version=n,!0):!1}},function(b,d,a){var e=a(34),f=a(102),c=a(9),n=a(33),r=a(51),l=a(0),q=a(1),m=a(46),w=a(50),x=a(49),u=a(11);a(29);b.exports=function(a,b,g,d,t,D,v,y,z,E,F,C,B,A){A=f(b,D);if(t||D){if(A&&l(b,!0)&&(q(b,E,F),A=b.$expires===e?A:"expired"),A&&"ref"!==A||!b||"object"!==typeof b)b=w(b,{},a,g,F,z),b=m(b,a,g,z,y)}else t=f(d),(A||t)&&(C?3>C.length?C(b,d):C(b,d,y.slice(0,y.index)):!1!==n(d)<n(b))||(B&&"error"===
t&&(d=B(x(v,g),d)),v=c(b)-c(d=r(d,t,t?d.value:d)),b=w(b,d,a,g,F,z),a=u(a,v,F,z),b=m(b,a,g,z,y));return b}},function(b,d){b.exports=function(a,e){a=a.slice(0,a.depth);a[a.length]=e;return a}},function(b,d,a){var e=a(83),f=a(29),c=a(31);b.exports=function(a,b,d,q,m,w){if(a===b)return a;a&&"object"===typeof a&&(e(a,b),f(a,d,q,m),c(b,w));return d[q]=b}},function(b,d,a){var e=Array.isArray,f=a(59),c=a(100),n=a(9),r=a(101),l=a(34);b.exports=function(a,b,d){var m=0;if(b){var q=a["\u001e\u0192_wrapped_value"];
a=c(a);m=n(a);a.$type=b;a["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=q||!1}else a={$type:"atom",value:d,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==d)m=51;else if(null==m||0>=m)switch(typeof d){case "object":m=e(d)?50+d.length:51;break;case "string":m=50+d.length;break;default:m=51}b=r(a);"number"===typeof b&&b<l&&(a.$expires=f()+-1*b);a.$size=m;return a}},function(b,d,a){d=a(4);b.exports=d("CircularReferenceError",
function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,d,a){d=a(4);b.exports=d("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,d,a){b.exports=function(a,b){var c=b["\u001e\u0192_prev"],e=b["\u001e\u0192_next"];e&&(e["\u001e\u0192_prev"]=c);c&&(c["\u001e\u0192_next"]=e);b["\u001e\u0192_prev"]=b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=e);b===a["\u001e\u0192_tail"]&&
(a["\u001e\u0192_tail"]=c)}},function(b,d,a){(function(e){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var c=a(14),d=a(15),r=a(104).default;b.exports=f;f.prototype[r]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,e,b){return new d([this.operator.call(this.source,a instanceof c?a:new c(a,e,b))])};f.prototype.then=function(a,c){var b=this;this._promise||(this._promise=
new e.Promise(function(a,c){var e=[],f=!1;b.subscribe({next:function(a){e[e.length]=a},error:function(a){f=!0;c(a)},complete:function(){!f&&a(1>=e.length?e[0]:e)}})}));return this._promise.then(a,c)}}).call(d,a(35))},function(b,d){function a(){}var e={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return e};b.exports=a},function(b,d,a){var e=a(5);b.exports=function(a){return e(a)&&"json"in a}},function(b,d,a){var e=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&
e(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,d){b.exports=Date.now},function(b,d){b.exports=1},function(b,d,a){function e(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(66);d=a(2);e.prototype=Object.create(f.prototype);e.Model=f;e.FalcorJSON=d;e.toProps=d.prototype.toProps;b.exports=e},function(b,d,a){function e(a){if(void 0!==a){for(var c="",b=a.$keys,d=-1,q=b.length;++d<q;){var m=b[d];if(null===m)c=""+f(""+c+"null");else{"object"===
typeof m&&(m="["+m.from+".."+(m.from+m.length-1)+"]");var w=e(a[d]),c=void 0===w?""+f(""+c+m):""+f(""+c+m+w.$code)}}a.$code=c;return a}}var f=a(22);b.exports=e},function(b,d,a){function e(a,b,d,q){if(d===q)return!0;var n,l=-1,r=0,u=d+1,k,h,g;n=b[d];if(null===n)return a===c;a:do{if("object"!==typeof n)d=n,h=void 0,k=!1;else if(f(n)){if(void 0!==g)break a;l=0;g=n;r=n.length;if(0===r)break a;n=g[l];continue a}else{h=n.to;d=n.from||0;"number"!==typeof h&&(h=d+(n.length||0)-1);if(0>h-d)break a;k=!0}do if(u===
q){if(null!==a[d])return!1}else if(n=a[d],null===n||void 0===n||!1===e(n,b,u,q))return!1;while(k&&++d<=h);if(++l===r)break a;n=g[l]}while(1);return!0}var f=Array.isArray,c=a(6);b.exports=e},function(b,d,a){function e(a,b){return a.reduce(function(a,b){return c(b)?f(a,b,0,b.length):c(b.$keys)?e(r(b),a):a},b||{})}function f(a,e,b,d){if(b!==d){a=a||{};var l=a.$keys||(a.$keys=[]),q=a.$keysMap||(a.$keysMap={}),k,h=-1,g=0,p,t=b+1,m;k=e[b];if(null===k)return n;a:do{if("object"!==typeof k)p=k,"undefined"===
typeof(b=q[p])&&(b=l.length),l[b]=p,q[p]=b,k=f(a[b],e,t,d),void 0!==k&&(a[b]=k);else if(c(k)){if(void 0!==m)break a;h=0;m=k;g=k.length;if(0===g)break a;k=m[h];continue a}else{b=k.to;p=k.from||0;"number"!==typeof b&&(b=p+(k.length||0)-1);if(0>b-p)break a;k={from:p,length:b-p+1};p="["+p+".."+b+"]";"undefined"===typeof(b=q[p])&&(b=l.length);l[b]=k;q[p]=b;k=f(a[b],e,t,d);void 0!==k&&(a[b]=k)}if(++h===g)break a;k=m[h]}while(1);return a}}var c=Array.isArray,n={$keys:[null],$keysMap:{"null":0}},r=a(21);
b.exports=e},function(b,d,a){function e(a,b,d,q,m){if(d===q)return!0;a=a||{};var n,l=-1,u=0,k,h=d+1,g,p,t;n=b[d];if(null===n)return c;a:do{if("object"!==typeof n)d=n,p=void 0,g=!1;else if(f(n)){if(void 0!==t)break a;l=0;t=n;u=n.length;if(0===u)break a;n=t[l];continue a}else{p=n.to;d=n.from||0;"number"!==typeof p&&(p=d+(n.length||0)-1);if(0>p-d)break a;g=!0}do h===q?a[d]=m:(n=a[d],(k=e(n,b,h,q,m))?n||(a[d]=k):a[d]=m);while(g&&++d<=p);if(++l===u)break a;n=t[l]}while(1);return a}var f=Array.isArray,
c=a(6);b.exports=function(a,c){return a.reduce(function(a,c){return e(a,c,0,c.length,null)},c||{})}},function(b,d,a){function e(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new c(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new q;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={},this._seed.__proto__=
n.prototype);this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(94),c=a(68),n=a(2),r=a(67),l=a(98),q=a(56),m=a(36);a(9);var w=a(5),x=a(57),u=a(10),k=a(58),h=a(19),g=a(18),p=a(24),t=a(78),D=a(25);b.exports=e;e.prototype.constructor=e;e.prototype.get=
function(){var a=this._seed;a||(a={},a.__proto__=n.prototype);for(var c=arguments.length,b=Array(c),e=0;e<c;e++)b[e]=arguments[e];return(new f("get",this,b))._toJSON(a,[])};e.prototype.set=function(){var a={};a.__proto__=n.prototype;for(var c=arguments.length,b=Array(c),e=0;e<c;e++)b[e]=arguments[e];return(new f("set",this,b))._toJSON(a,[])};e.prototype.preload=function(){for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];return(new f("get",this,c))._toJSON(null,[])};e.prototype.call=
function(){var a={};a.__proto__=n.prototype;for(var c=arguments.length,b=Array(c),e=0;e<c;e++)b[e]=arguments[e];return(new f("call",this,b))._toJSON(a,[])};e.prototype.invalidate=function(){for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];return(new f("invalidate",this,c))._toJSON(null,null).then()};e.prototype.deref=a(87);e.prototype._hasValidParentReference=a(86);e.prototype.getValue=function(a){return(new f("get",this,[a]))._toJSON({},[]).lift(function(c){return this.subscribe({onNext:function(b){var e=
-1;b=b.json;for(var g=a.length;b&&!b.$type&&++e<g;)b=b[a[e]];c.onNext(b)},onError:c.onError.bind(c),onCompleted:c.onCompleted.bind(c)})})};e.prototype.setValue=function(a,c){a=1===arguments.length?a.path:a;c=1===arguments.length?a:{path:a,value:c};return(new f("set",this,[c]))._toJSON({},[]).lift(function(c){return this.subscribe({onNext:function(b){var e=-1;b=b.json;for(var g=a.length;b&&!b.$type&&++e<g;)b=b[a[e]];c.onNext(b)},onError:c.onError.bind(c),onCompleted:c.onCompleted.bind(c)})})};e.prototype.setCache=
function(a){var c=this._root,b=c.cache;if(a!==b){var e={_path:[],_boxed:!1,_root:c,_materialized:!1,_treatErrorsAsValues:!1};c.cache=this._node={};"undefined"!==typeof b&&(c.expired=[],c["\u001e\u0192_head"]=void 0,c["\u001e\u0192_tail"]=void 0,this._recycleJSON&&(this._seed={},this._seed.__proto__=n.prototype));var f,d;k(a)?f=g(e,[a]):x(a)?f=h(e,[a]):w(a)&&(f=h(e,[{json:a}]));f&&(f[0].length&&p(e,f[0],null,!1,!1),f[2]&&(d=c.onChange)&&d())}else"undefined"===typeof b&&(this._root.cache={});return this};
e.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return t(this._root.cache);var c={};c.__proto__=n.prototype;c=D({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},a,c).data;c.paths=m(a);return c};e.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&(a=this._path.concat(a));return this._getVersion(this,
a)};e.prototype._clone=function(a){var c=new e(this);if(a)for(var b in a){var g=a[b];"delete"===g?delete c[b]:"_path"===b?(c[b]=g,!1===a.hasOwnProperty("_node")&&delete c._node):c[b]=g}0<c._path.length&&(c.setCache=void 0);return c};e.prototype.batch=function(a){var c;"number"===typeof a?c=new l(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?c=a:"function"===typeof a&&(c={scheudle:a}):c=new l(1);return this._clone({_scheduler:c})};e.prototype.unbatch=function(){return this._clone({_scheduler:new q})};
e.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};e.prototype.asDataSource=function(){return new r(this)};e.prototype._materialize=function(){return this._clone({_materialized:!0})};e.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};e.prototype.boxValues=function(){return this._clone({_boxed:!0})};e.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};e.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};
e.prototype.inspect=function(){return"{ v: "+this.getVersion()+" p: ["+this._path.join(", ")+"] }"};e.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};e.prototype.getPath=function(){return this._path.slice(0)};e.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};e.prototype._optimizePath=function(a){a=u(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||[]).slice(0)};e.prototype._getVersion=a(79);e.prototype._getPathValuesAsPathMap=
p;e.prototype._getPathValuesAsJSONG=D;e.prototype._setPathValues=a(30);e.prototype._setPathMaps=a(19);e.prototype._setJSONGs=a(18);e.prototype._setCache=a(19);e.prototype._invalidatePathValues=a(28);e.prototype._invalidatePathMaps=a(47)},function(b,d){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,c,d){return this._model.call.apply(this._model,
[a,b,c].concat(d))._toJSONG()};b.exports=a},function(b,d,a){function e(a,c){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=c;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&(this.comparator=a.comparator);"function"===typeof a.branchSelector&&
(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(95),c=a(33);e.comparator=e.prototype.comparator=function(a,b){var e=a&&a.$type,f=b&&b.$type;return e?f?!0===c(b)<c(a)?!0:!(e!==f||a.value!==b.value||a.$expires!==
b.$expires):a.value===b:f?!1:a===b};b.exports=e},function(b,d,a){var e=a(24),f=a(25);b.exports={json:function(a,b,f,d){var c=!1;if(!b)return{missing:!1,hasValue:!1};var n=[].concat(b[1]||[]),l=[].concat(b[2]||[]),r=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&r&&r.length&&(c=e(a,r,f,d,!0).hasValue);return{data:f,missing:!0,hasValue:c,fragments:[b,n,l,r]}},jsonGraph:function(a,b,e,d){var c=!1;if(!b)return{missing:!1,hasValue:!1};var n=[].concat(b[1]||[]),l=[].concat(b[2]||[]),r=[].concat(b[3]||
[]);b=(a._path||[]).concat(b[0]||[]);d&&r&&r.length&&(c=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},r,e,!0,!0).hasValue);return{data:e,missing:!0,hasValue:c,fragments:[b,n,l,r]}}}},function(b,d,a){b.exports={json:a(40),jsonGraph:a(43)}},function(b,d,a){var e=a(7);b.exports=function(a,c,b,d,l,q){var f=-1;c+=!!l;l=Array(c);for(a=q?e(a):a.value;++f<c;)l[f]=d[f];(b.errors||(b.errors=[])).push({path:l,value:a})}},function(b,d,a){function e(a,
b,d,h,m,y,z,E,F,C,B,A,G,H,I,L,M,U,N,S,K){var g,p;if(void 0===b||void 0!==(g=b.$type)||void 0===h)return c[1]=N&&void 0===b,c[0]=q(b,g,d,h,m,y,z,E,m,F,C,B,G,H,I,L,M,U,N,S,n,f,x),c;var t,v,D;g="";var O,J,V,X=h.$keys,ba=m+1,Y,Z,aa,fa,ca,ga=C+1,ha,ia;K&&A&&(ia=A.value,ha=A["\u001e\u0192_abs_path"]);if(!d||"object"!==typeof d)d=void 0;else if(t=d["\u001e\u0192_meta"]){D=b["\u001e\u0192_abs_path"];v=t.abs_path;L||d instanceof r||(d.__proto__={},d.__proto__["\u001e\u0192_meta"]=t,d.__proto__.__proto__=r.prototype);
if(D!==v){t.$code="__loading__";t.abs_path=D;t.version=b["\u001e\u0192_version"];t.deref_to=ia;t.deref_from=ha;if(v=t.keys)for(J in t.keys=Object.create(null),v)v[J]&&delete d[J];c[0]=d;c[1]=!0;return c}if(t.version===b["\u001e\u0192_version"]&&t.$code===h.$code)return z.hasValue=!0,c[0]=d,c[1]=!1,c;v=t.keys;t.abs_path=D;t.version=b["\u001e\u0192_version"];t.deref_to=ia;t.deref_from=ha}D=Object.create(null);var ja=-1,la=X.length,da,ka,ea=!1;a:for(;++ja<la;)if(B=X[ja],da=h[ja],null===B){if(void 0!==
da)throw new u;g=""+k(""+g+"null")}else{if("object"!==typeof B)J=B,Y=void 0,V=!1,ka=J;else{Y=B.to;J=B.from||0;"number"!==typeof Y&&(Y=J+(B.length||0)-1);if(0>Y-J)break a;V=!0;ka="["+J+".."+Y+"]"}do{B=!1;Z=d&&d[J];ca=F;fa=ga;aa=A;O=b[J];E[m]=J;F[C]=J;if(void 0===da){if(c=e(a,O,Z,da,ba,y,z,E,ca,fa,B,aa,G,H,I,L,M,U,N,S,K),ea||!0!==c[1]||(ea=!0),void 0===(Z=c[0])&&!U){d&&d.hasOwnProperty(J)&&delete d[J];continue}}else if(O&&"ref"===O.$type&&!l(O,I)&&(p=w(a,O,G,I),O=p[0],B=!0,ca=p[1],aa=p[2],fa=ca.length,
p[0]=p[1]=p[2]=void 0),c=e(a,O,Z,da,ba,y,z,E,ca,fa,B,aa,G,H,I,L,M,U,N,S,K),ea||!0!==c[1]||(ea=!0),void 0===(Z=c[0])){d&&d.hasOwnProperty(J)&&delete d[J];continue}void 0===t&&(t={},t.version=b["\u001e\u0192_version"],t.abs_path=b["\u001e\u0192_abs_path"],t.deref_to=ia,t.deref_from=ha,d={},d["\u001e\u0192_meta"]=t,d.__proto__=r.prototype,L?d=L(d):(B=d,d={},d.__proto__=B));D[J]=!0;v&&J in v&&(v[J]=!1);d[J]=Z}while(V&&++J<=Y);ea||(g=""+k(""+g+ka+(da&&da.$code||"")))}ea&&(g="__loading__");if(t&&(t.$code=
g,t.keys=D,v))for(J in v)v[J]&&delete d[J];c[0]=d;c[1]=ea;return c}function f(a,b,c,e,d,k,n,l,q,u,r,x,w,H,I){if(u)return H(r,a,b,b,x,w,I,c,e,n,l,k,q,f);a=a?h(a):[[]];var g=e.slice(0,d);return a.forEach(function(a){d=b+a.length;return m(g.concat(a),b,c,e,d,k,n,l,q,!1,r,x,w,H,I)})}var c=Array(2),n=a(42),r=a(2),l=a(0),q=a(16),m=a(27),w=a(41),x=a(77),u=a(3);a(12);var k=a(22),h=a(21);b.exports=e},function(b,d,a){function e(a,b,g,d,t,D,v,y,z,E,F,C,B,A,G,H,I,L,M,U,N,S){var h,k;if(void 0===b||(h=b.$type)||
t===z)return l(b,h,g,d,t,D,v,y,z,E,F,C,A,G,H,I,L,M,U,N,c,n,m);var p,R,P,T=t+1,O,J,V,X,ba=-1,Y=0,Z,aa,fa=F+1,ca,ga;C=d[t];if(null===C){if(T<z)throw new x;return g}S&&B&&(ga=B.value,ca=B["\u001e\u0192_abs_path"]);if(!g||"object"!==typeof g)g=void 0;else if(p=g["\u001e\u0192_meta"])p.version=b["\u001e\u0192_version"],p.abs_path=b["\u001e\u0192_abs_path"],p.deref_to=ga,p.deref_from=ca;a:do{if("object"!==typeof C)h=C,O=void 0,P=!1;else if(f(C)){if(void 0!==J)throw new u(d,J);ba=0;J=C;Y=C.length;if(0===
Y)break a;C=J[ba];continue a}else{O=C.to;h=C.from||0;"number"!==typeof O&&(O=h+(C.length||0)-1);if(0>O-h)break a;P=!0}do{C=!1;V=g&&g[h];aa=E;Z=fa;X=B;R=b[h];y[t]=h;E[F]=h;if(T===z){if(V=e(a,R,V,d,T,D,v,y,z,aa,Z,C,X,A,G,H,I,L,M,U,N,S),void 0===V&&!M)continue}else if(R&&"ref"===R.$type&&!q(R,H)&&(k=w(a,R,A,H),R=k[0],C=!0,aa=k[1],X=k[2],Z=aa.length,k[0]=k[1]=k[2]=void 0),void 0===(V=e(a,R,V,d,T,D,v,y,z,aa,Z,C,X,A,G,H,I,L,M,U,N,S)))continue;void 0===p&&(p={},p.version=b["\u001e\u0192_version"],p.abs_path=
b["\u001e\u0192_abs_path"],p.deref_to=ga,p.deref_from=ca,g={},g["\u001e\u0192_meta"]=p,g.__proto__=r.prototype,I&&(g=I(g)));g[h]=V}while(P&&++h<=O);if(++ba===Y)break a;C=J[ba]}while(1);return g}var f=Array.isArray,c=a(42),n=a(27),r=a(2),l=a(16),q=a(0),m=a(44),w=a(41),x=a(3),u=a(12);a(6);b.exports=e},function(b,d,a){var e=Array(2),f=a(7),c=a(26),n=a(13),r=a(0),l=a(8),q=a(52);b.exports=function(a,b,d,u,k){n(d,b);var h,g,p=0,t=a,m=b.value,v=m,x=m.length;do{if(0===p&&void 0!==(h=b["\u001e\u0192_context"]))t=
h,p=x;else if(g=m[p++],void 0===(t=t[g]))break;if(p===x){g=t.$type;if(void 0!==g&&r(t,k))break;else{if(t===b)throw new q(m);t!==h&&l(b,t)}if("ref"===g)n(d,t),u&&c(f(t),m,x,u),p=0,b=t,t=a,m=v=b.value,x=m.length;else break}else if(void 0!==t.$type)break}while(1);p<x&&void 0!==t&&(x=p);p=-1;for(m=Array(x);++p<x;)m[p]=v[p];e[0]=t;e[1]=m;return e}},function(b,d,a){var e=a(7),f=a(26);b.exports=function(a,b,d,l,q,m,w,x,u,k,h){h=a.value;if(k||"ref"===b||"error"===b||!a["\u001e\u0192_wrapped_value"]||"object"===
typeof h)h=e(a);q.hasValue=!0;f(h,w,x,l);(l.paths||(l.paths=[])).push(m.slice(0,d+!!u));return h}},function(b,d,a){function e(a,b,g,d,x,z,E,F,C,B,A,G,H,I,L,M,U,N){var p,t;if(void 0===b||(p=b.$type)||d===F)return m(b,p,x,g,d,x,z,E,F,C,B,A,G,H,I,void 0,L,M,U,N,r,f,w);var v,y,D=d+1,P,T,O=-1,J=0,V,X,ba=B+1;A=g[d];if(null===A){if(D<F)throw new k;}else{a:do{if("object"!==typeof A)p=A,P=void 0,y=!1;else if(c(A)){if(void 0!==T)throw new h(g,T);O=0;T=A;J=A.length;if(0===J)break a;A=T[O];continue a}else{P=
A.to;p=A.from||0;"number"!==typeof P&&(P=p+(A.length||0)-1);if(0>P-p)break a;y=!0}do A=!1,X=C,V=ba,v=b[p],E[d]=p,C[B]=p,v&&D<F&&"ref"===v.$type&&!q(v,I)&&(x&&l(n(v),C,V,x),t=u(a,v,G,x,I),v=t[0],A=!0,X=t[1],V=X.length,t[0]=t[1]=void 0),e(a,v,g,D,x,z,E,F,X,V,A,G,H,I,L,M,U,N);while(y&&++p<=P);if(++O===J)break a;A=T[O]}while(1)}}function f(a,b,c,e,d,f,h,k,m,q,u,r,w,I,L){var p,t;u&&q&&((u.paths||(u.paths=[])).push((t=0===d-b)&&e.slice(0,b+!!f)||e.slice(0,b).concat(a.slice(b,d+!!f))),p=l(t&&n(g)||void 0,
h,k,u,!t));return x(a,b,c,e,d,f,h,k,m,!t&&q,p,r,!0,I,L)}var c=Array.isArray,n=a(7),r=a(75),l=a(26),q=a(0),m=a(16),w=a(44),x=a(27),u=a(74),k=a(3),h=a(12),g=a(6);b.exports=e},function(b,d,a){function e(a,b,d,x,u,k,h,g,p,t,D,v,y,z){if(void 0===b)return c(void 0,void 0,a,b,d,void 0,g,p,d,t,D,v,h,void 0,!1,u,k,!1,y,!1,void 0,z,void 0),k?f(l):void 0;var m,q,w,B,A=b.$keys,G=d+1,H,I=D+1;a&&"object"===typeof a?((m=a["\u001e\u0192_meta"])?q=m.keys:a["\u001e\u0192_meta"]=m={},m.version=h.version,m.abs_path=
t.slice(0,D)):(a={},a.__proto__=n.prototype,a["\u001e\u0192_meta"]=m={},m.version=h.version,m.abs_path=t.slice(0,D),u&&(a=u(a)));x=Object.create(null);var L,M=-1,U=A.length;a:for(;++M<U;)if(B=A[M],L=b[M],null===B){if(void 0!==L)throw new r;}else{if("object"!==typeof B)w=B,H=void 0,B=!1;else{H=B.to;w=B.from||0;"number"!==typeof H&&(H=w+(B.length||0)-1);if(0>H-w)break a;B=!0}do p[d]=w,t[D]=w,x[w]=!0,q&&w in q&&(q[w]=!1),a[w]=e(a[w],L,G,G,u,k,h,g,p,t,I,v,y,z);while(B&&++w<=H)}m.$code="__missing__";m.keys=
x;if(q)for(w in q)q[w]&&delete a[w];return a}var f=a(7),c=a(16),n=a(2),r=a(3);a(12);var l=a(6);b.exports=e},function(b,d,a){function e(a,b,d){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===b||!f(b))&&void 0!==a[b]}).forEach(function(c){var d=a[c],n=b[c];n||(n=b[c]={});if(d.$type){n=!d["\u001e\u0192_wrapped_value"];if(d.value&&"object"===typeof d.value||n){var n={},l=Object.keys(d),r,u,k;u=0;for(k=l.length;u<k;u++)r=l[u],"$type"!==r&&f(r)||(n[r]=d[r]);d=n}else d=d.value;
b[c]=d}else e(d,n,c)})}var f=a(20);b.exports=function(a){var b={};e(a,b);return b}},function(b,d,a){var e=a(17);b.exports=function(a,b){a=(a=e(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,d,a){function e(a,e,d,q,m){e=c(e);d=!1;q=-1;for(var n=e.length;++q<n;){var l=e[q],u=l.inputType,l=l.arguments;0<l.length&&("PathValues"===u&&(l=l.map(f)),(0,b.exports["invalidate"+u])(a,l,m)&&(d=!0))}d&&(a=a._root.onChange)&&a();return{}}function f(a){return a.path||a.paths}var c=a(45);b.exports=
{json:e,jsonGraph:e,invalidatePathMaps:a(47),invalidatePathValues:a(28)}},function(b,d,a){var e=a(51),f=a(0),c=a(46),n=a(1),r=a(50),l=a(9),q=a(49),m=a(33),w=a(11);b.exports=function(a,b,d,h,g,p,t,D,v,y,z,E){var k,u,x,A,G,H;if(b===d){if(void 0===d)return d;if(null===d)return b=e(d,void 0,d),a=w(a,-b.$size,v,t),b=c(b,a,h,void 0,p);if((x=!(!b||"object"!==typeof b))&&void 0===(k=b.$type))return void 0===b["\u001e\u0192_parent"]&&c(b,a,h,t,p),b}else if(x=!(!b||"object"!==typeof b))k=b.$type;if("ref"!==
k){if(A=!(!d||"object"!==typeof d))u=d.$type;if(x&&!k&&(null==d||A&&!u))return b}else{if(null==d){if(f(b,E)){n(b,D,v);return}return b}if(A=!(!d||"object"!==typeof d))if(u=d.$type,"ref"===u)if(b===d){if(null!=b["\u001e\u0192_parent"])return b}else if(G=b.$timestamp,H=d.$timestamp,!f(b,E)&&!f(d,E)&&H<G)return}if(k&&A&&!u)return c(r(b,d,a,h,v,t),a,h,void 0,p);u||!A?("error"===u&&z&&(d=z(q(g,h),d)),u&&b===d?b["\u001e\u0192_parent"]||(b=e(b,k,b.value),a=w(a,-b.$size,v,t),b=c(b,a,h,t,p)):(g=!0,k||u?x&&
f(b,E)||(g=y?!(3>y.length?y(b,d):y(b,d,p.slice(0,p.index))):!1===m(d)<m(b)):g=!0,g&&(y=l(b)-l(d=e(d,u,u?d.value:d)),b=r(b,d,a,h,v,t),a=w(a,y,v,t),b=c(b,a,h,t,p))),f(b,!0)&&n(b,D,v)):null==b&&(b=c(d,a,h,void 0,p));return b}},function(b,d,a){function e(a,c,e){var d=!1,n=-1,k=c.length,h=[],g=[],p=a._root,l=p.errorSelector;e=e&&!a._source;for(p=a._source?null:p.comparator;++n<k;){var m=c[n],q=m.inputType,m=m.arguments;if(0<m.length){var w=(0,b.exports["set"+q])(a,m,l,p,e),d=d||w[2];g.push.apply(g,w[1]);
"PathValues"===q?h.push.apply(h,m.map(f)):"JSONGraphs"===q?h.push.apply(h,r(m,f)):h.push.apply(h,w[0])}}return{changed:d,requested:h,optimized:g}}function f(a){return a.path||a.paths}var c=a(24),n=a(25),r=a(99),l=a(45);b.exports={json:function(a,b,d,f,r){var k,h,g,p,m,q,v=l(b);k=e(a,v,r);if((b=k.requested).length){if(!(p=k.changed)||f)h=c(a,b,d,f,r);p&&(g=n({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},k.optimized,{},f,r),q=g.data,m=q.paths,g=g.requested,
(a=a._root.onChange)&&a())}return{args:v,data:d,missing:m,relative:b,fragments:q,requested:g,error:h&&h.error,errors:h&&h.errors,hasValue:h&&h.hasValue}},jsonGraph:function(a,b,c,d,f){var k,h,g,p,m,r,q=l(b);k=e(a,q,f);(b=k.requested).length&&(d||(g=k.changed))&&(h=n({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},k.optimized,c,d,f),m=h.data,p=m.paths,r=h.requested,g&&(a=a._root.onChange)&&a());return{args:q,data:c,missing:p,relative:b,fragments:m,requested:r,
error:h&&h.error,hasValue:h&&h.hasValue}},setPathMaps:a(19),setPathValues:a(30),setJSONGraphs:a(18)}},function(b,d,a){b.exports=function(a,b){for(var c=a["\u001e\u0192_refs_length"]||0,e=b["\u001e\u0192_refs_length"]||0,d=-1;++d<c;){var f=a["\u001e\u0192_ref"+d];void 0!==f&&(f["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(e+d)]=f,a["\u001e\u0192_ref"+d]=void 0)}b["\u001e\u0192_refs_length"]=c+e;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,d,a){b.exports=function(a){for(var b=-1,c=
a["\u001e\u0192_refs_length"]||0;++b<c;){var e=a["\u001e\u0192_ref"+b];null!=e&&(e["\u001e\u0192_context"]=e["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,d,a){b.exports=function(a){var b=a["\u001e\u0192_context"];if(b){for(var c=(a["\u001e\u0192_ref_index"]||0)-1,e=(b["\u001e\u0192_refs_length"]||0)-1;++c<=e;)b["\u001e\u0192_ref"+c]=b["\u001e\u0192_ref"+(c+1)];b["\u001e\u0192_refs_length"]=e;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=
void 0}return a}},function(b,d,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?!1:!0:!0}},function(b,d,a){var e=a(2),f=a(10);a(89);b.exports=function(a){var b,c;if(!a||"object"!==typeof a||!(c=a["\u001e\u0192_meta"])||"object"!==typeof c)return null;var d=this._root.cache,q=this._recycleJSON,m=c.abs_path,w,x;if(!m)return q&&(b={json:a},b.__proto__=e.prototype),this._clone({_node:void 0,
_seed:b});if(0===m.length)return q&&(b={json:a},b.__proto__=e.prototype),this._clone({_node:d,_path:m,_referenceContainer:!0,_seed:b});var u=c.deref_to,k=c.deref_from,h=f(d,m),g="e";if(k){g=!1;c=-1;x=k.length;for(w=d;++c<x&&(w=w[k[c]],w&&!w.$type););if(u&&w&&"ref"===w.$type)for(g=!0,x=u.length,d=w.value,c=0;c<x;++c)if(d[c]!==u[c]){h=void 0;g=!1;break}}g?"e"===g&&(w=!0):w=!1;q&&(b={json:a},b.__proto__=e.prototype);return this._clone({_seed:b,_node:h,_path:m,_referenceContainer:w})}},function(b,d,a){d=
a(4);b.exports=d("BoundJSONGraphModelError",function(){this.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,d,a){d=a(4);b.exports=d("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,d,a){d=a(4);b.exports=d("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";
this.boundPath=a;this.shortedPath=b})},function(b,d,a){function e(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}d=a(4);b.exports=d("MaxRetryExceededError",function(a,b,d,r){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+e(b)+"\n]\n"||"")+(d&&"relative: [\n\t"+e(d)+"\n]\n"||"")+(r&&"optimized: [\n\t"+e(r)+"\n]\n"||"")})},function(b,d){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,d,a){var e=a(11);b.exports=function(a,b,
d,r,l,q){"number"!==typeof l&&(l=.75);for(var c,f=r*l;l=b.pop();)d-=c=l.$size||0,e(l,c,a,q);if(d>=r){for(b=a["\u001e\u0192_tail"];d>=f&&(l=b);)b=b["\u001e\u0192_prev"],d-=c=l.$size||0,e(l,c,a,q);a["\u001e\u0192_tail"]=l;null==l?a["\u001e\u0192_head"]=void 0:l["\u001e\u0192_next"]=void 0}}},function(b,d,a){function e(a,b,c){q.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=
e}function c(a,b,c,d,e,f){m.call(this,a);this.data=b;this.retryCount=-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function n(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=u(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(v){throw v;}finally{--c.syncRefCount}}function r(a,b){try{throw b;}catch(t){m.prototype.onError.call(a,t)}}function l(a,b){for(var c,d,e,g=Object.keys(b),f=-1,h=g.length;++f<h;)e=g[f],"\u001e\u0192_meta"===e?a["\u001e\u0192_meta"]=
b["\u001e\u0192_meta"]:(d=b[e],c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:l(c,d):void 0===c&&(a[e]=d)));return a}var q=a(55),m=a(14),w=a(93),x=a(2),u=a(36),k=a(53),h=a(91);b.exports=e;e.prototype=Object.create(q.prototype);e.prototype.lift=function(a,b){b=new e(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;a.progressive=a.progressive||
this.operator.progressive;a.maxRetryCount=a.maxRetryCount||this.operator.maxRetryCount;return b};e.prototype.operator=function(a){return this._subscribe(a)};e.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};e.prototype._toJSON=function(a,b){void 0===a&&(a={},a.__proto__=x.prototype);return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};
e.prototype._toJSONG=function(a,b){void 0===a&&(a={},a.__proto__=x.prototype);return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};e.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};e.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),
this.source)};f.prototype.call=function(a,b){return a.subscribe(new c(b,this.data,this.errors,this.operation,this.progressive))};c.prototype=Object.create(m.prototype);c.prototype.operations={get:a(70),set:a(82),call:a(69),invalidate:a(80)};c.prototype.next=c.prototype.onNext=function(a){if(!this.started)this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount;else if(this.destination){var b,c=a.type;a=a.args||
a.paths;var d=this.data,e=this.model,g=this.errors,f,h=this.hasValue,k=this.operation,m=this.progressive,q=m&&d;e._recycleJSON&&"get"===this.type&&(q=!1);q&&(d={},d.__proto__=x.prototype);if(a&&a.length){f=this.operations[c][k](e,a,d,m||!e._source,-1===this.retryCount);if(f.error)return r(this,f.error);g&&f.errors&&g.push.apply(g,f.errors);if(b=f.fragments)a=f.args,this.fragments=b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=h||(h=f.hasValue)}this.completed=
!b||!e._source;"set"!==c&&(this.args=a,q&&(this.data=l(d,this.data)));m&&h&&d&&(d.json||d.jsonGraph)&&n(d,k,e._root,this.destination)}};c.prototype.error=c.prototype.onError=function(a){if(a instanceof k)return m.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};c.prototype.complete=c.prototype.onCompleted=function(a){if(this.destination){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&
this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&n(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?r(this,b.length&&b||a):m.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return r(this,new h(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)}};c.prototype.dispose=c.prototype.unsubscribe=function(){var a=
this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;m.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&w(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,d,a){function e(a){l.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=
b;this.scheduler=c;this.requested=d;this.optimized=e}var c=a(55),n=a(96),r=a(14),l=a(15),q=a(56);b.exports=e;e.prototype=Object.create(l.prototype);e.prototype.set=function(a,b,d,e){var f=this;return new c(function(c){var g=new n("set",f,a._source,new q);c=g.subscribe(new r(c,g));f.add(g);g.data=e.jsonGraph;g.requested.push(d);g.optimized.push(b);g.connect();return c})};e.prototype.call=function(a,b,d,e){var f=this;return new c(function(b){var c=new n("call",f,a._source,new q);b=c.subscribe(new r(b,
c));f.add(c);c.data=e;c.boundPath=a._path;c.connect();return b})};e.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,g=-1,p=b.subscriptions,m=p.length,q=new l([],a);++g<m;){var v=p[g];if("get"===v.type&&((v=v.batch(d,e,d=[],e=[]))&&q.add(v.subscribe(new r(a,v))),!e.length))break}e.length&&(v=p[g]=(new n("get",b,c,f)).batch(d,e),q.add(v.subscribe(new r(a,
v))),v.connect());return q}},function(b,d,a){function e(a,b,c,d){n.call(this,[],b);this.tree={};this.paths=[];this.type=a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=w(this.tree=u(this.optimized.reduce(function(a,b){return x(b,a)},{})));try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});
break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(p){this.disposable={},n.prototype.onError.call(this,new r(p))}}function c(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,g,h=-1,k=b.length;a:for(;++h<k;)if(g=b[h],g.length>c){f=0;do if(g[f]!==a[f])continue a;while(++f<c);d[++e]=g.slice(c)}return d}var n=a(97);a(14);a(15);var r=a(53),l=a(18),q=a(30),m=a(28),w=a(39),x=a(37),u=a(38),k=a(63);b.exports=e;e.prototype=Object.create(n.prototype);
e.prototype.next=e.prototype.onNext=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));var d=!1,e=a.jsonGraph,f=this.boundPath,b=b.modelRoot,h=a.invalidated,k=a.paths||this.paths,n=this.requested.slice(0);a=b.onChange;h&&h.length&&(d=m({_root:b,_path:[]},h,!1));k&&k.length&&e&&"object"===typeof e&&(e=l({_root:b},[{paths:k,jsonGraph:e}],b.errorSelector,b.comparator,!1),k=e[0],d=d||e[2]);d&&a&&a();this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",
paths:n[b]||c(f,k)})})}};e.prototype.error=e.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=w(u(this.requested.reduce(function(a,b){return x(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&q({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);n.prototype.onError.call(this,a)}};e.prototype.complete=
e.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});n.prototype.onCompleted.call(this)};e.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};e.prototype.dispose=e.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=
[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();n.prototype.dispose.call(this)};e.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};e.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,h=-1,l=-1,n=-1,m=b.length,p=a.length-1;++h<m;){var q=b[h],r=q.length,t=g[r];
t&&k(t,q,0,r)?(f[++n]=q,e[n]=a[h<p?h:p]):(d[++l]=q,c[l]=a[h<p?h:p])}return~n?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,d,a){function e(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),c=a(15);b.exports=e;e.prototype=Object.create(f.prototype);e.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};e.prototype.onCompleted=function(){var a=this.observers.slice(0);
this.dispose();a.forEach(function(a){a.onCompleted()})};e.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new c([a],this));return a};e.prototype.dispose=e.prototype.unsubscribe=function(){this.observers=[]}},function(b,d){function a(a){this.delay=a}var e=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new e(setTimeout(a,this.delay))};e.prototype.dispose=e.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=
null,this.disposed=!0)};b.exports=a},function(b,d){b.exports=function(a,b){for(var d=-1,c=-1,e=a.length,r=[];++c<e;)for(var l=b(a[c],c,a),q=-1,m=l.length;++q<m;)r[++d]=l[q];return r}},function(b,d,a){var e=Array.isArray,f=a(32);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=e(a)?[]:{},c;for(c in a)f(c)||(b[c]=a[c])}return b}},function(b,d,a){var e=a(5);b.exports=function(a){return e(a)&&a.$expires||void 0}},function(b,d,a){var e=a(5);b.exports=function(a,b){a=e(a)&&a.$type||void 0;
return b&&a?"branch":a}},function(b,d,a){var e=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&(e(a.path)||"string"===typeof a.path)}},function(b,d,a){b.exports=a(105)},function(b,d,a){(function(b,f){Object.defineProperty(d,"__esModule",{value:!0});var c=a(106),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);d["default"]=b}).call(d,a(35),a(107)(b))},function(b,d){Object.defineProperty(d,
"__esModule",{value:!0});d["default"]=function(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,d){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);
return a}},function(b,d,a){b.exports=a(61)}])});
//# sourceMappingURL=falcor.all.min.js.map
