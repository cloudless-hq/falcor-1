/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,c){"object"===typeof exports&&"object"===typeof module?module.exports=c():"function"===typeof define&&define.amd?define("falcor",[],c):"object"===typeof exports?exports.falcor=c():b.falcor=c()})(this,function(){return function(b){function c(d){if(a[d])return a[d].exports;var f=a[d]={i:d,l:!1,exports:{}};b[d].call(f.exports,f,f.exports,c);f.l=!0;return f.exports}var a={};c.m=b;c.c=a;c.i=function(a){return a};c.d=function(a,f,e){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:e})};
c.n=function(a){var d=a&&a.__esModule?function(){return a["default"]}:function(){return a};c.d(d,"a",d);return d};c.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};c.p="";return c(c.s=109)}([function(b,c,a){var d=a(60),f=a(33),e=a(61);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===e?!1:a===f?b:a<d()}},function(b,c,a){var d=a(54);b.exports=function(a,e,p){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,e.push(a),d(p,a));return a}},function(b,
c,a){(function(a){function d(a){a?(this["\u001e\u0192_meta"]=a["\u001e\u0192_meta"])||(this["\u001e\u0192_meta"]=a):this["\u001e\u0192_meta"]={}}function e(a){function e(){return e.fn.apply(this,arguments)}return(e.fn=a)&&e}function p(e){var d=typeof e,f=arguments.length;if(0===f)e=this;else if(d!==w){if(!e||d!==u)return e}else{if(1!==f)return e;e=this}return e===a?void 0:e}function y(){return n(p.apply(this,arguments),y)}function m(a){a=p.apply(this,arguments);var e,d,h=0,f=n(a,m,!0,!0);a&&(e=a["\u001e\u0192_meta"])&&
(h=e.version);f&&typeof f===u&&(d=f["\u001e\u0192_meta"])&&(d.version=h);return f}function n(a,e,f,h){if(!a||typeof a!==u)return a;var l,p,g,r,q,v;if(k(a))v=a;else{l=-1;r=Object.keys(a);p=r.length;v=!h&&{}||{__proto__:d.prototype};if(f&&(g=a["\u001e\u0192_meta"])){var b=g.$code,n=g.abs_path,m=g.deref_to,y=g.deref_from;g={};b&&(g.$code=b);n&&(g.abs_path=n);m&&(g.deref_to=m);y&&(g.deref_from=y);v["\u001e\u0192_meta"]=g;h&&(v={__proto__:v})}for(;++l<p;)"\u001e\u0192_meta"!==(q=r[l])&&(v[q]=e(a[q],e,
f))}return v}d.prototype.toJSON=y;d.prototype.toProps=m;d.prototype.toString=function(a){return JSON.stringify(n(p.call(this,this),n,!0===a))};d.prototype.constructor=d;Object.defineProperties(d.prototype,"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,d){a[d]={writable:!0,enumerable:!1,value:e(Array.prototype[d])};return a},{$__hash:{enumerable:!1,
get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.version||0}}}));var k=Array.isArray,u="object",w="string";b.exports=d}).call(c,a(34))},function(b,c,a){c=a(4);b.exports=c("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,c){b.exports=function(a,d){function f(a){this.message=a;d&&d.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,
this.constructor):this.stack=Error().stack}f.prototype=Object.create(Error.prototype);f.prototype.name=a;f.prototype.constructor=f;f.is=function(e){return e.name===a};return f}},function(b,c){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,c){b.exports={$type:"atom"}},function(b,c,a){var d=a(32);b.exports=function(a){for(var e,f=Object.keys(a),b={},m=-1,n=f.length;++m<n;)e=f[m],d(e)||(b[e]=a[e]);return b}},function(b,c,a){b.exports=function(a,f){var e=f["\u001e\u0192_refs_length"]||
0;f["\u001e\u0192_ref"+e]=a;f["\u001e\u0192_refs_length"]=e+1;a["\u001e\u0192_ref_index"]=e;a["\u001e\u0192_context"]=f}},function(b,c,a){var d=a(5);b.exports=function(a){return d(a)&&a.$size||0}},function(b,c,a){function d(a,e){var f=a,b,m=0,n=e.length;if(0<n){do for(f=f[e[m]];f&&"ref"===(b=f.$type);)f=d(a,f.value);while(++m<n&&f&&!b)}return f}b.exports=d},function(b,c,a){var d=a(30),f=a(49);b.exports=function(a,p,b,m){var e=a;do{var k=e["\u001e\u0192_parent"];0>=(e.$size=(e.$size||0)-p)&&null!=
k?d(e,k,e["\u001e\u0192_key"],b):e["\u001e\u0192_version"]!==m&&f(e,m);e=k}while(e);return a}},function(b,c,a){c=a(4);b.exports=c("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,c,a){var d=a(61);b.exports=function(a,e){if(e.$expires!==d){var f=a["\u001e\u0192_head"];if(!f)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=e;else if(f!==e){var b=e["\u001e\u0192_prev"],
m=e["\u001e\u0192_next"];m&&(m["\u001e\u0192_prev"]=b);b&&(b["\u001e\u0192_next"]=m);e["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=e;e["\u001e\u0192_next"]=f;f["\u001e\u0192_prev"]=e;e===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=b)}}}},function(b,c,a){function d(a,d,b){"function"===typeof a||"function"===typeof d||"function"===typeof b?(f.call(this,[]),this.destination={error:d,onError:d,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],d),this.parent=d,this.destination=a)}var f=
a(15);b.exports=d;d.prototype=Object.create(f.prototype);d.prototype.next=d.prototype.onNext=function(a){var e=this.destination;if(e)if(e.onNext)e.onNext(a);else e.next&&e.next(a)};d.prototype.error=d.prototype.onError=function(a){var e=!1,d=this.destination;d&&(d.onError?(e=!0,d.onError(a)):d.error&&(e=!0,d.error(a)),this.dispose());if(!e)throw a;};d.prototype.complete=d.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};
d.prototype.dispose=d.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,c){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();
if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,c,a){var d=a(0),f=a(1),e=a(13);b.exports=function(a,b,m,n,k,u,w,q,g,r,h,l,t,F,x,E,v,z,c,A,D,B,G){var p=c;if(b)if(d(a,x))a["\u001e\u0192_invalidated"]||f(a,F,t);else if(e(t,a),void 0===a.value)c=!1,p=z;else{if(u)return l&&(q[k]=null),D(a,b,k,u,w,q,r,h,l,v,z,A);return}if(z)u&&(w.hasValue=!0);else if(!p)return;return B(n,k,w,q,g,l,r,h,c,z,m,E,v,G)}},function(b,c,a){var d=a(10);b.exports=function(a,e){e=e||a._path;var f=a._node;if(!f||
void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=null,0===e.length?f=a._root.cache:(f=d(a._root.cache,e),e===a._path&&(a._node=f));return f}},function(b,c,a){var d=a(30),f=a(21);b.exports=function p(a,b,n,k){if(d(a,b,n,k)){if(null==a.$type)for(var m in a)f(m)||p(a[m],a,m,k);return!0}return!1}},function(b,c,a){function d(a,e,g,r,h,l,p,b,k,m,v,n,y,c,D,B,G,H){var t={},q=e<a.length-1,x=a[e],w=u(x,t),z=n.index;do{v.depth=e;var F=f(g,r,h,l,p,b,w,q,!1,v,n,y,c,D,B,G,H);v[e]=w;v.index=
e;var E=F[0],A=F[1],C=F[4];C[C.index++]=w;E&&(q?d(a,e+1,g,A,E,l,F[3],F[2],k,m,v,C,y,c,D,B,G,H):(k.push(v.slice(0,v.index+1)),m.push(C.slice(0,C.index))));w=u(x,t);if(t.done)break;n.index=z}while(1)}function f(a,d,g,r,h,l,b,u,x,c,v,z,C,A,D,B,G){for(x=g.$type;"ref"===x;){a:{d=a;h=r;v=c;var t=z,q=C,w=A,F=D,E=B,S=G,T,K,O=g.value;x=O.slice(0);if(p(g,S))y(g,q,w),g=void 0,T=d,K=h,x.index=O.length;else{var W=0,Q=g,N=O.length-1;T=g=d;K=l=h;do{var U=O[W],M=W<N;x.index=W;K=f(d,T,g,h,K,l,U,M,!0,v,x,t,q,w,F,E,
S);g=K[0];x=K[4];if(!g||"object"!==typeof g){x.index=W;v=K;break a}T=K[1];l=K[2];K=K[3]}while(W++<N);x.index=W;Q["\u001e\u0192_context"]!==g&&m(Q,g)}e[0]=g;e[1]=T;e[2]=l;e[3]=K;e[4]=x;v=e}g=v[0];if(!g||"object"!==typeof g)return v;d=v[1];l=v[2];h=v[3];v=v[4];x=g.$type}if(void 0===x){if(null==b){if(u)throw new k;g&&(b=g["\u001e\u0192_key"])}else d=g,h=l,g=d[b],l=h&&h[b];g=n(d,g,l,b,c,v,z,C,A,D,B,G)}e[0]=g;e[1]=d;e[2]=l;e[3]=h;e[4]=v;return e}var e=Array(5),p=a(0),y=a(1),m=a(8),n=a(83),k=a(3),u=a(24);
b.exports=function(a,f,g,r,h){a=a._root;for(var l=a.expired,p=a.version+1,b=a.cache,k=b["\u001e\u0192_version"],q=[],v=[],m=[],n=[],u=-1,y=f.length;++u<y;)for(var w=f[u],c=w.paths,w=w.jsonGraph,H=-1,I=c.length;++H<I;){var L=c[H];v.index=0;d(L,0,b,b,b,w,w,w,m,n,q,v,p,l,a,r,g,h)}e[0]=void 0;e[1]=void 0;e[2]=void 0;e[3]=void 0;e[4]=void 0;f=b["\u001e\u0192_version"];g=a.onChange;k!==f&&(a.version=p,g&&g());return[m,n,k!==f]}},function(b,c,a){function d(a,e,h,l,b,k,q,m,v,n,w,y,c,B,G){var g;if(a&&"object"===
typeof a&&!a.$type){g=[];var r=0;p(a)&&(g[r++]="length");for(var t in a)u(t)||(g[r++]=t)}else g=void 0;if(g&&g.length){r=0;t=g.length;var x=v.index;do{var z=g[r],F=a[z],E=!(!F||"object"!==typeof F)&&!F.$type;m.depth=e;var A=f(h,l,b,z,F,E,!1,m,v,n,w,y,c,B,G);m[e]=z;m.index=e;var C=A[0],D=A[1],A=A[2];A[A.index++]=z;C&&(E?d(F,e+1,h,D,C,k,q,m,A,n,w,y,c,B,G):(k.push(m.slice(0,m.index+1)),q.push(A.slice(0,A.index))));if(++r>=t)break;v.index=x}while(1)}}function f(a,d,h,l,p,b,k,u,v,c,C,A,D,B,G){for(var g=
h.$type;"ref"===g;){a:{d=p;v=a;var g=u,r,t=c,x=C,z=A,F=D,E=B,K=G,O,W=h.value;r=W.slice(0);if(y(h,K))m(h,x,z),h=void 0,O=v,r.index=W.length;else{var Q=h;h=h["\u001e\u0192_context"];if(null!=h)O=h["\u001e\u0192_parent"]||v,r.index=W.length;else{var N=0,U=W.length-1;r.index=N;O=h=v;do{O=f(v,O,h,W[N],d,N<U,!0,g,r,t,x,z,F,E,K);h=O[0];r=O[2];if(!h||"object"!==typeof h){r.index=N;v=O;break a}O=O[1]}while(N++<U);r.index=N;Q["\u001e\u0192_context"]!==h&&n(Q,h)}}e[0]=h;e[1]=O;e[2]=r;v=e}h=v[0];if(!h||"object"!==
typeof h)return v;d=v[1];v=v[2];g=h&&h.$type}if(void 0===g){if(null==l){if(b)throw new w;h&&(l=h["\u001e\u0192_key"])}else d=h,h=d[l];h=q(d,h,l,p,b,k,u,v,c,C,A,D,B,G)}e[0]=h;e[1]=d;e[2]=v;return e}var e=Array(3),p=Array.isArray,y=a(0),m=a(1),n=a(8),k=a(10),u=a(21),w=a(3),q=a(46);b.exports=function(a,f,h,l,p){var g=a._root,r=g.expired,b=g.version+1,v=a._path,t=g.cache,m=k(t,v);if(!m)return[[],[],!1];var q=m["\u001e\u0192_parent"]||t;a=t["\u001e\u0192_version"];for(var n=[],u=[],w=[],y=v.length,c=-1,
L=f.length;++c<L;){var P=f[c],R=v.slice(0);R.index=y;d(P.json,0,t,q,m,u,w,n,R,b,r,g,l,h,p)}e[0]=void 0;e[1]=void 0;e[2]=void 0;f=t["\u001e\u0192_version"];h=g.onChange;a!==f&&(g.version=b,h&&h());return[u,w,a!==f]}},function(b,c,a){b.exports=function(a){return a&&"$"===a[0]||d(a)};var d=a(32)},function(b,c){function a(d,f,e){e=e||[];f=f||[];for(var p=[],b=d.$keys,m=b.length,n=-1;++n<m;){var k=d[n],u=b[n];k&&"object"===typeof k?a(k,f,e.concat([u])):p.push(u)}1===p.length?f.push(e.concat(p)):1<p.length&&
f.push(e.concat([p]));return f}b.exports=a},function(b,c){b.exports=function(a){for(var d=5381,f=a.length;f;)d=33*d^a.charCodeAt(--f);return d>>>0}},function(b,c){function a(a,e){var d=e.from=a.from||0;a=e.to=a.to||"number"===typeof a.length&&e.from+a.length-1||0;e.rangeOffset=e.from;e.loaded=!0;d>a&&(e.empty=!0)}var d=Array.isArray;b.exports=function(f,e){if(void 0===e.isArray){e.done=!1;var b=e.isObject=!(!f||"object"!==typeof f);e.isArray=b&&d(f);e.arrayOffset=0}if(e.isArray){var c;do{e.loaded&&
e.rangeOffset>e.to&&(++e.arrayOffset,e.loaded=!1);if(e.arrayOffset>=f.length){e.done=!0;break}b=f[e.arrayOffset];"object"===typeof b?(e.loaded||a(b,e),e.empty||(c=e.rangeOffset++)):(++e.arrayOffset,c=b)}while(void 0===c);return c}if(e.isObject){e.loaded||a(f,e);if(e.rangeOffset>e.to){e.done=!0;return}return e.rangeOffset++}e.done=!0;return f}},function(b,c,a){b.exports=a(39)},function(b,c,a){b.exports=a(42)},function(b,c){b.exports=function(a,d,f,e,b){var p=0,m;m=e.jsonGraph;m||(e.jsonGraph=m={});
do{e=d[p++];if(p>=f){m=m[e]=!0!==b?a:m[e]||{};break}m=m[e]||(m[e]={})}while(1);return m}},function(b,c){var a=Array.isArray;b.exports=function(d,f,e,b,c,m,n,k,u,w,q,g,r,h){if(u||w){for(var l,p=-1,y=(m=c-f)&&Array(m)||void 0;++p<m;){l=d[p+f];var x;x=l;if("object"!==typeof x||null===x)x=!1;else if(a(x))x=0===x.length;else{var E=x.to,v=x.from||0;"number"!==typeof E&&(E=v+(x.length||0));x=v>=E}if(x)return;y[p]=l}var z;d=null===l;l=u;var C;u?(x=c,E=b,C=e.requested||(e.requested=[])):(f=k,E=n,x=k+m-Number(d));
do{if(m<c||!l){b=-1;p=f;for(z=Array(x);++b<p;)z[b]=E[b];for(p=-1;b<x;)z[b++]=y[++p]}if(l=!l){u&&(C[C.length]=z);break}C[C.length]=z||y;f=k;E=n;C=e.missing||(e.missing=[]);x=k+m-Number(d)}while(1);if(w)return h(q,z,f,x,g,r)}}},function(b,c,a){function d(a,h,l,b,p,k,m,v,c){var r={},t=h<a.length-1,u=a[h],x=g(u,r);do{e=f(l,b,p,x,t,!1,k,m,v,c);var y=e[0],z=e[1];y&&(t?d(a,h+1,l,z,y,k,m,v,c):q(y,z,x,v)&&w(z,n(y),v,k));x=g(u,r)}while(!r.done)}function f(a,d,l,g,b,q,n,v,c,u){for(q=l.$type;"ref"===q;){a:{d=
a;q=n;var h=v,r=c,t=u;if(p(l,t))y(l,h,r),e[0]=void 0,e[1]=d;else{m(r,l);var w=l,x=l.value,z;l=l["\u001e\u0192_context"];if(null!=l)z=l["\u001e\u0192_parent"]||d;else{var F=0,E=x.length-1;z=l=d;do{e=f(d,z,l,x[F],F<E,!0,q,h,r,t);l=e[0];if(!l&&"object"!==typeof l)break a;z=e[1]}while(F++<E);w["\u001e\u0192_context"]!==l&&k(w,l)}e[0]=l;e[1]=z}}l=e[0];if(!l&&"object"!==typeof l)return e;d=e[1];q=l.$type}if(void 0!==q)return[l,d];if(null==g){if(b)throw Error("`null` is not allowed in branch key positions.");
}else d=l,l=d[g];e[0]=l;e[1]=d;return e}var e=Array(2),p=a(0),y=a(1),m=a(13),n=a(9),k=a(8),u=a(17),w=a(11),q=a(18),g=a(24);b.exports=function(a,h,f){var g=a._root,l=g.expired,b=g.version++,r=g.cache,p=u(a);if(p){var k=p["\u001e\u0192_parent"]||r;a=r["\u001e\u0192_version"];for(var q=-1,m=h.length;++q<m;)d(h[q],0,r,k,p,b,l,g,f);e[0]=void 0;e[1]=void 0;h=r["\u001e\u0192_version"];(g=g.onChange)&&a!==h&&g()}}},function(b,c,a){var d=a(54),f=a(86),e=a(87);b.exports=function(a,b,m,n){if(a&&"object"===typeof a){var p=
a.$type;p&&("ref"===p&&e(a),d(n,a));f(a);b[m]=a["\u001e\u0192_parent"]=void 0;return!0}return!1}},function(b,c,a){function d(a,e,b,h,l,p,k,m,n,v,c,w,y,D,B,G){var g={},r=b<e.length-1,q=e[b],t=u(q,g),x=v.index;do{n.depth=b;n[b]=t;n.index=b;var z=f(h,l,p,t,a,r,!1,n,v,c,w,y,D,B,G);n[b]=t;n.index=b;var A=z[0],F=z[1],z=z[2];z[z.index++]=t;A&&(r?d(a,e,b+1,h,F,A,k,m,n,z,c,w,y,D,B,G):(k.push(n.slice(0,n.index+1)),m.push(z.slice(0,z.index))));t=u(q,g);if(g.done)break;v.index=x}while(1)}function f(a,d,b,h,l,
t,n,c,u,v,z,C,A,D,B){for(var g=b.$type;"ref"===g;){a:{d=l;u=a;var g=c,r,q=v,x=z,F=C,E=A,S=D,T=B,K,O=b.value;r=O.slice(0);if(p(b,T))y(b,x,F),b=void 0,K=u,r.index=O.length;else{var W=b;b=b["\u001e\u0192_context"];if(null!=b)K=b["\u001e\u0192_parent"]||u,r.index=O.length;else{var Q=0,N=O.length-1;K=b=u;do{var U=O[Q],M=Q<N;r.index=Q;K=f(u,K,b,U,d,M,!0,g,r,q,x,F,E,S,T);b=K[0];r=K[2];if(!b||"object"!==typeof b){r.index=Q;u=K;break a}K=K[1]}while(Q++<N);r.index=Q;W["\u001e\u0192_context"]!==b&&m(W,b)}}e[0]=
b;e[1]=K;e[2]=r;u=e}b=u[0];if(!b||"object"!==typeof b)return u;d=u[1];u=u[2];g=b.$type}if(!t||void 0===g){if(null==h){if(t)throw new k;b&&(h=b["\u001e\u0192_key"])}else d=b,b=d[h];b=w(d,b,h,l,t,n,c,u,v,z,C,A,D,B)}e[0]=b;e[1]=d;e[2]=u;return e}var e=Array(3),p=a(0),y=a(1),m=a(8),n=a(10),k=a(3),u=a(24),w=a(46);b.exports=function(a,b,f,h,l){var g=a._root,p=g.expired,k=g.version+1,r=a._path,v=g.cache,m=n(v,r);if(!m)return[[],[],!1];var q=m["\u001e\u0192_parent"]||v;a=v["\u001e\u0192_version"];for(var u=
[],c=[],w=[],y=r.length,H=-1,I=b.length;++H<I;){var L=b[H],P=L.path,L=L.value,R=r.slice(0);R.index=y;d(L,P,0,v,q,m,c,w,u,R,k,p,g,h,f,l)}e[0]=void 0;e[1]=void 0;e[2]=void 0;b=v["\u001e\u0192_version"];f=g.onChange;a!==b&&(g.version=k,f&&f());return[c,w,a!==b]}},function(b,c,a){c=a(94);c=new RegExp("^"+c,"i","g");b.exports=c.test.bind(c)},function(b,c){b.exports=0},function(b,c){c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(c=window)}b.exports=
c},function(b,c,a){var d=a(38),f=a(36),e=a(37);b.exports=function(a){return d(e(f(a)))}},function(b,c,a){var d=Array.isArray,f=a(22);b.exports=function(a,b){if(a)d(a)||d(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,e){var d=e.length;a[d]||(a[d]=[]);a[d].push(e);return a},b||{})}},function(b,c,a){var d=a(66);b.exports=function(a,e){return Object.keys(a).reduce(function(e,b){e[b]=d(a[b],e[b]);return e},e||{})}},function(b,c,a){function d(a,b,f){var g,h=Object.create(null),l=""+k(""+b),
m=[],n=-1,q=0,u=[],v=0,c,w,y,D,B,G;y=[];D=-1;if(b<f-1){for(B=e(a,y);++D<B;)g=y[D],c=d(a[g],b+1,f),w=c.code,h[w]?c=h[w]:(m[q++]=w,c=h[w]={keys:[],sets:c.sets}),l=""+k(l+g+w),p(g)&&c.keys.push(parseInt(g,10))||c.keys.push(g);for(;++n<q;)if(g=m[n],c=h[g],y=c.keys,B=y.length,0<B)for(a=c.sets,b=-1,f=a.length,D=y[0];++b<f;){g=a[b];c=-1;w=g.length;G=Array(w+1);for(G[0]=1<B&&y||D;++c<w;)G[c+1]=g[c];u[v++]=G}}else for(B=e(a,y),1<B?u[v++]=[y]:u[v++]=y;++D<B;)l=""+k(l+y[D]);return{code:l,sets:u}}function f(a,
e){return a-e}function e(a,e,d){var b=0;if(a===u)e[b++]=null;else{for(var h in a)e[b++]=h;1<b&&e.sort(d)}return b}function p(a){var e=a,d=typeof a;if("string"===d){e=a.length;if(0===e||17<e||!n.test(a))return!1;if(16>e)return!0;e=+a}else if("number"!==d)return!1;return 0===e%1&&9007199254740991>=m(e)}var y=Array.isArray,m=Math.abs,n=/^(0|(\-?[1-9][0-9]*))$/,k=a(23),u=a(6);b.exports=function(a){var e,b=[],k=0,h;for(h in a){var l;if(l=p(h))l=e=a[h],l=null!==l&&"object"===typeof l;if(l){l=d(e,0,parseInt(h,
10)).sets;for(var m=-1,n=l.length;++m<n;){for(var c=k++,u=l[m],v=-1,w=u.length;++v<w;){var C=u[v];if(y(C)){var A=u,D=v;for(var B=-1,G=C.length-1,H=0<G;++B<=G;){var I=C[B];if(!p(I)){H=!1;break}C[B]=parseInt(I,10)}!0===H&&(C.sort(f),B=C[0],H=C[G],H-B<=G&&(C={from:B,to:H}));A[D]=C}}b[c]=u}}}return b};b.exports._isSafeNumber=p},function(b,c,a){var d=Array.isArray,f=a(74),e=a(73),p=a(17),y=a(92),m=a(65),n=a(63);b.exports=function(a,b,c,q,g){var k,h;q=a._path;var l=a._root,t=l.cache,u,w,E,v=q&&q.length||
0;if(v){if((k=p(a))&&k.$type)return{error:new y(q,q)};E=[];for(var z=0;z<v;++z)E[z]=q[z];h=a._referenceContainer}else k=t,E=[];u=[];var z=!1,C=c&&c.json,A={data:c},D=a._boxed,B=l.expired;w=a._recycleJSON;var G=!!a._source,H=l.branchSelector,I=c&&a._materialized,L=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;var P,R=0,S=b.length;if(0<S)if(w){z=!0;if(1<S||d(b[0]))b=[n(m(b,{}))];g=e(t,k,C,b[0],0,c,A,u,E,v,!1,h,l,B,g,H,D,I,G,L,a);C=g[0];g[0]=void 0;g[1]=void 0}else{do P=b[R],w=P.length,C=f(t,k,
C,P,0,c,A,u,w,E,v,!1,h,l,B,g,H,D,I,G,L,a);while(++R<S)}g=A.requested;A.args=z&&b||g;if(g&&g.length&&(A.relative=A.args,v)){b=[];z=0;for(v=g.length;z<v;++z)b[z]=q.concat(g[z]);A.requested=b}A.hasValue&&(c.json=C);return A}},function(b,c,a){var d=Array(3),f=a(13),e=a(0),p=a(8),y=a(51);b.exports=function(a,b,k,c){f(k,b);var m,n,g=0,r=a,h=b.value,l=h,t=h.length;do{if(0===g&&void 0!==(m=b["\u001e\u0192_context"]))r=m,g=t;else if(n=h[g++],void 0===(r=r[n]))break;if(g===t){n=r.$type;if(void 0!==n&&e(r,c))break;
else{if(r===b)throw new y(h);r!==m&&p(b,r)}if("ref"===n)f(k,r),g=0,b=r,r=a,h=l=b.value,t=h.length;else break}else if(void 0!==r.$type)break}while(1);g<t&&void 0!==r&&(t=g);g=-1;for(h=Array(t);++g<t;)h[g]=l[g];d[0]=r;d[1]=h;d[2]=b;return d}},function(b,c,a){var d=a(7),f=a(72);b.exports=function(a,b,c,m,n,k,u,w,q,g,r,h){if("error"===b&&!h)return f(a,c,n,k,q,g);n.hasValue=!0;return g?d(a):a.value}},function(b,c,a){var d=a(77),f=a(90);b.exports=function(a,b,c,m,n){var e,p;e=a._path;m=a._root;var w,q,
g=e&&e.length||0;if(g)return{error:new f};q=[];p=e=m.cache;w=[];for(var r=a._boxed,h=m.expired,l=a._materialized,t=!!a._source,y=a._treatErrorsAsValues,x={data:c},E=-1,v=b.length;++E<v;){var z=b[E];a=z.length;d(p,e,z,0,c,x,w,a,q,g,!1,m,h,n,r,l,t,y)}x.args=x.relative=x.requested;return x}},function(b,c,a){function d(a,b,c,w,q,g){if(c===w)return g?e(m):void 0;var k,h,l=c+1,t,n=-1,u=0;h=b[c];a&&"object"===typeof a?(k=a["\u001e\u0192_meta"])?(k.version=0,k.abs_path=b.slice(0,c)):(k={},a["\u001e\u0192_meta"]=
(k.version=0,k.abs_path=b.slice(0,c),k)):(a={},k={},a=(k.__proto__=p.prototype,k["\u001e\u0192_meta"]=(a.version=0,a.abs_path=b.slice(0,c),a),k),q&&(a=q(a)));a:do{if("object"!==typeof h)c=h,k=void 0,h=!1;else if(f(h)){if(void 0!==t)throw new y(b,t);n=0;t=h;u=h.length;if(0===u)break a;h=t[n];continue a}else{k=h.to;c=h.from||0;"number"!==typeof k&&(k=c+(h.length||0)-1);if(0>k-c)break a;h=!0}do a[c]=d(a[c],b,l,w,q,g);while(h&&++c<=k);if(++n===u)break a;h=t[n]}while(1);return a}var f=Array.isArray,e=
a(7),p=a(2);a(3);var y=a(12),m=a(6);b.exports=d},function(b,c,a){b.exports=function(a,b,e,p,c){a["\u001e\u0192_key"]=e;a["\u001e\u0192_parent"]=b;void 0!==p&&(a["\u001e\u0192_version"]=p);a["\u001e\u0192_abs_path"]||(a["\u001e\u0192_abs_path"]=c.slice(0,c.index).concat(e));return b[e]=a}},function(b,c,a){function d(a,e,b,l,p,k,c,n,v,y){if(a&&"object"===typeof a&&!a.$type)for(var h in a)if(!u(h)){var g=a[h],t=!(!g||"object"!==typeof g)&&!g.$type,r=f(b,l,p,h,g,t,!1,k,c,n,v,y),x=r[0],r=r[1];x&&(t?d(g,
e+1,b,r,x,k,c,n,v,y):q(x,r,h,n)&&w(r,m(x),n,k))}}function f(a,d,b,l,k,c,m,q,v,u,w,A){for(m=b.$type;"ref"===m;){a:{d=k;m=a;var h=q,g=v,t=u,r=w,x=A;if(e(b,x))p(b,g,t),d=[void 0,m];else{y(t,b);var z=b,F=b.value,C;b=b["\u001e\u0192_context"];if(null!=b)C=b["\u001e\u0192_parent"]||m;else{var E=0,T=F.length-1;C=b=m;do{C=f(m,C,b,F[E],d,E<T,!0,h,g,t,r,x);b=C[0];if(!b||"object"!==typeof b){d=C;break a}C=C[1]}while(E++<T);z["\u001e\u0192_context"]!==b&&n(z,b)}d=[b,C]}}b=d[0];if(!b&&"object"!==typeof b)return d;
d=d[1];m=b&&b.$type}if(void 0!==m)return[b,d];if(null==l){if(c)throw Error("`null` is not allowed in branch key positions.");}else d=b,b=d[l];return[b,d]}var e=a(0),p=a(1),y=a(13),m=a(9),n=a(8),k=a(17),u=a(21),w=a(11),q=a(18);b.exports=function(a,e,b){var h=a._root,f=h.expired,g=h.version++,p=h._comparator,m=h.cache,c=k(a);if(c){var n=c["\u001e\u0192_parent"]||m;a=m["\u001e\u0192_version"];for(var q=-1,r=e.length;++q<r;)d(e[q].json,0,m,n,c,g,f,h,p,b);e=m["\u001e\u0192_version"];(h=h.onChange)&&a!==
e&&h()}}},function(b,c,a){var d=a(33),f=a(103),e=a(9),p=a(57),y=a(50),m=a(0),n=a(1),k=a(44),u=a(48),w=a(47),q=a(11);a(18);b.exports=function(a,b,h,l,c,F,x,E,v,z,C,A,D,B){B=f(b,F);if(c||F){if(B&&m(b,!0)&&(n(b,z,C),B=b.$expires===d?B:"expired"),B&&"ref"!==B||!b||"object"!==typeof b)b=u(b,{},a,h,C,v),b=k(b,a,h,v,E)}else c=f(l),(A?A(b,l,E.slice(0,E.index)):c?B&&!1!==p(l)<p(b)&&(B!==c||b.value!==l.value||b.$expires!==l.$expires):b&&b.value===l)||(D&&"error"===c&&(l=D(w(x,h),l)),x=e(b)-e(l=y(l,c,c?l.value:
l)),b=u(b,l,a,h,C,v),a=q(a,x,C,v),b=k(b,a,h,v,E));return b}},function(b,c){b.exports=function(a,b){a=a.slice(0,a.depth);a[a.length]=b;return a}},function(b,c,a){var d=a(85),f=a(18),e=a(49);b.exports=function(a,b,c,n,k,u){if(a===b)return a;a&&"object"===typeof a&&(d(a,b),f(a,c,n,k),e(b,u));return c[n]=b}},function(b,c,a){b.exports=function(a,b){var e=[a],d=0;do{var f=e[d];if(f&&f["\u001e\u0192_version"]!==b){f["\u001e\u0192_version"]=b;e[d++]=f["\u001e\u0192_parent"];for(var c=-1,n=f["\u001e\u0192_refs_length"]||
0;++c<n;)e[d++]=f["\u001e\u0192_ref"+c]}}while(-1<--d);return a}},function(b,c,a){var d=Array.isArray,f=a(60),e=a(101),p=a(9),y=a(102),m=a(33);b.exports=function(a,b,c){var k=0;if(b){var n=a["\u001e\u0192_wrapped_value"];a=e(a);k=p(a);a.$type=b;a["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=n||!1}else a={$type:"atom",value:c,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==c)k=51;else if(null==k||0>=k)switch(typeof c){case "object":k=
d(c)?50+c.length:51;break;case "string":k=50+c.length;break;default:k=51}b=y(a);"number"===typeof b&&b<m&&(a.$expires=f()+-1*b);a.$size=k;return a}},function(b,c,a){c=a(4);b.exports=c("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,c,a){c=a(4);b.exports=c("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,c,a){var d=a(30),f=a(11);b.exports=function(a,b,c,m,n,k){var e=
n;"number"!==typeof e&&(e=.75);n="number"===typeof k;var e=m*e,p,q,g;for(q=b.pop();q;)g=q.$size||0,c-=g,!0===n?f(q,g,a,k):(p=q["\u001e\u0192_parent"])&&d(q,p,q["\u001e\u0192_key"],a),q=b.pop();if(c>=m){for(q=b=a["\u001e\u0192_tail"];c>=e&&q;)b=b["\u001e\u0192_prev"],g=q.$size||0,c-=g,!0===n&&f(q,g,a,k),q=b;a["\u001e\u0192_tail"]=a["\u001e\u0192_prev"]=q;null==q?a["\u001e\u0192_head"]=a["\u001e\u0192_next"]=void 0:q["\u001e\u0192_next"]=void 0}}},function(b,c,a){b.exports=function(a,b){var e=b["\u001e\u0192_prev"],
d=b["\u001e\u0192_next"];d&&(d["\u001e\u0192_prev"]=e);e&&(e["\u001e\u0192_next"]=d);b["\u001e\u0192_prev"]=b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=d);b===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=e)}},function(b,c,a){(function(d){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var e=a(14),c=a(15),y=a(105).default;b.exports=f;f.prototype[y]=function(){return this};f.prototype.operator=
function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,b,d){return new c([this.operator.call(this.source,a instanceof e?a:new e(a,b,d))])};f.prototype.then=function(a,b){var e=this;this._promise||(this._promise=new d.Promise(function(a,b){var d=[],f=!1;e.subscribe({next:function(a){d[d.length]=a},error:function(a){f=!0;b(a)},complete:function(){!f&&a(1>=d.length?d[0]:d)}})}));return this._promise.then(a,b)}}).call(c,a(34))},function(b,c){function a(){}var d={dispose:function(){},unsubscribe:function(){}};
a.prototype.schedule=function(a){a();return d};b.exports=a},function(b,c,a){var d=a(5);b.exports=function(a){return d(a)&&a.$timestamp||void 0}},function(b,c,a){var d=a(5);b.exports=function(a){return d(a)&&"json"in a}},function(b,c,a){var d=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&d(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,c){b.exports=Date.now},function(b,c){b.exports=1},function(b,c,a){function d(a){if(!(this instanceof f))return new f(a);
f.call(this,a)}var f=a(67);c=a(2);d.prototype=Object.create(f.prototype);d.Model=f;d.FalcorJSON=c;d.toProps=c.prototype.toProps;b.exports=d},function(b,c,a){function d(a){if(void 0!==a){for(var b="",e=a.$keys,c=-1,n=e.length;++c<n;){var k=e[c];if(null===k)b=""+f(""+b+"null");else{"object"===typeof k&&(k="["+k.from+".."+(k.from+k.length-1)+"]");var u=d(a[c]),b=void 0===u?""+f(""+b+k):""+f(""+b+k+u.$code)}}a.$code=b;return a}}var f=a(23);b.exports=d},function(b,c,a){function d(a,b,c,n){if(c===n)return!0;
var k,m=-1,p=0,q=c+1,g,r,h;k=b[c];if(null===k)return a===e;a:do{if("object"!==typeof k)c=k,r=void 0,g=!1;else if(f(k)){if(void 0!==h)break a;m=0;h=k;p=k.length;if(0===p)break a;k=h[m];continue a}else{r=k.to;c=k.from||0;"number"!==typeof r&&(r=c+(k.length||0)-1);if(0>r-c)break a;g=!0}do if(q===n){if(null!==a[c])return!1}else if(k=a[c],null===k||void 0===k||!1===d(k,b,q,n))return!1;while(g&&++c<=r);if(++m===p)break a;k=h[m]}while(1);return!0}var f=Array.isArray,e=a(6);b.exports=d},function(b,c,a){function d(a,
b){return a.reduce(function(a,b){return e(b)?f(a,b,0,b.length):e(b.$keys)?d(y(b),a):a},b||{})}function f(a,b,d,c){if(d!==c){a=a||{};var k=a.$keys||(a.$keys=[]),m=a.$keysMap||(a.$keysMap={}),g,n=-1,h=0,l,t=d+1,u;g=b[d];if(null===g)return p;a:do{if("object"!==typeof g)l=g,"undefined"===typeof(d=m[l])&&(d=k.length),k[d]=l,m[l]=d,g=f(a[d],b,t,c),void 0!==g&&(a[d]=g);else if(e(g)){if(void 0!==u)break a;n=0;u=g;h=g.length;if(0===h)break a;g=u[n];continue a}else{d=g.to;l=g.from||0;"number"!==typeof d&&(d=
l+(g.length||0)-1);if(0>d-l)break a;g={from:l,length:d-l+1};l="["+l+".."+d+"]";"undefined"===typeof(d=m[l])&&(d=k.length);k[d]=g;m[l]=d;g=f(a[d],b,t,c);void 0!==g&&(a[d]=g)}if(++n===h)break a;g=u[n]}while(1);return a}}var e=Array.isArray,p={$keys:[null],$keysMap:{"null":0}},y=a(22);b.exports=d},function(b,c,a){function d(a,b,c,n,k){if(c===n)return!0;a=a||{};var p,m=-1,q=0,g,r=c+1,h,l,t;p=b[c];if(null===p)return e;a:do{if("object"!==typeof p)c=p,l=void 0,h=!1;else if(f(p)){if(void 0!==t)break a;m=
0;t=p;q=p.length;if(0===q)break a;p=t[m];continue a}else{l=p.to;c=p.from||0;"number"!==typeof l&&(l=c+(p.length||0)-1);if(0>l-c)break a;h=!0}do r===n?a[c]=k:(p=a[c],(g=d(p,b,r,n,k))?p||(a[c]=g):a[c]=k);while(h&&++c<=l);if(++m===q)break a;p=t[m]}while(1);return a}var f=Array.isArray,e=a(6);b.exports=function(a,b){return a.reduce(function(a,b){return d(a,b,0,b.length,null)},b||{})}},function(b,c,a){function d(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=
a._root||new e(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new n;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={__proto__:p.prototype});this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===
a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(95),e=a(69),p=a(2),y=a(68),m=a(99),n=a(56),k=a(35),u=a(53),w=a(9),q=a(5),g=a(58),r=a(10),h=a(59),l=a(20),t=a(19),F=a(25),x=a(79),E=a(26);b.exports=d;d.prototype.constructor=d;d.prototype.get=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(this._seed||{__proto__:p.prototype},[])};d.prototype.set=function(){return(new f("set",this,Array.prototype.slice.call(arguments,
0)))._toJSON({__proto__:p.prototype},[])};d.prototype.preload=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,[])};d.prototype.call=function(){return(new f("call",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:p.prototype},[])};d.prototype.invalidate=function(){return(new f("invalidate",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,null).then()};d.prototype.deref=a(89);d.prototype._hasValidParentReference=a(88);d.prototype.getValue=
function(a){return(new f("get",this,[a]))._toJSON({__proto__:p.prototype},[]).lift(function(b){return this.subscribe({onNext:function(e){var d=-1;e=e.json;for(var h=a.length;e&&!e.$type&&++d<h;)e=e[a[d]];b.onNext(e)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};d.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({__proto__:p.prototype},[]).lift(function(b){return this.subscribe({onNext:function(e){var d=
-1;e=e.json;for(var h=a.length;e&&!e.$type&&++d<h;)e=e[a[d]];b.onNext(e)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};d.prototype.setCache=function(a){var b=this._root,e=b.cache;if(a!==e){var d={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof e&&(u(b,b.expired,w(e),0),this._recycleJSON&&(this._seed={__proto__:p.prototype}));var f;h(a)?f=t(d,[a])[0]:g(a)?f=l(d,[a])[0]:q(a)&&(f=l(d,[{json:a}])[0]);f&&F(d,f,null,!1,
!1)}else"undefined"===typeof e&&(this._root.cache={});return this};d.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return x(this._root.cache);var b=E({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},a,{__proto__:p.prototype}).data;b.paths=k(a);return b};d.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");
this._path.length&&(a=this._path.concat(a));return this._getVersion(this,a)};d.prototype._clone=function(a){var b=new d(this);if(a)for(var e in a){var h=a[e];"delete"===h?delete b[e]:"_path"===e?(b[e]=h,!1===a.hasOwnProperty("_node")&&delete b._node):b[e]=h}0<b._path.length&&(b.setCache=void 0);return b};d.prototype.batch=function(a){var b;"number"===typeof a?b=new m(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new m(1);return this._clone({_scheduler:b})};
d.prototype.unbatch=function(){return this._clone({_scheduler:new n})};d.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};d.prototype.asDataSource=function(){return new y(this)};d.prototype._materialize=function(){return this._clone({_materialized:!0})};d.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};d.prototype.boxValues=function(){return this._clone({_boxed:!0})};d.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};
d.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};d.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};d.prototype.getPath=function(){return this._path.slice(0)};d.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};d.prototype._optimizePath=function(a){a=r(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||[]).slice(0)};d.prototype._getVersion=a(80);d.prototype._getPathValuesAsPathMap=F;d.prototype._getPathValuesAsJSONG=
E;d.prototype._setPathValues=a(31);d.prototype._setPathMaps=a(20);d.prototype._setJSONGs=a(19);d.prototype._setCache=a(20);d.prototype._invalidatePathValues=a(29);d.prototype._invalidatePathMaps=a(45)},function(b,c){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,e,c){return this._model.call.apply(this._model,
[a,b,e].concat(c))._toJSONG()};b.exports=a},function(b,c,a){function d(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&(this.comparator=a.comparator);"function"===typeof a.branchSelector&&
(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(96);d.comparator=function(a,b){var d=a&&a.$type,e=b&&b.$type;return d?e?!(d!==e||a.value!==b.value||a.$expires!==b.$expires):a.value===b:e?!1:a===b};b.exports=
d},function(b,c,a){var d=a(25),f=a(26);b.exports={json:function(a,b,f,c){var e=!1;if(!b)return{missing:!1,hasValue:!1};var k=[].concat(b[1]||[]),p=[].concat(b[2]||[]),m=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);c&&m&&m.length&&(e=d(a,m,f,c,!0).hasValue);return{data:f,missing:!0,hasValue:e,fragments:[b,k,p,m]}},jsonGraph:function(a,b,d,c){var e=!1;if(!b)return{missing:!1,hasValue:!1};var k=[].concat(b[1]||[]),p=[].concat(b[2]||[]),m=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);c&&
m&&m.length&&(e=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},m,d,!0,!0).hasValue);return{data:d,missing:!0,hasValue:e,fragments:[b,k,p,m]}}}},function(b,c,a){b.exports={json:a(39),jsonGraph:a(42)}},function(b,c,a){var d=a(7);b.exports=function(a,b,c,y,m,n){var e=-1;b+=!!m;m=Array(b);for(a=n?d(a):a.value;++e<b;)m[e]=y[e];(c.errors||(c.errors=[])).push({path:m,value:a})}},function(b,c,a){function d(a,b,c,k,r,E,v,z,C,A,D,B,G,H,I,L,P,R,S,
T,K){var h,l;if(void 0===b||void 0!==(h=b.$type)||void 0===k)return e[1]=S&&void 0===b,e[0]=n(b,h,c,k,r,E,v,z,r,C,A,D,G,H,I,L,P,R,S,T,p,f,w),e;var t,x,F="",M,J,V,Y=k.$keys,ba=r+1,Z,X,aa,fa,ca,ga=A+1,ha,ia;K&&B&&(ia=B.value,ha=B["\u001e\u0192_abs_path"]);if(!c||"object"!==typeof c)c=void 0;else if(t=c["\u001e\u0192_meta"]){if(!(L||c instanceof y))c.__proto__={__proto__:y.prototype},c.__proto__["\u001e\u0192_meta"]=t;else if(t.version===b["\u001e\u0192_version"]&&t.abs_path===b["\u001e\u0192_abs_path"]&&
t.$code===k.$code)return v.hasValue=!0,e[0]=c,e[1]=!1,e;x=t.keys;t.version=b["\u001e\u0192_version"];t.abs_path=b["\u001e\u0192_abs_path"];t.deref_to=ia;t.deref_from=ha}h={};var ja=-1,la=Y.length,ea,ka,da=!1;a:for(;++ja<la;)if(D=Y[ja],ea=k[ja],null===D){if(void 0!==ea)throw new q;F=""+g(""+F+"null")}else{if("object"!==typeof D)J=D,Z=void 0,V=!1,ka=J;else{Z=D.to;J=D.from||0;"number"!==typeof Z&&(Z=J+(D.length||0)-1);if(0>Z-J)break a;V=!0;ka="["+J+".."+Z+"]"}do{D=!1;X=c&&c[J];ca=C;fa=ga;aa=B;M=b[J];
z[r]=J;C[A]=J;if(void 0===ea){if(e=d(a,M,X,ea,ba,E,v,z,ca,fa,D,aa,G,H,I,L,P,R,S,T,K),X=e[0],da=da||e[1],void 0===X&&!R){da=!0;c&&c.hasOwnProperty(J)&&delete c[J];continue}}else if(M&&"ref"===M.$type&&!m(M,I)&&(l=u(a,M,G,I),M=l[0],D=!0,ca=l[1],aa=l[2],fa=ca.length,l[0]=l[1]=l[2]=void 0),e=d(a,M,X,ea,ba,E,v,z,ca,fa,D,aa,G,H,I,L,P,R,S,T,K),X=e[0],da=da||e[1],void 0===X){da=!0;c&&c.hasOwnProperty(J)&&delete c[J];continue}void 0===t&&(t={},t.version=b["\u001e\u0192_version"],t.abs_path=b["\u001e\u0192_abs_path"],
t.deref_to=ia,t.deref_from=ha,c={},c=(c.__proto__=y.prototype,c["\u001e\u0192_meta"]=t,c),c=!L&&{__proto__:c}||L(c));h[J]=!0;x&&J in x&&(x[J]=!1);c[J]=X}while(V&&++J<=Z);da||(F=""+g(""+F+ka+(ea&&ea.$code||"")))}da&&(F="__incomplete__");if(t&&(t.$code=F,t.keys=h,x))for(J in x)x[J]&&delete c[J];e[0]=c;e[1]=da;return e}function f(a,b,d,e,c,g,m,p,n,q,u,w,y,H){if(q)return H(u,a,b,b,w,y,d,e,m,p,g,n,f);a=a?r(a):[[]];var h=e.slice(0,c);return a.forEach(function(a){c=b+a.length;return k(h.concat(a),b,d,e,
c,g,m,p,n,!1,u,w,y,H)})}var e=Array(2),p=a(41),y=a(2),m=a(0),n=a(16),k=a(28),u=a(40),w=a(78),q=a(3);a(12);var g=a(23),r=a(22);b.exports=d},function(b,c,a){function d(a,b,h,c,t,F,x,E,v,z,C,A,D,B,G,H,I,L,P,R,S,T){var g,l;if(void 0===b||(g=b.$type)||t===v)return m(b,g,h,c,t,F,x,E,v,z,C,A,B,G,H,I,L,P,R,S,e,p,k);var r,Q,N,U=t+1,M,J,V,Y,ba=-1,Z=0,X,aa,fa=C+1,ca,ga;A=c[t];if(null===A){if(U<v)throw new w;return h}T&&D&&(ga=D.value,ca=D["\u001e\u0192_abs_path"]);if(!h||"object"!==typeof h)h=void 0;else if(r=
h["\u001e\u0192_meta"])r.version=b["\u001e\u0192_version"],r.abs_path=b["\u001e\u0192_abs_path"],r.deref_to=ga,r.deref_from=ca;a:do{if("object"!==typeof A)g=A,M=void 0,N=!1;else if(f(A)){if(void 0!==J)throw new q(c,J);ba=0;J=A;Z=A.length;if(0===Z)break a;A=J[ba];continue a}else{M=A.to;g=A.from||0;"number"!==typeof M&&(M=g+(A.length||0)-1);if(0>M-g)break a;N=!0}do{A=!1;V=h&&h[g];aa=z;X=fa;Y=D;Q=b[g];E[t]=g;z[C]=g;if(U===v){if(V=d(a,Q,V,c,U,F,x,E,v,aa,X,A,Y,B,G,H,I,L,P,R,S,T),void 0===V&&!P)continue}else if(Q&&
"ref"===Q.$type&&!n(Q,H)&&(l=u(a,Q,B,H),Q=l[0],A=!0,aa=l[1],Y=l[2],X=aa.length,l[0]=l[1]=l[2]=void 0),void 0===(V=d(a,Q,V,c,U,F,x,E,v,aa,X,A,Y,B,G,H,I,L,P,R,S,T)))continue;void 0===r&&(r={},r.version=b["\u001e\u0192_version"],r.abs_path=b["\u001e\u0192_abs_path"],r.deref_to=ga,r.deref_from=ca,h={},h=(h.__proto__=y.prototype,h["\u001e\u0192_meta"]=r,h),I&&(h=I(h)));h[g]=V}while(N&&++g<=M);if(++ba===Z)break a;A=J[ba]}while(1);return h}var f=Array.isArray,e=a(41),p=a(28),y=a(2),m=a(16),n=a(0),k=a(43),
u=a(40),w=a(3),q=a(12);a(6);b.exports=d},function(b,c,a){var d=Array(2),f=a(7),e=a(27),p=a(13),y=a(0),m=a(8),n=a(51);b.exports=function(a,b,c,q,g){p(c,b);var k,h,l=0,t=a,u=b.value,x=u,w=u.length;do{if(0===l&&void 0!==(k=b["\u001e\u0192_context"]))t=k,l=w;else if(h=u[l++],void 0===(t=t[h]))break;if(l===w){h=t.$type;if(void 0!==h&&y(t,g))break;else{if(t===b)throw new n(u);t!==k&&m(b,t)}if("ref"===h)p(c,t),q&&e(f(t),u,w,q),l=0,b=t,t=a,u=x=b.value,w=u.length;else break}else if(void 0!==t.$type)break}while(1);
l<w&&void 0!==t&&(w=l);l=-1;for(u=Array(w);++l<w;)u[l]=x[l];d[0]=t;d[1]=u;return d}},function(b,c,a){var d=a(7),f=a(27);b.exports=function(a,b,c,m,n,k,u,w,q,g,r){r=a.value;if(g||"ref"===b||"error"===b||!a["\u001e\u0192_wrapped_value"]||"object"===typeof r)r=d(a);n.hasValue=!0;f(r,u,w,m);(m.paths||(m.paths=[])).push(k.slice(0,c+!!q));return r}},function(b,c,a){function d(a,b,h,c,w,v,z,C,A,D,B,G,H,I,L,P,R,S){var l,t;if(void 0===b||(l=b.$type)||c===C)return k(b,l,w,h,c,w,v,z,C,A,D,B,G,H,I,void 0,L,P,
R,S,y,f,u);var x,F,E=c+1,N,U,M=-1,J=0,V,Y,ba=D+1;B=h[c];if(null===B){if(E<C)throw new g;}else{a:do{if("object"!==typeof B)l=B,N=void 0,F=!1;else if(e(B)){if(void 0!==U)throw new r(h,U);M=0;U=B;J=B.length;if(0===J)break a;B=U[M];continue a}else{N=B.to;l=B.from||0;"number"!==typeof N&&(N=l+(B.length||0)-1);if(0>N-l)break a;F=!0}do B=!1,Y=A,V=ba,x=b[l],z[c]=l,A[D]=l,x&&E<C&&"ref"===x.$type&&!n(x,I)&&(w&&m(p(x),A,V,w),t=q(a,x,G,w,I),x=t[0],B=!0,Y=t[1],V=Y.length,t[0]=t[1]=void 0),d(a,x,h,E,w,v,z,C,Y,
V,B,G,H,I,L,P,R,S);while(F&&++l<=N);if(++M===J)break a;B=U[M]}while(1)}}function f(a,b,d,e,c,f,g,k,n,q,r,u,y,I){var l,t;r&&q&&((r.paths||(r.paths=[])).push((t=0===c-b)&&e.slice(0,b+!!f)||e.slice(0,b).concat(a.slice(b,c+!!f))),l=m(t&&p(h)||void 0,g,k,r,!t));return w(a,b,d,e,c,f,g,k,n,!t&&q,l,u,!0,I)}var e=Array.isArray,p=a(7),y=a(76),m=a(27),n=a(0),k=a(16),u=a(43),w=a(28),q=a(75),g=a(3),r=a(12),h=a(6);b.exports=d},function(b,c,a){function d(a,b,c,w,q,g,r,h,l,t,F,x,E){if(void 0===b)return e(void 0,
void 0,a,b,c,void 0,r,h,c,l,t,F,void 0,void 0,!1,q,g,!1,x,!1,void 0,E,void 0),g?f(m):void 0;var k,n,u,A,D;w=b.$keys;var B=c+1,G,H=t+1;a&&"object"===typeof a?(k=a["\u001e\u0192_meta"])?(n=k.keys,k.abs_path=l.slice(0,t)):(k={},a["\u001e\u0192_meta"]=k=(k.version=0,k.abs_path=l.slice(0,t),k)):(k={},a={},a=(a.__proto__=p.prototype,a["\u001e\u0192_meta"]=k=(k.version=0,k.abs_path=l.slice(0,t),k),a),q&&(a=q(a)));u={};var I,L=-1,P=w.length;a:for(;++L<P;)if(D=w[L],I=b[L],null===D){if(void 0!==I)throw new y;
}else{if("object"!==typeof D)A=D,G=void 0,D=!1;else{G=D.to;A=D.from||0;"number"!==typeof G&&(G=A+(D.length||0)-1);if(0>G-A)break a;D=!0}do h[c]=A,l[t]=A,u[A]=!0,n&&A in n&&(n[A]=!1),a[A]=d(a[A],I,B,B,q,g,r,h,l,H,F,x,E);while(D&&++A<=G)}k.$code="__incomplete__";k.keys=u;if(n)for(A in n)n[A]&&delete a[A];return a}var f=a(7),e=a(16),p=a(2),y=a(3);a(12);var m=a(6);b.exports=d},function(b,c,a){function d(a,b,c){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===b||!f(b))&&void 0!==
a[b]}).forEach(function(e){var c=a[e],k=b[e];k||(k=b[e]={});if(c.$type){k=!c["\u001e\u0192_wrapped_value"];if(c.value&&"object"===typeof c.value||k){var k={},m=Object.keys(c),p,q,g;q=0;for(g=m.length;q<g;q++)p=m[q],"$type"!==p&&f(p)||(k[p]=c[p]);c=k}else c=c.value;b[e]=c}else d(c,k,e)})}var f=a(21);b.exports=function(a){var b={};d(a,b);return b}},function(b,c,a){var d=a(17);b.exports=function(a,b){a=(a=d(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,c,a){var d=Array.isArray,f=
a(104),e=a(58),p=a(59);b.exports=function(a){for(var b=[],c=-1,k=a.length,u,w,q,g;++c<k;)q=a[c],d(q)?(q={path:q},g="PathValues"):f(q)?g="PathValues":p(q)?g="JSONGraphs":e(q)&&(g="PathMaps"),w!==g&&(w=g,b.push(u={arguments:[],inputType:g})),u.arguments.push(q);return b}},function(b,c,a){function d(a,b,d,c,n){f(a,b,n);return{}}var f=a(29);a(45);b.exports={json:d,jsonGraph:d}},function(b,c,a){var d=a(50),f=a(0),e=a(44),p=a(1),y=a(48),m=a(9),n=a(47),k=a(57),u=a(11);b.exports=function(a,b,c,r,h,l,t,F,
x,E,v,z){var g,q,w,B,G,H;if(b===c){if(void 0===c)return c;if(null===c)return b=d(c,void 0,c),a=u(a,-b.$size,x,t),b=e(b,a,r,void 0,l);if((w=!(!b||"object"!==typeof b))&&void 0===(g=b.$type))return void 0===b["\u001e\u0192_parent"]&&e(b,a,r,t,l),b}else if(w=!(!b||"object"!==typeof b))g=b.$type;if("ref"!==g){if(B=!(!c||"object"!==typeof c))q=c.$type;if(w&&!g&&(null==c||B&&!q))return b}else{if(null==c){if(f(b,z)){p(b,F,x);return}return b}if(B=!(!c||"object"!==typeof c))if(q=c.$type,"ref"===q)if(b===c){if(null!=
b["\u001e\u0192_parent"])return b}else if(G=b.$timestamp,H=c.$timestamp,!f(b,z)&&!f(c,z)&&H<G)return}if(g&&B&&!q)return e(y(b,c,a,r,x,t),a,r,void 0,l);if(q||!B){"error"===q&&v&&(c=v(n(h,r),c));if(q&&b===c)null==b["\u001e\u0192_parent"]&&(b=d(b,g,b.value),a=u(a,-b.$size,x,t),b=e(b,a,r,t,l));else{h=!0;if(!w||g&&!f(b,z))h=E?!E(b,c,l.slice(0,l.index)):q?!g||!1===k(c)<k(b)||!(g!==q||b.value!==c.value||b.$expires!==c.$expires):!b||b.value!==c;h&&(c=d(c,q,q?c.value:c),E=m(b)-m(c),b=y(b,c,a,r,x,t),a=u(a,
E,x,t),b=e(b,a,r,t,l))}f(b,!0)&&p(b,F,x)}else null==b&&(b=e(c,a,r,void 0,l));return b}},function(b,c,a){function d(a,d){for(var e=!1,c=-1,k=d.length,g=[],p=[],h=a._root.errorSelector;++c<k;){var l=d[c],m=l.inputType,l=l.arguments;if(0<l.length){var n=(0,b.exports["set"+m])(a,l,h,null,!1),e=e||n[2];p.push.apply(p,n[1]);"PathValues"===m?g.push.apply(g,l.map(f)):"JSONGraphs"===m?g.push.apply(g,y(l,f)):g.push.apply(g,n[0])}}return{changed:e,requested:g,optimized:p}}function f(a){return a.path||a.paths}
var e=a(25),p=a(26),y=a(100),m=a(81);b.exports={json:function(a,b,c,f,q){var g,k,h,l,t,n,u=m(b);g=d(a,u);if((b=g.requested).length){if(!(h=g.changed)||f)k=e(a,b,c,f,q);h&&(a=p({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},g.optimized,{},f,q),t=a.data,l=t.paths,n=a.requested)}return{args:u,data:c,missing:l,relative:b,fragments:t,requested:n,error:k&&k.error,errors:k&&k.errors,hasValue:k&&k.hasValue}},jsonGraph:function(a,b,e,c,f){var g,k,h,l,t,n=m(b);
b=d(a,n);(k=b.requested).length&&(c||b.changed)&&(g=p({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},b.optimized,e,c,f),l=g.data,h=l.paths,t=g.requested);return{args:n,data:e,missing:h,relative:k,fragments:l,requested:t,error:g&&g.error,hasValue:g&&g.hasValue}},setPathMaps:a(20),setPathValues:a(31),setJSONGraphs:a(19)}},function(b,c,a){b.exports=function(a,b){for(var d=a["\u001e\u0192_refs_length"]||0,c=b["\u001e\u0192_refs_length"]||0,f=-1;++f<d;){var m=
a["\u001e\u0192_ref"+f];void 0!==m&&(m["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(c+f)]=m,a["\u001e\u0192_ref"+f]=void 0)}b["\u001e\u0192_refs_length"]=d+c;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,c,a){b.exports=function(a){for(var b=-1,d=a["\u001e\u0192_refs_length"]||0;++b<d;){var c=a["\u001e\u0192_ref"+b];null!=c&&(c["\u001e\u0192_context"]=c["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,c,a){b.exports=
function(a){var b=a["\u001e\u0192_context"];if(b){for(var d=(a["\u001e\u0192_ref_index"]||0)-1,c=(b["\u001e\u0192_refs_length"]||0)-1;++d<=c;)b["\u001e\u0192_ref"+d]=b["\u001e\u0192_ref"+(d+1)];b["\u001e\u0192_refs_length"]=c;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=void 0}return a}},function(b,c,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?!1:!0:!0}},function(b,
c,a){var d=a(2),f=a(10);a(91);b.exports=function(a){var b;if(!a||"object"!==typeof a||!(b=a["\u001e\u0192_meta"])||"object"!==typeof b)return null;var c=this._root.cache,e=this._recycleJSON,n=b.abs_path,k,u;if(!n)return this._clone({_node:void 0,_seed:e&&{json:a,__proto__:d.prototype}||void 0});if(0===n.length)return this._clone({_node:c,_path:n,_referenceContainer:!0,_seed:e&&{json:a,__proto__:d.prototype}||void 0});var w=b.deref_to,q=b.deref_from,g=f(c,n),r="e";if(q){r=!1;b=-1;u=q.length;for(k=
c;++b<u&&(k=k[q[b]],k&&!k.$type););if(w&&k&&"ref"===k.$type)for(r=!0,u=w.length,c=k.value,b=0;b<u;++b)if(c[b]!==w[b]){g=void 0;r=!1;break}}r?"e"===r&&(k=!0):k=!1;return this._clone({_node:g,_path:n,_referenceContainer:k,_seed:e&&{json:a,__proto__:d.prototype}||void 0})}},function(b,c,a){c=a(4);b.exports=c("BoundJSONGraphModelError",function(){this.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,c,a){c=a(4);
b.exports=c("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,c,a){c=a(4);b.exports=c("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},function(b,c,a){function d(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}c=a(4);b.exports=c("MaxRetryExceededError",function(a,
b,c,y){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+d(b)+"\n]\n"||"")+(c&&"relative: [\n\t"+d(c)+"\n]\n"||"")+(y&&"optimized: [\n\t"+d(y)+"\n]\n"||"")})},function(b,c){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,c,a){function d(a,b,c){n.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function e(a,b,c,d,e,f){k.call(this,
a);this.data=b;this.retryCount=-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function p(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=q(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(x){throw x;}finally{--c.syncRefCount}}function y(a,b){try{throw b;}catch(t){k.prototype.onError.call(a,t)}}function m(a,b){for(var c,d,e,h=Object.keys(b),f=-1,g=h.length;++f<g;)e=h[f],"\u001e\u0192_meta"===e?a["\u001e\u0192_meta"]=b["\u001e\u0192_meta"]:(d=b[e],
c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:m(c,d):void 0===c&&(a[e]=d)));return a}var n=a(55),k=a(14),u=a(53),w=a(2),q=a(35),g=a(52),r=a(93);b.exports=d;d.prototype=Object.create(n.prototype);d.prototype.lift=function(a,b){b=new d(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;a.progressive=a.progressive||this.operator.progressive;a.maxRetryCount=
a.maxRetryCount||this.operator.maxRetryCount;return b};d.prototype.operator=function(a){return this._subscribe(a)};d.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};d.prototype._toJSON=function(a,b){void 0===a&&(a={__proto__:w.prototype});return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};d.prototype._toJSONG=function(a,b){void 0===
a&&(a={__proto__:w.prototype});return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};d.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};d.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),this.source)};f.prototype.call=
function(a,b){return a.subscribe(new e(b,this.data,this.errors,this.operation,this.progressive))};e.prototype=Object.create(k.prototype);e.prototype.operations={get:a(71),set:a(84),call:a(70),invalidate:a(82)};e.prototype.next=e.prototype.onNext=function(a){if(this.started){var b,c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,h=this.errors,f,g=this.hasValue,k=this.operation,n=this.progressive,r=n&&d;r&&(d={__proto__:w.prototype});if(a&&a.length){f=this.operations[c][k](e,a,d,n||!e._source,
-1===this.retryCount);if(f.error)return y(this,f.error);h&&f.errors&&h.push.apply(h,f.errors);if(b=f.fragments)a=f.args,this.fragments=b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=g||(g=f.hasValue)}this.completed=!b||!e._source;"set"!==c&&(this.args=a,r&&(this.data=m(d,this.data)));n&&g&&d&&(d.json||d.jsonGraph)&&p(d,k,e._root,this.destination)}else this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||
this.model._root.maxRetryCount};e.prototype.error=e.prototype.onError=function(a){if(a instanceof g)return k.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};e.prototype.complete=e.prototype.onCompleted=function(a){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&p(b,this.operation,this.model._root,this.destination),
b=this.errors,c||a||b&&b.length?y(this,b.length&&b||a):k.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return y(this,new r(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)};e.prototype.dispose=e.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=
this.started=this.errored=!1;k.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&u(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,c,a){function d(a){m.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var e=a(55),p=a(97),y=a(14),m=a(15),n=a(56);b.exports=d;d.prototype=
Object.create(m.prototype);d.prototype.set=function(a,b,c,d){var f=this;return new e(function(e){var h=new p("set",f,a._source,new n);e=h.subscribe(new y(e,h));f.add(h);h.data=d.jsonGraph;h.requested.push(c);h.optimized.push(b);h.connect();return e})};d.prototype.call=function(a,b,c,d){var f=this;return new e(function(b){var c=new p("call",f,a._source,new n);b=c.subscribe(new y(b,c));f.add(c);c.data=d;c.boundPath=a._path;c.connect();return b})};d.prototype.get=function(a,b,c){return new f(this,a._source,
a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,h=-1,l=b.subscriptions,k=l.length,n=new m([],a);++h<k;){var x=l[h];if("get"===x.type&&((x=x.batch(d,e,d=[],e=[]))&&n.add(x.subscribe(new y(a,x))),!e.length))break}e.length&&(x=l[h]=(new p("get",b,c,f)).batch(d,e),n.add(x.subscribe(new y(a,x))),x.connect());return n}},function(b,c,a){function d(a,b,c,d){y.call(this,[],b);this.tree={};this.paths=[];this.type=
a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=w(this.tree=g(this.optimized.reduce(function(a,b){return q(b,a)},{})));try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(t){this.disposable=
{},y.prototype.onError.call(this,new m(t))}}function e(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,h,g=-1,k=b.length;a:for(;++g<k;)if(h=b[g],h.length>c){f=0;do if(h[f]!==a[f])continue a;while(++f<c);d[++e]=h.slice(c)}return d}var p=Array.isArray,y=a(98);a(14);a(15);var m=a(52),n=a(19),k=a(31),u=a(29),w=a(38),q=a(36),g=a(37),r=a(64);b.exports=d;d.prototype=Object.create(y.prototype);d.prototype.next=d.prototype.onNext=function(a){var b=this.parent;if(b){var c=a,d=0,f=0;if(p(a)){if(0>=
(f=a.length))return;c=a[0]}!1===this.responded&&(this.responded=!0,b.remove(this));var h=this.boundPath;do{var g=c.jsonGraph,k=this.requested,m=b.modelRoot,r=c.invalidated,q=c.paths||this.paths;r&&r.length&&u({_root:m,_path:[]},r,!1);q&&q.length&&g&&"object"===typeof g&&(q=n({_root:m},[{paths:q,jsonGraph:g}],m.errorSelector,m.comparator,!1)[0])}while(++d<f&&(c=a[d]));this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",paths:k[b]||e(h,q)})})}};d.prototype.error=d.prototype.onError=function(a){var b=
this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=w(g(this.requested.reduce(function(a,b){return q(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&k({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);y.prototype.onError.call(this,a)}};d.prototype.complete=d.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});
y.prototype.onCompleted.call(this)};d.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};d.prototype.dispose=d.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=
this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();y.prototype.dispose.call(this)};d.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};d.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,h=-1,k=-1,l=-1,m=b.length,p=a.length-1;++h<m;){var n=b[h],q=n.length,t=g[q];t&&r(t,n,0,q)?(f[++l]=n,e[l]=a[h<p?h:p]):(d[++k]=n,c[k]=a[h<p?
h:p])}return~l?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,c,a){function d(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),e=a(15);b.exports=d;d.prototype=Object.create(f.prototype);d.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};d.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};
d.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new e([a],this));return a};d.prototype.dispose=d.prototype.unsubscribe=function(){this.observers=[]}},function(b,c){function a(a){this.delay=a}var d=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new d(setTimeout(a,this.delay))};d.prototype.dispose=d.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,c){b.exports=
function(a,b){for(var c=-1,d=-1,p=a.length,y=[];++d<p;)for(var m=b(a[d],d,a),n=-1,k=m.length;++n<k;)y[++c]=m[n];return y}},function(b,c,a){var d=Array.isArray,f=a(32);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=d(a)?[]:{},c;for(c in a)f(c)||(b[c]=a[c])}return b}},function(b,c,a){var d=a(5);b.exports=function(a){return d(a)&&a.$expires||void 0}},function(b,c,a){var d=a(5);b.exports=function(a,b){a=d(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,c,a){var d=Array.isArray,
f=a(5);b.exports=function(a){return f(a)&&(d(a.path)||"string"===typeof a.path)}},function(b,c,a){b.exports=a(106)},function(b,c,a){(function(b,f){Object.defineProperty(c,"__esModule",{value:!0});var d=a(107),d=d&&d.__esModule?d:{"default":d};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,d["default"])(b);c["default"]=b}).call(c,a(34),a(108)(b))},function(b,c){Object.defineProperty(c,"__esModule",{value:!0});c["default"]=function(a){var b=a.Symbol;
"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,c){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,c,a){b.exports=a(62)}])});
//# sourceMappingURL=falcor.all.min.js.map
