/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("falcor",[],e):"object"===typeof exports?exports.falcor=e():b.falcor=e()})(this,function(){return function(b){function e(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,e);f.l=!0;return f.exports}var a={};e.m=b;e.c=a;e.i=function(a){return a};e.d=function(a,f,d){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:d})};
e.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};e.d(c,"a",c);return c};e.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};e.p="";return e(e.s=107)}([function(b,e,a){var c=a(59),f=a(34),d=a(60);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===d?!1:a===f?b:a<c()}},function(b,e,a){var c=a(20);b.exports=function(a){for(var d,g=Object.keys(a),f={},b=-1,r=g.length;++b<r;)d=g[b],"$size"===d||c(d)||(f[d]=a[d]);return f}},function(b,
e,a){var c=a(54);b.exports=function(a,d,g){a["\u001ef_invalidated"]||(a["\u001ef_invalidated"]=!0,d.push(a),c(g,a));return a}},function(b,e,a){(function(a){function c(a){a?(this["\u001ef_meta"]=a["\u001ef_meta"])||(this["\u001ef_meta"]=a):this["\u001ef_meta"]={}}function d(a){return function(){var d,c=this.length;d=c;var g;if("number"!==(g=typeof c)&&(!c||"object"!==g||"atom"!==c.$type||"number"!==typeof(d=c.value))||0>d||d!==(d|0)){if("pending"===this.$__status)return[];throw new RangeError("Invalid FalcorJSON length");
}this.length=d;d=a.apply(this,arguments);this.length=c;return d}}function g(d){var c=d,k=typeof c,g=arguments.length;if(0===g)c=this;else if("string"!==k){if(!c||"object"!==k)return c}else{if(1!==g)return c;c=this}return c===a?void 0:c}function y(){return q(g.apply(this,arguments),y)}function p(a,d){return JSON.stringify(q(g.call(this,this),q,!0===a,!1,!0===d))}function r(a){var d=g.apply(this,arguments),c,f,n=0,b=q(d,r,!0,!0);d&&(c=d["\u001ef_meta"])&&(n=c.version);b&&"object"===typeof b&&(f=b["\u001ef_meta"])&&
(f.version=n);return b}function q(a,d,k,g,f){if(!a||"object"!==typeof a)return a;var h,l,n,q,b,t;if(v(a))t=a;else{h=-1;q=Object.keys(a);l=q.length;t={};g&&(t.__proto__=c.prototype);if(k&&(n=a["\u001ef_meta"])){var r=n.$code,p=n.status,y=n.abs_path,u=n.deref_to,m=n.deref_from;n={};r&&(n.$code=r);y&&(n.abs_path=y);u&&(n.deref_to=u);m&&(n.deref_from=m);f&&p&&(n.status=p);t["\u001ef_meta"]=n;g&&(n={},n.__proto__=t,t=n)}for(;++h<l;)"\u001ef_meta"!==(b=q[h])&&(t[b]=d(a[b],d,k,g,f))}return t}var m={length:!0,
toString:!0,constructor:!0,toLocaleString:!0},u={toJSON:{enumerable:!1,value:y},toProps:{enumerable:!1,value:r},toString:{enumerable:!1,value:p},toLocaleString:{enumerable:!1,value:p},$__hash:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.$code||""}},$__path:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.abs_path||[]}},$__status:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.status||"resolved"}},$__version:{enumerable:!1,get:function(){var a=
this["\u001ef_meta"];return a&&a.version||0}}};Object.defineProperties(c.prototype,Object.getOwnPropertyNames(Array.prototype).reduce(function(a,c){if(!m.hasOwnProperty(c)){var g=Array.prototype[c];"function"===typeof g&&(a[c]={value:d(g),writable:!0,enumerable:!1})}return a},u));var v=Array.isArray;b.exports=c}).call(e,a(35))},function(b,e,a){e=a(5);b.exports=e("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,e){b.exports=function(a,c){function f(a){this.message=
a;c&&c.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}f.prototype=Object.create(Error.prototype);f.prototype.name=a;f.prototype.constructor=f;f.is=function(d){return d.name===a};return f}},function(b,e){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,e,a){b.exports=function(a,f){var d=f["\u001ef_refs_length"]||0;f["\u001ef_ref"+d]=a;f["\u001ef_refs_length"]=d+1;a["\u001ef_ref_index"]=d;a["\u001ef_context"]=
f}},function(b,e){b.exports={$type:"atom"}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&a.$size||0}},function(b,e,a){function c(a,d){var g=a,f,b=0,r=d.length;if(0<r){do for(g=g[d[b]];g&&"ref"===(f=g.$type);)g=c(a,g.value);while(++b<r&&g&&!f)}return g}b.exports=c},function(b,e,a){var c=a(29),f=a(31);b.exports=function(a,g,b,p){var d=a,q;do 0<(d.$size=(d.$size||0)-g)?(q=d["\u001ef_parent"])?d["\u001ef_version"]!==p&&f(d,p):d["\u001ef_version"]=p:(q=d["\u001ef_parent"])&&c(d,q,d["\u001ef_key"],
b,p);while(d=q);return a}},function(b,e,a){e=a(5);b.exports=e("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,e,a){var c=a(60);b.exports=function(a,d){if(d.$expires!==c){var g=a["\u001ef_head"];if(!g)a["\u001ef_head"]=a["\u001ef_tail"]=d;else if(g!==d){var f=d["\u001ef_prev"],b=d["\u001ef_next"];b&&(b["\u001ef_prev"]=f);f&&(f["\u001ef_next"]=b);d["\u001ef_prev"]=
void 0;a["\u001ef_head"]=d;d["\u001ef_next"]=g;g["\u001ef_prev"]=d;d===a["\u001ef_tail"]&&(a["\u001ef_tail"]=f)}}}},function(b,e,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination={error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var d=this.destination;
if(d)if(d.onNext)d.onNext(a);else d.next&&d.next(a)};c.prototype.error=c.prototype.onError=function(a){var d=!1,c=this.destination;c&&(c.onError?(d=!0,c.onError(a)):c.error&&(d=!0,c.error(a)),this.dispose());if(!d)throw a;};c.prototype.complete=c.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,
e){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,e,a){var c=a(0),f=a(2),d=a(13);b.exports=
function(a,b,p,r,q,m,u,v,n,h,k,l,t,z,x,w,G,C,e,F,B,A,E){var g=e;if(b)if(c(a,x))a["\u001ef_invalidated"]||f(a,z,t);else if(d(t,a),void 0===a.value)g=!1,e=C;else{if(m)return l&&(v[q]=null),B(a,b,q,m,u,v,h,k,l,G,C,F);return}if(C)m&&(u.hasValue=!0);else if(!e)return;return A(r,q,u,v,n,l,h,k,g,C,p,w,G,E,t)}},function(b,e,a){var c=a(10);b.exports=function(a,d){d=d||a._path;var g=a._node;if(!g||void 0===g["\u001ef_parent"]||g["\u001ef_invalidated"])a._node=null,0===d.length?g=a._root.cache:(g=c(a._root.cache,
d),d===a._path&&(a._node=g));return g}},function(b,e,a){function c(a,g,n,h,k,l,b,q,x,w,p,r,y,e,B,A,E,I){var t={},v=g<a.length-1,z=a[g],u=m(z,t),G=r.index;do{p.depth=g;f(n,h,k,l,b,q,u,v,!1,p,r,y,e,B,A,E,I);p[g]=u;p.index=g;var C=d[0],D=d[1],F=d[4];F[F.index++]=u;C&&(v?c(a,g+1,n,D,C,l,d[3],d[2],x,w,p,F,y,e,B,A,E,I):(x.push(p.slice(0,p.index+1)),w.push(F.slice(0,F.index))));u=m(z,t);if(t.done)break;r.index=G}while(1)}function f(a,c,n,h,k,l,b,z,x,w,m,C,e,F,B,A,E){var t=n;for(n=t.$type;"ref"===n;){a:{k=
a;m=h;n=l;l=w;c=C;x=e;var v=F,u=B,G=A,D=E,N,H=t,K=H.value,Q=K.slice(0);if(g(H,D))y(H,x,v),H=void 0,t=k,N=m,Q.index=K.length;else{var R=0,X=H,O=K.length-1,t=H=k;N=n=m;do{var V=K[R],W=R<O;Q.index=R;f(k,t,H,m,N,n,V,W,!0,l,Q,c,x,v,u,G,D);H=d[0];Q=d[4];if(!H||"object"!==typeof H){Q.index=R;break a}t=d[1];n=d[2];N=d[3]}while(R++<O);Q.index=R;X["\u001ef_context"]!==H&&p(X,H)}d[0]=H;d[1]=t;d[2]=n;d[3]=N;d[4]=Q}t=d[0];if(!t||"object"!==typeof t)return;c=d[1];l=d[2];k=d[3];m=d[4];n=t.$type}if(void 0===n){if(null==
b){if(z)throw new q;t&&(b=t["\u001ef_key"])}else c=t,k=l,t=c[b],l=k&&k[b];t=r(c,t,l,b,w,m,C,e,F,B,A,E)}d[0]=t;d[1]=c;d[2]=l;d[3]=k;d[4]=m}var d=Array(5),g=a(0),y=a(2),p=a(7),r=a(81),q=a(4),m=a(23);b.exports=function(a,g,f,h,k){a=a._root;for(var l=a.expired,n=a.version+1,b=a.cache,x=[],q=[],p=[],r=[],v=-1,m=g.length;++v<m;)for(var u=g[v],y=u.paths,u=u.jsonGraph,e=-1,I=y.length;++e<I;){var L=y[e];q.index=0;c(L,0,b,b,b,u,u,u,p,r,x,q,n,l,a,h,f,k)}d[0]=void 0;d[1]=void 0;d[2]=void 0;d[3]=void 0;d[4]=void 0;
return b["\u001ef_version"]===n?(a.version=n,[p,r,!0]):[p,r,!1]}},function(b,e,a){function c(a,h,k,l,b,q,x,w,p,r,v,u,y,e,E){var n;if(a&&"object"===typeof a&&!a.$type){n=[];var t=0;g(a)&&(n[t++]="length");for(var z in a)m(z)||(n[t++]=z)}else n=void 0;if(n&&n.length){t=0;z=n.length;var G=p.index;do{var C=n[t],D=a[C],B=!(!D||"object"!==typeof D)&&!D.$type;w.depth=h;f(k,l,b,C,D,B,!1,w,p,r,v,u,y,e,E);w[h]=C;w.index=h;var F=d[0],A=d[1],R=d[2];R[R.index++]=C;F&&(B?c(D,h+1,k,A,F,q,x,w,R,r,v,u,y,e,E):(q.push(w.slice(0,
w.index+1)),x.push(R.slice(0,R.index))));if(++t>=z)break;p.index=G}while(1)}}function f(a,c,k,g,b,q,x,w,m,e,D,F,B,A,E){var h=k;for(k=h.$type;"ref"===k;){a:{m=b;k=a;c=w;var l=e,n=D,t=F,z=B,G=A,C=E,K=h,Q=K.value,R=Q.slice(0);if(y(K,C))p(K,n,t),K=void 0,h=k,R.index=Q.length;else{var X=K,K=K["\u001ef_context"];if(null!=K)h=K["\u001ef_parent"]||k,R.index=Q.length;else{var O=0,V=Q.length-1;R.index=O;h=K=k;do{f(k,h,K,Q[O],m,O<V,!0,c,R,l,n,t,z,G,C);K=d[0];R=d[2];if(!K||"object"!==typeof K){R.index=O;break a}h=
d[1]}while(O++<V);R.index=O;X["\u001ef_context"]!==K&&r(X,K)}}d[0]=K;d[1]=h;d[2]=R}h=d[0];if(!h||"object"!==typeof h)return;c=d[1];m=d[2];k=h&&h.$type}if(!q||void 0===k){if(null==g){if(q)throw new u;h&&(g=h["\u001ef_key"])}else c=h,h=c[g];h=v(c,h,g,b,q,x,w,m,e,D,F,B,A,E)}d[0]=h;d[1]=c;d[2]=m}var d=Array(3),g=Array.isArray,y=a(0),p=a(2),r=a(7),q=a(10),m=a(33),u=a(4),v=a(48);b.exports=function(a,g,k,f,b){var h=a._root,l=h.expired,n=h.version+1;a=a._path;var t=h.cache,p=q(t,a);if(!p)return[[],[],!1];
for(var r=p["\u001ef_parent"]||t,v=[],m=[],u=[],y=a.length,e=-1,L=g.length;++e<L;){var M=g[e],P=a.slice(0);P.index=y;c(M.json,0,t,r,p,m,u,v,P,n,l,h,f,k,b)}d[0]=void 0;d[1]=void 0;d[2]=void 0;return t["\u001ef_version"]===n?(h.version=n,[m,u,!0]):[m,u,!1]}},function(b,e,a){e=a(92);e=new RegExp("^"+e,"i","g");b.exports=e.test.bind(e)},function(b,e){function a(c,f,d){d=d||[];f=f||[];if(!c)return f;for(var g=[],b=c.$keys,p=b.length,r=-1;++r<p;){var q=c[r],m=b[r];q&&"object"===typeof q?a(q,f,d.concat([m])):
g.push(m)}1===g.length?f.push(d.concat(g)):1<g.length&&f.push(d.concat([g]));return f}b.exports=a},function(b,e){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,e){function a(a,d){var c=d.from=a.from||0;a=d.to=a.to||"number"===typeof a.length&&d.from+a.length-1||0;d.rangeOffset=d.from;d.loaded=!0;c>a&&(d.empty=!0)}var c=Array.isArray;b.exports=function(f,d){if(void 0===d.isArray){d.done=!1;var g=d.isObject=!(!f||"object"!==typeof f);d.isArray=
g&&c(f);d.arrayOffset=0}if(d.isArray){var b;do{d.loaded&&d.rangeOffset>d.to&&(++d.arrayOffset,d.loaded=!1);if(d.arrayOffset>=f.length){d.done=!0;break}g=f[d.arrayOffset];"object"===typeof g?(d.loaded||a(g,d),d.empty||(b=d.rangeOffset++)):(++d.arrayOffset,b=g)}while(void 0===b);return b}if(d.isObject){d.loaded||a(f,d);if(d.rangeOffset>d.to){d.done=!0;return}return d.rangeOffset++}d.done=!0;return f}},function(b,e,a){b.exports=a(40)},function(b,e,a){b.exports=a(43)},function(b,e){b.exports=function(a,
c,f,d,g){var b=0,p;p=d.jsonGraph;p||(d.jsonGraph=p={});do{d=c[b++];if(b>=f){p=p[d]=!0!==g?a:p[d]||{};break}p=p[d]||(p[d]={})}while(1);return p}},function(b,e){var a=Array.isArray;b.exports=function(c,f,d,g,b,p,r,q,m,u,v,n,h,k,l){if(m||u){for(var t,z=-1,x=(p=b-f)&&Array(p)||void 0;++z<p;){t=c[z+f];var w;w=t;if("object"!==typeof w||null===w)w=!1;else if(a(w))w=0===w.length;else{var e=w.to,y=w.from||0;"number"!==typeof e&&(e=y+(w.length||0));w=y>=e}if(w)return;x[z]=t}var D;c=null===t;t=m;var F;m?(w=
b,e=g,F=d.requested||(d.requested=[])):(f=q,e=r,w=q+p-Number(c));do{if(p<b||!t){g=-1;z=f;for(D=Array(w);++g<z;)D[g]=e[g];for(z=-1;g<w;)D[g++]=x[++z]}if(t=!t){m&&(F[F.length]=D);break}F[F.length]=D||x;f=q;e=r;F=d.missing||(d.missing=[]);w=q+p-Number(c)}while(1);if(u)return k(v,D,f,w,n,h,l)}}},function(b,e,a){function c(a,g,k,l,b,q,x,p,m){var h={},n=g<a.length-1,t=a[g],w=v(t,h);do{f(k,l,b,w,n,!1,q,x,p,m);var w=d[0],z=d[1];w&&(n?c(a,g+1,k,z,w,q,x,p,m):u(w,r(w),p,q));w=v(t,h)}while(!h.done)}function f(a,
c,k,l,b,r,x,w,v,m){var h=k;for(k=h.$type;"ref"===k;){a:{c=a;k=x;r=w;var n=v,t=m;if(g(h,t))y(h,r,n),d[0]=void 0,d[1]=c;else{p(n,h);var u=h,z=h.value,e,h=h["\u001ef_context"];if(null!=h)e=h["\u001ef_parent"]||c;else{var G=0,C=z.length-1;e=h=c;do{f(c,e,h,z[G],G<C,!0,k,r,n,t);h=d[0];if(!h&&"object"!==typeof h)break a;e=d[1]}while(G++<C);u["\u001ef_context"]!==h&&q(u,h)}d[0]=h;d[1]=e}}h=d[0];if(!h&&"object"!==typeof h)return;c=d[1];k=h.$type}if(void 0===k)if(null==l){if(b)throw Error("`null` is not allowed in branch key positions.");
}else c=h,h=c[l];d[0]=h;d[1]=c}var d=Array(2),g=a(0),y=a(2),p=a(13),r=a(9),q=a(7),m=a(17),u=a(11),v=a(23);b.exports=function(a,g,k){var h=a._root,f=h.expired,b=h.version+1,n=h.cache;a=m(a);if(!a)return!1;for(var q=-1,p=g.length,r=a["\u001ef_parent"]||n;++q<p;)c(g[q],0,n,r,a,b,f,h,k);d[0]=void 0;d[1]=void 0;return n["\u001ef_version"]===b?(h.version=b,!0):!1}},function(b,e,a){function c(a,b,m,u,v){if(a&&"object"===typeof a){var n=a.$type;if(void 0===n)for(var h in a)d(h)||c(a[h],a,h,u,v);else"ref"===
n&&y(a),f(u,a);g(p(a,v));b[m]=a["\u001ef_parent"]=void 0;return!0}return!1}var f=a(54),d=a(33),g=a(84),y=a(85),p=a(31);b.exports=c},function(b,e,a){function c(a,g,h,k,b,q,p,x,w,r,u,e,y,B,A,E){var l={},n=h<g.length-1,t=g[h],v=m(t,l),z=r.index;do{w.depth=h;w[h]=v;w.index=h;f(k,b,q,v,a,n,!1,w,r,u,e,y,B,A,E);w[h]=v;w.index=h;var G=d[0],C=d[1],D=d[2];D[D.index++]=v;G&&(n?c(a,g,h+1,k,C,G,p,x,w,D,u,e,y,B,A,E):(p.push(w.slice(0,w.index+1)),x.push(D.slice(0,D.index))));v=m(t,l);if(l.done)break;r.index=z}while(1)}
function f(a,c,h,k,b,t,r,x,w,m,e,D,F,B,A){var l=h;for(h=l.$type;"ref"===h;){a:{w=b;h=a;c=x;var n=m,v=e,z=D,G=F,C=B,N=A,H=l,K=H.value,Q=K.slice(0);if(g(H,N))y(H,v,z),H=void 0,l=h,Q.index=K.length;else{var R=H,H=H["\u001ef_context"];if(null!=H)l=H["\u001ef_parent"]||h,Q.index=K.length;else{var X=0,O=K.length-1,l=H=h;do{var V=K[X],W=X<O;Q.index=X;f(h,l,H,V,w,W,!0,c,Q,n,v,z,G,C,N);H=d[0];Q=d[2];if(!H||"object"!==typeof H){Q.index=X;break a}l=d[1]}while(X++<O);Q.index=X;R["\u001ef_context"]!==H&&p(R,H)}}d[0]=
H;d[1]=l;d[2]=Q}l=d[0];if(!l||"object"!==typeof l)return;c=d[1];w=d[2];h=l.$type}if(!t||void 0===h){if(null==k){if(t)throw new q;l&&(k=l["\u001ef_key"])}else c=l,l=c[k];l=u(c,l,k,b,t,r,x,w,m,e,D,F,B,A)}d[0]=l;d[1]=c;d[2]=w}var d=Array(3),g=a(0),y=a(2),p=a(7),r=a(10),q=a(4),m=a(23),u=a(48);b.exports=function(a,g,h,k,f){var b=a._root,l=b.expired,n=b.version+1;a=a._path;var q=b.cache,p=r(q,a);if(!p)return[[],[],!1];for(var m=p["\u001ef_parent"]||q,v=[],u=[],e=[],y=a.length,E=-1,I=g.length;++E<I;){var L=
g[E],M=L.path,L=L.value,P=a.slice(0);P.index=y;c(L,M,0,q,m,p,u,e,v,P,n,l,b,k,h,f)}d[0]=void 0;d[1]=void 0;d[2]=void 0;return q["\u001ef_version"]===n?(b.version=n,[u,e,!0]):[u,e,!1]}},function(b,e,a){b.exports=function(a,f){var d=a,c=[],b=0,p,r,q;do{r=-1;p=d["\u001ef_parent"];d["\u001ef_version"]=f;q=d["\u001ef_refs_length"]||0;do if(p&&p["\u001ef_version"]!==f&&(c[b++]=p),++r<q)p=d["\u001ef_ref"+r];else break;while(1)}while(d=c[--b]);return a}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&
a.$timestamp||void 0}},function(b,e,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(20)},function(b,e){b.exports=0},function(b,e){e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(e=window)}b.exports=e},function(b,e,a){var c=a(39),f=a(37),d=a(38);b.exports=function(a){return c(d(f(a)))}},function(b,e,a){var c=Array.isArray,f=a(21);b.exports=function(a,g){if(a)c(a)||c(a.$keys)&&(a=f(a));else return g;return a.reduce(function(a,
d){var c=d.length;a[c]||(a[c]=[]);a[c].push(d);return a},g||{})}},function(b,e,a){var c=a(65);b.exports=function(a,d){return Object.keys(a).reduce(function(d,f){d[f]=c(a[f],d[f]);return d},d||{})}},function(b,e,a){function c(a,f,b){var h,k=Object.create(null),l=""+q(""+f),n=[],p=-1,x=0,w=[],r=0,m,v,u,e,y,E;u=[];e=-1;if(f<b-1){for(y=d(a,u);++e<y;)h=u[e],m=c(a[h],f+1,b),v=m.code,k[v]?m=k[v]:(n[x++]=v,m=k[v]={keys:[],sets:m.sets}),l=""+q(l+h+v),g(h)&&m.keys.push(parseInt(h,10))||m.keys.push(h);for(;++p<
x;)if(h=n[p],m=k[h],u=m.keys,y=u.length,0<y)for(a=m.sets,f=-1,b=a.length,e=u[0];++f<b;){h=a[f];m=-1;v=h.length;E=Array(v+1);for(E[0]=1<y&&u||e;++m<v;)E[m+1]=h[m];w[r++]=E}}else for(y=d(a,u),1<y?w[r++]=[u]:w[r++]=u;++e<y;)l=""+q(l+u[e]);return{code:l,sets:w}}function f(a,d){return a-d}function d(a,d,c){var g=0;if(a===m)d[g++]=null;else{for(var k in a)d[g++]=k;1<g&&d.sort(c)}return g}function g(a){var d=a,c=typeof a;if("string"===c){d=a.length;if(0===d||17<d||!r.test(a))return!1;if(16>d)return!0;d=
+a}else if("number"!==c)return!1;return 0===d%1&&9007199254740991>=p(d)}var y=Array.isArray,p=Math.abs,r=/^(0|(\-?[1-9][0-9]*))$/,q=a(22),m=a(8);b.exports=function(a){var d,b=[],h=0,k;for(k in a){var l;if(l=g(k))l=d=a[k],l=null!==l&&"object"===typeof l;if(l){l=c(d,0,parseInt(k,10)).sets;for(var q=-1,p=l.length;++q<p;){for(var x=h++,m=l[q],r=-1,e=m.length;++r<e;){var u=m[r];if(y(u)){var F=m,B=r;for(var A=-1,E=u.length-1,I=0<E;++A<=E;){var L=u[A];if(!g(L)){I=!1;break}u[A]=parseInt(L,10)}!0===I&&(u.sort(f),
A=u[0],I=u[E],I-A<=E&&(u={from:A,to:I}));F[B]=u}}b[x]=m}}}return b};b.exports._isSafeNumber=g},function(b,e,a){var c=Array.isArray,f=a(73),d=a(72),g=a(17),y=a(90),p=a(64),r=a(62);b.exports=function(a,b,e,v,n){var h,k=b,l;b=a._path;var q=a._root,m=q.cache,x,w,u,C=b&&b.length||0;if(C){if((h=g(a))&&h.$type)return{error:new y(b,b)};u=[];for(l=0;l<C;++l)u[l]=b[l];l=a._referenceContainer}else h=m,u=[];x=[];var D=!1;v=e&&e.json;var F=a._boxed,B=q.expired;w=a._recycleJSON;var A=!!a._source,E=q.branchSelector,
I=e&&a._materialized,L=a._treatErrorsAsValues,M=a._allowFromWhenceYouCame;a={args:null,data:e,hasValue:!1,relative:null,requested:null,missing:null};var P,U=0,N=k.length;if(0<N){if(w){D=!0;if(1<N&&n||c(k[0]))k=[r(p(k,{}))];N=1}do P=k[U],D?w=d(m,h,v,k[0],0,e,a,x,u,C,!1,l,q,B,n,E,F,I,A,L,M):(w=P.length,w=f(m,h,v,P,0,e,a,x,w,u,C,!1,l,q,B,n,E,F,I,A,L,M)),v=w[0],w[0]=void 0,w[1]=void 0;while(++U<N)}n=a.requested;a.args=D&&k||n;if(n&&n.length&&(a.relative=a.args,C)){k=[];l=0;for(C=n.length;l<C;++l)k[l]=
b.concat(n[l]);a.requested=k}a.hasValue&&(e.json=v);return a}},function(b,e,a){var c=Array(3),f=a(13),d=a(0),g=a(7),y=a(52);b.exports=function(a,b,q,m){f(q,b);var p,e,n=0,h=a,k=b.value,l=k,t=k.length;do{if(0===n&&void 0!==(p=b["\u001ef_context"]))h=p,n=t;else if(e=k[n++],void 0===(h=h[e]))break;if(n===t){e=h.$type;if(void 0!==e&&d(h,m))break;else{if(h===b)throw new y(k);h!==p&&g(b,h)}if("ref"===e)f(q,h),n=0,b=h,h=a,k=l=b.value,t=k.length;else break}else if(void 0!==h.$type)break}while(1);n<t&&void 0!==
h&&(t=n);n=-1;for(k=Array(t);++n<t;)k[n]=l[n];c[0]=h;c[1]=k;c[2]=b;return c}},function(b,e,a){var c=a(1),f=a(71);b.exports=function(a,g,b,p,e,q,m,u,v,n,h,k){if("error"===g&&!k)return f(a,b,e,q,v,n);e.hasValue=!0;return n?c(a):a.value}},function(b,e,a){var c=a(76),f=a(88);b.exports=function(a,g,b,p,e){var d,m;d=a._path;p=a._root;var r,v,n=d&&d.length||0;if(n)return{error:new f};v=[];m=d=p.cache;r=[];for(var h=a._boxed,k=p.expired,l=a._materialized,t=!!a._source,z=-1,x=g.length,w=a._treatErrorsAsValues,
y={args:null,data:b,paths:null,relative:null,requested:null,jsonGraph:null};++z<x;){var C=g[z];a=C.length;c(m,d,C,0,b,y,r,a,v,n,!1,p,k,e,h,l,t,w)}y.args=y.relative=y.requested;return y}},function(b,e,a){function c(a,b,m,e,v,n,h){if(m===e)return n?d(p):void 0;var k,l,q=m+1,r,x=-1,w=0;l=b[m];a&&"object"===typeof a?((k=a["\u001ef_meta"])||(a["\u001ef_meta"]=k={}),k.status="resolved",k.version=h.version,k.abs_path=b.slice(0,m)):(a={},a.__proto__=g.prototype,a["\u001ef_meta"]=k={},k.status="resolved",
k.version=h.version,k.abs_path=b.slice(0,m),v&&(a=v(a)));a:do{if("object"!==typeof l)m=l,k=void 0,l=!1;else if(f(l)){if(void 0!==r)throw new y(b,r);x=0;r=l;w=l.length;if(0===w)break a;l=r[x];continue a}else{k=l.to;m=l.from||0;"number"!==typeof k&&(k=m+(l.length||0)-1);if(0>k-m)break a;l=!0}do a[m]=c(a[m],b,q,e,v,n,h);while(l&&++m<=k);if(++x===w)break a;l=r[x]}while(1);return a}var f=Array.isArray,d=a(1),g=a(3);a(4);var y=a(12),p=a(8);b.exports=c},function(b,e,a){var c=Array.isArray,f=a(102),d=a(57),
g=a(58);b.exports=function(a){for(var b=[],e=-1,q=a.length,m,u,v,n;++e<q;)v=a[e],c(v)?(v={path:v},n="PathValues"):f(v)?n="PathValues":g(v)?n="JSONGraphs":d(v)&&(n="PathMaps"),u!==n&&(u=n,b.push(m={arguments:[],inputType:n})),m.arguments.push(v);return b}},function(b,e,a){b.exports=function(a,b,d,g,e){a["\u001ef_key"]=d;a["\u001ef_parent"]=b;void 0!==g&&(a["\u001ef_version"]=g);a["\u001ef_abs_path"]||(a["\u001ef_abs_path"]=e.slice(0,e.index).concat(d));return b[d]=a}},function(b,e,a){function c(a,
g,b,l,q,p,x,e,m,y){if(a&&"object"===typeof a&&!a.$type)for(var k in a)if(!u(k)){var h=a[k],n=!(!h||"object"!==typeof h)&&!h.$type;f(b,l,q,k,h,n,!1,p,x,e,m,y);var t=d[0],w=d[1];t&&(n?c(h,g+1,b,w,t,p,x,e,m,y):v(t,r(t),e,p))}}function f(a,c,b,l,e,m,x,w,r,u,v,F){var k=b;for(b=k.$type;"ref"===b;){a:{c=e;b=a;x=w;var h=r,n=u,t=v,z=F;if(g(k,z))y(k,h,n),d[0]=void 0,d[1]=b;else{p(n,k);var C=k,G=k.value,D,k=k["\u001ef_context"];if(null!=k)D=k["\u001ef_parent"]||b;else{var N=0,H=G.length-1;D=k=b;do{f(b,D,k,G[N],
c,N<H,!0,x,h,n,t,z);k=d[0];if(!k&&"object"!==typeof k)break a;D=d[1]}while(N++<H);C["\u001ef_context"]!==k&&q(C,k)}d[0]=k;d[1]=D}}k=d[0];if(!k&&"object"!==typeof k)return;c=d[1];b=k.$type}if(void 0===b)if(null==l){if(m)throw Error("`null` is not allowed in branch key positions.");}else c=k,k=c[l];d[0]=k;d[1]=c}var d=Array(2),g=a(0),y=a(2),p=a(13),r=a(9),q=a(7),m=a(17),u=a(33),v=a(11);b.exports=function(a,b,g){var k=a._root,h=k.expired,f=k.version+1,n=k._comparator,p=k.cache;a=m(a);if(!a)return!1;
for(var q=-1,e=a["\u001ef_parent"]||p,r=b.length;++q<r;)c(b[q].json,0,p,e,a,f,h,k,n,g);d[0]=void 0;d[1]=void 0;return p["\u001ef_version"]===f?(k.version=f,!0):!1}},function(b,e,a){var c=a(34),f=a(101),d=a(9),g=a(32),y=a(51),p=a(0),r=a(2),q=a(46),m=a(50),u=a(49),v=a(11);a(29);b.exports=function(a,b,k,l,e,z,x,w,G,C,D,F,B,A){A=f(b,z);if(e||z){if(A&&p(b,!0)&&(r(b,C,D),A=b.$expires===c?A:"expired"),A&&"ref"!==A||!b||"object"!==typeof b)b=m(b,{},a,k,D,G),b=q(b,a,k,G,w)}else e=f(l),(A||e)&&(F?3>F.length?
F(b,l):F(b,l,w.slice(0,w.index)):!1!==g(l)<g(b))||(B&&"error"===e&&(l=B(u(x,k),l)),x=d(b)-d(l=y(l,e,e?l.value:l)),b=m(b,l,a,k,D,G),a=v(a,x,D,G),b=q(b,a,k,G,w));return b}},function(b,e){b.exports=function(a,c){a=a.slice(0,a.depth);a[a.length]=c;return a}},function(b,e,a){var c=a(83),f=a(29),d=a(31);b.exports=function(a,b,e,r,q,m){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,e,r,q),d(b,m));return e[r]=b}},function(b,e,a){var c=Array.isArray,f=a(59),d=a(99),g=a(9),y=a(100),p=a(34);b.exports=
function(a,b,e){var q=0;if(b){var m=a["\u001ef_wrapped_value"];a=d(a);q=g(a);a.$type=b;a["\u001ef_prev"]=void 0;a["\u001ef_next"]=void 0;a["\u001ef_wrapped_value"]=m||!1}else a={$type:"atom",value:e,"\u001ef_prev":void 0,"\u001ef_next":void 0,"\u001ef_wrapped_value":!0};if(null==e)q=51;else if(null==q||0>=q)switch(typeof e){case "object":q=c(e)?50+e.length:51;break;case "string":q=50+e.length;break;default:q=51}b=y(a);"number"===typeof b&&b<p&&(a.$expires=f()+-1*b);a.$size=q;return a}},function(b,
e,a){e=a(5);b.exports=e("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,e,a){e=a(5);b.exports=e("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,e,a){b.exports=function(a,b){var d=b["\u001ef_prev"],c=b["\u001ef_next"];c&&(c["\u001ef_prev"]=d);d&&(d["\u001ef_next"]=c);b["\u001ef_prev"]=b["\u001ef_next"]=void 0;b===a["\u001ef_head"]&&(a["\u001ef_head"]=c);b===a["\u001ef_tail"]&&
(a["\u001ef_tail"]=d)}},function(b,e,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var d=a(14),g=a(15),e=a(103).default;b.exports=f;f.prototype[e]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,c,b){return new g([this.operator.call(this.source,a instanceof d?a:new d(a,c,b))])};f.prototype.then=function(a,d){var b=this;this._promise||(this._promise=
new c.Promise(function(a,d){var c=[],g=!1;b.subscribe({next:function(a){c[c.length]=a},error:function(a){g=!0;d(a)},complete:function(){!g&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,d)}}).call(e,a(35))},function(b,e){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&"json"in a}},function(b,e,a){var c=Array.isArray,f=a(6);b.exports=function(a){return f(a)&&
c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,e){b.exports=Date.now},function(b,e){b.exports=1},function(b,e,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(66);e=a(3);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=e;c.toProps=e.prototype.toProps;b.exports=c},function(b,e,a){function c(a){if(void 0!==a){for(var d="",b=a.$keys,e=-1,r=b.length;++e<r;){var q=b[e];if(null===q)d=""+f(""+d+"null");else{"object"===
typeof q&&(q="["+q.from+".."+(q.from+q.length-1)+"]");var m=c(a[e]),d=void 0===m?""+f(""+d+q):""+f(""+d+q+m.$code)}}a.$code=d;return a}}var f=a(22);b.exports=c},function(b,e,a){function c(a,b,e,r){if(e===r)return!0;var g,m=-1,p=0,v=e+1,n,h,k;g=b[e];if(null===g)return a===d;a:do{if("object"!==typeof g)e=g,h=void 0,n=!1;else if(f(g)){if(void 0!==k)break a;m=0;k=g;p=g.length;if(0===p)break a;g=k[m];continue a}else{h=g.to;e=g.from||0;"number"!==typeof h&&(h=e+(g.length||0)-1);if(0>h-e)break a;n=!0}do if(v===
r){if(null!==a[e])return!1}else if(g=a[e],null===g||void 0===g||!1===c(g,b,v,r))return!1;while(n&&++e<=h);if(++m===p)break a;g=k[m]}while(1);return!0}var f=Array.isArray,d=a(8);b.exports=c},function(b,e,a){function c(a,b){return a.reduce(function(a,b){return d(b)?f(a,b,0,b.length):d(b.$keys)?c(y(b),a):a},b||{})}function f(a,c,b,e){if(b!==e){a=a||{};var m=a.$keys||(a.$keys=[]),p=a.$keysMap||(a.$keysMap={}),n,h=-1,k=0,l,t=b+1,q;n=c[b];if(null===n)return g;a:do{if("object"!==typeof n)l=n,"undefined"===
typeof(b=p[l])&&(b=m.length),m[b]=l,p[l]=b,n=f(a[b],c,t,e),void 0!==n&&(a[b]=n);else if(d(n)){if(void 0!==q)break a;h=0;q=n;k=n.length;if(0===k)break a;n=q[h];continue a}else{b=n.to;l=n.from||0;"number"!==typeof b&&(b=l+(n.length||0)-1);if(0>b-l)break a;n={from:l,length:b-l+1};l="["+l+".."+b+"]";"undefined"===typeof(b=p[l])&&(b=m.length);m[b]=n;p[l]=b;n=f(a[b],c,t,e);void 0!==n&&(a[b]=n)}if(++h===k)break a;n=q[h]}while(1);return a}}var d=Array.isArray,g={$keys:[null],$keysMap:{"null":0}},y=a(21);
b.exports=c},function(b,e,a){function c(a,b,e,r,q){if(e===r)return!0;a=a||{};var g,p=-1,v=0,n,h=e+1,k,l,t;g=b[e];if(null===g)return d;a:do{if("object"!==typeof g)e=g,l=void 0,k=!1;else if(f(g)){if(void 0!==t)break a;p=0;t=g;v=g.length;if(0===v)break a;g=t[p];continue a}else{l=g.to;e=g.from||0;"number"!==typeof l&&(l=e+(g.length||0)-1);if(0>l-e)break a;k=!0}do h===r?a[e]=q:(g=a[e],(n=c(g,b,h,r,q))?g||(a[e]=n):a[e]=q);while(k&&++e<=l);if(++p===v)break a;g=t[p]}while(1);return a}var f=Array.isArray,
d=a(8);b.exports=function(a,b){return a.reduce(function(a,b){return c(a,b,0,b.length,null)},b||{})}},function(b,e,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new d(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new r;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={},this._seed.__proto__=
g.prototype);this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(94),d=a(68),g=a(3),y=a(67),p=a(98),r=a(56),q=a(36);a(9);var m=a(6),u=a(57),v=a(10),n=a(58),h=a(19),k=a(18),l=a(24),t=a(78),z=a(25);b.exports=c;c.prototype.constructor=c;c.prototype.get=
function(){var a=this._seed;a||(a={},a.__proto__=g.prototype);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("get",this,c))._toJSON(a,[])};c.prototype.set=function(){var a={};a.__proto__=g.prototype;for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("set",this,c))._toJSON(a,[])};c.prototype.preload=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("get",this,b))._toJSON(null,[])};c.prototype.call=
function(){var a={};a.__proto__=g.prototype;for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("call",this,c))._toJSON(a,[])};c.prototype.invalidate=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("invalidate",this,b))._toJSON(null,null).then()};c.prototype.deref=a(87);c.prototype._hasValidParentReference=a(86);c.prototype.getValue=function(a){return(new f("get",this,[a]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var d=
-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var d=-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=
function(a){var b=this._root,c=b.cache;if(a!==c){var d={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof c&&(b.expired=[],b["\u001ef_head"]=void 0,b["\u001ef_tail"]=void 0,this._recycleJSON&&(this._seed={},this._seed.__proto__=g.prototype));var f,e;n(a)?f=k(d,[a]):u(a)?f=h(d,[a]):m(a)&&(f=h(d,[{json:a}]));f&&(f[0].length&&l(d,f[0],null,!1,!1),f[2]&&(e=b.onChange)&&e.call(b.topLevelModel))}else"undefined"===typeof c&&(this._root.cache=
{});return this};c.prototype.getCache=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(0===b.length)return t(this,this._root.cache);a={};a.__proto__=g.prototype;a=z({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},b,a).data;a.paths=q(b);return a};c.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&
(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=new c(this);if(a)for(var d in a){var g=a[d];"delete"===g?delete b[d]:"_path"===d?(b[d]=g,!1===a.hasOwnProperty("_node")&&delete b._node):b[d]=g}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new p(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new p(1);return this._clone({_scheduler:b})};c.prototype.unbatch=
function(){return this._clone({_scheduler:new r})};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new y(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=
function(){return this._clone({_source:"delete"})};c.prototype.inspect=function(){return"{ v: "+this.getVersion()+" p: ["+this._path.join(", ")+"] }"};c.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=v(this._root.cache,a);return(a&&a["\u001ef_abs_path"]||[]).slice(0)};c.prototype._getVersion=
a(79);c.prototype._getPathValuesAsPathMap=l;c.prototype._getPathValuesAsJSONG=z;c.prototype._setPathValues=a(30);c.prototype._setPathMaps=a(19);c.prototype._setJSONGs=a(18);c.prototype._setCache=a(19);c.prototype._invalidatePathValues=a(28);c.prototype._invalidatePathMaps=a(47)},function(b,e){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};
a.prototype.call=function(a,b,d,g){return this._model.call.apply(this._model,[a,b,d].concat(g))._toJSONG()};b.exports=a},function(b,e,a){function c(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&
(this.comparator=a.comparator);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(95),d=a(32);c.comparator=c.prototype.comparator=function(a,b){var c=a&&a.$type,g=b&&b.$type;
return c?g?!0===d(b)<d(a)?!0:!(c!==g||a.value!==b.value||a.$expires!==b.$expires):a.value===b:g?!1:a===b};b.exports=c},function(b,e,a){var c=a(24),f=a(25);b.exports={json:function(a,b,f,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};var g=[].concat(b[1]||[]),m=[].concat(b[2]||[]),p=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&p&&p.length&&(d=c(a,p,f,e,!0).hasValue);return{data:f,missing:!0,hasValue:d,fragments:[b,g,m,p]}},jsonGraph:function(a,b,c,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};
var g=[].concat(b[1]||[]),m=[].concat(b[2]||[]),p=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&p&&p.length&&(d=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},p,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:d,fragments:[b,g,m,p]}}}},function(b,e,a){b.exports={json:a(40),jsonGraph:a(43)}},function(b,e,a){var c=a(1);b.exports=function(a,b,g,e,p,r){var d=-1;b+=!!p;p=Array(b);for(a=r?c(a):a.value;++d<b;)p[d]=e[d];(g.errors||
(g.errors=[])).push({path:p,value:a})}},function(b,e,a){function c(a,b,k,e,m,G,C,D,F,B,A,E,I,L,M,P,U,N,H,K,Q){var l,t,w=A;if(void 0===b||void 0!==(l=b.$type)||void 0===e)return g[1]=H&&void 0===b,g[0]=q(b,l,k,e,m,G,C,D,m,F,B,w,I,L,M,P,U,N,H,K,y,f,v),g;var x,z,T;l="";var S,J,ca;A=e.$keys;var ea=m+1,Z,aa,da,ia,ba,fa=B+1,Y,ga;Q&&E&&(ga=E.value,Y=E["\u001ef_abs_path"]);if(!k||"object"!==typeof k)k=void 0;else if(x=k["\u001ef_meta"]){T=b["\u001ef_abs_path"];z=x.abs_path;P||k instanceof p||(k.__proto__=
{},k.__proto__["\u001ef_meta"]=x,k.__proto__.__proto__=p.prototype);if(!d(T,z)){x.$code="";x.status="pending";x.abs_path=T;x.version=b["\u001ef_version"];ga&&(x.deref_to=ga);Y&&(x.deref_from=Y);if(z=x.keys)for(J in x.keys=Object.create(null),z)z[J]&&delete k[J];g[0]=k;g[1]=!0;return g}if(x.version===b["\u001ef_version"]&&x.$code===e.$code)return C.hasValue=!0,g[0]=k,g[1]=!1,g;z=x.keys;x.abs_path=T;x.version=b["\u001ef_version"];ga&&(x.deref_to=ga);Y&&(x.deref_from=Y)}T=Object.create(null);var ka=
-1,ma=A.length,ha,la,ja=!1;a:for(;++ka<ma;)if(w=A[ka],ha=e[ka],null===w){if(void 0!==ha)throw new n;l=""+h(""+l+"null")}else{if("object"!==typeof w)J=w,Z=void 0,ca=!1,la=J;else{Z=w.to;J=w.from||0;"number"!==typeof Z&&(Z=J+(w.length||0)-1);if(0>Z-J)break a;ca=!0;la="["+J+".."+Z+"]"}do{w=!1;aa=k&&k[J];ba=F;ia=fa;da=E;S=b[J];D[m]=J;F[B]=J;if(void 0===ha){if(c(a,S,aa,ha,ea,G,C,D,ba,ia,w,da,I,L,M,P,U,N,H,K,Q),!0===g[1]&&(ja=!0),void 0===(aa=g[0])&&!N){k&&k.hasOwnProperty(J)&&delete k[J];continue}}else if(S&&
"ref"===S.$type&&!r(S,M)&&(t=u(a,S,I,M),S=t[0],w=!0,ba=t[1],da=t[2],ia=ba.length,t[0]=t[1]=t[2]=void 0),c(a,S,aa,ha,ea,G,C,D,ba,ia,w,da,I,L,M,P,U,N,H,K,Q),!0===g[1]&&(ja=!0),void 0===(aa=g[0])){k&&k.hasOwnProperty(J)&&delete k[J];continue}void 0===x&&(x={},x.version=b["\u001ef_version"],x.abs_path=b["\u001ef_abs_path"],ga&&(x.deref_to=ga),Y&&(x.deref_from=Y),k={},k["\u001ef_meta"]=x,k.__proto__=p.prototype,P?k=P(k):(w=k,k={},k.__proto__=w));T[J]=!0;z&&J in z&&(z[J]=!1);k[J]=aa}while(ca&&++J<=Z);l=
""+h(""+l+(ja?"":la)+(ha?ha.$code:""))}if(x&&(x.$code=l,x.keys=T,x.status=ja&&"pending"||"resolved",z))for(J in z)z[J]&&delete k[J];g[0]=k;g[1]=ja;return g}function f(a,b,c,d,g,e,h,n,p,q,v,r,u,y,M){if(q)return y(v,a,b,b,r,u,M,c,d,h,n,e,p,f);a=a?k(a):[[]];var l=d.slice(0,g);return a.forEach(function(a){g=b+a.length;return m(l.concat(a),b,c,d,g,e,h,n,p,!1,v,r,u,y,M)})}function d(a,b){if(a===b)return!0;var c=a.length;if(c!==b.length)return!1;for(;~--c;)if(a[c]!==b[c])return!1;return!0}var g=Array(2),
y=a(42),p=a(3),r=a(0),q=a(16),m=a(27),u=a(41),v=a(77),n=a(4);a(12);var h=a(22),k=a(21);b.exports=c},function(b,e,a){function c(a,b,e,t,z,x,w,G,C,D,F,B,A,E,I,L,M,P,U,N,H,K){var k,h;if(void 0===b||(k=b.$type)||z===C)return f[1]=N&&void 0===b,f[0]=r(b,k,e,t,z,x,w,G,C,D,F,B,E,I,L,M,P,U,N,H,g,y,m),f;var l,O,V,W=z+1,T,S,J,ca,ea=-1,Z=0,aa,da,ia=F+1,ba,fa;B=t[z];if(null===B){if(W<C)throw new v;f[0]=e;f[1]=!1;return f}K&&A&&(fa=A.value,ba=A["\u001ef_abs_path"]);if(!e||"object"!==typeof e)e=void 0;else if(l=
e["\u001ef_meta"])l.version=b["\u001ef_version"],l.abs_path=b["\u001ef_abs_path"],fa&&(l.deref_to=fa),ba&&(l.deref_from=ba);var Y=!1;a:do{if("object"!==typeof B)k=B,T=void 0,V=!1;else if(d(B)){if(void 0!==S)throw new n(t,S);ea=0;S=B;Z=B.length;if(0===Z)break a;B=S[ea];continue a}else{T=B.to;k=B.from||0;"number"!==typeof T&&(T=k+(B.length||0)-1);if(0>T-k)break a;V=!0}do{B=!1;J=e&&e[k];da=D;aa=ia;ca=A;O=b[k];G[z]=k;D[F]=k;if(W===C){if(c(a,O,J,t,W,x,w,G,C,da,aa,B,ca,E,I,L,M,P,U,N,H,K),!0===f[1]&&(Y=
!0),void 0===(J=f[0])&&!U)continue}else if(O&&"ref"===O.$type&&!q(O,L)&&(h=u(a,O,E,L),O=h[0],B=!0,da=h[1],ca=h[2],aa=da.length,h[0]=h[1]=h[2]=void 0),c(a,O,J,t,W,x,w,G,C,da,aa,B,ca,E,I,L,M,P,U,N,H,K),!0===f[1]&&(Y=!0),void 0===(J=f[0]))continue;void 0===l&&(l={},l.version=b["\u001ef_version"],l.abs_path=b["\u001ef_abs_path"],fa&&(l.deref_to=fa),ba&&(l.deref_from=ba),e={},e["\u001ef_meta"]=l,e.__proto__=p.prototype,M&&(e=M(e)));e[k]=J}while(V&&++k<=T);if(++ea===Z)break a;B=S[ea]}while(1);l&&(l.status=
Y&&"pending"||"resolved");f[0]=e;f[1]=Y;return f}var f=Array(2),d=Array.isArray,g=a(42),y=a(27),p=a(3),r=a(16),q=a(0),m=a(44),u=a(41),v=a(4),n=a(12);b.exports=c},function(b,e,a){var c=Array(2),f=a(1),d=a(26),g=a(13),y=a(0),p=a(7),r=a(52);b.exports=function(a,b,e,v,n){g(e,b);var h,k,l=0,t=a,m=b.value,q=m,u=m.length;do{if(0===l&&void 0!==(h=b["\u001ef_context"]))t=h,l=u;else if(k=m[l++],void 0===(t=t[k]))break;if(l===u){k=t.$type;if(void 0!==k&&y(t,n))break;else{if(t===b)throw new r(m);t!==h&&p(b,t)}if("ref"===
k)g(e,t),v&&d(f(t),m,u,v),l=0,b=t,t=a,m=q=b.value,u=m.length;else break}else if(void 0!==t.$type)break}while(1);l<u&&void 0!==t&&(u=l);l=-1;for(m=Array(u);++l<u;)m[l]=q[l];c[0]=t;c[1]=m;return c}},function(b,e,a){var c=a(1),f=a(26);b.exports=function(a,b,e,p,r,q,m,u,v,n,h){h=a.value;if(n||"ref"===b||"error"===b||!a["\u001ef_wrapped_value"]||"object"===typeof h)h=c(a);r.hasValue=!0;f(h,m,u,p);(p.paths||(p.paths=[])).push(q.slice(0,e+!!v));return h}},function(b,e,a){function c(a,b,k,e,u,G,C,D,F,B,A,
E,I,L,M,P,U,N){var l,t;if(void 0===b||(l=b.$type)||e===D)return q(b,l,u,k,e,u,G,C,D,F,B,A,E,I,L,void 0,M,P,U,N,y,f,m);var x,w,z=e+1,O,V,W=-1,T=0,S,J,ca=B+1;A=k[e];if(null===A){if(z<D)throw new n;}else{a:do{if("object"!==typeof A)l=A,O=void 0,w=!1;else if(d(A)){if(void 0!==V)throw new h(k,V);W=0;V=A;T=A.length;if(0===T)break a;A=V[W];continue a}else{O=A.to;l=A.from||0;"number"!==typeof O&&(O=l+(A.length||0)-1);if(0>O-l)break a;w=!0}do A=!1,J=F,S=ca,x=b[l],C[e]=l,F[B]=l,x&&z<D&&"ref"===x.$type&&!r(x,
L)&&(u&&p(g(x),F,S,u),t=v(a,x,E,u,L),x=t[0],A=!0,J=t[1],S=J.length,t[0]=t[1]=void 0),c(a,x,k,z,u,G,C,D,J,S,A,E,I,L,M,P,U,N);while(w&&++l<=O);if(++W===T)break a;A=V[W]}while(1)}}function f(a,b,c,d,e,f,h,n,m,q,v,r,y,L,M){var l,t;v&&q&&((v.paths||(v.paths=[])).push((t=0===e-b)&&d.slice(0,b+!!f)||d.slice(0,b).concat(a.slice(b,e+!!f))),l=p(t&&g(k)||void 0,h,n,v,!t));return u(a,b,c,d,e,f,h,n,m,!t&&q,l,r,!0,L,M)}var d=Array.isArray,g=a(1),y=a(75),p=a(26),r=a(0),q=a(16),m=a(44),u=a(27),v=a(74),n=a(4),h=a(12),
k=a(8);b.exports=c},function(b,e,a){function c(a,b,e,u,v,n,h,k,l,t,z,x,w,G){if(void 0===b)return d(void 0,void 0,a,b,e,void 0,k,l,e,t,z,x,h,void 0,!1,v,n,!1,w,!1,void 0,G,void 0),n?f(p):void 0;var m,q,r,B,A=b.$keys,E=e+1,I,L=z+1;a&&"object"===typeof a?((m=a["\u001ef_meta"])?q=m.keys:a["\u001ef_meta"]=m={},m.$code="",m.status="resolved",m.version=h.version,m.abs_path=t.slice(0,z)):(a={},a.__proto__=g.prototype,a["\u001ef_meta"]=m={},m.$code="",m.status="resolved",m.version=h.version,m.abs_path=t.slice(0,
z),v&&(a=v(a)));u=Object.create(null);var M,P=-1,U=A.length;a:for(;++P<U;)if(B=A[P],M=b[P],null===B){if(void 0!==M)throw new y;}else{if("object"!==typeof B)r=B,I=void 0,B=!1;else{I=B.to;r=B.from||0;"number"!==typeof I&&(I=r+(B.length||0)-1);if(0>I-r)break a;B=!0}do l[e]=r,t[z]=r,u[r]=!0,q&&r in q&&(q[r]=!1),a[r]=c(a[r],M,E,E,v,n,h,k,l,t,L,x,w,G);while(B&&++r<=I)}m.keys=u;if(q)for(r in q)q[r]&&delete a[r];return a}var f=a(1),d=a(16),g=a(3),y=a(4);a(12);var p=a(8);b.exports=c},function(b,e,a){function c(a,
b,e,r){var g,m;if(!a||"object"!==typeof a)return a;if(g=a.$type){if(void 0===(m=a.value))r?m={$type:"atom"}:a["\u001ef_wrapped_value"]&&(m=f(a));else if(e||"ref"===g||"error"===g||!a["\u001ef_wrapped_value"]||"object"===typeof m)m=f(a);return m}g=Object.keys(a);for(var p=g.length,v=-1;++v<p;){var n=g[v];"$size"===n||d(n)||void 0===(m=c(a[n],b&&b[n],e,r))||(void 0===b&&(b={}),b[n]=m)}return b}var f=a(1),d=a(20);b.exports=function(a,b){return c(b,{},a._boxed,a._materialized)}},function(b,e,a){var c=
a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001ef_version"];return null==a?-1:a}},function(b,e,a){function c(a,c,e,r,q){c=d(c);e=!1;r=-1;for(var g=c.length;++r<g;){var p=c[r],v=p.inputType,p=p.arguments;0<p.length&&("PathValues"===v&&(p=p.map(f)),(0,b.exports["invalidate"+v])(a,p,q)&&(e=!0))}e&&(q=a._root.onChange)&&q.call(a._root.topLevelModel);return{}}function f(a){return a.path||a.paths}var d=a(45);b.exports={json:c,jsonGraph:c,invalidatePathMaps:a(47),invalidatePathValues:a(28)}},function(b,
e,a){var c=a(51),f=a(0),d=a(46),g=a(2),y=a(50),p=a(9),r=a(49),q=a(32),m=a(11);b.exports=function(a,b,e,h,k,l,t,z,x,w,G,C){var n,u,v,A,E,I;if(b===e){if(void 0===e)return e;if(null===e)return b=c(e,void 0,e),a=m(a,-b.$size,x,t),b=d(b,a,h,void 0,l);if((v=!(!b||"object"!==typeof b))&&void 0===(n=b.$type))return void 0===b["\u001ef_parent"]&&d(b,a,h,t,l),b}else if(v=!(!b||"object"!==typeof b))n=b.$type;if("ref"!==n){if(A=!(!e||"object"!==typeof e))u=e.$type;if(v&&!n&&(null==e||A&&!u))return b}else{if(null==
e){if(f(b,C)){g(b,z,x);return}return b}if(A=!(!e||"object"!==typeof e))if(u=e.$type,"ref"===u)if(b===e){if(null!=b["\u001ef_parent"])return b}else if(E=b.$timestamp,I=e.$timestamp,!f(b,C)&&!f(e,C)&&I<E)return}if(n&&A&&!u)return d(y(b,e,a,h,x,t),a,h,void 0,l);u||!A?("error"===u&&G&&(e=G(r(k,h),e)),u&&b===e?b["\u001ef_parent"]||(b=c(b,n,b.value),a=m(a,-b.$size,x,t),b=d(b,a,h,t,l)):(k=!0,n||u?v&&f(b,C)||(k=w?!(3>w.length?w(b,e):w(b,e,l.slice(0,l.index))):!1===q(e)<q(b)):k=!0,k&&(w=p(b)-p(e=c(e,u,u?e.value:
e)),b=y(b,e,a,h,x,t),a=m(a,w,x,t),b=d(b,a,h,t,l))),f(b,!0)&&g(b,z,x)):null==b&&(b=d(e,a,h,void 0,l));return b}},function(b,e,a){function c(a,c,e){var g=!1,m=-1,n=c.length,h=[],k=[],l=a._root,p=l.errorSelector;e=e&&!a._source;for(l=a._source?null:l.comparator;++m<n;){var q=c[m],r=q.inputType,q=q.arguments;if(0<q.length){var w=(0,b.exports["set"+r])(a,q,p,l,e),g=g||w[2];k.push.apply(k,w[1]);"PathValues"===r?h.push.apply(h,q.map(f)):"JSONGraphs"===r?h.push.apply(h,d(q,f)):h.push.apply(h,w[0])}}return{changed:g,
requested:h,optimized:k}}function f(a){return a.path||a.paths}function d(a,b){for(var c=-1,d=-1,e=a.length,g=[];++d<e;)for(var h=b(a[d],d,a),k=-1,f=h.length;++k<f;)g[++c]=h[k];return g}var g=a(24),y=a(25),p=a(45);b.exports={json:function(a,b,d,e,f){var n,h,k,l,m,q,r=p(b);n=c(a,r,f);if((b=n.requested).length){if(!(l=n.changed)||e)h=g(a,b,d,e,f);l&&(k=y({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},n.optimized,{},e,f),q=k.data,m=q.paths,k=k.requested,(e=
a._root.onChange)&&e.call(a._root.topLevelModel))}return{args:r,data:d,missing:m,relative:b,fragments:q,requested:k,error:h&&h.error,errors:h&&h.errors,hasValue:h&&h.hasValue}},jsonGraph:function(a,b,d,e,g){var f,h,k,l,m,q,r=p(b);f=c(a,r,g);(b=f.requested).length&&(e||(k=f.changed))&&(h=y({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},f.optimized,d,e,g),m=h.data,l=m.paths,q=h.requested,k&&(e=a._root.onChange)&&e.call(a._root.topLevelModel));return{args:r,
data:d,missing:l,relative:b,fragments:m,requested:q,error:h&&h.error,hasValue:h&&h.hasValue}},setPathMaps:a(19),setPathValues:a(30),setJSONGraphs:a(18)}},function(b,e,a){b.exports=function(a,b){for(var c=a["\u001ef_refs_length"]||0,e=b["\u001ef_refs_length"]||0,f=-1;++f<c;){var p=a["\u001ef_ref"+f];void 0!==p&&(p["\u001ef_context"]=b,b["\u001ef_ref"+(e+f)]=p,a["\u001ef_ref"+f]=void 0)}b["\u001ef_refs_length"]=c+e;a["\u001ef_refs_length"]=void 0;return b}},function(b,e,a){b.exports=function(a){for(var b=
-1,c=a["\u001ef_refs_length"]||0;++b<c;){var e=a["\u001ef_ref"+b];null!=e&&(e["\u001ef_context"]=e["\u001ef_ref_index"]=a["\u001ef_ref"+b]=void 0)}a["\u001ef_refs_length"]=void 0;return a}},function(b,e,a){b.exports=function(a){var b=a["\u001ef_context"];if(b){for(var c=(a["\u001ef_ref_index"]||0)-1,e=(b["\u001ef_refs_length"]||0)-1;++c<=e;)b["\u001ef_ref"+c]=b["\u001ef_ref"+(c+1)];b["\u001ef_refs_length"]=e;a["\u001ef_ref_index"]=a["\u001ef_context"]=void 0}return a}},function(b,e,a){b.exports=function(){var a=
this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001ef_parent"]||a&&a["\u001ef_invalidated"]?!1:!0:!0}},function(b,e,a){var c=a(3),f=a(10);a(89);b.exports=function(a){var b,d;if(!a||"object"!==typeof a||!(d=a["\u001ef_meta"])||"object"!==typeof d)return null;var e=this._root.cache,r=this._recycleJSON,q=d.abs_path,m,u;if(!q)return r&&(b={json:a},b.__proto__=c.prototype),this._clone({_node:void 0,_seed:b});if(0===q.length)return r&&(b={json:a},b.__proto__=
c.prototype),this._clone({_node:e,_path:q,_referenceContainer:!0,_seed:b});var v=d.deref_to,n=d.deref_from,h=f(e,q),k="e";if(n){k=!1;d=-1;u=n.length;for(m=e;++d<u&&(m=m[n[d]],m&&!m.$type););if(v&&m&&"ref"===m.$type)for(k=!0,u=v.length,e=m.value,d=0;d<u;++d)if(e[d]!==v[d]){h=void 0;k=!1;break}}k?"e"===k&&(m=!0):m=!1;r&&(b={json:a},b.__proto__=c.prototype);return this._clone({_seed:b,_node:h,_path:q,_referenceContainer:m})}},function(b,e,a){e=a(5);b.exports=e("BoundJSONGraphModelError",function(){this.message=
"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,e,a){e=a(5);b.exports=e("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,e,a){e=a(5);b.exports=e("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},
function(b,e,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}e=a(5);b.exports=e("MaxRetryExceededError",function(a,b,e,y){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(e&&"relative: [\n\t"+c(e)+"\n]\n"||"")+(y&&"optimized: [\n\t"+c(y)+"\n]\n"||"")})},function(b,e){b.exports=String.fromCharCode(30)+"f_"},function(b,e,a){var c=a(11);b.exports=function(a,b,e,y,p,r){"number"!==typeof p&&(p=.75);for(var d,
g=y*p;p=b.pop();)e-=d=p.$size||0,c(p,d,a,r);if(e>=y){for(b=a["\u001ef_tail"];e>=g&&(p=b);)b=b["\u001ef_prev"],e-=d=p.$size||0,c(p,d,a,r);a["\u001ef_tail"]=p;null==p?a["\u001ef_head"]=void 0:p["\u001ef_next"]=void 0}}},function(b,e,a){function c(a,b,c){r.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function d(a,b,c,d,e,h){q.call(this,a);this.data=b;this.request=this.missing=
null;this.started=!1;this.retryCount=-1;this.errors=c;this.errored=!1;this.relative=null;this.hasValue=!1;this.requested=this.fragments=null;this.completed=!1;this.operation=d;this.progressive=e;this.maxRetryCount=h}function g(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=v(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(x){throw x;}finally{--c.syncRefCount}}function y(a,b){try{throw b;}catch(t){q.prototype.onError.call(a,t)}}function p(a,b){for(var c,d,e,k=Object.keys(b),h=-1,g=k.length;++h<g;)e=
k[h],"\u001ef_meta"===e?a["\u001ef_meta"]=b["\u001ef_meta"]:(d=b[e],c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:p(c,d):void 0===c&&(a[e]=d)));return a}var r=a(55),q=a(14),m=a(93),u=a(3),v=a(36),n=a(53),h=a(91);b.exports=c;c.prototype=Object.create(r.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;
a.progressive=a.progressive||this.operator.progressive;a.maxRetryCount=a.maxRetryCount||this.operator.maxRetryCount;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){void 0===a&&(a={},a.__proto__=u.prototype);return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),
this.source)};c.prototype._toJSONG=function(a,b){void 0===a&&(a={},a.__proto__=u.prototype);return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,
!0,this.operator.maxRetryCount),this.source)};f.prototype.call=function(a,b){return a.subscribe(new d(b,this.data,this.errors,this.operation,this.progressive))};d.prototype=Object.create(q.prototype);d.prototype.operations={get:a(70),set:a(82),call:a(69),invalidate:a(80)};d.prototype.next=d.prototype.onNext=function(a){if(!this.started)this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount;else if(this.destination){var b,
c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,k=this.errors,h,f=this.hasValue,m=this.operation,n=this.progressive,q=n&&d;e._recycleJSON&&"get"===this.type&&(q=!1);q&&(d={},d.__proto__=u.prototype);if(a&&a.length){h=this.operations[c][m](e,a,d,n||!e._source,-1===this.retryCount);if(h.error)return y(this,h.error);k&&h.errors&&k.push.apply(k,h.errors);if(b=h.fragments)a=h.args,this.fragments=b;this.relative=h.relative;this.requested=h.requested;this.missing=b=h.missing;this.hasValue=f||(f=
h.hasValue)}this.completed=!b||!e._source;"set"!==c&&(this.args=a,q&&(this.data=p(d,this.data)));n&&f&&d&&(d.json||d.jsonGraph)&&g(d,m,e._root,this.destination)}};d.prototype.error=d.prototype.onError=function(a){if(a instanceof n)return q.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};d.prototype.complete=d.prototype.onCompleted=function(a){if(this.destination){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});
if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&g(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?y(this,b.length&&b||a):q.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return y(this,new h(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)}};d.prototype.dispose=
d.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;q.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&m(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,e,a){function c(a){p.call(this,[]);this.modelRoot=a}function f(a,
b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var d=a(55),g=a(96),y=a(14),p=a(15),r=a(56);b.exports=c;c.prototype=Object.create(p.prototype);c.prototype.set=function(a,b,c,e){var f=this;return new d(function(d){var h=new g("set",f,a._source,new r);d=h.subscribe(new y(d,h));f.add(h);h.data=e.jsonGraph;h.requested.push(c);h.optimized.push(b);h.connect();return d})};c.prototype.call=function(a,b,c,e){var f=this;return new d(function(b){var c=new g("call",
f,a._source,new r);b=c.subscribe(new y(b,c));f.add(c);c.data=e;c.boundPath=a._path;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,h=this.scheduler,f=-1,l=b.subscriptions,q=l.length,r=new p([],a);++f<q;){var x=l[f];if("get"===x.type&&((x=x.batch(d,e,d=[],e=[]))&&r.add(x.subscribe(new y(a,x))),!e.length))break}e.length&&(x=l[f]=(new g("get",
b,c,h)).batch(d,e),r.add(x.subscribe(new y(a,x))),x.connect());return r}},function(b,e,a){function c(a,b,c,d){g.call(this,[],b);this.tree={};this.paths=[];this.type=a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=m(this.tree=v(this.optimized.reduce(function(a,b){return u(b,a)},{})));try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,
jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(l){this.disposable={},g.prototype.onError.call(this,new y(l))}}function d(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,h,f,g=-1,k=b.length;a:for(;++g<k;)if(f=b[g],f.length>c){h=0;do if(f[h]!==a[h])continue a;while(++h<c);d[++e]=f.slice(c)}return d}var g=a(97);a(14);a(15);var y=a(53),p=a(18),r=a(30),q=a(28),m=a(39),u=a(37),v=a(38),n=a(63);b.exports=c;
c.prototype=Object.create(g.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));var c=!1,e=a.jsonGraph,f=this.boundPath,b=b.modelRoot,h=a.invalidated,g=a.paths||this.paths,m=this.requested.slice(0);a=this.observers.slice(0);var n=b.onChange;h&&h.length&&(c=q({_root:b,_path:[]},h,!1));g&&g.length&&e&&"object"===typeof e&&(e=p({_root:b},[{paths:g,jsonGraph:e}],b.errorSelector,b.comparator,!1),g=e[0],c=c||e[2]);c&&
n&&n.call(b.topLevelModel);a.forEach(function(a,b){a.onNext({type:"get",paths:m[b]||d(f,g)})})}};c.prototype.error=c.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=m(v(this.requested.reduce(function(a,b){return u(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&r({_root:b,_path:[]},c,b.errorSelector,
b.comparator,!1);g.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});g.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.tree={};this.paths=
this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();g.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};c.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,
h=-1,k=-1,l=-1,m=-1,p=-1,q=b.length,r=a.length-1;++h<q;){var t=b[h],u=t.length,v=g[u];v&&n(v,t,0,u)?(f[++m]=t,p<r&&(e[++p]=a[h<r?h:r])):(d[++k]=t,l<r&&(c[++l]=a[h<r?h:r]))}return~m?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,e,a){function c(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),d=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.onError=function(a){var b=this.observers.slice(0);
this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new d([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=[]}},function(b,e){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new c(setTimeout(a,
this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,e,a){var c=Array.isArray,f=a(20);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=a[d])}return b}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,e,a){var c=a(6);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,
e,a){var c=Array.isArray,f=a(6);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,e,a){b.exports=a(104)},function(b,e,a){(function(b,f){Object.defineProperty(e,"__esModule",{value:!0});var c=a(105),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);e["default"]=b}).call(e,a(35),a(106)(b))},function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]=
function(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,e){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,e,a){b.exports=a(61)}])});
//# sourceMappingURL=falcor.all.min.js.map
