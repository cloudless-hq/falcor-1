/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("falcor",[],e):"object"===typeof exports?exports.falcor=e():b.falcor=e()})(this,function(){return function(b){function e(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,e);f.l=!0;return f.exports}var a={};e.m=b;e.c=a;e.i=function(a){return a};e.d=function(a,f,d){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:d})};
e.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};e.d(c,"a",c);return c};e.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};e.p="";return e(e.s=107)}([function(b,e,a){var c=a(59),f=a(34),d=a(60);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===d?!1:a===f?b:a<c()}},function(b,e,a){var c=a(20);b.exports=function(a){for(var d,g=Object.keys(a),f={},m=-1,r=g.length;++m<r;)d=g[m],"$size"===d||c(d)||(f[d]=a[d]);return f}},function(b,
e,a){var c=a(54);b.exports=function(a,d,g){a["\u001ef_invalidated"]||(a["\u001ef_invalidated"]=!0,d.push(a),c(g,a));return a}},function(b,e,a){(function(a){function c(a){a?(this["\u001ef_meta"]=a["\u001ef_meta"])||(this["\u001ef_meta"]=a):this["\u001ef_meta"]={}}function d(a){return function(){var d,c=this.length;d=c;var g;if("number"!==(g=typeof c)&&(!c||"object"!==g||"atom"!==c.$type||"number"!==typeof(d=c.value))||0>d||d!==(d|0)){if("pending"===this.$__status)return[];throw new RangeError("Invalid FalcorJSON length");
}this.length=d;d=a.apply(this,arguments);this.length=c;return d}}function g(d){var c=d,g=typeof c,f=arguments.length;if(0===f)c=this;else if("string"!==g){if(!c||"object"!==g)return c}else{if(1!==f)return c;c=this}return c===a?void 0:c}function w(){return p(g.apply(this,arguments),w)}function m(a,d){return JSON.stringify(p(g.call(this,this),p,!0===a,!1,!0===d))}function r(a){var d=g.apply(this,arguments),c,f,n=0,m=p(d,r,!0,!0);d&&(c=d["\u001ef_meta"])&&(n=c.version);m&&"object"===typeof m&&(f=m["\u001ef_meta"])&&
(f.version=n);return m}function p(a,d,g,f,p){if(!a||"object"!==typeof a)return a;var h,k,l,n,m,t;if(v(a))t=a;else{h=-1;n=Object.keys(a);k=n.length;t={};f&&(t.__proto__=c.prototype);if(g&&(l=a["\u001ef_meta"])){var r=l.$code,b=l.status,w=l.abs_path,u=l.deref_to,q=l.deref_from;l={};r&&(l.$code=r);w&&(l.abs_path=w);u&&(l.deref_to=u);q&&(l.deref_from=q);p&&b&&(l.status=b);t["\u001ef_meta"]=l;f&&(l={},l.__proto__=t,t=l)}for(;++h<k;)"\u001ef_meta"!==(m=n[h])&&(t[m]=d(a[m],d,g,f,p))}return t}var q={length:!0,
toString:!0,constructor:!0,toLocaleString:!0},u={toJSON:{enumerable:!1,value:w},toProps:{enumerable:!1,value:r},toString:{enumerable:!1,value:m},toLocaleString:{enumerable:!1,value:m},$__hash:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.$code||""}},$__path:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.abs_path||[]}},$__status:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.status||"resolved"}},$__version:{enumerable:!1,get:function(){var a=
this["\u001ef_meta"];return a&&a.version||0}}};Object.defineProperties(c.prototype,Object.getOwnPropertyNames(Array.prototype).reduce(function(a,c){if(!q.hasOwnProperty(c)){var g=Array.prototype[c];"function"===typeof g&&(a[c]={value:d(g),writable:!0,enumerable:!1})}return a},u));var v=Array.isArray;b.exports=c}).call(e,a(35))},function(b,e,a){e=a(5);b.exports=e("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,e){b.exports=function(a,c){function f(a){this.message=
a;c&&c.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}f.prototype=Object.create(Error.prototype);f.prototype.name=a;f.prototype.constructor=f;f.is=function(d){return d.name===a};return f}},function(b,e){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,e,a){b.exports=function(a,f){var d=f["\u001ef_refs_length"]||0;f["\u001ef_ref"+d]=a;f["\u001ef_refs_length"]=d+1;a["\u001ef_ref_index"]=d;a["\u001ef_context"]=
f}},function(b,e){b.exports={$type:"atom"}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&a.$size||0}},function(b,e,a){function c(a,d){var g=a,f,m=0,r=d.length;if(0<r){do for(g=g[d[m]];g&&"ref"===(f=g.$type);)g=c(a,g.value);while(++m<r&&g&&!f)}return g}b.exports=c},function(b,e,a){var c=a(29),f=a(31);b.exports=function(a,g,b,m){var d=a,p;do 0<(d.$size=(d.$size||0)-g)?(p=d["\u001ef_parent"])?d["\u001ef_version"]!==m&&f(d,m):d["\u001ef_version"]=m:(p=d["\u001ef_parent"])&&c(d,p,d["\u001ef_key"],
b,m);while(d=p);return a}},function(b,e,a){e=a(5);b.exports=e("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,e,a){var c=a(60);b.exports=function(a,d){if(d.$expires!==c){var g=a["\u001ef_head"];if(!g)a["\u001ef_head"]=a["\u001ef_tail"]=d;else if(g!==d){var f=d["\u001ef_prev"],m=d["\u001ef_next"];m&&(m["\u001ef_prev"]=f);f&&(f["\u001ef_next"]=m);d["\u001ef_prev"]=
void 0;a["\u001ef_head"]=d;d["\u001ef_next"]=g;g["\u001ef_prev"]=d;d===a["\u001ef_tail"]&&(a["\u001ef_tail"]=f)}}}},function(b,e,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination={error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var d=this.destination;
if(d)if(d.onNext)d.onNext(a);else d.next&&d.next(a)};c.prototype.error=c.prototype.onError=function(a){var d=!1,c=this.destination;c&&(c.onError?(d=!0,c.onError(a)):c.error&&(d=!0,c.error(a)),this.dispose());if(!d)throw a;};c.prototype.complete=c.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,
e){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,e,a){var c=a(0),f=a(2),d=a(13);b.exports=
function(a,b,m,r,p,q,u,v,n,k,h,l,t,z,x,y,D,B,e,E,C,A,F){var g=e;if(b)if(c(a,x))a["\u001ef_invalidated"]||f(a,z,t);else if(d(t,a),void 0===a.value)g=!1,e=B;else{if(q)return l&&(v[p]=null),C(a,b,p,q,u,v,k,h,l,D,B,E);return}if(B)q&&(u.hasValue=!0);else if(!e)return;return A(r,p,u,v,n,l,k,h,g,B,m,y,D,F,t)}},function(b,e,a){var c=a(10);b.exports=function(a,d){d=d||a._path;var g=a._node;if(!g||void 0===g["\u001ef_parent"]||g["\u001ef_invalidated"])a._node=null,0===d.length?g=a._root.cache:(g=c(a._root.cache,
d),d===a._path&&(a._node=g));return g}},function(b,e,a){function c(a,g,n,k,h,l,p,b,x,y,m,r,w,e,C,A,F,I){var t={},v=g<a.length-1,z=a[g],u=q(z,t),D=r.index;do{m.depth=g;f(n,k,h,l,p,b,u,v,!1,m,r,w,e,C,A,F,I);m[g]=u;m.index=g;var B=d[0],G=d[1],E=d[4];E[E.index++]=u;B&&(v?c(a,g+1,n,G,B,l,d[3],d[2],x,y,m,E,w,e,C,A,F,I):(x.push(m.slice(0,m.index+1)),y.push(E.slice(0,E.index))));u=q(z,t);if(t.done)break;r.index=D}while(1)}function f(a,c,n,k,h,l,b,z,x,y,q,B,e,E,C,A,F){var t=n;for(n=t.$type;"ref"===n;){a:{h=
a;q=k;n=l;l=y;c=B;x=e;var v=E,u=C,D=A,G=F,O,H=t,K=H.value,Q=K.slice(0);if(g(H,G))w(H,x,v),H=void 0,t=h,O=q,Q.index=K.length;else{var R=0,X=H,P=K.length-1,t=H=h;O=n=q;do{var V=K[R],W=R<P;Q.index=R;f(h,t,H,q,O,n,V,W,!0,l,Q,c,x,v,u,D,G);H=d[0];Q=d[4];if(!H||"object"!==typeof H){Q.index=R;break a}t=d[1];n=d[2];O=d[3]}while(R++<P);Q.index=R;X["\u001ef_context"]!==H&&m(X,H)}d[0]=H;d[1]=t;d[2]=n;d[3]=O;d[4]=Q}t=d[0];if(!t||"object"!==typeof t)return;c=d[1];l=d[2];h=d[3];q=d[4];n=t.$type}if(void 0===n){if(null==
b){if(z)throw new p;t&&(b=t["\u001ef_key"])}else c=t,h=l,t=c[b],l=h&&h[b];t=r(c,t,l,b,y,q,B,e,E,C,A,F)}d[0]=t;d[1]=c;d[2]=l;d[3]=h;d[4]=q}var d=Array(5),g=a(0),w=a(2),m=a(7),r=a(81),p=a(4),q=a(23);b.exports=function(a,g,f,k,h){a=a._root;for(var l=a.expired,n=a.version+1,p=a.cache,x=[],b=[],m=[],r=[],v=-1,q=g.length;++v<q;)for(var u=g[v],w=u.paths,u=u.jsonGraph,e=-1,I=w.length;++e<I;){var M=w[e];b.index=0;c(M,0,p,p,p,u,u,u,m,r,x,b,n,l,a,k,f,h)}d[0]=void 0;d[1]=void 0;d[2]=void 0;d[3]=void 0;d[4]=void 0;
return p["\u001ef_version"]===n?(a.version=n,[m,r,!0]):[m,r,!1]}},function(b,e,a){function c(a,k,h,l,p,m,x,b,r,v,u,w,e,A,F){var n;if(a&&"object"===typeof a&&!a.$type){n=[];var t=0;g(a)&&(n[t++]="length");for(var y in a)q(y)||(n[t++]=y)}else n=void 0;if(n&&n.length){t=0;y=n.length;var z=r.index;do{var D=n[t],B=a[D],G=!(!B||"object"!==typeof B)&&!B.$type;b.depth=k;f(h,l,p,D,B,G,!1,b,r,v,u,w,e,A,F);b[k]=D;b.index=k;var C=d[0],E=d[1],R=d[2];R[R.index++]=D;C&&(G?c(B,k+1,h,E,C,m,x,b,R,v,u,w,e,A,F):(m.push(b.slice(0,
b.index+1)),x.push(R.slice(0,R.index))));if(++t>=y)break;r.index=z}while(1)}}function f(a,c,g,l,b,p,x,y,q,e,G,E,C,A,F){var h=g;for(g=h.$type;"ref"===g;){a:{q=b;g=a;c=y;var k=e,n=G,t=E,z=C,D=A,B=F,K=h,Q=K.value,R=Q.slice(0);if(w(K,B))m(K,n,t),K=void 0,h=g,R.index=Q.length;else{var X=K,K=K["\u001ef_context"];if(null!=K)h=K["\u001ef_parent"]||g,R.index=Q.length;else{var P=0,V=Q.length-1;R.index=P;h=K=g;do{f(g,h,K,Q[P],q,P<V,!0,c,R,k,n,t,z,D,B);K=d[0];R=d[2];if(!K||"object"!==typeof K){R.index=P;break a}h=
d[1]}while(P++<V);R.index=P;X["\u001ef_context"]!==K&&r(X,K)}}d[0]=K;d[1]=h;d[2]=R}h=d[0];if(!h||"object"!==typeof h)return;c=d[1];q=d[2];g=h&&h.$type}if(!p||void 0===g){if(null==l){if(p)throw new u;h&&(l=h["\u001ef_key"])}else c=h,h=c[l];h=v(c,h,l,b,p,x,y,q,e,G,E,C,A,F)}d[0]=h;d[1]=c;d[2]=q}var d=Array(3),g=Array.isArray,w=a(0),m=a(2),r=a(7),p=a(10),q=a(33),u=a(4),v=a(48);b.exports=function(a,g,h,f,b){var l=a._root,k=l.expired,n=l.version+1;a=a._path;var m=l.cache,t=p(m,a);if(!t)return[[],[],!1];
for(var r=t["\u001ef_parent"]||m,v=[],q=[],u=[],w=a.length,e=-1,M=g.length;++e<M;){var L=g[e],N=a.slice(0);N.index=w;c(L.json,0,m,r,t,q,u,v,N,n,k,l,f,h,b)}d[0]=void 0;d[1]=void 0;d[2]=void 0;return m["\u001ef_version"]===n?(l.version=n,[q,u,!0]):[q,u,!1]}},function(b,e,a){e=a(92);e=new RegExp("^"+e,"i","g");b.exports=e.test.bind(e)},function(b,e){function a(c,f,d){d=d||[];f=f||[];if(!c)return f;for(var g=[],b=c.$keys,m=b.length,r=-1;++r<m;){var p=c[r],q=b[r];p&&"object"===typeof p?a(p,f,d.concat([q])):
g.push(q)}1===g.length?f.push(d.concat(g)):1<g.length&&f.push(d.concat([g]));return f}b.exports=a},function(b,e){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,e){function a(a,d){var c=d.from=a.from||0;a=d.to=a.to||"number"===typeof a.length&&d.from+a.length-1||0;d.rangeOffset=d.from;d.loaded=!0;c>a&&(d.empty=!0)}var c=Array.isArray;b.exports=function(f,d){if(void 0===d.isArray){d.done=!1;var g=d.isObject=!(!f||"object"!==typeof f);d.isArray=
g&&c(f);d.arrayOffset=0}if(d.isArray){var b;do{d.loaded&&d.rangeOffset>d.to&&(++d.arrayOffset,d.loaded=!1);if(d.arrayOffset>=f.length){d.done=!0;break}g=f[d.arrayOffset];"object"===typeof g?(d.loaded||a(g,d),d.empty||(b=d.rangeOffset++)):(++d.arrayOffset,b=g)}while(void 0===b);return b}if(d.isObject){d.loaded||a(f,d);if(d.rangeOffset>d.to){d.done=!0;return}return d.rangeOffset++}d.done=!0;return f}},function(b,e,a){b.exports=a(40)},function(b,e,a){b.exports=a(43)},function(b,e){b.exports=function(a,
c,f,d,g){var b=0,m;m=d.jsonGraph;m||(d.jsonGraph=m={});do{d=c[b++];if(b>=f){m=m[d]=!0!==g?a:m[d]||{};break}m=m[d]||(m[d]={})}while(1);return m}},function(b,e){var a=Array.isArray;b.exports=function(c,f,d,g,b,m,r,p,q,u,v,n,k,h,l){if(q||u){for(var t,z=-1,x=(m=b-f)&&Array(m)||void 0;++z<m;){t=c[z+f];var y;y=t;if("object"!==typeof y||null===y)y=!1;else if(a(y))y=0===y.length;else{var w=y.to,e=y.from||0;"number"!==typeof w&&(w=e+(y.length||0));y=e>=w}if(y)return;x[z]=t}var G;c=null===t;t=q;var E;q?(y=
b,w=g,E=d.requested||(d.requested=[])):(f=p,w=r,y=p+m-Number(c));do{if(m<b||!t){g=-1;z=f;for(G=Array(y);++g<z;)G[g]=w[g];for(z=-1;g<y;)G[g++]=x[++z]}if(t=!t){q&&(E[E.length]=G);break}E[E.length]=G||x;f=p;w=r;E=d.missing||(d.missing=[]);y=p+m-Number(c)}while(1);if(u)return h(v,G,f,y,n,k,l)}}},function(b,e,a){function c(a,g,h,l,b,p,m,y,q){var k={},n=g<a.length-1,x=a[g],t=v(x,k);do{f(h,l,b,t,n,!1,p,m,y,q);var t=d[0],z=d[1];t&&(n?c(a,g+1,h,z,t,p,m,y,q):u(t,r(t),y,p));t=v(x,k)}while(!k.done)}function f(a,
c,h,l,b,r,x,y,v,q){var k=h;for(h=k.$type;"ref"===h;){a:{c=a;h=x;r=y;var n=v,t=q;if(g(k,t))w(k,r,n),d[0]=void 0,d[1]=c;else{m(n,k);var u=k,z=k.value,e,k=k["\u001ef_context"];if(null!=k)e=k["\u001ef_parent"]||c;else{var D=0,B=z.length-1;e=k=c;do{f(c,e,k,z[D],D<B,!0,h,r,n,t);k=d[0];if(!k&&"object"!==typeof k)break a;e=d[1]}while(D++<B);u["\u001ef_context"]!==k&&p(u,k)}d[0]=k;d[1]=e}}k=d[0];if(!k&&"object"!==typeof k)return;c=d[1];h=k.$type}if(void 0===h)if(null==l){if(b)throw Error("`null` is not allowed in branch key positions.");
}else c=k,k=c[l];d[0]=k;d[1]=c}var d=Array(2),g=a(0),w=a(2),m=a(13),r=a(9),p=a(7),q=a(17),u=a(11),v=a(23);b.exports=function(a,g,h){var f=a._root,k=f.expired,b=f.version+1,n=f.cache;a=q(a);if(!a)return!1;for(var p=-1,m=g.length,r=a["\u001ef_parent"]||n;++p<m;)c(g[p],0,n,r,a,b,k,f,h);d[0]=void 0;d[1]=void 0;return n["\u001ef_version"]===b?(f.version=b,!0):!1}},function(b,e,a){function c(a,b,q,u,v){if(a&&"object"===typeof a){var n=a.$type;if(void 0===n)for(var k in a)d(k)||c(a[k],a,k,u,v);else"ref"===
n&&w(a),f(u,a);g(m(a,v));b[q]=a["\u001ef_parent"]=void 0;return!0}return!1}var f=a(54),d=a(33),g=a(84),w=a(85),m=a(31);b.exports=c},function(b,e,a){function c(a,g,k,h,l,b,p,m,r,u,w,e,E,C,A,F){var n={},t=k<g.length-1,x=g[k],v=q(x,n),y=u.index;do{r.depth=k;r[k]=v;r.index=k;f(h,l,b,v,a,t,!1,r,u,w,e,E,C,A,F);r[k]=v;r.index=k;var z=d[0],D=d[1],B=d[2];B[B.index++]=v;z&&(t?c(a,g,k+1,h,D,z,p,m,r,B,w,e,E,C,A,F):(p.push(r.slice(0,r.index+1)),m.push(B.slice(0,B.index))));v=q(x,n);if(n.done)break;u.index=y}while(1)}
function f(a,c,k,h,l,b,r,x,q,e,B,G,E,C,A){var n=k;for(k=n.$type;"ref"===k;){a:{q=l;k=a;c=x;var t=e,v=B,y=G,z=E,D=C,O=A,H=n,K=H.value,Q=K.slice(0);if(g(H,O))w(H,v,y),H=void 0,n=k,Q.index=K.length;else{var R=H,H=H["\u001ef_context"];if(null!=H)n=H["\u001ef_parent"]||k,Q.index=K.length;else{var X=0,P=K.length-1,n=H=k;do{var V=K[X],W=X<P;Q.index=X;f(k,n,H,V,q,W,!0,c,Q,t,v,y,z,D,O);H=d[0];Q=d[2];if(!H||"object"!==typeof H){Q.index=X;break a}n=d[1]}while(X++<P);Q.index=X;R["\u001ef_context"]!==H&&m(R,H)}}d[0]=
H;d[1]=n;d[2]=Q}n=d[0];if(!n||"object"!==typeof n)return;c=d[1];q=d[2];k=n.$type}if(!b||void 0===k){if(null==h){if(b)throw new p;n&&(h=n["\u001ef_key"])}else c=n,n=c[h];n=u(c,n,h,l,b,r,x,q,e,B,G,E,C,A)}d[0]=n;d[1]=c;d[2]=q}var d=Array(3),g=a(0),w=a(2),m=a(7),r=a(10),p=a(4),q=a(23),u=a(48);b.exports=function(a,g,f,h,l){var k=a._root,b=k.expired,n=k.version+1;a=a._path;var p=k.cache,m=r(p,a);if(!m)return[[],[],!1];for(var q=m["\u001ef_parent"]||p,v=[],u=[],e=[],w=a.length,F=-1,I=g.length;++F<I;){var M=
g[F],L=M.path,M=M.value,N=a.slice(0);N.index=w;c(M,L,0,p,q,m,u,e,v,N,n,b,k,h,f,l)}d[0]=void 0;d[1]=void 0;d[2]=void 0;return p["\u001ef_version"]===n?(k.version=n,[u,e,!0]):[u,e,!1]}},function(b,e,a){b.exports=function(a,f){var d=a,c=[],b=0,m,r,p;do{r=-1;m=d["\u001ef_parent"];d["\u001ef_version"]=f;p=d["\u001ef_refs_length"]||0;do if(m&&m["\u001ef_version"]!==f&&(c[b++]=m),++r<p)m=d["\u001ef_ref"+r];else break;while(1)}while(d=c[--b]);return a}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&
a.$timestamp||void 0}},function(b,e,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(20)},function(b,e){b.exports=0},function(b,e){e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(e=window)}b.exports=e},function(b,e,a){var c=a(39),f=a(37),d=a(38);b.exports=function(a){return c(d(f(a)))}},function(b,e,a){function c(a,d){var c=d.length,c=a[c]||(a[c]=[]);c[c.length]=d;return a}var f=Array.isArray,d=a(21);b.exports=function(a,
b){b&&"object"===typeof b||(b={});if(a)!f(a)&&f(a.$keys)&&(a=d(a));else return b;return a.reduce(c,b)}},function(b,e,a){var c=a(65);b.exports=function(a,d){var g=Object.keys(a),f=-1,b=g.length,r=d;for(r&&"object"===typeof r||(r={});++f<b;)d=g[f],r[d]=c(a[d],r[d]);return r}},function(b,e,a){function c(a,f,b){var k,h=Object.create(null),l=""+p(""+f),n=[],m=-1,x=0,r=[],q=0,v,u,e,w,A,F;e=[];w=-1;if(f<b-1){for(A=d(a,e);++w<A;)k=e[w],v=c(a[k],f+1,b),u=v.code,h[u]?v=h[u]:(n[x++]=u,v=h[u]={keys:[],sets:v.sets}),
l=""+p(l+k+u),g(k)&&v.keys.push(parseInt(k,10))||v.keys.push(k);for(;++m<x;)if(k=n[m],v=h[k],e=v.keys,A=e.length,0<A)for(a=v.sets,f=-1,b=a.length,w=e[0];++f<b;){k=a[f];v=-1;u=k.length;F=Array(u+1);for(F[0]=1<A&&e||w;++v<u;)F[v+1]=k[v];r[q++]=F}}else for(A=d(a,e),1<A?r[q++]=[e]:r[q++]=e;++w<A;)l=""+p(l+e[w]);return{code:l,sets:r}}function f(a,d){return a-d}function d(a,d,c){var g=0;if(a===q)d[g++]=null;else{for(var h in a)d[g++]=h;1<g&&d.sort(c)}return g}function g(a){var d=a,c=typeof a;if("string"===
c){d=a.length;if(0===d||17<d||!r.test(a))return!1;if(16>d)return!0;d=+a}else if("number"!==c)return!1;return 0===d%1&&9007199254740991>=m(d)}var w=Array.isArray,m=Math.abs,r=/^(0|(\-?[1-9][0-9]*))$/,p=a(22),q=a(8);b.exports=function(a){var d,b=[],k=0,h;for(h in a){var l;if(l=g(h))l=d=a[h],l=null!==l&&"object"===typeof l;if(l){l=c(d,0,parseInt(h,10)).sets;for(var p=-1,m=l.length;++p<m;){for(var x=k++,r=l[p],q=-1,e=r.length;++q<e;){var u=r[q];if(w(u)){var E=r,C=q;for(var A=-1,F=u.length-1,I=0<F;++A<=
F;){var M=u[A];if(!g(M)){I=!1;break}u[A]=parseInt(M,10)}!0===I&&(u.sort(f),A=u[0],I=u[F],I-A<=F&&(u={from:A,to:I}));E[C]=u}}b[x]=r}}}return b};b.exports._isSafeNumber=g},function(b,e,a){var c=Array.isArray,f=a(73),d=a(72),g=a(17),w=a(90),m=a(64),r=a(62);b.exports=function(a,b,u,e,n){var k,h=b,l;b=a._path;var p=a._root,q=p.cache,x,v,D,B=b&&b.length||0;if(B){if((k=g(a))&&k.$type)return{error:new w(b,b)};D=[];for(l=0;l<B;++l)D[l]=b[l];l=a._referenceContainer}else k=q,D=[];x=[];var G=!1;e=u&&u.json;var E=
a._boxed,C=p.expired;v=a._recycleJSON;var A=!!a._source,F=p.branchSelector,I=u&&a._materialized,M=a._treatErrorsAsValues,L=a._allowFromWhenceYouCame;a={args:null,data:u,hasValue:!1,relative:null,requested:null,missing:null};var N,S=0,O=h.length;if(0<O){if(v){G=!0;if(1<O&&n||c(h[0]))h=[r(m(h,{}))];O=1}do N=h[S],G?v=d(q,k,e,h[0],0,u,a,x,D,B,!1,l,p,C,n,F,E,I,A,M,L):(v=N.length,v=f(q,k,e,N,0,u,a,x,v,D,B,!1,l,p,C,n,F,E,I,A,M,L)),e=v[0],v[0]=void 0,v[1]=void 0;while(++S<O)}n=a.requested;a.args=G&&h||n;
if(n&&n.length&&(a.relative=a.args,B)){h=[];l=0;for(B=n.length;l<B;++l)h[l]=b.concat(n[l]);a.requested=h}a.hasValue&&(u.json=e);return a}},function(b,e,a){var c=Array(3),f=a(13),d=a(0),g=a(7),w=a(52);b.exports=function(a,b,p,q){f(p,b);var m,r,n=0,k=a,h=b.value,l=h,t=h.length;do{if(0===n&&void 0!==(m=b["\u001ef_context"]))k=m,n=t;else if(r=h[n++],void 0===(k=k[r]))break;if(n===t){r=k.$type;if(void 0!==r&&d(k,q))break;else{if(k===b)throw new w(h);k!==m&&g(b,k)}if("ref"===r)f(p,k),n=0,b=k,k=a,h=l=b.value,
t=h.length;else break}else if(void 0!==k.$type)break}while(1);n<t&&void 0!==k&&(t=n);n=-1;for(h=Array(t);++n<t;)h[n]=l[n];c[0]=k;c[1]=h;c[2]=b;return c}},function(b,e,a){var c=a(1),f=a(71);b.exports=function(a,g,b,m,r,p,q,e,v,n,k,h){if("error"===g&&!h)return f(a,b,r,p,v,n);r.hasValue=!0;return n?c(a):a.value}},function(b,e,a){var c=a(76),f=a(88);b.exports=function(a,g,b,m,r){var d,q;d=a._path;m=a._root;var e,v,n=d&&d.length||0;if(n)return{error:new f};v=[];q=d=m.cache;e=[];for(var k=a._boxed,h=m.expired,
l=a._materialized,t=!!a._source,w=-1,x=g.length,y=a._treatErrorsAsValues,D={args:null,data:b,paths:null,relative:null,requested:null,jsonGraph:null};++w<x;){var B=g[w];a=B.length;c(q,d,B,0,b,D,e,a,v,n,!1,m,h,r,k,l,t,y)}D.args=D.relative=D.requested;return D}},function(b,e,a){function c(a,b,q,e,v,n,k){if(q===e)return n?d(m):void 0;var h,l,p=q+1,r,x=-1,u=0;l=b[q];a&&"object"===typeof a?((h=a["\u001ef_meta"])||(a["\u001ef_meta"]=h={}),h.status="resolved",h.version=k.version,h.abs_path=b.slice(0,q)):
(a={},a.__proto__=g.prototype,a["\u001ef_meta"]=h={},h.status="resolved",h.version=k.version,h.abs_path=b.slice(0,q),v&&(a=v(a)));a:do{if("object"!==typeof l)q=l,h=void 0,l=!1;else if(f(l)){if(void 0!==r)throw new w(b,r);x=0;r=l;u=l.length;if(0===u)break a;l=r[x];continue a}else{h=l.to;q=l.from||0;"number"!==typeof h&&(h=q+(l.length||0)-1);if(0>h-q)break a;l=!0}do a[q]=c(a[q],b,p,e,v,n,k);while(l&&++q<=h);if(++x===u)break a;l=r[x]}while(1);return a}var f=Array.isArray,d=a(1),g=a(3);a(4);var w=a(12),
m=a(8);b.exports=c},function(b,e,a){var c=Array.isArray,f=a(102),d=a(57),g=a(58);b.exports=function(a){for(var b=[],r=-1,p=a.length,q,e,v,n;++r<p;)v=a[r],c(v)?(v={path:v},n="PathValues"):f(v)?n="PathValues":g(v)?n="JSONGraphs":d(v)&&(n="PathMaps"),e!==n&&(e=n,b.push(q={arguments:[],inputType:n})),q.arguments.push(v);return b}},function(b,e,a){b.exports=function(a,b,d,g,e){a["\u001ef_key"]=d;a["\u001ef_parent"]=b;void 0!==g&&(a["\u001ef_version"]=g);a["\u001ef_abs_path"]||(a["\u001ef_abs_path"]=e.slice(0,
e.index).concat(d));return b[d]=a}},function(b,e,a){function c(a,g,h,b,m,p,x,e,q,w){if(a&&"object"===typeof a&&!a.$type)for(var k in a)if(!u(k)){var l=a[k],n=!(!l||"object"!==typeof l)&&!l.$type;f(h,b,m,k,l,n,!1,p,x,e,q,w);var t=d[0],y=d[1];t&&(n?c(l,g+1,h,y,t,p,x,e,q,w):v(t,r(t),e,p))}}function f(a,c,b,l,t,r,x,e,q,v,u,E){var h=b;for(b=h.$type;"ref"===b;){a:{c=t;b=a;x=e;var k=q,n=v,y=u,z=E;if(g(h,z))w(h,k,n),d[0]=void 0,d[1]=b;else{m(n,h);var D=h,B=h.value,G,h=h["\u001ef_context"];if(null!=h)G=h["\u001ef_parent"]||
b;else{var O=0,H=B.length-1;G=h=b;do{f(b,G,h,B[O],c,O<H,!0,x,k,n,y,z);h=d[0];if(!h&&"object"!==typeof h)break a;G=d[1]}while(O++<H);D["\u001ef_context"]!==h&&p(D,h)}d[0]=h;d[1]=G}}h=d[0];if(!h&&"object"!==typeof h)return;c=d[1];b=h.$type}if(void 0===b)if(null==l){if(r)throw Error("`null` is not allowed in branch key positions.");}else c=h,h=c[l];d[0]=h;d[1]=c}var d=Array(2),g=a(0),w=a(2),m=a(13),r=a(9),p=a(7),q=a(17),u=a(33),v=a(11);b.exports=function(a,g,h){var b=a._root,f=b.expired,k=b.version+
1,m=b._comparator,n=b.cache;a=q(a);if(!a)return!1;for(var p=-1,r=a["\u001ef_parent"]||n,e=g.length;++p<e;)c(g[p].json,0,n,r,a,k,f,b,m,h);d[0]=void 0;d[1]=void 0;return n["\u001ef_version"]===k?(b.version=k,!0):!1}},function(b,e,a){var c=a(34),f=a(101),d=a(9),g=a(32),w=a(51),m=a(0),r=a(2),p=a(46),q=a(50),u=a(49),v=a(11);a(29);b.exports=function(a,b,h,l,e,z,x,y,D,B,G,E,C,A){A=f(b,z);if(e||z){if(A&&m(b,!0)&&(r(b,B,G),A=b.$expires===c?A:"expired"),A&&"ref"!==A||!b||"object"!==typeof b)b=q(b,{},a,h,G,
D),b=p(b,a,h,D,y)}else e=f(l),(A||e)&&(E?3>E.length?E(b,l):E(b,l,y.slice(0,y.index)):!1!==g(l)<g(b))||(C&&"error"===e&&(l=C(u(x,h),l)),x=d(b)-d(l=w(l,e,e?l.value:l)),b=q(b,l,a,h,G,D),a=v(a,x,G,D),b=p(b,a,h,D,y));return b}},function(b,e){b.exports=function(a,c){a=a.slice(0,a.depth);a[a.length]=c;return a}},function(b,e,a){var c=a(83),f=a(29),d=a(31);b.exports=function(a,b,m,e,p,q){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,m,e,p),d(b,q));return m[e]=b}},function(b,e,a){var c=Array.isArray,
f=a(59),d=a(99),g=a(9),w=a(100),m=a(34);b.exports=function(a,b,e){var p=0;if(b){var q=a["\u001ef_wrapped_value"];a=d(a);p=g(a);a.$type=b;a["\u001ef_prev"]=void 0;a["\u001ef_next"]=void 0;a["\u001ef_wrapped_value"]=q||!1}else a={$type:"atom",value:e,"\u001ef_prev":void 0,"\u001ef_next":void 0,"\u001ef_wrapped_value":!0};if(null==e)p=51;else if(null==p||0>=p)switch(typeof e){case "object":p=c(e)?50+e.length:51;break;case "string":p=50+e.length;break;default:p=51}b=w(a);"number"===typeof b&&b<m&&(a.$expires=
f()+-1*b);a.$size=p;return a}},function(b,e,a){e=a(5);b.exports=e("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,e,a){e=a(5);b.exports=e("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,e,a){b.exports=function(a,b){var d=b["\u001ef_prev"],c=b["\u001ef_next"];c&&(c["\u001ef_prev"]=d);d&&(d["\u001ef_next"]=c);b["\u001ef_prev"]=b["\u001ef_next"]=void 0;b===a["\u001ef_head"]&&
(a["\u001ef_head"]=c);b===a["\u001ef_tail"]&&(a["\u001ef_tail"]=d)}},function(b,e,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var d=a(14),g=a(15),e=a(103).default;b.exports=f;f.prototype[e]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,c,b){return new g([this.operator.call(this.source,a instanceof d?a:new d(a,c,b))])};f.prototype.then=function(a,
d){var b=this;this._promise||(this._promise=new c.Promise(function(a,d){var c=[],g=!1;b.subscribe({next:function(a){c[c.length]=a},error:function(a){g=!0;d(a)},complete:function(){!g&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,d)}}).call(e,a(35))},function(b,e){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&"json"in a}},function(b,e,a){var c=Array.isArray,
f=a(6);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,e){b.exports=Date.now},function(b,e){b.exports=1},function(b,e,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(66);e=a(3);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=e;c.toProps=e.prototype.toProps;b.exports=c},function(b,e,a){function c(a){if(void 0!==a){for(var d="",b=a.$keys,e=-1,r=b.length;++e<r;){var p=b[e];if(null===
p)d=""+f(""+d+"null");else{"object"===typeof p&&(p="["+p.from+".."+(p.from+p.length-1)+"]");var q=c(a[e]),d=void 0===q?""+f(""+d+p):""+f(""+d+p+q.$code)}}a.$code=d;return a}}var f=a(22);b.exports=c},function(b,e,a){function c(a,b,e,r){if(e===r)return!0;var g,m=-1,u=0,v=e+1,n,k,h;g=b[e];if(null===g)return a===d;a:do{if("object"!==typeof g)e=g,k=void 0,n=!1;else if(f(g)){if(void 0!==h)break a;m=0;h=g;u=g.length;if(0===u)break a;g=h[m];continue a}else{k=g.to;e=g.from||0;"number"!==typeof k&&(k=e+(g.length||
0)-1);if(0>k-e)break a;n=!0}do if(v===r){if(null!==a[e])return!1}else if(g=a[e],null===g||void 0===g||!1===c(g,b,v,r))return!1;while(n&&++e<=k);if(++m===u)break a;g=h[m]}while(1);return!0}var f=Array.isArray,d=a(8);b.exports=c},function(b,e,a){function c(a,b){return a.reduce(function(a,b){return d(b)?f(a,b,0,b.length):d(b.$keys)?c(w(b),a):a},b||{})}function f(a,c,b,e){if(b!==e){a=a||{};var m=a.$keys||(a.$keys=[]),r=a.$keysMap||(a.$keysMap={}),n,k=-1,h=0,l,t=b+1,q;n=c[b];if(null===n)return g;a:do{if("object"!==
typeof n)l=n,"undefined"===typeof(b=r[l])&&(b=m.length),m[b]=l,r[l]=b,n=f(a[b],c,t,e),void 0!==n&&(a[b]=n);else if(d(n)){if(void 0!==q)break a;k=0;q=n;h=n.length;if(0===h)break a;n=q[k];continue a}else{b=n.to;l=n.from||0;"number"!==typeof b&&(b=l+(n.length||0)-1);if(0>b-l)break a;n={from:l,length:b-l+1};l="["+l+".."+b+"]";"undefined"===typeof(b=r[l])&&(b=m.length);m[b]=n;r[l]=b;n=f(a[b],c,t,e);void 0!==n&&(a[b]=n)}if(++k===h)break a;n=q[k]}while(1);return a}}var d=Array.isArray,g={$keys:[null],$keysMap:{"null":0}},
w=a(21);b.exports=c},function(b,e,a){function c(a,b,e,r,p){if(e===r)return!0;a=a||{};var g,m=-1,v=0,n,k=e+1,h,l,t;g=b[e];if(null===g)return d;a:do{if("object"!==typeof g)e=g,l=void 0,h=!1;else if(f(g)){if(void 0!==t)break a;m=0;t=g;v=g.length;if(0===v)break a;g=t[m];continue a}else{l=g.to;e=g.from||0;"number"!==typeof l&&(l=e+(g.length||0)-1);if(0>l-e)break a;h=!0}do k===r?a[e]=p:(g=a[e],(n=c(g,b,k,r,p))?g||(a[e]=n):a[e]=p);while(h&&++e<=l);if(++m===v)break a;g=t[m]}while(1);return a}var f=Array.isArray,
d=a(8);b.exports=function(a,b){return a.reduce(function(a,b){return c(a,b,0,b.length,null)},b||{})}},function(b,e,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new d(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new r;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={},this._seed.__proto__=
g.prototype);this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(94),d=a(68),g=a(3),w=a(67),m=a(98),r=a(56),p=a(36);a(9);var q=a(6),u=a(57),v=a(10),n=a(58),k=a(19),h=a(18),l=a(24),t=a(78),z=a(25);b.exports=c;c.prototype.constructor=c;c.prototype.get=
function(){var a=this._seed;a||(a={},a.__proto__=g.prototype);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("get",this,c))._toJSON(a,[])};c.prototype.set=function(){var a={};a.__proto__=g.prototype;for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("set",this,c))._toJSON(a,[])};c.prototype.preload=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("get",this,b))._toJSON(null,[])};c.prototype.call=
function(){var a={};a.__proto__=g.prototype;for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("call",this,c))._toJSON(a,[])};c.prototype.invalidate=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("invalidate",this,b))._toJSON(null,null).then()};c.prototype.deref=a(87);c.prototype._hasValidParentReference=a(86);c.prototype.getValue=function(a){return(new f("get",this,[a]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var d=
-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var d=-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=
function(a){var b=this._root,c=b.cache;if(a!==c){var d={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof c&&(b.expired=[],b["\u001ef_head"]=void 0,b["\u001ef_tail"]=void 0,this._recycleJSON&&(this._seed={},this._seed.__proto__=g.prototype));var f,e;n(a)?f=h(d,[a]):u(a)?f=k(d,[a]):q(a)&&(f=k(d,[{json:a}]));f&&(f[0].length&&l(d,f[0],null,!1,!1),f[2]&&(e=b.onChange)&&e.call(b.topLevelModel))}else"undefined"===typeof c&&(this._root.cache=
{});return this};c.prototype.getCache=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(0===b.length)return t(this,this._root.cache);a={};a.__proto__=g.prototype;a=z({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},b,a).data;a.paths=p(b);return a};c.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&
(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=new c(this);if(a)for(var d in a){var g=a[d];"delete"===g?delete b[d]:"_path"===d?(b[d]=g,!1===a.hasOwnProperty("_node")&&delete b._node):b[d]=g}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new m(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new m(1);return this._clone({_scheduler:b})};c.prototype.unbatch=
function(){return this._clone({_scheduler:new r})};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new w(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=
function(){return this._clone({_source:"delete"})};c.prototype.inspect=function(){return"{ v: "+this.getVersion()+" p: ["+this._path.join(", ")+"] }"};c.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=v(this._root.cache,a);return(a&&a["\u001ef_abs_path"]||[]).slice(0)};c.prototype._getVersion=
a(79);c.prototype._getPathValuesAsPathMap=l;c.prototype._getPathValuesAsJSONG=z;c.prototype._setPathValues=a(30);c.prototype._setPathMaps=a(19);c.prototype._setJSONGs=a(18);c.prototype._setCache=a(19);c.prototype._invalidatePathValues=a(28);c.prototype._invalidatePathMaps=a(47)},function(b,e){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};
a.prototype.call=function(a,b,d,g){return this._model.call.apply(this._model,[a,b,d].concat(g))._toJSONG()};b.exports=a},function(b,e,a){function c(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&
(this.comparator=a.comparator);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(95),d=a(32);c.comparator=c.prototype.comparator=function(a,b){var c=a&&a.$type,g=b&&b.$type;
return c?g?!0===d(b)<d(a)?!0:!(c!==g||a.value!==b.value||a.$expires!==b.$expires):a.value===b:g?!1:a===b};b.exports=c},function(b,e,a){var c=a(24),f=a(25);b.exports={json:function(a,b,f,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};var g=[].concat(b[1]||[]),m=[].concat(b[2]||[]),u=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&u&&u.length&&(d=c(a,u,f,e,!0).hasValue);return{data:f,missing:!0,hasValue:d,fragments:[b,g,m,u]}},jsonGraph:function(a,b,c,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};
var g=[].concat(b[1]||[]),m=[].concat(b[2]||[]),u=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&u&&u.length&&(d=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},u,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:d,fragments:[b,g,m,u]}}}},function(b,e,a){b.exports={json:a(40),jsonGraph:a(43)}},function(b,e,a){var c=a(1);b.exports=function(a,b,g,e,m,r){var d=-1;b+=!!m;m=Array(b);for(a=r?c(a):a.value;++d<b;)m[d]=e[d];(g.errors||
(g.errors=[])).push({path:m,value:a})}},function(b,e,a){function c(a,b,h,e,q,D,B,G,E,C,A,F,I,M,L,N,S,O,H,K,Q){var l,t,x=A;if(void 0===b||void 0!==(l=b.$type)||void 0===e)return g[1]=H&&void 0===b,g[0]=p(b,l,h,e,q,D,B,G,q,E,C,x,I,M,L,N,S,O,H,K,w,f,v),g;var z,y,U;l="";var T,J,ca;A=e.$keys;var ea=q+1,Z,aa,da,ia,ba,fa=C+1,Y,ga;Q&&F&&(ga=F.value,Y=F["\u001ef_abs_path"]);if(!h||"object"!==typeof h)h=void 0;else if(z=h["\u001ef_meta"]){U=b["\u001ef_abs_path"];y=z.abs_path;N||h instanceof m||(h.__proto__=
{},h.__proto__["\u001ef_meta"]=z,h.__proto__.__proto__=m.prototype);if(!d(U,y)){z.$code="";z.status="pending";z.abs_path=U;z.version=b["\u001ef_version"];ga&&(z.deref_to=ga);Y&&(z.deref_from=Y);if(y=z.keys)for(J in z.keys=Object.create(null),y)y[J]&&delete h[J];g[0]=h;g[1]=!0;return g}if(z.version===b["\u001ef_version"]&&z.$code===e.$code)return B.hasValue=!0,g[0]=h,g[1]=!1,g;y=z.keys;z.abs_path=U;z.version=b["\u001ef_version"];ga&&(z.deref_to=ga);Y&&(z.deref_from=Y)}U=Object.create(null);var ka=
-1,ma=A.length,ha,la,ja=!1;a:for(;++ka<ma;)if(x=A[ka],ha=e[ka],null===x){if(void 0!==ha)throw new n;l=""+k(""+l+"null")}else{if("object"!==typeof x)J=x,Z=void 0,ca=!1,la=J;else{Z=x.to;J=x.from||0;"number"!==typeof Z&&(Z=J+(x.length||0)-1);if(0>Z-J)break a;ca=!0;la="["+J+".."+Z+"]"}do{x=!1;aa=h&&h[J];ba=E;ia=fa;da=F;T=b[J];G[q]=J;E[C]=J;if(void 0===ha){if(c(a,T,aa,ha,ea,D,B,G,ba,ia,x,da,I,M,L,N,S,O,H,K,Q),!0===g[1]&&(ja=!0),void 0===(aa=g[0])&&!O){h&&h.hasOwnProperty(J)&&delete h[J];continue}}else if(T&&
"ref"===T.$type&&!r(T,L)&&(t=u(a,T,I,L),T=t[0],x=!0,ba=t[1],da=t[2],ia=ba.length,t[0]=t[1]=t[2]=void 0),c(a,T,aa,ha,ea,D,B,G,ba,ia,x,da,I,M,L,N,S,O,H,K,Q),!0===g[1]&&(ja=!0),void 0===(aa=g[0])){h&&h.hasOwnProperty(J)&&delete h[J];continue}void 0===z&&(z={},z.version=b["\u001ef_version"],z.abs_path=b["\u001ef_abs_path"],ga&&(z.deref_to=ga),Y&&(z.deref_from=Y),h={},h["\u001ef_meta"]=z,h.__proto__=m.prototype,N?h=N(h):(x=h,h={},h.__proto__=x));U[J]=!0;y&&J in y&&(y[J]=!1);h[J]=aa}while(ca&&++J<=Z);l=
""+k(""+l+(ja?"":la)+(ha?ha.$code:""))}if(z&&(z.$code=l,z.keys=U,z.status=ja&&"pending"||"resolved",y))for(J in y)y[J]&&delete h[J];g[0]=h;g[1]=ja;return g}function f(a,b,c,d,g,e,k,n,m,r,p,v,u,w,L){if(r)return w(p,a,b,b,v,u,L,c,d,k,n,e,m,f);a=a?h(a):[[]];var l=d.slice(0,g);return a.forEach(function(a){g=b+a.length;return q(l.concat(a),b,c,d,g,e,k,n,m,!1,p,v,u,w,L)})}function d(a,b){if(a===b)return!0;var c=a.length;if(c!==b.length)return!1;for(;~--c;)if(a[c]!==b[c])return!1;return!0}var g=Array(2),
w=a(42),m=a(3),r=a(0),p=a(16),q=a(27),u=a(41),v=a(77),n=a(4);a(12);var k=a(22),h=a(21);b.exports=c},function(b,e,a){function c(a,b,e,t,z,x,y,D,B,G,E,C,A,F,I,M,L,N,S,O,H,K){var h,l;if(void 0===b||(h=b.$type)||z===B)return f[1]=O&&void 0===b,f[0]=r(b,h,e,t,z,x,y,D,B,G,E,C,F,I,M,L,N,S,O,H,g,w,q),f;var k,P,V,W=z+1,U,T,J,ca,ea=-1,Z=0,aa,da,ia=E+1,ba,fa;C=t[z];if(null===C){if(W<B)throw new v;f[0]=e;f[1]=!1;return f}K&&A&&(fa=A.value,ba=A["\u001ef_abs_path"]);if(!e||"object"!==typeof e)e=void 0;else if(k=
e["\u001ef_meta"])k.version=b["\u001ef_version"],k.abs_path=b["\u001ef_abs_path"],fa&&(k.deref_to=fa),ba&&(k.deref_from=ba);var Y=!1;a:do{if("object"!==typeof C)h=C,U=void 0,V=!1;else if(d(C)){if(void 0!==T)throw new n(t,T);ea=0;T=C;Z=C.length;if(0===Z)break a;C=T[ea];continue a}else{U=C.to;h=C.from||0;"number"!==typeof U&&(U=h+(C.length||0)-1);if(0>U-h)break a;V=!0}do{C=!1;J=e&&e[h];da=G;aa=ia;ca=A;P=b[h];D[z]=h;G[E]=h;if(W===B){if(c(a,P,J,t,W,x,y,D,B,da,aa,C,ca,F,I,M,L,N,S,O,H,K),!0===f[1]&&(Y=
!0),void 0===(J=f[0])&&!S)continue}else if(P&&"ref"===P.$type&&!p(P,M)&&(l=u(a,P,F,M),P=l[0],C=!0,da=l[1],ca=l[2],aa=da.length,l[0]=l[1]=l[2]=void 0),c(a,P,J,t,W,x,y,D,B,da,aa,C,ca,F,I,M,L,N,S,O,H,K),!0===f[1]&&(Y=!0),void 0===(J=f[0]))continue;void 0===k&&(k={},k.version=b["\u001ef_version"],k.abs_path=b["\u001ef_abs_path"],fa&&(k.deref_to=fa),ba&&(k.deref_from=ba),e={},e["\u001ef_meta"]=k,e.__proto__=m.prototype,L&&(e=L(e)));e[h]=J}while(V&&++h<=U);if(++ea===Z)break a;C=T[ea]}while(1);k&&(k.status=
Y&&"pending"||"resolved");f[0]=e;f[1]=Y;return f}var f=Array(2),d=Array.isArray,g=a(42),w=a(27),m=a(3),r=a(16),p=a(0),q=a(44),u=a(41),v=a(4),n=a(12);b.exports=c},function(b,e,a){var c=Array(2),f=a(1),d=a(26),g=a(13),w=a(0),m=a(7),r=a(52);b.exports=function(a,b,e,v,n){g(e,b);var k,h,l=0,t=a,p=b.value,q=p,u=p.length;do{if(0===l&&void 0!==(k=b["\u001ef_context"]))t=k,l=u;else if(h=p[l++],void 0===(t=t[h]))break;if(l===u){h=t.$type;if(void 0!==h&&w(t,n))break;else{if(t===b)throw new r(p);t!==k&&m(b,t)}if("ref"===
h)g(e,t),v&&d(f(t),p,u,v),l=0,b=t,t=a,p=q=b.value,u=p.length;else break}else if(void 0!==t.$type)break}while(1);l<u&&void 0!==t&&(u=l);l=-1;for(p=Array(u);++l<u;)p[l]=q[l];c[0]=t;c[1]=p;return c}},function(b,e,a){var c=a(1),f=a(26);b.exports=function(a,b,e,m,r,p,q,u,v,n,k){k=a.value;if(n||"ref"===b||"error"===b||!a["\u001ef_wrapped_value"]||"object"===typeof k)k=c(a);r.hasValue=!0;f(k,q,u,m);(m.paths||(m.paths=[])).push(p.slice(0,e+!!v));return k}},function(b,e,a){function c(a,b,h,e,u,D,B,G,E,C,A,
F,I,M,L,N,S,O){var l,t;if(void 0===b||(l=b.$type)||e===G)return p(b,l,u,h,e,u,D,B,G,E,C,A,F,I,M,void 0,L,N,S,O,w,f,q);var x,z,y=e+1,P,V,W=-1,U=0,T,J,ca=C+1;A=h[e];if(null===A){if(y<G)throw new n;}else{a:do{if("object"!==typeof A)l=A,P=void 0,z=!1;else if(d(A)){if(void 0!==V)throw new k(h,V);W=0;V=A;U=A.length;if(0===U)break a;A=V[W];continue a}else{P=A.to;l=A.from||0;"number"!==typeof P&&(P=l+(A.length||0)-1);if(0>P-l)break a;z=!0}do A=!1,J=E,T=ca,x=b[l],B[e]=l,E[C]=l,x&&y<G&&"ref"===x.$type&&!r(x,
M)&&(u&&m(g(x),E,T,u),t=v(a,x,F,u,M),x=t[0],A=!0,J=t[1],T=J.length,t[0]=t[1]=void 0),c(a,x,h,y,u,D,B,G,J,T,A,F,I,M,L,N,S,O);while(z&&++l<=P);if(++W===U)break a;A=V[W]}while(1)}}function f(a,b,c,d,e,f,k,n,p,r,v,q,w,M,L){var l,t;v&&r&&((v.paths||(v.paths=[])).push((t=0===e-b)&&d.slice(0,b+!!f)||d.slice(0,b).concat(a.slice(b,e+!!f))),l=m(t&&g(h)||void 0,k,n,v,!t));return u(a,b,c,d,e,f,k,n,p,!t&&r,l,q,!0,M,L)}var d=Array.isArray,g=a(1),w=a(75),m=a(26),r=a(0),p=a(16),q=a(44),u=a(27),v=a(74),n=a(4),k=a(12),
h=a(8);b.exports=c},function(b,e,a){function c(a,b,e,u,v,n,k,h,l,t,z,x,y,D){if(void 0===b)return d(void 0,void 0,a,b,e,void 0,h,l,e,t,z,x,k,void 0,!1,v,n,!1,y,!1,void 0,D,void 0),n?f(m):void 0;var p,r,q,C,A=b.$keys,F=e+1,I,M=z+1;a&&"object"===typeof a?((p=a["\u001ef_meta"])?r=p.keys:a["\u001ef_meta"]=p={},p.$code="",p.status="resolved",p.version=k.version,p.abs_path=t.slice(0,z)):(a={},a.__proto__=g.prototype,a["\u001ef_meta"]=p={},p.$code="",p.status="resolved",p.version=k.version,p.abs_path=t.slice(0,
z),v&&(a=v(a)));u=Object.create(null);var L,N=-1,S=A.length;a:for(;++N<S;)if(C=A[N],L=b[N],null===C){if(void 0!==L)throw new w;}else{if("object"!==typeof C)q=C,I=void 0,C=!1;else{I=C.to;q=C.from||0;"number"!==typeof I&&(I=q+(C.length||0)-1);if(0>I-q)break a;C=!0}do l[e]=q,t[z]=q,u[q]=!0,r&&q in r&&(r[q]=!1),a[q]=c(a[q],L,F,F,v,n,k,h,l,t,M,x,y,D);while(C&&++q<=I)}p.keys=u;if(r)for(q in r)r[q]&&delete a[q];return a}var f=a(1),d=a(16),g=a(3),w=a(4);a(12);var m=a(8);b.exports=c},function(b,e,a){function c(a,
b,e,r){var g,m;if(!a||"object"!==typeof a)return a;if(g=a.$type){if(void 0===(m=a.value))r?m={$type:"atom"}:a["\u001ef_wrapped_value"]&&(m=f(a));else if(e||"ref"===g||"error"===g||!a["\u001ef_wrapped_value"]||"object"===typeof m)m=f(a);return m}g=Object.keys(a);for(var u=g.length,v=-1;++v<u;){var n=g[v];"$size"===n||d(n)||void 0===(m=c(a[n],b&&b[n],e,r))||(void 0===b&&(b={}),b[n]=m)}return b}var f=a(1),d=a(20);b.exports=function(a,b){return c(b,{},a._boxed,a._materialized)}},function(b,e,a){var c=
a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001ef_version"];return null==a?-1:a}},function(b,e,a){function c(a,c,e,r,p){c=d(c);e=!1;r=-1;for(var g=c.length;++r<g;){var m=c[r],v=m.inputType,m=m.arguments;0<m.length&&("PathValues"===v&&(m=m.map(f)),(0,b.exports["invalidate"+v])(a,m,p)&&(e=!0))}e&&(p=a._root.onChange)&&p.call(a._root.topLevelModel);return{}}function f(a){return a.path||a.paths}var d=a(45);b.exports={json:c,jsonGraph:c,invalidatePathMaps:a(47),invalidatePathValues:a(28)}},function(b,
e,a){var c=a(51),f=a(0),d=a(46),g=a(2),w=a(50),m=a(9),r=a(49),p=a(32),q=a(11);b.exports=function(a,b,e,k,h,l,t,z,x,y,D,B){var n,u,v,A,F,I;if(b===e){if(void 0===e)return e;if(null===e)return b=c(e,void 0,e),a=q(a,-b.$size,x,t),b=d(b,a,k,void 0,l);if((v=!(!b||"object"!==typeof b))&&void 0===(n=b.$type))return void 0===b["\u001ef_parent"]&&d(b,a,k,t,l),b}else if(v=!(!b||"object"!==typeof b))n=b.$type;if("ref"!==n){if(A=!(!e||"object"!==typeof e))u=e.$type;if(v&&!n&&(null==e||A&&!u))return b}else{if(null==
e){if(f(b,B)){g(b,z,x);return}return b}if(A=!(!e||"object"!==typeof e))if(u=e.$type,"ref"===u)if(b===e){if(null!=b["\u001ef_parent"])return b}else if(F=b.$timestamp,I=e.$timestamp,!f(b,B)&&!f(e,B)&&I<F)return}if(n&&A&&!u)return d(w(b,e,a,k,x,t),a,k,void 0,l);u||!A?("error"===u&&D&&(e=D(r(h,k),e)),u&&b===e?b["\u001ef_parent"]||(b=c(b,n,b.value),a=q(a,-b.$size,x,t),b=d(b,a,k,t,l)):(h=!0,n||u?v&&f(b,B)||(h=y?!(3>y.length?y(b,e):y(b,e,l.slice(0,l.index))):!1===p(e)<p(b)):h=!0,h&&(y=m(b)-m(e=c(e,u,u?e.value:
e)),b=w(b,e,a,k,x,t),a=q(a,y,x,t),b=d(b,a,k,t,l))),f(b,!0)&&g(b,z,x)):null==b&&(b=d(e,a,k,void 0,l));return b}},function(b,e,a){function c(a,c,e){var g=!1,m=-1,n=c.length,k=[],h=[],l=a._root,t=l.errorSelector;e=e&&!a._source;for(l=a._source?null:l.comparator;++m<n;){var p=c[m],r=p.inputType,p=p.arguments;if(0<p.length){var q=(0,b.exports["set"+r])(a,p,t,l,e),g=g||q[2];h.push.apply(h,q[1]);"PathValues"===r?k.push.apply(k,p.map(f)):"JSONGraphs"===r?k.push.apply(k,d(p,f)):k.push.apply(k,q[0])}}return{changed:g,
requested:k,optimized:h}}function f(a){return a.path||a.paths}function d(a,b){for(var c=-1,d=-1,e=a.length,g=[];++d<e;)for(var f=b(a[d],d,a),h=-1,l=f.length;++h<l;)g[++c]=f[h];return g}var g=a(24),w=a(25),m=a(45);b.exports={json:function(a,b,d,e,f){var n,k,h,l,t,p,q=m(b);n=c(a,q,f);if((b=n.requested).length){if(!(l=n.changed)||e)k=g(a,b,d,e,f);l&&(h=w({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},n.optimized,{},e,f),p=h.data,t=p.paths,h=h.requested,(e=
a._root.onChange)&&e.call(a._root.topLevelModel))}return{args:q,data:d,missing:t,relative:b,fragments:p,requested:h,error:k&&k.error,errors:k&&k.errors,hasValue:k&&k.hasValue}},jsonGraph:function(a,b,d,e,g){var f,k,h,l,t,p,q=m(b);f=c(a,q,g);(b=f.requested).length&&(e||(h=f.changed))&&(k=w({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},f.optimized,d,e,g),t=k.data,l=t.paths,p=k.requested,h&&(e=a._root.onChange)&&e.call(a._root.topLevelModel));return{args:q,
data:d,missing:l,relative:b,fragments:t,requested:p,error:k&&k.error,hasValue:k&&k.hasValue}},setPathMaps:a(19),setPathValues:a(30),setJSONGraphs:a(18)}},function(b,e,a){b.exports=function(a,b){for(var c=a["\u001ef_refs_length"]||0,e=b["\u001ef_refs_length"]||0,f=-1;++f<c;){var m=a["\u001ef_ref"+f];void 0!==m&&(m["\u001ef_context"]=b,b["\u001ef_ref"+(e+f)]=m,a["\u001ef_ref"+f]=void 0)}b["\u001ef_refs_length"]=c+e;a["\u001ef_refs_length"]=void 0;return b}},function(b,e,a){b.exports=function(a){for(var b=
-1,c=a["\u001ef_refs_length"]||0;++b<c;){var e=a["\u001ef_ref"+b];null!=e&&(e["\u001ef_context"]=e["\u001ef_ref_index"]=a["\u001ef_ref"+b]=void 0)}a["\u001ef_refs_length"]=void 0;return a}},function(b,e,a){b.exports=function(a){var b=a["\u001ef_context"];if(b){for(var c=(a["\u001ef_ref_index"]||0)-1,e=(b["\u001ef_refs_length"]||0)-1;++c<=e;)b["\u001ef_ref"+c]=b["\u001ef_ref"+(c+1)];b["\u001ef_refs_length"]=e;a["\u001ef_ref_index"]=a["\u001ef_context"]=void 0}return a}},function(b,e,a){b.exports=function(){var a=
this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001ef_parent"]||a&&a["\u001ef_invalidated"]?!1:!0:!0}},function(b,e,a){var c=a(3),f=a(10);a(89);b.exports=function(a){var b,d;if(!a||"object"!==typeof a||!(d=a["\u001ef_meta"])||"object"!==typeof d)return null;var e=this._root.cache,r=this._recycleJSON,p=d.abs_path,q,u;if(!p)return r&&(b={json:a},b.__proto__=c.prototype),this._clone({_node:void 0,_seed:b});if(0===p.length)return r&&(b={json:a},b.__proto__=
c.prototype),this._clone({_node:e,_path:p,_referenceContainer:!0,_seed:b});var v=d.deref_to,n=d.deref_from,k=f(e,p),h="e";if(n){h=!1;d=-1;u=n.length;for(q=e;++d<u&&(q=q[n[d]],q&&!q.$type););if(v&&q&&"ref"===q.$type)for(h=!0,u=v.length,e=q.value,d=0;d<u;++d)if(e[d]!==v[d]){k=void 0;h=!1;break}}h?"e"===h&&(q=!0):q=!1;r&&(b={json:a},b.__proto__=c.prototype);return this._clone({_seed:b,_node:k,_path:p,_referenceContainer:q})}},function(b,e,a){e=a(5);b.exports=e("BoundJSONGraphModelError",function(){this.message=
"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,e,a){e=a(5);b.exports=e("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,e,a){e=a(5);b.exports=e("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},
function(b,e,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}e=a(5);b.exports=e("MaxRetryExceededError",function(a,b,e,w){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(e&&"relative: [\n\t"+c(e)+"\n]\n"||"")+(w&&"optimized: [\n\t"+c(w)+"\n]\n"||"")})},function(b,e){b.exports=String.fromCharCode(30)+"f_"},function(b,e,a){var c=a(11);b.exports=function(a,b,e,w,m,r){"number"!==typeof m&&(m=.75);for(var d,
g=w*m;m=b.pop();)e-=d=m.$size||0,c(m,d,a,r);if(e>=w){for(b=a["\u001ef_tail"];e>=g&&(m=b);)b=b["\u001ef_prev"],e-=d=m.$size||0,c(m,d,a,r);a["\u001ef_tail"]=m;null==m?a["\u001ef_head"]=void 0:m["\u001ef_next"]=void 0}}},function(b,e,a){function c(a,b,c){r.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function d(a,b,c,d,e,g){p.call(this,a);this.data=b;this.request=this.missing=
null;this.started=!1;this.retryCount=-1;this.errors=c;this.errored=!1;this.relative=null;this.hasValue=!1;this.requested=this.fragments=null;this.completed=!1;this.operation=d;this.progressive=e;this.maxRetryCount=g}function g(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=v(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(x){throw x;}finally{--c.syncRefCount}}function w(a,b){try{throw b;}catch(t){p.prototype.onError.call(a,t)}}function m(a,b){for(var c,d,e,h=Object.keys(b),g=-1,f=h.length;++g<f;)e=
h[g],"\u001ef_meta"===e?a["\u001ef_meta"]=b["\u001ef_meta"]:(d=b[e],c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:m(c,d):void 0===c&&(a[e]=d)));return a}var r=a(55),p=a(14),q=a(93),u=a(3),v=a(36),n=a(53),k=a(91);b.exports=c;c.prototype=Object.create(r.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;
a.progressive=a.progressive||this.operator.progressive;a.maxRetryCount=a.maxRetryCount||this.operator.maxRetryCount;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){void 0===a&&(a={},a.__proto__=u.prototype);return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),
this.source)};c.prototype._toJSONG=function(a,b){void 0===a&&(a={},a.__proto__=u.prototype);return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,
!0,this.operator.maxRetryCount),this.source)};f.prototype.call=function(a,b){return a.subscribe(new d(b,this.data,this.errors,this.operation,this.progressive))};d.prototype=Object.create(p.prototype);d.prototype.operations={get:a(70),set:a(82),call:a(69),invalidate:a(80)};d.prototype.next=d.prototype.onNext=function(a){if(!this.started)this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount;else if(this.destination){var b,
c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,h=this.errors,f,k=this.hasValue,n=this.operation,p=this.progressive,q=p&&d;e._recycleJSON&&"get"===this.type&&(q=!1);q&&(d={},d.__proto__=u.prototype);if(a&&a.length){f=this.operations[c][n](e,a,d,p||!e._source,-1===this.retryCount);if(f.error)return w(this,f.error);h&&f.errors&&h.push.apply(h,f.errors);if(b=f.fragments)a=f.args,this.fragments=b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=k||(k=
f.hasValue)}this.completed=!b||!e._source;"set"!==c&&(this.args=a,q&&(this.data=m(d,this.data)));p&&k&&d&&(d.json||d.jsonGraph)&&g(d,n,e._root,this.destination)}};d.prototype.error=d.prototype.onError=function(a){if(a instanceof n)return p.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};d.prototype.complete=d.prototype.onCompleted=function(a){if(this.destination){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});
if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&g(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?w(this,b.length&&b||a):p.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return w(this,new k(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)}};d.prototype.dispose=
d.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;p.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&q(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,e,a){function c(a){m.call(this,[]);this.modelRoot=a}function f(a,
b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var d=a(55),g=a(96),w=a(14),m=a(15),r=a(56);b.exports=c;c.prototype=Object.create(m.prototype);c.prototype.set=function(a,b,c,e){var f=this;return new d(function(d){var h=new g("set",f,a._source,new r);d=h.subscribe(new w(d,h));f.add(h);h.data=e.jsonGraph;h.requested.push(c);h.optimized.push(b);h.connect();return d})};c.prototype.call=function(a,b,c,e){var f=this;return new d(function(b){var c=new g("call",
f,a._source,new r);b=c.subscribe(new w(b,c));f.add(c);c.data=e;c.boundPath=a._path;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,h=-1,l=b.subscriptions,p=l.length,r=new m([],a);++h<p;){var x=l[h];if("get"===x.type&&((x=x.batch(d,e,d=[],e=[]))&&r.add(x.subscribe(new w(a,x))),!e.length))break}e.length&&(x=l[h]=(new g("get",
b,c,f)).batch(d,e),r.add(x.subscribe(new w(a,x))),x.connect());return r}},function(b,e,a){function c(a,b,c,d){g.call(this,[],b);this.trees=[];this.type=a;this.data=null;this.responded=this.active=!1;this.paths=null;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){var a,b=this.paths=q(v(this.optimized.reduce(function(a,b){return u(b,a)},{})));this.trees=this.optimized.map(function(a){return v(u(a))});this.active=!0;try{switch(this.type){case "get":a=
this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(l){this.disposable={},g.prototype.onError.call(this,new w(l))}}function d(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,g,h=-1,k=b.length;a:for(;++h<k;)if(g=b[h],g.length>c){f=0;do if(g[f]!==a[f])continue a;while(++f<c);d[++e]=g.slice(c)}return d}var g=a(97);a(14);a(15);var w=a(53),
m=a(18),r=a(30),p=a(28),q=a(39),u=a(37),v=a(38),n=a(63);b.exports=c;c.prototype=Object.create(g.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){this.responded=!0;var c=!1,e=a.jsonGraph,f=this.boundPath,b=b.modelRoot,g=a.invalidated,k=a.paths||this.paths,n=this.requested.slice(0);a=this.observers.slice(0);var q=b.onChange;g&&g.length&&(c=p({_root:b,_path:[]},g,!1));k&&k.length&&e&&"object"===typeof e&&(e=m({_root:b},[{paths:k,jsonGraph:e}],b.errorSelector,b.comparator,
!1),k=e[0],c=c||e[2]);c&&q&&q.call(b.topLevelModel);a.forEach(function(a,b){a.onNext({type:"get",paths:n[b]||d(f,k)})})}};c.prototype.error=c.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=q(v(this.requested.reduce(function(a,b){return u(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&
r({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);g.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});g.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.trees.splice(a,1),this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=
c.prototype.unsubscribe=function(){this.trees=[];this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();g.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};c.prototype.batch=
function(a,b,c,d){if(this.active){var e=[],f=[],g=this.trees,h=-1,k=-1,l=-1,m=-1,p=-1,q=g.length,r=b.length,t=a.length-1;a:for(;++h<r;){for(var w=-1,L=b[h],N=L.length;++w<q;){var S=g[w][N];if(S&&n(S,L,0,N)){f[++m]=L;p<t&&(e[++p]=a[h<t?h:t]);continue a}}d[++k]=L;l<t&&(c[++l]=a[h<t?h:t])}return~m?(this.requested.push(e),this.optimized.push(f),this.trees.push(v(u(f))),this):null}this.trees.push({});this.requested.push(a);this.optimized.push(b);return this}},function(b,e,a){function c(a,b){f.call(this,
null,b);this.observers=a||[]}var f=a(14),d=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new d([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=
[]}},function(b,e){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,e,a){var c=Array.isArray,f=a(20);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=a[d])}return b}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&
a.$expires||void 0}},function(b,e,a){var c=a(6);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,e,a){var c=Array.isArray,f=a(6);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,e,a){b.exports=a(104)},function(b,e,a){(function(b,f){Object.defineProperty(e,"__esModule",{value:!0});var c=a(105),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);
e["default"]=b}).call(e,a(35),a(106)(b))},function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]=function(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,e){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,
configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,e,a){b.exports=a(61)}])});
//# sourceMappingURL=falcor.all.min.js.map
