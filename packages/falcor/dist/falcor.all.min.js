(function(b,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("falcor",[],d):"object"===typeof exports?exports.falcor=d():b.falcor=d()})(this,function(){return function(b){function d(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,d);f.l=!0;return f.exports}var a={};d.m=b;d.c=a;d.i=function(a){return a};d.d=function(a,f,e){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:e})};
d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};d.p="";return d(d.s=110)}([function(b,d){b.exports="ref"},function(b,d,a){var c=a(60),f=a(34),e=a(61);b.exports=function(a,h){a=a.$expires;return void 0===a||null===a||a===e?!1:a===f?h:a<c()}},function(b,d){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,d,a){var c=a(54);b.exports=function(a,e,
n){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,e.push(a),c(n,a));return a}},function(b,d){b.exports={$type:"atom"}},function(b,d,a){b.exports=function(a,f){var c=f["\u001e\u0192_refs_length"]||0;f["\u001e\u0192_ref"+c]=a;f["\u001e\u0192_refs_length"]=c+1;a["\u001e\u0192_ref_index"]=c;a["\u001e\u0192_context"]=f}},function(b,d,a){(function(a){function c(a){this["\u001e\u0192_meta"]=a||{}}function e(c){var e=typeof c,f=arguments.length;if(0===f)c=this;else if(e!==q){if(!c||e!==
r)return c}else{if(1!==f)return c;c=this}return c===a?void 0:c}function n(){return k(e.apply(this,arguments),n,!1)}function h(a){a=e.apply(this,arguments);var f,n=0,g=k(a,h,!0);a&&(f=a["\u001e\u0192_meta"])&&(n=f.version);g&&typeof g===r&&(g.__proto__=c.prototype,f=g["\u001e\u0192_meta"])&&(f.version=n);return g}function k(a,c,e){if(!a||typeof a!==r)return a;var g,l,f,n,h,b;if(p(a))b=a;else{b={};g=-1;n=Object.keys(a);l=n.length;if(e&&(f=a["\u001e\u0192_meta"])){var u=f.$code,k=f.abs_path,w=f.deref_to,
x=f.deref_from;f=b["\u001e\u0192_meta"]={};u&&(f.$code=u);k&&(f.abs_path=k);w&&(f.deref_to=w);x&&(f.deref_from=x)}for(;++g<l;)"\u001e\u0192_meta"!==(h=n[g])&&(b[h]=c(a[h],c,e))}return b}c.prototype=Object.create(Object.prototype,Object.assign({toJSON:{value:n},toProps:{value:h},toString:{value:function(a){return JSON.stringify(k(e.call(this,this),k,!0===a))}},$__hash:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__version:{enumerable:!1,get:function(){var a=
this["\u001e\u0192_meta"];return a&&a.version||0}}},"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,c){var e=Array.prototype[c];a[c]={writable:!0,enumerable:!1,value:function(){return e.apply(this,arguments)}};return a},{})));var p=Array.isArray,r="object",q="string";b.exports=c}).call(d,a(35))},function(b,d){function a(){var a=
Error.call(this,"`null` is not allowed in branch key positions.");a.name="NullInPathError";this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="NullInPathError";a.message="`null` is not allowed in branch key positions.";b.exports=a},function(b,d,a){var c=a(2);b.exports=function(a){return c(a)&&a.$size||0}},function(b,d,a){var c=a(33);b.exports=function(a){for(var e,f=Object.keys(a),h={},b=-1,p=f.length;++b<p;)e=f[b],c(e)||(h[e]=a[e]);return h}},
function(b,d,a){function c(a,n){var e=a,b,p=0,r=n.length;if(0<r){do for(e=e[n[p]];e&&(b=e.$type)===f;)e=c(a,e.value);while(++p<r&&e&&!b)}return e}var f=a(0);b.exports=c},function(b,d,a){var c=a(29),f=a(49);b.exports=function(a,n,b,k){var e=a;do{var r=e["\u001e\u0192_parent"];0>=(e.$size=(e.$size||0)-n)&&null!=r?c(e,r,e["\u001e\u0192_key"],b):e["\u001e\u0192_version"]!==k&&f(e,k);e=r}while(e);return a}},function(b,d,a){var c=a(61);b.exports=function(a,e){if(e.$expires!==c){var f=a["\u001e\u0192_head"];
if(!f)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=e;else if(f!==e){var b=e["\u001e\u0192_prev"],k=e["\u001e\u0192_next"];k&&(k["\u001e\u0192_prev"]=b);b&&(b["\u001e\u0192_next"]=k);e["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=e;e["\u001e\u0192_next"]=f;f["\u001e\u0192_prev"]=e;e===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=b)}}}},function(b,d,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination={error:c,onError:c,
next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(14);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var c=this.destination;if(c)if(c.onNext)c.onNext(a);else c.next&&c.next(a)};c.prototype.error=c.prototype.onError=function(a){var c=this.destination;if(c){if(c.onError)c.onError(a);else c.error&&c.error(a);this.dispose()}else throw this.dispose(),a;};c.prototype.complete=c.prototype.onCompleted=
function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,d){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=
a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,d){b.exports="error"},function(b,d,a){var c=a(10);b.exports=function(a,e){e=e||a._path;var f=a._node;if(!f||void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=null,0===e.length?f=a._root.cache:(f=c(a._root.cache,e),e===a._path&&(a._node=f));return f}},function(b,d,a){function c(a,e,g,l,m,n,b,r,
u,h,k,p,q,d,D,E,G,K){var A={},v=e<a.length-1,w=a[e],x=y(w,A),B=p.index;do{k.depth=e;var t=f(g,l,m,n,b,r,x,v,!1,k,p,q,d,D,E,G,K);k[e]=x;k.index=e;var C=t[0],z=t[1],F=t[4];F[F.index++]=x;C&&(v?c(a,e+1,g,z,C,n,t[3],t[2],u,h,k,F,q,d,D,E,G,K):(u.push(k.slice(0,k.index+1)),h.push(F.slice(0,F.index))));x=y(w,A);if(A.done)break;p.index=B}while(1)}function f(a,c,g,l,m,b,v,t,u,B,C,d,y,H,D,E,G){for(u=g.$type;u===n;){a:{c=a;m=l;C=B;var A=d,w=y,x=H,z=D,F=E,X=G,R,I,J=g.value;u=J.slice(0);if(h(g,X))k(g,w,x),g=void 0,
R=c,I=m,u.index=J.length;else{var S=0,O=g,P=J.length-1;R=g=c;I=b=m;do{var V=J[S],ba=S<P;u.index=S;I=f(c,R,g,m,I,b,V,ba,!0,C,u,A,w,x,z,F,X);g=I[0];u=I[4];if(!g||"object"!==typeof g){u.index=S;C=I;break a}R=I[1];b=I[2];I=I[3]}while(S++<P);u.index=S;O["\u001e\u0192_context"]!==g&&p(O,g)}e[0]=g;e[1]=R;e[2]=b;e[3]=I;e[4]=u;C=e}g=C[0];if(!g||"object"!==typeof g)return C;c=C[1];b=C[2];m=C[3];C=C[4];u=g.$type}if(void 0===u){if(null==v){if(t)throw new q;g&&(v=g["\u001e\u0192_key"])}else c=g,m=b,g=c[v],b=m&&
m[v];g=r(c,g,b,v,B,C,d,y,H,D,E,G)}e[0]=g;e[1]=c;e[2]=b;e[3]=m;e[4]=C;return e}var e=Array(5),n=a(0),h=a(1),k=a(3),p=a(5),r=a(82),q=a(7),y=a(22);b.exports=function(a,f,g,l,m){var n=a._root,b=n.expired,r=n.version++,u=n.cache;a=u["\u001e\u0192_version"];for(var h=[],k=[],p=[],w=[],x=-1,q=f.length;++x<q;)for(var d=f[x],y=d.paths,d=d.jsonGraph,K=-1,M=y.length;++K<M;){var L=y[K];k.index=0;c(L,0,u,u,u,d,d,d,p,w,h,k,r,b,n,l,g,m)}e[0]=void 0;e[1]=void 0;e[2]=void 0;e[3]=void 0;e[4]=void 0;f=u["\u001e\u0192_version"];
(g=n.onChange)&&a!==f&&g();return[p,w]}},function(b,d,a){function c(a,e,m,b,r,k,u,h,p,w,x,q,d,E,G){var g;if(a&&"object"===typeof a&&!a.$type){g=[];var l=0;n(a)&&(g[l++]="length");for(var v in a)y(v)||(g[l++]=v)}else g=void 0;if(g&&g.length){l=0;v=g.length;var A=p.index;do{var t=g[l],B=a[t],C=!(!B||"object"!==typeof B)&&!B.$type;h.depth=e;var z=f(m,b,r,t,B,C,!1,h,p,w,x,q,d,E,G);h[e]=t;h.index=e;var F=z[0],D=z[1],z=z[2];z[z.index++]=t;F&&(C?c(B,e+1,m,D,F,k,u,h,z,w,x,q,d,E,G):(k.push(h.slice(0,h.index+
1)),u.push(z.slice(0,z.index))));if(++l>=v)break;p.index=A}while(1)}}function f(a,c,m,n,b,t,u,B,q,d,y,H,D,E,G){for(var g=m.$type;g===h;){a:{c=b;q=a;var g=B,l,v=d,A=y,C=H,z=D,F=E,I=G,J,S=m.value;l=S.slice(0);if(k(m,I))p(m,A,C),m=void 0,J=q,l.index=S.length;else{var O=m;m=m["\u001e\u0192_context"];if(null!=m)J=m["\u001e\u0192_parent"]||q,l.index=S.length;else{var P=0,V=S.length-1;l.index=P;J=m=q;do{J=f(q,J,m,S[P],c,P<V,!0,g,l,v,A,C,z,F,I);m=J[0];l=J[2];if(!m||"object"!==typeof m){l.index=P;q=J;break a}J=
J[1]}while(P++<V);l.index=P;O["\u001e\u0192_context"]!==m&&r(O,m)}}e[0]=m;e[1]=J;e[2]=l;q=e}m=q[0];if(!m||"object"!==typeof m)return q;c=q[1];q=q[2];g=m&&m.$type}if(void 0===g){if(null==n){if(t)throw new w;m&&(n=m["\u001e\u0192_key"])}else c=m,m=c[n];m=x(c,m,n,b,t,u,B,q,d,y,H,D,E,G)}e[0]=m;e[1]=c;e[2]=q;return e}var e=Array(3),n=Array.isArray,h=a(0),k=a(1),p=a(3),r=a(5),q=a(10),y=a(19),w=a(7),x=a(46);b.exports=function(a,f,m,n,b){var g=a._root,l=g.expired,r=g.version++,h=a._path,k=g.cache,v=q(k,h),
p=v["\u001e\u0192_parent"]||k;a=k["\u001e\u0192_version"];for(var w=[],A=[],x=[],d=h.length,y=-1,L=f.length;++y<L;){var N=f[y],T=h.slice(0);T.index=d;c(N.json,0,k,p,v,A,x,w,T,r,l,g,n,m,b)}e[0]=void 0;e[1]=void 0;e[2]=void 0;f=k["\u001e\u0192_version"];(g=g.onChange)&&a!==f&&g();return[A,x]}},function(b,d,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(33)},function(b,d){function a(c,f,e){e=e||[];f=f||[];for(var n=[],b=c.$keys,k=b.length,p=-1;++p<k;){var r=c[p],q=b[p];r?a(r,f,e.concat([q])):
n.push(q)}1===n.length?f.push(e.concat(n)):1<n.length&&f.push(e.concat([n]));return f}b.exports=a},function(b,d){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,d){function a(a,c){var e=c.from=a.from||0;a=c.to=a.to||"number"===typeof a.length&&c.from+a.length-1||0;c.rangeOffset=c.from;c.loaded=!0;e>a&&(c.empty=!0)}var c=Array.isArray;b.exports=function(f,e){if(void 0===e.isArray){e.done=!1;var n=e.isObject=!(!f||"object"!==typeof f);e.isArray=
n&&c(f);e.arrayOffset=0}if(e.isArray){var b;do{e.loaded&&e.rangeOffset>e.to&&(++e.arrayOffset,e.loaded=!1);if(e.arrayOffset>=f.length){e.done=!0;break}n=f[e.arrayOffset];"object"===typeof n?(e.loaded||a(n,e),e.empty||(b=e.rangeOffset++)):(++e.arrayOffset,b=n)}while(void 0===b);return b}if(e.isObject){e.loaded||a(f,e);if(e.rangeOffset>e.to){e.done=!0;return}return e.rangeOffset++}e.done=!0;return f}},function(b,d,a){b.exports=a(40)},function(b,d,a){b.exports=a(43)},function(b,d){b.exports=function(a,
c,f,e,n){var b=0,k;k=e.jsonGraph;k||(e.jsonGraph=k={});do{e=c[b++];if(b>=f){k=k[e]=!0!==n?a:k[e]||{};break}k=k[e]||(k[e]={})}while(1);return k}},function(b,d,a){var c=Array.isArray,f=a(39).pathToTree,e=a(4);b.exports=function(a,b,k,p,r,q,d,w,x,g,l,m){if(x||l){for(var n,h=-1,t=(q=r-b)&&Array(q)||void 0;++h<q;){n=a[h+b];var u;u=n;if("object"!==typeof u||null===u)u=!1;else if(c(u))u=0===u.length;else{var B=u.to,y=u.from||0;"number"!==typeof B&&(B=y+(u.length||0));u=y>=B}if(u)return;t[h]=n}var z;a=null===
n;n=x;var F;x?(u=r,B=p,F=k.requested||(k.requested=[])):(b=w,B=d,u=w+q-Number(a));do{if(q<r||!n){p=-1;h=b;for(z=Array(u);++p<h;)z[p]=B[p];for(h=-1;p<u;)z[p++]=t[++h]}if(n=!n){x&&(F[F.length]=z);break}F[F.length]=z||t;b=w;B=d;F=k.missing||(k.missing=[]);u=w+q-Number(a)}while(1);if(l)return 0===q?e:f(g,z,b,u,e,m)}}},function(b,d,a){var c=a(1),f=a(3),e=a(12);b.exports=function(a,b,k,p,r,q,d,w,x,g,l,m,A,v,t,u,B,C,z,F,H,D){var n=C;if(!a||!b)return C&&(n=!0,q&&(d.hasValue=!0)),D(p,r,d,w,x,m,g,l,z,k,n,u);
if(c(a,t))return a["\u001e\u0192_invalidated"]||f(a,v,A),D(p,r,d,w,x,m,g,l,z,k,n,u);e(A,a);if(q)return m&&(w[r]=null),H(a,b,r,q,d,w,g,l,m,B,C,F)}},function(b,d,a){function c(a,b,n,r,k,u,h,p,d){var l={},m=b<a.length-1,v=a[b],A=w(v,l);do{e=f(n,r,k,A,m,!1,u,h,p,d);var B=e[0],t=e[1];B&&(m?c(a,b+1,n,t,B,u,h,p,d):g(B,t,A,p)&&x(t,q(B),p,u));A=w(v,l)}while(!l.done)}function f(a,c,g,b,h,u,w,x,q,d){for(u=g.$type;u===n;){a:{c=a;u=w;var l=x,m=q,v=d;if(k(g,v))p(g,l,m),e[0]=void 0,e[1]=c;else{r(m,g);var B=g,t=
g.value,A;g=g["\u001e\u0192_context"];if(null!=g)A=g["\u001e\u0192_parent"]||c;else{var C=0,z=t.length-1;A=g=c;do{e=f(c,A,g,t[C],C<z,!0,u,l,m,v);g=e[0];if(!g&&"object"!==typeof g)break a;A=e[1]}while(C++<z);B["\u001e\u0192_context"]!==g&&y(B,g)}e[0]=g;e[1]=A}}g=e[0];if(!g&&"object"!==typeof g)return e;c=e[1];u=g.$type}if(void 0!==u)return[g,c];if(null==b){if(h)throw Error("`null` is not allowed in branch key positions.");}else c=g,g=c[b];e[0]=g;e[1]=c;return e}var e=Array(2),n=a(0),h=a(16),k=a(1),
p=a(3),r=a(12),q=a(8),y=a(5),w=a(22),x=a(11),g=a(30);b.exports=function(a,g,f){var l=a._root,b=l.expired,n=l.version++,m=l.cache,r=h(a),k=r["\u001e\u0192_parent"]||m;a=m["\u001e\u0192_version"];for(var p=-1,w=g.length;++p<w;)c(g[p],0,m,k,r,n,b,l,f);e[0]=void 0;e[1]=void 0;g=m["\u001e\u0192_version"];(l=l.onChange)&&a!==g&&l()}},function(b,d,a){var c=a(0),f=a(54),e=a(85),n=a(86);b.exports=function(a,b,p,r){if(a&&"object"===typeof a){var k=a.$type;k&&(k===c&&n(a),f(r,a));e(a);b[p]=a["\u001e\u0192_parent"]=
void 0;return!0}return!1}},function(b,d,a){var c=a(29),f=a(19);b.exports=function n(a,b,p,r){if(c(a,b,p,r)){if(null==a.$type)for(var k in a)f(k)||n(a[k],a,k,r);return!0}return!1}},function(b,d,a){function c(a,g,e,b,n,r,k,u,p,h,w,d,q,D,E,G){var l={},m=e<g.length-1,v=g[e],x=y(v,l),A=h.index;do{p.depth=e;p[e]=x;p.index=e;var t=f(b,n,r,x,a,m,!1,p,h,w,d,q,D,E,G);p[e]=x;p.index=e;var B=t[0],C=t[1],t=t[2];t[t.index++]=x;B&&(m?c(a,g,e+1,b,C,B,k,u,p,t,w,d,q,D,E,G):(k.push(p.slice(0,p.index+1)),u.push(t.slice(0,
t.index))));x=y(v,l);if(l.done)break;h.index=A}while(1)}function f(a,c,l,b,r,v,d,u,B,y,z,F,H,D,E){for(var g=l.$type;g===n;){a:{c=r;B=a;var g=u,m,x=y,t=z,A=F,C=H,X=D,R=E,I,J=l.value;m=J.slice(0);if(h(l,R))k(l,t,A),l=void 0,I=B,m.index=J.length;else{var S=l;l=l["\u001e\u0192_context"];if(null!=l)I=l["\u001e\u0192_parent"]||B,m.index=J.length;else{var O=0,P=J.length-1;I=l=B;do{var V=J[O],ba=O<P;m.index=O;I=f(B,I,l,V,c,ba,!0,g,m,x,t,A,C,X,R);l=I[0];m=I[2];if(!l||"object"!==typeof l){m.index=O;B=I;break a}I=
I[1]}while(O++<P);m.index=O;S["\u001e\u0192_context"]!==l&&p(S,l)}}e[0]=l;e[1]=I;e[2]=m;B=e}l=B[0];if(!l||"object"!==typeof l)return B;c=B[1];B=B[2];g=l.$type}if(!v||void 0===g){if(null==b){if(v)throw new q;l&&(b=l["\u001e\u0192_key"])}else c=l,l=c[b];l=w(c,l,b,r,v,d,u,B,y,z,F,H,D,E)}e[0]=l;e[1]=c;e[2]=B;return e}var e=Array(3),n=a(0),h=a(1),k=a(3),p=a(5),r=a(10),q=a(7),y=a(22),w=a(46);b.exports=function(a,g,f,b,n){var l=a._root,m=l.expired,u=l.version++,k=a._path,p=l.cache,h=r(p,k),w=h["\u001e\u0192_parent"]||
p;a=p["\u001e\u0192_version"];for(var x=[],d=[],q=[],A=k.length,y=-1,M=g.length;++y<M;){var L=g[y],N=L.path,L=L.value,T=k.slice(0);T.index=A;c(L,N,0,p,w,h,d,q,x,T,u,m,l,b,f,n)}e[0]=void 0;e[1]=void 0;e[2]=void 0;g=p["\u001e\u0192_version"];(l=l.onChange)&&a!==g&&l();return[d,q]}},function(b,d){function a(a,f){a=Error.call(this,"The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges");a.name="InvalidKeySetError";this.stack=a.stack;
this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="InvalidKeySetError";a.is=function(a){return a&&"InvalidKeySetError"===a.name};b.exports=a},function(b,d,a){d=a(93);d=new RegExp("^"+d,"i","g");b.exports=d.test.bind(d)},function(b,d){b.exports=0},function(b,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(d=window)}b.exports=d},function(b,d,a){var c=Array.isArray,f=a(20);b.exports=function(a,
b){if(a)c(a)||c(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,c){var e=c.length;a[e]||(a[e]=[]);a[e].push(c);return a},b||{})}},function(b,d,a){var c=a(39);b.exports=function(a,e){return Object.keys(a).reduce(function(e,f){e[f]=c(a[f],e[f]);return e},e||{})}},function(b,d,a){function c(a,f,b){var g,l=Object.create(null),m=""+r(""+f),k=[],p=-1,h=0,u=[],w=0,d,x,q,y,D,E;q=[];y=-1;if(f<b-1){for(D=e(a,q);++y<D;)g=q[y],d=c(a[g],f+1,b),x=d.code,l[x]?d=l[x]:(k[h++]=x,d=l[x]={keys:[],sets:d.sets}),
m=""+r(m+g+x),n(g)&&d.keys.push(parseInt(g,10))||d.keys.push(g);for(;++p<h;)if(g=k[p],d=l[g],q=d.keys,D=q.length,0<D)for(a=d.sets,f=-1,b=a.length,y=q[0];++f<b;){g=a[f];d=-1;x=g.length;E=Array(x+1);for(E[0]=1<D&&q||y;++d<x;)E[d+1]=g[d];u[w++]=E}}else for(D=e(a,q),1<D?u[w++]=[q]:u[w++]=q;++y<D;)m=""+r(m+q[y]);return{code:m,sets:u}}function f(a,c){return a-c}function e(a,c,e){var g=0;if(a===q)c[g++]=null;else{for(var f in a)c[g++]=f;1<g&&c.sort(e)}return g}function n(a){var c=a,e=typeof a;if("string"===
e){c=a.length;if(0===c||17<c||!p.test(a))return!1;if(16>c)return!0;c=+a}else if("number"!==e)return!1;return 0===c%1&&9007199254740991>=k(c)}var h=Array.isArray,k=Math.abs,p=/^(0|(\-?[1-9][0-9]*))$/,r=a(21),q=a(4);b.exports=function(a){var e,b=[],g=0,l;for(l in a){var m;if(m=n(l))m=e=a[l],m=null!==m&&"object"===typeof m;if(m){m=c(e,0,parseInt(l,10)).sets;for(var r=-1,k=m.length;++r<k;){for(var p=g++,u=m[r],d=-1,q=u.length;++d<q;){var y=u[d];if(h(y)){var F=u,H=d;for(var D=-1,E=y.length-1,G=0<E;++D<=
E;){var K=y[D];if(!n(K)){G=!1;break}y[D]=parseInt(K,10)}!0===G&&(y.sort(f),D=y[0],G=y[E],G-D<=E&&(y={from:D,to:G}));F[H]=y}}b[p]=u}}}return b};b.exports._isSafeNumber=n},function(b,d,a){function c(a,b,k,p,r,d){if(k===p)return!0;var n,h,x=-1,g=0,l,m=k+1,q,v,t;h=b[k];if(null===h)return e;n=h;a=a?a:d?d(b,k,a):{};a:do{if("object"!==typeof h)d=h,v=void 0,q=!1;else if(f(h)){if(void 0!==t)break a;x=0;t=h;g=h.length;if(0===g)break a;h=t[x];continue a}else{v=h.to;d=h.from||0;"number"!==typeof v&&(v=d+(h.length||
0)-1);if(0>v-d)break a;q=!0}do m===p?a[d]=r:(h=a[b[k]=d],(l=c(h,b,m,p,r))?h||(a[d]=l):a[d]=r);while(q&&++d<=v);if(++x===g)break a;h=t[x]}while(1);b[k]=n;return a}var f=Array.isArray,e=a(4);b.exports=function(a,e){return a.reduce(function(a,e){return c(a,e,0,e.length,null)},e||{})};b.exports.pathToTree=c},function(b,d,a){var c=a(74),f=a(73),e=a(16),n=a(91),h=a(66),k=a(64);b.exports=function(a,b,d,y,w){var r,g;y=a._path;var l=a._root,m=l.cache,p,v,q,u=y&&y.length||0;if(u){if((r=e(a))&&r.$type)return{error:new n(y,
y)};q=[];for(g=0;g<u;++g)q[g]=y[g];g=a._referenceContainer}else r=m,q=[];p=[];var B=!1,C=d&&d.json,z={data:d},F=a._boxed,H=l.expired;v=a._recycleJSON;var D=a._materialized,E=!!a._source,G=l.branchSelector,K=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;var M,L=0,N=b.length;if(0<N)if(v){N=1;B=!0;if(!b[0].$keys||1<b.length)b=[k(h(b,{}))];do M=b[L],v=f(m,r,C,M,0,d,z,p,q,u,!1,g,l,H,w,G,F,D,E,K,a),C=v[0],v[0]=void 0,v[1]=void 0;while(++L<N)}else{do M=b[L],v=M.length,C=c(m,r,C,M,0,d,z,p,v,q,u,!1,g,
l,H,w,G,F,D,E,K,a);while(++L<N)}w=z.requested;z.args=B&&b||w;if(w&&w.length&&(z.relative=z.args,u)){b=[];g=0;for(u=w.length;g<u;++g)b[g]=y.concat(w[g]);z.requested=b}z.hasValue&&(d.json=C);return z}},function(b,d,a){var c=Array(3),f=a(0),e=a(12),n=a(1),h=a(5),k=a(51);b.exports=function(a,b,d,y){e(d,b);var r,p,g=0,l=a,m=b.value,q=m,v=m.length;do{if(0===g&&void 0!==(r=b["\u001e\u0192_context"]))l=r,g=v;else if(p=m[g++],void 0===(l=l[p]))break;if(g===v){p=l.$type;if(void 0!==p&&n(l,y))break;else{if(l===
b)throw new k(m);l!==r&&h(b,l)}if(p===f)e(d,l),g=0,b=l,l=a,m=q=b.value,v=m.length;else break}else if(void 0!==l.$type)break}while(1);g<v&&void 0!==l&&(v=g);g=-1;for(m=Array(v);++g<v;)m[g]=q[g];c[0]=l;c[1]=m;c[2]=b;return c}},function(b,d,a){var c=a(9),f=a(72),e=a(15),n=a(4);b.exports=function(a,b,d,r,q,y,w,x,g,l,m,A){if(e===b&&!A)return f(a,d,q,y,g,l);d=a&&a.value;if(b&&void 0===d){if(m){debugger;q.hasValue=!0;return n}}else return q.hasValue=!0,l?c(a):d}},function(b,d,a){var c=a(77),f=a(89);b.exports=
function(a,b,d,k,p){var e,n;e=a._path;k=a._root;var h,w,x=e&&e.length||0;if(x)return{error:new f};w=[];n=e=k.cache;h=[];for(var g=a._boxed,l=k.expired,m=a._materialized,A=!!a._source,v=a._treatErrorsAsValues,t={data:d},u=-1,B=b.length;++u<B;){var C=b[u];a=C.length;c(n,e,C,0,d,t,h,a,w,x,!1,k,l,p,g,m,A,v)}t.args=t.relative=t.requested;return t}},function(b,d,a){b.exports=function(a,b,e,n,d){a["\u001e\u0192_key"]=e;a["\u001e\u0192_parent"]=b;void 0!==n&&(a["\u001e\u0192_version"]=n);a["\u001e\u0192_abs_path"]||
(a["\u001e\u0192_abs_path"]=d.slice(0,d.index).concat(e));return b[e]=a}},function(b,d,a){function c(a,e,b,n,r,d,u,k,h,q){if(a&&"object"===typeof a&&!a.$type)for(var g in a)if(!y(g)){var l=a[g],m=!(!l||"object"!==typeof l)&&!l.$type,v=f(b,n,r,g,l,m,!1,d,u,k,h,q),t=v[0],v=v[1];t&&(m?c(l,e+1,b,v,t,d,u,k,h,q):x(t,v,g,k)&&w(v,p(t),k,d))}}function f(a,c,b,d,p,q,u,x,w,y,F,H){for(u=b.$type;u===e;){a:{c=p;u=a;var g=x,l=w,m=y,v=F,t=H;if(n(b,t))h(b,l,m),c=[void 0,u];else{k(m,b);var A=b,B=b.value,C;b=b["\u001e\u0192_context"];
if(null!=b)C=b["\u001e\u0192_parent"]||u;else{var z=0,R=B.length-1;C=b=u;do{C=f(u,C,b,B[z],c,z<R,!0,g,l,m,v,t);b=C[0];if(!b||"object"!==typeof b){c=C;break a}C=C[1]}while(z++<R);A["\u001e\u0192_context"]!==b&&r(A,b)}c=[b,C]}}b=c[0];if(!b&&"object"!==typeof b)return c;c=c[1];u=b&&b.$type}if(void 0!==u)return[b,c];if(null==d){if(q)throw Error("`null` is not allowed in branch key positions.");}else c=b,b=c[d];return[b,c]}var e=a(0),n=a(1),h=a(3),k=a(12),p=a(8),r=a(5),q=a(16),y=a(19),w=a(11),x=a(30);
b.exports=function(a,e,b){var g=a._root,f=g.expired,l=g.version++,n=g._comparator,m=g.cache,d=q(a),k=d["\u001e\u0192_parent"]||m;a=m["\u001e\u0192_version"];for(var r=-1,p=e.length;++r<p;)c(e[r].json,0,m,k,d,l,f,g,n,b);e=m["\u001e\u0192_version"];(g=g.onChange)&&a!==e&&g()}},function(b,d,a){var c=a(0),f=a(15),e=a(34),n=a(102),h=a(8),k=a(57),p=a(50),r=a(1),q=a(3),y=a(44),w=a(48),x=a(47),g=a(11);b.exports=function(a,b,d,v,t,u,B,C,z,F,H,D,E,G){G=n(b,u);if(t||u){if(G&&r(b,!0)&&(q(b,F,H),G=b.$expires===
e?G:"expired"),G&&G!==c||!b||"object"!==typeof b)b=w(b,{},a,d,H,z),b=y(b,a,d,z,C)}else t=n(v),u=!1===k(v)<k(b),(G||t)&&D&&(u=!D(b,v,C.slice(0,C.index))),u&&(E&&t===f&&(v=E(x(B,d),v)),v=p(v,t,t?v.value:v),B=h(b)-h(v),b=w(b,v,a,d,H,z),a=g(a,B,H,z),b=y(b,a,d,z,C));return b}},function(b,d){b.exports=function(a,c){a=a.slice(0,a.depth);a[a.length]=c;return a}},function(b,d,a){var c=a(84),f=a(30),e=a(49);b.exports=function(a,b,d,p,r,q){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,d,p,r),e(b,q));
return d[p]=b}},function(b,d,a){b.exports=function(a,b){var c=[a],f=0;do{var d=c[f];if(d&&d["\u001e\u0192_version"]!==b){d["\u001e\u0192_version"]=b;c[f++]=d["\u001e\u0192_parent"];for(var k=-1,p=d["\u001e\u0192_refs_length"]||0;++k<p;)c[f++]=d["\u001e\u0192_ref"+k]}}while(-1<--f);return a}},function(b,d,a){var c=Array.isArray,f=a(60),e=a(34),n=a(105),h=a(100),k=a(8),p=a(101);b.exports=function(a,b,d){var r=0;if(b){var q=a["\u001e\u0192_wrapped_value"];a=h(a);r=k(a);a.$type=b;a["\u001e\u0192_prev"]=
void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=q||!1}else a={$type:n,value:d,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==d)r=51;else if(null==r||0>=r)switch(typeof d){case "object":r=c(d)?50+d.length:51;break;case "string":r=50+d.length;break;default:r=51}b=p(a);"number"===typeof b&&b<e&&(a.$expires=f()+-1*b);a.$size=r;return a}},function(b,d){function a(a){a=Error.call(this,"Encountered circular reference "+JSON.stringify(a));
a.name="CircularReferenceError";this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="CircularReferenceError";b.exports=a},function(b,d){function a(a){var c=Error.call(this,"An exception was thrown when making a request:\n\t"+a);c.name="InvalidSourceError";this.stack=c.stack;this.message=c.message;this.innerError=a;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="InvalidSourceError";a.is=function(a){return a&&"InvalidSourceError"===
a.name};b.exports=a},function(b,d,a){var c=a(29),f=a(11);b.exports=function(a,b,d,k,p,r){var e=p;"number"!==typeof e&&(e=.75);p="number"===typeof r;var e=k*e,n,h,x;for(h=b.pop();h;)x=h.$size||0,d-=x,!0===p?f(h,x,a,r):(n=h["\u001e\u0192_parent"])&&c(h,n,h["\u001e\u0192_key"],a),h=b.pop();if(d>=k){for(h=b=a["\u001e\u0192_tail"];d>=e&&h;)b=b["\u001e\u0192_prev"],x=h.$size||0,d-=x,!0===p&&f(h,x,a,r),h=b;a["\u001e\u0192_tail"]=a["\u001e\u0192_prev"]=h;null==h?a["\u001e\u0192_head"]=a["\u001e\u0192_next"]=
void 0:h["\u001e\u0192_next"]=void 0}}},function(b,d,a){b.exports=function(a,b){var c=b["\u001e\u0192_prev"],f=b["\u001e\u0192_next"];f&&(f["\u001e\u0192_prev"]=c);c&&(c["\u001e\u0192_next"]=f);b["\u001e\u0192_prev"]=b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=f);b===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=c)}},function(b,d,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}
var e=a(13),d=a(14),h=a(106).default;b.exports=f;f.prototype[h]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,c,b){return new d([this.operator.call(this.source,a instanceof e?a:new e(a,c,b))])};f.prototype.then=function(a,b){var e=this;this._promise||(this._promise=new c.Promise(function(a,c){var b=[],f=!1;e.subscribe({next:function(a){b[b.length]=a},error:function(a){f=!0;c(a)},complete:function(){!f&&a(1>=b.length?b[0]:b)}})}));
return this._promise.then(a,b)}}).call(d,a(35))},function(b,d){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,d,a){var c=a(2);b.exports=function(a){return c(a)&&a.$timestamp||void 0}},function(b,d,a){var c=a(2);b.exports=function(a){return c(a)&&"json"in a}},function(b,d,a){var c=Array.isArray,f=a(2);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},
function(b,d){b.exports=Date.now},function(b,d){b.exports=1},function(b,d,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(67);d=a(6);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=d;c.toProps=d.prototype.toProps;b.exports=c},function(b,d,a){var c=a(38),f=a(36),e=a(37);b.exports=function(a){return c(e(f(a)))}},function(b,d,a){function c(a){if(void 0!==a){for(var b="",e=a.$keys,d=-1,p=e.length;++d<p;){var r=e[d];if(null===r)b=""+f(""+b+"null");else{"object"===
typeof r&&(r="{from:"+r.from+",length:"+r.length+"}");var q=c(a[d]),b=void 0===q?""+f(""+b+r):""+f(""+b+r+q.$code)}}a.$code=b;return a}}var f=a(21);b.exports=c},function(b,d,a){function c(a,b,d,p){if(d===p)return!0;var n,k=-1,h=0,w=d+1,x,g,l;n=b[d];if(null===n)return a===e;a:do{if("object"!==typeof n)d=n,g=void 0,x=!1;else if(f(n)){if(void 0!==l)break a;k=0;l=n;h=n.length;if(0===h)break a;n=l[k];continue a}else{g=n.to;d=n.from||0;"number"!==typeof g&&(g=d+(n.length||0)-1);if(0>g-d)break a;x=!0}do if(w===
p){if(null!==a[d])return!1}else if(n=a[d],null===n||void 0===n||!1===c(n,b,w,p))return!1;while(x&&++d<=g);if(++k===h)break a;n=l[k]}while(1);return!0}var f=Array.isArray,e=a(4);b.exports=c},function(b,d,a){function c(a,b){return a.reduce(function(a,b){return e(b)?f(a,b,0,b.length):c(h(b),a)},b||{})}function f(a,b,c,d){if(c!==d){a=a||{};var p=a.$keys||(a.$keys=[]),h=a.$keysMap||(a.$keysMap={}),k,g=-1,l=0,m,r=c+1,v;k=b[c];if(null===k)return n;a:do{if("object"!==typeof k)m=k,"undefined"===typeof(c=h[m])&&
(c=p.length),p[c]=m,h[m]=c,k=f(a[c],b,r,d),void 0!==k&&(a[c]=k);else if(e(k)){if(void 0!==v)break a;g=0;v=k;l=k.length;if(0===l)break a;k=v[g];continue a}else{c=k.to;m=k.from||0;"number"!==typeof c&&(c=m+(k.length||0)-1);if(0>c-m)break a;k={from:m,length:c-m+1};m="{from:"+m+",length:"+(c-m+1)+"}";"undefined"===typeof(c=h[m])&&(c=p.length);p[c]=k;h[m]=c;k=f(a[c],b,r,d);void 0!==k&&(a[c]=k)}if(++g===l)break a;k=v[g]}while(1);return a}}var e=Array.isArray,n={$keys:[null],$keysMap:{"null":0}},h=a(20);
b.exports=c},function(b,d,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new e(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new p;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={__proto__:n.prototype});this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||
a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(94),e=a(69),n=a(6),h=a(68),k=a(98),p=a(56),r=a(53),q=a(8),y=a(2),w=a(58),x=a(10),g=a(59),l=a(18),m=a(17),A=a(23),v=a(78),t=a(24);b.exports=c;c.prototype.constructor=c;c.prototype.get=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(this._seed||
{__proto__:n.prototype},[])};c.prototype.set=function(){return(new f("set",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:n.prototype},[])};c.prototype.preload=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,[])};c.prototype.call=function(){return(new f("call",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:n.prototype},[])};c.prototype.invalidate=function(){return(new f("invalidate",this,Array.prototype.slice.call(arguments,
0)))._toJSON(null,null).then()};c.prototype.deref=a(88);c.prototype._hasValidParentReference=a(87);c.prototype.getValue=function(a){return this.get(a).lift(function(c){return this.subscribe({onNext:function(b){var g=-1;b=b.json;for(var e=a.length;b&&!b.$type&&++g<e;)b=b[a[g]];c.onNext(b)},onError:c.onError.bind(c),onCompleted:c.onCompleted.bind(c)})})};c.prototype.setValue=function(a,c){a=1===arguments.length?a.path:a;c=1===arguments.length?a:{path:a,value:c};return this.set(c).lift(function(c){return this.subscribe({onNext:function(b){var g=
-1;b=b.json;for(var e=a.length;b&&!b.$type&&++g<e;)b=b[a[g]];c.onNext(b)},onError:c.onError.bind(c),onCompleted:c.onCompleted.bind(c)})})};c.prototype.setCache=function(a){var c=this._root.cache;if(a!==c){var b=this._root,e=this._path;this._path=[];this._node=this._root.cache={};"undefined"!==typeof c&&(r(b,b.expired,q(c),0),this._recycleJSON&&(this._seed={__proto__:n.prototype}));var f;g(a)?f=m(this,[a])[0]:w(a)?f=l(this,[a])[0]:y(a)&&(f=l(this,[{json:a}])[0]);f&&A(this,f,null,!1,!0);this._path=
e}else"undefined"===typeof c&&(this._root.cache={});return this};c.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return v(this._root.cache);var c={},b=this._path;this._path=[];t(this,a,c);this._path=b;return c.jsonGraph};c.prototype.getVersion=function(a){a=void 0===a?[]:a;if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=
function(a){var b=new c(this);if(a)for(var g in a){var e=a[g];"delete"===e?delete b[g]:"_path"===g?(b[g]=e,!1===a.hasOwnProperty("_node")&&delete b._node):b[g]=e}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var c;"number"===typeof a?c=new k(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?c=a:"function"===typeof a&&(c={scheudle:a}):c=new k(1);return this._clone({_scheduler:c})};c.prototype.unbatch=function(){return this._clone({_scheduler:new p})};c.prototype.treatErrorsAsValues=
function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new h(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};c.prototype.toJSON=
function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=x(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||[]).slice(0)};c.prototype._getVersion=a(79);c.prototype._getPathValuesAsPathMap=A;c.prototype._getPathValuesAsJSONG=t;c.prototype._setPathValues=a(31);c.prototype._setPathMaps=a(18);c.prototype._setJSONGs=
a(17);c.prototype._setCache=a(18);c.prototype._invalidatePathValues=a(28);c.prototype._invalidatePathMaps=a(45)},function(b,d){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,e,d){return this._model.call.apply(this._model,[a,b,e].concat(d))._toJSONG()};b.exports=a},function(b,d,a){function c(a,b){a=a||{};
this.cache={};this.syncRefCount=this.version=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new e(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&(this.comparator=a.comparator);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=
a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(103),e=a(95);c.prototype.errorSelector=function(a,b){return b};c.prototype.comparator=function(a,b){return f(a,"value")&&f(b,"value")?a.value===b.value&&a.$type===b.$type&&a.$expires===b.$expires:a===b};b.exports=c},function(b,d,a){var c=a(23),f=a(24);
b.exports={json:function(a,b,f,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};var n=[].concat(b[1]||[]),k=[].concat(b[2]||[]),h=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&h&&h.length&&(e=c(a,h,f,d,!0).hasValue);return{data:f,missing:!0,hasValue:e,fragments:[b,n,k,h]}},jsonGraph:function(a,b,c,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};var k=[].concat(b[1]||[]),n=[].concat(b[2]||[]),h=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&h&&h.length&&(e=f({_root:a._root,_boxed:a._boxed,
_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},h,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:e,fragments:[b,k,n,h]}}}},function(b,d,a){b.exports={json:a(40),jsonGraph:a(43)}},function(b,d,a){var c=a(9);b.exports=function(a,b,d,h,k,p){var e=-1;b+=!!k;k=Array(b);for(a=p?c(a):a.value;++e<b;)k[e]=h[e];(d.errors||(d.errors=[])).push({path:k,value:a})}},function(b,d,a){function c(a,b,e,d,m,n,w,F,H,D,E,G,K,M,L,N,T,X,R,I,J){var v,u;if(void 0===b||void 0!==(v=b.$type)||
void 0===d)return h[1]=!1,h[0]=q(b,v,e,d,m,n,w,F,m,H,D,E,K,M,L,N,T,X,R,I,k,f),h;var t,A,B;v="";var C,z,Q,Z=d.$keys,ha=m+1,U,Y,ca,aa,ea,ia=D+1,da,la;J&&G&&(la=G.value,da=G["\u001e\u0192_abs_path"]);if(e)if("object"!==typeof e)e=void 0;else if(t=e["\u001e\u0192_meta"]){if(!(N||e instanceof r))A={},e=(A["\u001e\u0192_meta"]=t,A.__proto__=r.prototype,A);else if(t.version===b["\u001e\u0192_version"]&&t.$code===d.$code&&t.abs_path===b["\u001e\u0192_abs_path"])return w.hasValue=!0,h[0]=e,h[1]=!1,h;A=t.keys;
t.version=b["\u001e\u0192_version"];t.abs_path=b["\u001e\u0192_abs_path"];t.deref_to=la;t.deref_from=da}B={};var ma=-1,na=Z.length,fa,ka,ga=!1;a:for(;++ma<na;)if(Q=Z[ma],fa=d[ma],null===Q){if(void 0!==fa)throw new g;v=""+l(""+v+"null")}else{if("object"!==typeof Q)z=Q,U=void 0,Q=!1,ka=z;else{U=Q.to;z=Q.from||0;"number"!==typeof U&&(U=z+(Q.length||0)-1);if(0>U-z)break a;Q=!0;ka="{from:"+z+",length:"+(U-z+1)+"}"}do E=!1,Y=e&&e[z],ea=H,aa=ia,ca=G,C=b[z],F[m]=z,H[D]=z,C&&void 0!==fa&&C.$type===p&&!y(C,
L)&&(u=x(a,C,K,L),C=u[0],E=!0,ea=u[1],ca=u[2],aa=ea.length,u[0]=u[1]=u[2]=void 0),h=c(a,C,Y,fa,ha,n,w,F,ea,aa,E,ca,K,M,L,N,T,X,R,I,J),Y=h[0],ga=ga||h[1],n&&(void 0!==Y?(void 0===t&&(t={},t.version=b["\u001e\u0192_version"],t.abs_path=b["\u001e\u0192_abs_path"],t.deref_to=la,t.deref_from=da,e={},E={},e=N&&N((e["\u001e\u0192_meta"]=t,e.__proto__=r.prototype,e))||(E["\u001e\u0192_meta"]=t,E.__proto__=r.prototype,E)),B[z]=!0,A&&A.hasOwnProperty(z)&&(A[z]=!1),e[z]=Y):(ga=!0,e&&e.hasOwnProperty(z)&&delete e[z]));
while(Q&&++z<=U);ga||(v=void 0===fa?""+l(""+v+ka):""+l(""+v+ka+fa.$code))}ga&&(v="__incomplete__");if(t&&(t.$code=v,t.keys=B,A))for(z in A)A[z]&&delete e[z];h[0]=e;h[1]=ga;return h}function f(a,b,c,g,f,d,l,k,p,h,r,q){a=a?m(a):[[]];var v=g.slice(0,f),t=q?e(q):n;return a.reduce(function(a,e){f=b+e.length;return w(v.concat(e),b,c,g,f,d,l,k,p,a,r,t)},h)}function e(a){return function(b,c,g){return a(g=n(b,c,g))||g}}function n(a,b,c){c={version:0};c.abs_path=a.slice(0,b);a={};return a["\u001e\u0192_meta"]=
c,a.__proto__=r.prototype,a}var h=Array(2),k=a(42),p=a(0),r=a(6),q=a(27),y=a(1),w=a(26),x=a(41),g=a(7);a(32);var l=a(21),m=a(20);b.exports=c},function(b,d,a){function c(a,b,e,d,n,w,C,z,F,H,D,E,G,K,M,L,N,T,X,R,I,J){var m,v;if(void 0===b||(m=b.$type)||n===F)return q(b,m,e,d,n,w,C,z,F,H,D,E,K,M,L,N,T,X,R,I,k,f);var t,u,A,B=n+1,W,Q,Z,ha,U=-1,Y=0,ca,aa,ea=D+1,ia,da;A=d[n];if(null===A){if(B<F)throw new g;return e}J&&G&&(da=G.value,ia=G["\u001e\u0192_abs_path"]);if(e)if("object"!==typeof e)e=void 0;else if(t=
e["\u001e\u0192_meta"])t.version=b["\u001e\u0192_version"],t.abs_path=b["\u001e\u0192_abs_path"],t.deref_to=da,t.deref_from=ia;a:do{if("object"!==typeof A)m=A,W=void 0,A=!1;else if(h(A)){if(void 0!==Q)throw new l(d,Q);U=0;Q=A;Y=A.length;if(0===Y)break a;A=Q[U];continue a}else{W=A.to;m=A.from||0;"number"!==typeof W&&(W=m+(A.length||0)-1);if(0>W-m)break a;A=!0}do E=!1,Z=e&&e[m],aa=H,ca=ea,ha=G,u=b[m],z[n]=m,H[D]=m,u&&B<F&&u.$type===p&&!y(u,L)&&(v=x(a,u,K,L),u=v[0],E=!0,aa=v[1],ha=v[2],ca=aa.length,
v[0]=v[1]=v[2]=void 0),Z=c(a,u,Z,d,B,w,C,z,F,aa,ca,E,ha,K,M,L,N,T,X,R,I,J),void 0!==Z&&(void 0===t&&(t={},t.version=b["\u001e\u0192_version"],t.abs_path=b["\u001e\u0192_abs_path"],t.deref_to=da,t.deref_from=ia,e={},E={},e=N&&N((e["\u001e\u0192_meta"]=t,e.__proto__=r.prototype,e))||(E["\u001e\u0192_meta"]=t,E.__proto__=r.prototype,E)),e[m]=Z);while(A&&++m<=W);if(++U===Y)break a;A=Q[U]}while(1);return e}function f(a,b,c,g,f,d,l,k,p,h,r,q){q=q?e(q):n;return w(a,b,c,g,f,d,l,k,p,h,r,q)}function e(a){return function(b,
c,e){return a(e=n(b,c,e))||e}}function n(a,b,c){c={version:0};c.abs_path=a.slice(0,b);a={};return a["\u001e\u0192_meta"]=c,a.__proto__=r.prototype,a}var h=Array.isArray,k=a(42),p=a(0),r=a(6),q=a(27),y=a(1),w=a(26),x=a(41),g=a(7),l=a(32);b.exports=c},function(b,d,a){var c=Array(2),f=a(9),e=a(0),n=a(25),h=a(12),k=a(1),p=a(5),r=a(51);b.exports=function(a,b,d,x,g,l,m){h(d,b);var q,v;g=0;l=a;var t=b.value,u=t,w=t.length;do{if(0===g&&void 0!==(q=b["\u001e\u0192_context"]))l=q,g=w;else if(v=t[g++],void 0===
(l=l[v]))break;if(g===w){v=l.$type;if(void 0!==v&&k(l,m))break;else{if(l===b)throw new r(t);l!==q&&p(b,l)}if(v===e)h(d,l),x&&n(f(l),t,w,x),g=0,b=l,l=a,t=u=b.value,w=t.length;else break}else if(void 0!==l.$type)break}while(1);g<w&&void 0!==l&&(w=g);g=-1;for(t=Array(w);++g<w;)t[g]=u[g];c[0]=l;c[1]=t;return c}},function(b,d,a){var c=a(9),f=a(0),e=a(15),n=a(25),h=a(4);b.exports=function(a,b,d,q,y,w,x,g,l,m,A){var k=a&&a.value;if(b&&void 0===k)if(A)k=h;else return;else if(m||f===b||e===b||!a["\u001e\u0192_wrapped_value"]||
"object"===typeof k)k=c(a);q&&(y.hasValue=!0,n(k,x,g,q),(q.paths||(q.paths=[])).push(w.slice(0,d+!!l)));return k}},function(b,d,a){function c(a,b,d,l,u,y,C,z,F,H,D,E,G,K,M,L,N,T){var m,t;if(void 0===b||(m=b.$type)||l===z)return r(b,m,u,d,l,u,y,C,z,F,H,D,E,G,K,void 0,M,L,N,T,k,f);var v,A,B=l+1,O,P,V=-1,ba=0,ja,W,Q=H+1;D=d[l];if(null===D){if(B<z)throw new x;}else{a:do{if("object"!==typeof D)m=D,O=void 0,A=!1;else if(e(D)){if(void 0!==P)throw new g(d,P);V=0;P=D;ba=D.length;if(0===ba)break a;D=P[V];continue a}else{O=
D.to;m=D.from||0;"number"!==typeof O&&(O=m+(D.length||0)-1);if(0>O-m)break a;A=!0}do D=!1,W=F,ja=Q,v=b[m],C[l]=m,F[H]=m,v&&B<z&&v.$type===h&&!q(v,K)&&(u&&p(n(v),F,ja,u),t=w(a,v,E,u,M,L,K),v=t[0],D=!0,W=t[1],ja=W.length,t[0]=t[1]=void 0),c(a,v,d,B,u,y,C,z,W,ja,D,E,G,K,M,L,N,T);while(A&&++m<=O);if(++V===ba)break a;D=P[V]}while(1)}}function f(a,b,c,e,g,d,f,k,n,h,r,q){var m;h&&r&&((h.paths||(h.paths=[])).push((q=0===g-b)&&e.slice(0,b+!!d)||e.slice(0,b).concat(a.slice(b,g+!!d))),m=p(q&&l||void 0,f,k,h,
!q));return y(a,b,c,e,g,d,f,k,n,m,r)}var e=Array.isArray,n=a(9),h=a(0),k=a(76),p=a(25),r=a(27),q=a(1),y=a(26),w=a(75),x=a(7),g=a(32),l=a(4);b.exports=c},function(b,d,a){function c(a,b,d){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===b||!f(b))&&void 0!==a[b]}).forEach(function(e){var d=a[e],n=b[e];n||(n=b[e]={});if(d.$type){n=!d["\u001e\u0192_wrapped_value"];if(d.value&&"object"===typeof d.value||n){var n={},k=Object.keys(d),h,w,x;w=0;for(x=k.length;w<x;w++)h=k[w],"$type"!==
h&&f(h)||(n[h]=d[h]);d=n}else d=d.value;b[e]=d}else c(d,n,e)})}var f=a(19);b.exports=function(a){var b={};c(a,b);return b}},function(b,d,a){var c=a(16);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,d,a){var c=Array.isArray,f=a(104),e=a(58),n=a(59);b.exports=function(a){for(var b=[],d=-1,h=a.length,q,y,w,x;++d<h;)w=a[d],c(w)?(w={path:w},x="PathValues"):f(w)?x="PathValues":n(w)?x="JSONGraphs":e(w)&&(x="PathMaps"),y!==x&&(y=x,b.push(q={arguments:[],
inputType:x})),q.arguments.push(w);return b}},function(b,d,a){function c(a,b,c,d,p){f(a,b,p);return{}}var f=a(28);a(45);b.exports={json:c,jsonGraph:c}},function(b,d,a){var c=a(0),f=a(15),e=a(8),n=a(57),h=a(50),k=a(1),p=a(44),r=a(3),q=a(48),y=a(47),w=a(11);b.exports=function(a,b,d,m,A,v,t,u,B,C,z,F){var g,l,x,G,K,M;if(b===d){if(null===d)return b=h(d,void 0,d),a=w(a,-b.$size,B,t),b=p(b,a,m,void 0,v);if(void 0===d)return d;if(x=!(!b||"object"!==typeof b))if(g=b.$type,null==g)return null==b["\u001e\u0192_parent"]&&
p(b,a,m,t,v),b}else if(x=!(!b||"object"!==typeof b))g=b.$type;if(g!==c){if(G=!(!d||"object"!==typeof d))l=d.$type;if(x&&!g&&(null==d||G&&!l))return b}else{if(null==d){if(k(b,F)){r(b,u,B);return}return b}if(G=!(!d||"object"!==typeof d))if(l=d.$type,l===c)if(b===d){if(null!=b["\u001e\u0192_parent"])return b}else if(K=b.$timestamp,M=d.$timestamp,!k(b,F)&&!k(d,F)&&M<K)return}if(g&&G&&!l)return p(q(b,d,a,m,B,t),a,m,void 0,v);l||!G?(l===f&&z&&(d=z(y(A,m),d)),l&&b===d?null==b["\u001e\u0192_parent"]&&(b=
h(b,g,b.value),a=w(a,-b.$size,B,t),b=p(b,a,m,t,v)):(A=!0,(g&&!k(b,F)||!x)&&(A=!1===n(d)<n(b))&&(g||l)&&C&&(A=!C(b,d,v.slice(0,v.index))),A&&(d=h(d,l,l?d.value:d),C=e(b)-e(d),b=q(b,d,a,m,B,t),a=w(a,C,B,t),b=p(b,a,m,t,v))),k(b,!0)&&r(b,u,B)):null==b&&(b=p(d,a,m,void 0,v));return b}},function(b,d,a){function c(a,c){for(var e=-1,d=c.length,n=[],k=[],g=a._root.errorSelector;++e<d;){var l=c[e],m=l.inputType,l=l.arguments;if(0<l.length){var p=(0,b.exports["set"+m])(a,l,g,null,!1);k.push.apply(k,p[1]);"PathValues"===
m?n.push.apply(n,l.map(f)):"JSONGraphs"===m?n.push.apply(n,h(l,f)):n.push.apply(n,p[0])}}return{optimized:k,relative:n}}function f(a){return a.path||a.paths}var e=a(23),n=a(24),h=a(99),k=a(80);b.exports={json:function(a,b,d,f,h){b=k(b);var p=c(a,b),g=f&&e(a,p.relative,d,f,h);a=n({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},p.optimized,{},f,h);return{args:b,data:d,fragments:a.data,missing:p.optimized,relative:p.relative,error:g&&g.error,errors:g&&g.errors,
requested:a.requested,hasValue:g&&g.hasValue}},jsonGraph:function(a,b,e,d,f){b=k(b);var h=c(a,b);a=n({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},h.optimized,e,d,f);return{args:b,data:e,error:a.error,fragments:a.data,missing:h.optimized,relative:h.relative,hasValue:a.hasValue,requested:a.requested}},setPathMaps:a(18),setPathValues:a(31),setJSONGraphs:a(17)}},function(b,d,a){b.exports=function(a,b){for(var c=a["\u001e\u0192_refs_length"]||0,d=b["\u001e\u0192_refs_length"]||
0,f=-1;++f<c;){var k=a["\u001e\u0192_ref"+f];void 0!==k&&(k["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(d+f)]=k,a["\u001e\u0192_ref"+f]=void 0)}b["\u001e\u0192_refs_length"]=c+d;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,d,a){b.exports=function(a){for(var b=-1,c=a["\u001e\u0192_refs_length"]||0;++b<c;){var d=a["\u001e\u0192_ref"+b];null!=d&&(d["\u001e\u0192_context"]=d["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,
d,a){b.exports=function(a){var b=a["\u001e\u0192_context"];if(b){for(var c=(a["\u001e\u0192_ref_index"]||0)-1,d=(b["\u001e\u0192_refs_length"]||0)-1;++c<=d;)b["\u001e\u0192_ref"+c]=b["\u001e\u0192_ref"+(c+1)];b["\u001e\u0192_refs_length"]=d;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=void 0}return a}},function(b,d,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?
!1:!0:!0}},function(b,d,a){var c=a(0),f=a(6),e=a(10),n=a(90);b.exports=function(a){if(!a||"object"!==typeof a)throw new n;var b,d,h,q;h=a&&a["\u001e\u0192_meta"];if(!h||"object"!==typeof h)return this._clone({_node:void 0});var y=this._recycleJSON,w=h.abs_path;if(!w)return this._clone({_node:void 0,_seed:y&&{json:a,__proto__:f.prototype}||void 0});if(0===w.length)return this._clone({_path:w,_node:this._root.cache,_referenceContainer:!0,_seed:y&&{json:a,__proto__:f.prototype}||void 0});var x=h.deref_to;
d=h.deref_from;var g=this._root.cache,l=e(g,w),m="e";if(d){m=!1;h=-1;q=d.length;for(b=g;++h<q&&(b=b[d[h]],b&&!b.$type););if(x&&b&&b.$type===c){h=0;q=x.length;d=b.value;for(m=!0;m&&h<q;++h)d[h]!==x[h]&&(m=!1);!1===m&&(l=void 0)}}m?"e"===m&&(b=!0):b=!1;return this._clone({_node:l,_path:w,_referenceContainer:b,_seed:y&&{json:a,__proto__:f.prototype}||void 0})}},function(b,d){function a(){var a=Error.call(this,"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.");
a.name=this.name;this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="BoundJSONGraphModelError";a.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.";b.exports=a},function(b,d){function a(){var a=Error.call(this,"Deref can only be used with a non-primitive object from get, set, or call.");a.name="InvalidDerefInputError";this.stack=a.stack;this.message=a.message;
return this}a.prototype=Object.create(Error.prototype);a.prototype.name="InvalidDerefInputError";a.message="Deref can only be used with a non-primitive object from get, set, or call.";b.exports=a},function(b,d){function a(a,b){var c=Error.call(this,"The boundPath of the model is not valid since a value or error was found before the path end.");c.name="InvalidModelError";this.stack=c.stack;this.message=c.message;this.boundPath=a;this.shortedPath=b;return this}a.prototype=Object.create(Error.prototype);
a.prototype.name="InvalidModelError";a.message="The boundPath of the model is not valid since a value or error was found before the path end.";b.exports=a},function(b,d){function a(a,b,d,h){a=Error.call(this,"Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(d&&"relative: [\n\t"+c(d)+"\n]\n"||"")+(h&&"optimized: [\n\t"+c(h)+"\n]\n"||""));a.name="MaxRetryExceededError";this.stack=a.stack;this.message=a.message;return this}function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}
a.prototype=Object.create(Error.prototype);a.prototype.name="MaxRetryExceededError";a.is=function(a){return a&&"MaxRetryExceededError"===a.name};b.exports=a},function(b,d){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,d,a){function c(a,b,c){k.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,e,d){this.data=a;this.errors=b;this.operation=c;this.progressive=e;this.maxRetryCount=d}function e(a,b,c,e,d,f){p.call(this,a);this.data=b;this.retryCount=
-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=e;this.progressive=d;this.maxRetryCount=f}function n(a,b,c,e){"jsonGraph"===b&&a.paths&&(a.paths=y(a.paths));try{++c.syncRefCount,e.onNext(a)}catch(v){throw v;}finally{--c.syncRefCount}}function h(a,b){for(var c,e,d,g=Object.keys(b),f=-1,l=g.length;++f<l;)d=g[f],"\u001e\u0192_meta"===d?a["\u001e\u0192_meta"]=b["\u001e\u0192_meta"]:(e=b[d],c=a[d],c!==e&&(void 0===c||"object"!==typeof e?a[d]=e:h(c,e)));return a}var k=a(55),p=a(13),r=a(53),
q=a(6),y=a(63),w=a(52),x=a(92);b.exports=c;c.prototype=Object.create(k.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.operator=a;b.type=this.type;b.model=this.model;b._args=this._args;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){a=void 0===a?{__proto__:q.prototype}:a;return this.lift(new f(a,
b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype._toJSONG=function(a,b){a=void 0===a?{__proto__:q.prototype}:a;return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,
this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),this.source)};f.prototype.call=function(a,b){return a.subscribe(new e(b,this.data,this.errors,this.operation,this.progressive))};e.prototype=Object.create(p.prototype);e.prototype.operations={get:a(71),set:a(83),call:a(70),invalidate:a(81)};e.prototype.next=e.prototype.onNext=function(a){if(this.started){var b,c=a.type;a=a.args||a.paths;var e=this.data,d=this.model,g=this.errors,f,k=this.hasValue,p=this.operation,r=this.progressive,
w=r&&e&&!d._recycleJSON;w&&(e={__proto__:q.prototype});if(a&&a.length){f=this.operations[c][p](d,a,e,r||!d._source,-1===this.retryCount);if(f.error)throw f.error;g&&f.errors&&g.push.apply(g,f.errors);if(b=f.fragments)a=f.args,this.fragments=b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=k||(k=f.hasValue)}this.completed=!b||!d._source;"set"!==c&&(this.args=a,w&&(this.data=h(e,this.data)));r&&k&&e&&(e.json||e.jsonGraph)&&n(e,p,d._root,this.destination)}else this.args=
a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount};e.prototype.error=e.prototype.onError=function(a){if(a instanceof w)return p.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};e.prototype.complete=e.prototype.onCompleted=function(a){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&
this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&n(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?p.prototype.onError.call(this,b.length&&b||a):p.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return p.prototype.onError.call(this,new x(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)};e.prototype.dispose=
e.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;p.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&r(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,d,a){function c(a){k.call(this,[]);this.modelRoot=a}function f(a,
b,c,e,d){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=e;this.optimized=d}var e=a(55),n=a(96),h=a(13),k=a(14),p=a(56);b.exports=c;c.prototype=Object.create(k.prototype);c.prototype.set=function(a,b,c,d){var f=this;return new e(function(e){var g=(new n("set",f,a._source,new p)).batch(c,b||d.paths,d.jsonGraph);e=g.subscribe(new h(e,g));f.add(g);g.connect();return e})};c.prototype.call=function(a,b,c,d){var f=this;return new e(function(b){var c=(new n("call",f,a._source,new p)).batch(null,
null,d);b=c.subscribe(new h(b,c));f.add(c);c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,e=this.requested,d=this.optimized,f=this.scheduler,l=-1,m=b.subscriptions,p=m.length,v=new k([],a);++l<p;){var t=m[l];if("get"===t.type&&((t=t.batch(e,d,e=[],d=[]))&&v.add(t.subscribe(new h(a,t))),!d.length))break}d.length&&(t=m[l]=(new n("get",b,c,f)).batch(e,d),v.add(t.subscribe(new h(a,
t))),t.connect());return v}},function(b,d,a){function c(a,b,c,d){e.call(this,[],b);this.tree={};this.paths=[];this.type=a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=q(this.tree=w(this.optimized.reduce(function(a,b){return y(b,a)},{})));try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});
break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(m){this.disposable={},e.prototype.onError.call(this,new h(m))}}var e=a(97),n=a(15);a(13);a(14);var h=a(52),k=a(17),p=a(31),r=a(28),q=a(38),y=a(36),w=a(37),x=a(65);b.exports=c;c.prototype=Object.create(e.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));var c=a.jsonGraph,e=this.requested,b=b.modelRoot,
d=a.invalidated,f=a.paths||this.paths;d&&d.length&&r({_root:b,_path:[]},d,!1);f&&f.length&&c&&"object"===typeof c&&k({_root:b},[{paths:f,jsonGraph:c}],b.errorSelector,b.comparator,!1);this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",paths:e[b]||f})})}};c.prototype.error=c.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:n,value:{message:a.message}}:a.$type===n&&a||{$type:n,value:a};var b=
b.modelRoot,c=q(w(this.requested.reduce(function(a,b){return y(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&p({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);e.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});e.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,
1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();e.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||
(this.disposable=a)}return this};c.prototype.batch=function(a,b,c,e){if(this.active){for(var d=[],f=[],g=this.tree,h=-1,n=-1,k=-1,l=b.length;++h<l;){var m=b[h],p=m.length,q=g[p];q&&x(q,m,0,p)?(f[++k]=m,d[k]=a[h]):(e[++n]=m,c[n]=a[h])}return~k?(this.requested.push(d),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);this.data=c;return this}},function(b,d,a){function c(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(13),e=a(14);b.exports=c;c.prototype=Object.create(f.prototype);
c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new e([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=[]}},function(b,d){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=
!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,d){b.exports=function(a,b){for(var c=-1,e=-1,d=a.length,h=[];++e<d;)for(var k=b(a[e],e,a),p=-1,r=k.length;++p<r;)h[++c]=k[p];return h}},function(b,d,a){var c=Array.isArray,f=a(33);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},e;for(e in a)f(e)||(b[e]=
a[e])}return b}},function(b,d,a){var c=a(2);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,d,a){var c=a(2);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,d,a){var c=a(2),f=Object.prototype.hasOwnProperty;b.exports=function(a,b){return c(a)&&f.call(a,b)}},function(b,d,a){var c=Array.isArray,f=a(2);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,d){b.exports="atom"},function(b,d,a){b.exports=a(107)},function(b,
d,a){(function(b,f){Object.defineProperty(d,"__esModule",{value:!0});var c=a(108),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);d["default"]=b}).call(d,a(35),a(109)(b))},function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d["default"]=function(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,
d){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,d,a){b.exports=a(62)}])});
//# sourceMappingURL=falcor.all.min.js.map
