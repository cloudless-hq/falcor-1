/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("falcor",[],e):"object"===typeof exports?exports.falcor=e():b.falcor=e()})(this,function(){return function(b){function e(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,e);f.l=!0;return f.exports}var a={};e.m=b;e.c=a;e.i=function(a){return a};e.d=function(a,f,d){e.o(a,f)||Object.defineProperty(a,f,{configurable:!1,enumerable:!0,
get:d})};e.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};e.d(c,"a",c);return c};e.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};e.p="";return e(e.s=107)}([function(b,e,a){var c=a(59),f=a(34),d=a(60);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===d?!1:a===f?b:a<c()}},function(b,e,a){var c=a(20);b.exports=function(a){for(var d,f=Object.keys(a),b={},m=-1,q=f.length;++m<q;)d=f[m],"$size"===d||c(d)||(b[d]=a[d]);return b}},
function(b,e,a){var c=a(54);b.exports=function(a,d,g){a["\u001ef_invalidated"]||(a["\u001ef_invalidated"]=!0,d.push(a),c(g,a));return a}},function(b,e,a){(function(a){function c(a){a?(this["\u001ef_meta"]=a["\u001ef_meta"])||(this["\u001ef_meta"]=a):this["\u001ef_meta"]={}}function d(a){return function(){var d,c=this.length;d=c;var g;if("number"!==(g=typeof c)&&(!c||"object"!==g||"atom"!==c.$type||"number"!==typeof(d=c.value))||0>d||d!==(d|0)){if("pending"===this.$__status)return[];throw new RangeError("Invalid FalcorJSON length");
}this.length=d;d=a.apply(this,arguments);this.length=c;return d}}function g(d){var c=d,h=typeof c,g=arguments.length;if(0===g)c=this;else if("string"!==h){if(!c||"object"!==h)return c}else{if(1!==g)return c;c=this}return c===a?void 0:c}function x(){return p(g.apply(this,arguments),x)}function m(a,d){return JSON.stringify(p(g.call(this,this),p,!0===a,!1,!0===d))}function q(a){var d=g.apply(this,arguments),c,f,n=0,b=p(d,q,!0,!0);d&&(c=d["\u001ef_meta"])&&(n=c.version);b&&"object"===typeof b&&(f=b["\u001ef_meta"])&&
(f.version=n);return b}function p(a,d,g,f,p){if(!a||"object"!==typeof a)return a;var h,k,l,n,b,m;if(u(a))m=a;else{h=-1;n=Object.keys(a);k=n.length;m={};f&&(m.__proto__=c.prototype);if(g&&(l=a["\u001ef_meta"])){var w=l.$code,q=l.status,x=l.abs_path,r=l.deref_to,t=l.deref_from;l={};w&&(l.$code=w);x&&(l.abs_path=x);r&&(l.deref_to=r);t&&(l.deref_from=t);p&&q&&(l.status=q);m["\u001ef_meta"]=l;f&&(l={},l.__proto__=m,m=l)}for(;++h<k;)"\u001ef_meta"!==(b=n[h])&&(m[b]=d(a[b],d,g,f,p))}return m}var t={length:!0,
toString:!0,constructor:!0,toLocaleString:!0},r={toJSON:{enumerable:!1,value:x},toProps:{enumerable:!1,value:q},toString:{enumerable:!1,value:m},toLocaleString:{enumerable:!1,value:m},$__hash:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.$code||""}},$__path:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.abs_path||[]}},$__status:{enumerable:!1,get:function(){var a=this["\u001ef_meta"];return a&&a.status||"resolved"}},$__version:{enumerable:!1,get:function(){var a=
this["\u001ef_meta"];return a&&a.version||0}}};Object.defineProperties(c.prototype,Object.getOwnPropertyNames(Array.prototype).reduce(function(a,c){if(!t.hasOwnProperty(c)){var g=Array.prototype[c];"function"===typeof g&&(a[c]={value:d(g),writable:!0,enumerable:!1})}return a},r));var u=Array.isArray;b.exports=c}).call(e,a(35))},function(b,e,a){e=a(5);b.exports=e("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,e){b.exports=function(a,c){function f(a){this.message=
a;c&&c.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}f.prototype=Object.create(Error.prototype);f.prototype.name=a;f.prototype.constructor=f;f.is=function(d){return d.name===a};return f}},function(b,e){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,e,a){b.exports=function(a,f){var d=f["\u001ef_refs_length"]||0;f["\u001ef_ref"+d]=a;f["\u001ef_refs_length"]=d+1;a["\u001ef_ref_index"]=d;a["\u001ef_context"]=
f}},function(b,e){b.exports={$type:"atom"}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&a.$size||0}},function(b,e,a){function c(a,d){var g=a,f,b=0,q=d.length;if(0<q){do for(g=g[d[b]];g&&"ref"===(f=g.$type);)g=c(a,g.value);while(++b<q&&g&&!f)}return g}b.exports=c},function(b,e,a){var c=a(29),f=a(31);b.exports=function(a,g,b,m){var d=a,p;do 0<(d.$size=(d.$size||0)-g)?(p=d["\u001ef_parent"])?d["\u001ef_version"]!==m&&f(d,m):d["\u001ef_version"]=m:(p=d["\u001ef_parent"])&&c(d,p,d["\u001ef_key"],
b,m);while(d=p);return a}},function(b,e,a){e=a(5);b.exports=e("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,e,a){var c=a(60);b.exports=function(a,d){if(d.$expires!==c){var g=a["\u001ef_head"];if(!g)a["\u001ef_head"]=a["\u001ef_tail"]=d;else if(g!==d){var f=d["\u001ef_prev"],b=d["\u001ef_next"];b&&(b["\u001ef_prev"]=f);f&&(f["\u001ef_next"]=b);d["\u001ef_prev"]=
void 0;a["\u001ef_head"]=d;d["\u001ef_next"]=g;g["\u001ef_prev"]=d;d===a["\u001ef_tail"]&&(a["\u001ef_tail"]=f)}}}},function(b,e,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination={error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var d=this.destination;
if(d)if(d.onNext)d.onNext(a);else d.next&&d.next(a)};c.prototype.error=c.prototype.onError=function(a){var d=!1,c=this.destination;c&&(c.onError?(d=!0,c.onError(a)):c.error&&(d=!0,c.error(a)),this.dispose());if(!d)throw a;};c.prototype.complete=c.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,
e){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,e,a){var c=a(0),f=a(2),d=a(13);b.exports=
function(a,b,m,q,p,t,r,u,n,k,h,l,w,A,y,v,D,B,e,E,C,z,F){var g=e;if(b)if(c(a,y))a["\u001ef_invalidated"]||f(a,A,w);else if(d(w,a),void 0===a.value)g=!1,e=B;else{if(t)return l&&(u[p]=null),C(a,b,p,t,r,u,k,h,l,D,B,E);return}if(B)t&&(r.hasValue=!0);else if(!e)return;return z(q,p,r,u,n,l,k,h,g,B,m,v,D,F,w)}},function(b,e,a){var c=a(10);b.exports=function(a,d){d=d||a._path;var g=a._node;if(!g||void 0===g["\u001ef_parent"]||g["\u001ef_invalidated"])a._node=null,0===d.length?g=a._root.cache:(g=c(a._root.cache,
d),d===a._path&&(a._node=g));return g}},function(b,e,a){function c(a,g,n,k,h,l,b,p,y,v,m,q,x,e,C,z,F,I){var w={},u=g<a.length-1,A=a[g],r=t(A,w),D=q.index;do{m.depth=g;f(n,k,h,l,b,p,r,u,!1,m,q,x,e,C,z,F,I);m[g]=r;m.index=g;var B=d[0],G=d[1],E=d[4];E[E.index++]=r;B&&(u?c(a,g+1,n,G,B,l,d[3],d[2],y,v,m,E,x,e,C,z,F,I):(y.push(m.slice(0,m.index+1)),v.push(E.slice(0,E.index))));r=t(A,w);if(w.done)break;q.index=D}while(1)}function f(a,c,n,k,h,l,b,A,y,v,t,B,e,E,C,z,F){var w=n;for(n=w.$type;"ref"===n;){a:{var u;
h=a;t=k;n=l;l=v;c=B;y=e;var r=E,D=C,G=z,P=F,H=w,K=H.value,Q=K.slice(0);if(g(H,P))x(H,y,r),H=void 0,u=h,w=t,Q.index=K.length;else{var R=0,X=H,O=K.length-1;u=H=h;w=n=t;do{var V=K[R],W=R<O;Q.index=R;f(h,u,H,t,w,n,V,W,!0,l,Q,c,y,r,D,G,P);H=d[0];Q=d[4];if(!H||"object"!==typeof H){Q.index=R;break a}u=d[1];n=d[2];w=d[3]}while(R++<O);Q.index=R;X["\u001ef_context"]!==H&&m(X,H)}d[0]=H;d[1]=u;d[2]=n;d[3]=w;d[4]=Q}w=d[0];if(!w||"object"!==typeof w)return;c=d[1];l=d[2];h=d[3];t=d[4];n=w.$type}if(void 0===n){if(null==
b){if(A)throw new p;w&&(b=w["\u001ef_key"])}else c=w,h=l,w=c[b],l=h&&h[b];w=q(c,w,l,b,v,t,B,e,E,C,z,F)}d[0]=w;d[1]=c;d[2]=l;d[3]=h;d[4]=t}var d=Array(5),g=a(0),x=a(2),m=a(7),q=a(81),p=a(4),t=a(23);b.exports=function(a,g,f,k,h){a=a._root;for(var l=a.expired,n=a.version+1,b=a.cache,y=[],p=[],m=[],q=[],u=-1,t=g.length;++u<t;)for(var r=g[u],x=r.paths,r=r.jsonGraph,e=-1,I=x.length;++e<I;){var M=x[e];p.index=0;c(M,0,b,b,b,r,r,r,m,q,y,p,n,l,a,k,f,h)}d[0]=void 0;d[1]=void 0;d[2]=void 0;d[3]=void 0;d[4]=void 0;
return b["\u001ef_version"]===n?(a.version=n,[m,q,!0]):[m,q,!1]}},function(b,e,a){function c(a,k,h,l,b,p,y,m,q,u,r,x,e,z,F){var n;if(a&&"object"===typeof a&&!a.$type){n=[];var w=0;g(a)&&(n[w++]="length");for(var v in a)t(v)||(n[w++]=v)}else n=void 0;if(n&&n.length){w=0;v=n.length;var A=q.index;do{var D=n[w],B=a[D],G=!(!B||"object"!==typeof B)&&!B.$type;m.depth=k;f(h,l,b,D,B,G,!1,m,q,u,r,x,e,z,F);m[k]=D;m.index=k;var C=d[0],E=d[1],R=d[2];R[R.index++]=D;C&&(G?c(B,k+1,h,E,C,p,y,m,R,u,r,x,e,z,F):(p.push(m.slice(0,
m.index+1)),y.push(R.slice(0,R.index))));if(++w>=v)break;q.index=A}while(1)}}function f(a,c,g,l,b,p,y,v,t,e,G,E,C,z,F){var h=g;for(g=h.$type;"ref"===g;){a:{t=b;g=a;c=v;var k=e,n=G,w=E,A=C,D=z,B=F,K=h,Q=K.value,R=Q.slice(0);if(x(K,B))m(K,n,w),K=void 0,h=g,R.index=Q.length;else{var X=K,K=K["\u001ef_context"];if(null!=K)h=K["\u001ef_parent"]||g,R.index=Q.length;else{var O=0,V=Q.length-1;R.index=O;h=K=g;do{f(g,h,K,Q[O],t,O<V,!0,c,R,k,n,w,A,D,B);K=d[0];R=d[2];if(!K||"object"!==typeof K){R.index=O;break a}h=
d[1]}while(O++<V);R.index=O;X["\u001ef_context"]!==K&&q(X,K)}}d[0]=K;d[1]=h;d[2]=R}h=d[0];if(!h||"object"!==typeof h)return;c=d[1];t=d[2];g=h&&h.$type}if(!p||void 0===g){if(null==l){if(p)throw new r;h&&(l=h["\u001ef_key"])}else c=h,h=c[l];h=u(c,h,l,b,p,y,v,t,e,G,E,C,z,F)}d[0]=h;d[1]=c;d[2]=t}var d=Array(3),g=Array.isArray,x=a(0),m=a(2),q=a(7),p=a(10),t=a(33),r=a(4),u=a(48);b.exports=function(a,g,h,f,b){var l=a._root,k=l.expired,n=l.version+1;a=a._path;var m=l.cache,w=p(m,a);if(!w)return[[],[],!1];
for(var q=w["\u001ef_parent"]||m,u=[],t=[],r=[],x=a.length,e=-1,M=g.length;++e<M;){var L=g[e],N=a.slice(0);N.index=x;c(L.json,0,m,q,w,t,r,u,N,n,k,l,f,h,b)}d[0]=void 0;d[1]=void 0;d[2]=void 0;return m["\u001ef_version"]===n?(l.version=n,[t,r,!0]):[t,r,!1]}},function(b,e,a){e=a(92);e=new RegExp("^"+e,"i","g");b.exports=e.test.bind(e)},function(b,e){function a(c,f,d){d=d||[];f=f||[];if(!c)return f;for(var g=[],b=c.$keys,m=b.length,q=-1;++q<m;){var p=c[q],t=b[q];p&&"object"===typeof p?a(p,f,d.concat([t])):
g.push(t)}1===g.length?f.push(d.concat(g)):1<g.length&&f.push(d.concat([g]));return f}b.exports=a},function(b,e){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,e){function a(a,d){var c=d.from=a.from||0;a=d.to=a.to||"number"===typeof a.length&&d.from+a.length-1||0;d.rangeOffset=d.from;d.loaded=!0;c>a&&(d.empty=!0)}var c=Array.isArray;b.exports=function(f,d){if(void 0===d.isArray){d.done=!1;var g=d.isObject=!(!f||"object"!==typeof f);d.isArray=
g&&c(f);d.arrayOffset=0}if(d.isArray){var b;do{d.loaded&&d.rangeOffset>d.to&&(++d.arrayOffset,d.loaded=!1);if(d.arrayOffset>=f.length){d.done=!0;break}g=f[d.arrayOffset];"object"===typeof g?(d.loaded||a(g,d),d.empty||(b=d.rangeOffset++)):(++d.arrayOffset,b=g)}while(void 0===b);return b}if(d.isObject){d.loaded||a(f,d);if(d.rangeOffset>d.to){d.done=!0;return}return d.rangeOffset++}d.done=!0;return f}},function(b,e,a){b.exports=a(40)},function(b,e,a){b.exports=a(43)},function(b,e){b.exports=function(a,
c,f,d,g){var b=0,m;m=d.jsonGraph;m||(d.jsonGraph=m={});do{d=c[b++];if(b>=f){m=m[d]=!0!==g?a:m[d]||{};break}m=m[d]||(m[d]={})}while(1);return m}},function(b,e){var a=Array.isArray;b.exports=function(c,f,d,g,b,m,q,p,t,r,u,n,k,h,l){if(t||r){for(var w,A=-1,y=(m=b-f)&&Array(m)||void 0;++A<m;){w=c[A+f];var v;v=w;if("object"!==typeof v||null===v)v=!1;else if(a(v))v=0===v.length;else{var x=v.to,e=v.from||0;"number"!==typeof x&&(x=e+(v.length||0));v=e>=x}if(v)return;y[A]=w}var G;c=null===w;w=t;var E;t?(v=
b,x=g,E=d.requested||(d.requested=[])):(f=p,x=q,v=p+m-Number(c));do{if(m<b||!w){g=-1;A=f;for(G=Array(v);++g<A;)G[g]=x[g];for(A=-1;g<v;)G[g++]=y[++A]}if(w=!w){t&&(E[E.length]=G);break}E[E.length]=G||y;f=p;x=q;E=d.missing||(d.missing=[]);v=p+m-Number(c)}while(1);if(r)return h(u,G,f,v,n,k,l)}}},function(b,e,a){function c(a,g,h,l,b,p,y,m,t){var k={},n=g<a.length-1,w=a[g],v=u(w,k);do{f(h,l,b,v,n,!1,p,y,m,t);var v=d[0],A=d[1];v&&(n?c(a,g+1,h,A,v,p,y,m,t):r(v,q(v),m,p));v=u(w,k)}while(!k.done)}function f(a,
c,h,l,b,q,y,v,u,t){var k=h;for(h=k.$type;"ref"===h;){a:{c=a;h=y;q=v;var n=u,w=t;if(g(k,w))x(k,q,n),d[0]=void 0,d[1]=c;else{m(n,k);var r=k,A=k.value,e,k=k["\u001ef_context"];if(null!=k)e=k["\u001ef_parent"]||c;else{var D=0,B=A.length-1;e=k=c;do{f(c,e,k,A[D],D<B,!0,h,q,n,w);k=d[0];if(!k&&"object"!==typeof k)break a;e=d[1]}while(D++<B);r["\u001ef_context"]!==k&&p(r,k)}d[0]=k;d[1]=e}}k=d[0];if(!k&&"object"!==typeof k)return;c=d[1];h=k.$type}if(void 0===h)if(null==l){if(b)throw Error("`null` is not allowed in branch key positions.");
}else c=k,k=c[l];d[0]=k;d[1]=c}var d=Array(2),g=a(0),x=a(2),m=a(13),q=a(9),p=a(7),t=a(17),r=a(11),u=a(23);b.exports=function(a,g,h){var f=a._root,k=f.expired,b=f.version+1,n=f.cache;a=t(a);if(!a)return!1;for(var p=-1,m=g.length,q=a["\u001ef_parent"]||n;++p<m;)c(g[p],0,n,q,a,b,k,f,h);d[0]=void 0;d[1]=void 0;return n["\u001ef_version"]===b?(f.version=b,!0):!1}},function(b,e,a){function c(a,b,t,r,u){if(a&&"object"===typeof a){var n=a.$type;if(void 0===n)for(var k in a)d(k)||c(a[k],a,k,r,u);else"ref"===
n&&x(a),f(r,a);g(m(a,u));b[t]=a["\u001ef_parent"]=void 0;return!0}return!1}var f=a(54),d=a(33),g=a(84),x=a(85),m=a(31);b.exports=c},function(b,e,a){function c(a,g,k,h,l,b,p,m,v,q,r,x,e,C,z,F){var n={},y=k<g.length-1,w=g[k],u=t(w,n),A=q.index;do{v.depth=k;v[k]=u;v.index=k;f(h,l,b,u,a,y,!1,v,q,r,x,e,C,z,F);v[k]=u;v.index=k;var D=d[0],B=d[1],E=d[2];E[E.index++]=u;D&&(y?c(a,g,k+1,h,B,D,p,m,v,E,r,x,e,C,z,F):(p.push(v.slice(0,v.index+1)),m.push(E.slice(0,E.index))));u=t(w,n);if(n.done)break;q.index=A}while(1)}
function f(a,c,k,h,l,b,q,y,v,t,e,G,E,C,z){var n=k;for(k=n.$type;"ref"===k;){a:{v=l;k=a;c=y;var w=t,u=e,A=G,D=E,B=C,P=z,H=n,K=H.value,Q=K.slice(0);if(g(H,P))x(H,u,A),H=void 0,n=k,Q.index=K.length;else{var R=H,H=H["\u001ef_context"];if(null!=H)n=H["\u001ef_parent"]||k,Q.index=K.length;else{var X=0,O=K.length-1,n=H=k;do{var V=K[X],W=X<O;Q.index=X;f(k,n,H,V,v,W,!0,c,Q,w,u,A,D,B,P);H=d[0];Q=d[2];if(!H||"object"!==typeof H){Q.index=X;break a}n=d[1]}while(X++<O);Q.index=X;R["\u001ef_context"]!==H&&m(R,H)}}d[0]=
H;d[1]=n;d[2]=Q}n=d[0];if(!n||"object"!==typeof n)return;c=d[1];v=d[2];k=n.$type}if(!b||void 0===k){if(null==h){if(b)throw new p;n&&(h=n["\u001ef_key"])}else c=n,n=c[h];n=r(c,n,h,l,b,q,y,v,t,e,G,E,C,z)}d[0]=n;d[1]=c;d[2]=v}var d=Array(3),g=a(0),x=a(2),m=a(7),q=a(10),p=a(4),t=a(23),r=a(48);b.exports=function(a,g,f,h,l){var k=a._root,b=k.expired,n=k.version+1;a=a._path;var p=k.cache,m=q(p,a);if(!m)return[[],[],!1];for(var u=m["\u001ef_parent"]||p,t=[],r=[],e=[],x=a.length,F=-1,I=g.length;++F<I;){var M=
g[F],L=M.path,M=M.value,N=a.slice(0);N.index=x;c(M,L,0,p,u,m,r,e,t,N,n,b,k,h,f,l)}d[0]=void 0;d[1]=void 0;d[2]=void 0;return p["\u001ef_version"]===n?(k.version=n,[r,e,!0]):[r,e,!1]}},function(b,e,a){b.exports=function(a,f){var d=a,c=[],b=0,m,q,p;do{q=-1;m=d["\u001ef_parent"];d["\u001ef_version"]=f;p=d["\u001ef_refs_length"]||0;do if(m&&m["\u001ef_version"]!==f&&(c[b++]=m),++q<p)m=d["\u001ef_ref"+q];else break;while(1)}while(d=c[--b]);return a}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&
a.$timestamp||void 0}},function(b,e,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(20)},function(b,e){b.exports=0},function(b,e){e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(e=window)}b.exports=e},function(b,e,a){var c=a(39),f=a(37),d=a(38);b.exports=function(a){return c(d(f(a)))}},function(b,e,a){function c(a,d){var c=d.length,c=a[c]||(a[c]=[]);c[c.length]=d;return a}var f=Array.isArray,d=a(21);b.exports=function(a,
b){b&&"object"===typeof b||(b={});if(a)!f(a)&&f(a.$keys)&&(a=d(a));else return b;return a.reduce(c,b)}},function(b,e,a){var c=a(65);b.exports=function(a,d){var g=Object.keys(a),f=-1,b=g.length,q=d;for(q&&"object"===typeof q||(q={});++f<b;)d=g[f],q[d]=c(a[d],q[d]);return q}},function(b,e,a){function c(a,f,b){var k,h=Object.create(null),l=""+p(""+f),n=[],m=-1,y=0,q=[],t=0,u,r,e,x,z,F;e=[];x=-1;if(f<b-1){for(z=d(a,e);++x<z;)k=e[x],u=c(a[k],f+1,b),r=u.code,h[r]?u=h[r]:(n[y++]=r,u=h[r]={keys:[],sets:u.sets}),
l=""+p(l+k+r),g(k)&&u.keys.push(parseInt(k,10))||u.keys.push(k);for(;++m<y;)if(k=n[m],u=h[k],e=u.keys,z=e.length,0<z)for(a=u.sets,f=-1,b=a.length,x=e[0];++f<b;){k=a[f];u=-1;r=k.length;F=Array(r+1);for(F[0]=1<z&&e||x;++u<r;)F[u+1]=k[u];q[t++]=F}}else for(z=d(a,e),1<z?q[t++]=[e]:q[t++]=e;++x<z;)l=""+p(l+e[x]);return{code:l,sets:q}}function f(a,d){return a-d}function d(a,d,c){var g=0;if(a===t)d[g++]=null;else{for(var h in a)d[g++]=h;1<g&&d.sort(c)}return g}function g(a){var d=a,c=typeof a;if("string"===
c){d=a.length;if(0===d||17<d||!q.test(a))return!1;if(16>d)return!0;d=+a}else if("number"!==c)return!1;return 0===d%1&&9007199254740991>=m(d)}var x=Array.isArray,m=Math.abs,q=/^(0|(\-?[1-9][0-9]*))$/,p=a(22),t=a(8);b.exports=function(a){var d,b=[],k=0,h;for(h in a){var l;if(l=g(h))l=d=a[h],l=null!==l&&"object"===typeof l;if(l){l=c(d,0,parseInt(h,10)).sets;for(var p=-1,m=l.length;++p<m;){for(var y=k++,q=l[p],t=-1,e=q.length;++t<e;){var r=q[t];if(x(r)){var E=q,C=t;for(var z=-1,F=r.length-1,I=0<F;++z<=
F;){var M=r[z];if(!g(M)){I=!1;break}r[z]=parseInt(M,10)}!0===I&&(r.sort(f),z=r[0],I=r[F],I-z<=F&&(r={from:z,to:I}));E[C]=r}}b[y]=q}}}return b};b.exports._isSafeNumber=g},function(b,e,a){var c=Array.isArray,f=a(73),d=a(72),g=a(17),x=a(90),m=a(64),q=a(62);b.exports=function(a,b,r,u,n){var k,h=b,l;b=a._path;var p=a._root,t=p.cache,y,e,D,B=b&&b.length||0;if(B){if((k=g(a))&&k.$type)return{error:new x(b,b)};D=[];for(l=0;l<B;++l)D[l]=b[l];l=a._referenceContainer}else k=t,D=[];y=[];var G=!1;u=r&&r.json;var E=
a._boxed,C=p.expired;e=a._recycleJSON;var z=!!a._source,F=p.branchSelector,I=r&&a._materialized,M=a._treatErrorsAsValues,L=a._allowFromWhenceYouCame;a={args:null,data:r,hasValue:!1,relative:null,requested:null,missing:null};var N,S=0,P=h.length;if(0<P){if(e){G=!0;if(1<P&&n||c(h[0]))h=[q(m(h,{}))];P=1}do N=h[S],G?e=d(t,k,u,h[0],0,r,a,y,D,B,!1,l,p,C,n,F,E,I,z,M,L):(e=N.length,e=f(t,k,u,N,0,r,a,y,e,D,B,!1,l,p,C,n,F,E,I,z,M,L)),u=e[0],e[0]=void 0,e[1]=void 0;while(++S<P)}n=a.requested;a.args=G&&h||n;
if(n&&n.length&&(a.relative=a.args,B)){h=[];l=0;for(B=n.length;l<B;++l)h[l]=b.concat(n[l]);a.requested=h}a.hasValue&&(r.json=u);return a}},function(b,e,a){var c=Array(3),f=a(13),d=a(0),g=a(7),x=a(52);b.exports=function(a,b,p,t){f(p,b);var m,q,n=0,k=a,h=b.value,l=h,w=h.length;do{if(0===n&&void 0!==(m=b["\u001ef_context"]))k=m,n=w;else if(q=h[n++],void 0===(k=k[q]))break;if(n===w){q=k.$type;if(void 0!==q&&d(k,t))break;else{if(k===b)throw new x(h);k!==m&&g(b,k)}if("ref"===q)f(p,k),n=0,b=k,k=a,h=l=b.value,
w=h.length;else break}else if(void 0!==k.$type)break}while(1);n<w&&void 0!==k&&(w=n);n=-1;for(h=Array(w);++n<w;)h[n]=l[n];c[0]=k;c[1]=h;c[2]=b;return c}},function(b,e,a){var c=a(1),f=a(71);b.exports=function(a,g,b,m,q,p,t,e,u,n,k,h){if("error"===g&&!h)return f(a,b,q,p,u,n);q.hasValue=!0;return n?c(a):a.value}},function(b,e,a){var c=a(76),f=a(88);b.exports=function(a,g,b,m,q){var d,e;d=a._path;m=a._root;var r,u,n=d&&d.length||0;if(n)return{error:new f};u=[];e=d=m.cache;r=[];for(var k=a._boxed,h=m.expired,
l=a._materialized,w=!!a._source,x=-1,y=g.length,v=a._treatErrorsAsValues,D={args:null,data:b,paths:null,relative:null,requested:null,jsonGraph:null};++x<y;){var B=g[x];a=B.length;c(e,d,B,0,b,D,r,a,u,n,!1,m,h,q,k,l,w,v)}D.args=D.relative=D.requested;return D}},function(b,e,a){function c(a,b,e,r,u,n,k){if(e===r)return n?d(m):void 0;var h,l,p=e+1,q,y=-1,t=0;l=b[e];a&&"object"===typeof a?((h=a["\u001ef_meta"])||(a["\u001ef_meta"]=h={}),h.status="resolved",h.version=k.version,h.abs_path=b.slice(0,e)):
(a={},a.__proto__=g.prototype,a["\u001ef_meta"]=h={},h.status="resolved",h.version=k.version,h.abs_path=b.slice(0,e),u&&(a=u(a)));a:do{if("object"!==typeof l)e=l,h=void 0,l=!1;else if(f(l)){if(void 0!==q)throw new x(b,q);y=0;q=l;t=l.length;if(0===t)break a;l=q[y];continue a}else{h=l.to;e=l.from||0;"number"!==typeof h&&(h=e+(l.length||0)-1);if(0>h-e)break a;l=!0}do a[e]=c(a[e],b,p,r,u,n,k);while(l&&++e<=h);if(++y===t)break a;l=q[y]}while(1);return a}var f=Array.isArray,d=a(1),g=a(3);a(4);var x=a(12),
m=a(8);b.exports=c},function(b,e,a){var c=Array.isArray,f=a(102),d=a(57),g=a(58);b.exports=function(a){for(var b=[],e=-1,p=a.length,t,r,u,n;++e<p;)u=a[e],c(u)?(u={path:u},n="PathValues"):f(u)?n="PathValues":g(u)?n="JSONGraphs":d(u)&&(n="PathMaps"),r!==n&&(r=n,b.push(t={arguments:[],inputType:n})),t.arguments.push(u);return b}},function(b,e,a){b.exports=function(a,b,d,g,e){a["\u001ef_key"]=d;a["\u001ef_parent"]=b;void 0!==g&&(a["\u001ef_version"]=g);a["\u001ef_abs_path"]||(a["\u001ef_abs_path"]=e.slice(0,
e.index).concat(d));return b[d]=a}},function(b,e,a){function c(a,b,g,l,m,e,p,t,x,B){if(a&&"object"===typeof a&&!a.$type)for(var h in a)if(!r(h)){var k=a[h],n=!(!k||"object"!==typeof k)&&!k.$type;f(g,l,m,h,k,n,!1,e,p,t,x,B);var y=d[0],w=d[1];y&&(n?c(k,b+1,g,w,y,e,p,t,x,B):u(y,q(y),t,e))}}function f(a,c,b,l,e,q,y,t,u,r,G,E){var h=b;for(b=h.$type;"ref"===b;){a:{c=e;b=a;y=t;var k=u,n=r,w=G,v=E;if(g(h,v))x(h,k,n),d[0]=void 0,d[1]=b;else{m(n,h);var A=h,D=h.value,B,h=h["\u001ef_context"];if(null!=h)B=h["\u001ef_parent"]||
b;else{var P=0,H=D.length-1;B=h=b;do{f(b,B,h,D[P],c,P<H,!0,y,k,n,w,v);h=d[0];if(!h&&"object"!==typeof h)break a;B=d[1]}while(P++<H);A["\u001ef_context"]!==h&&p(A,h)}d[0]=h;d[1]=B}}h=d[0];if(!h&&"object"!==typeof h)return;c=d[1];b=h.$type}if(void 0===b)if(null==l){if(q)throw Error("`null` is not allowed in branch key positions.");}else c=h,h=c[l];d[0]=h;d[1]=c}var d=Array(2),g=a(0),x=a(2),m=a(13),q=a(9),p=a(7),t=a(17),r=a(33),u=a(11);b.exports=function(a,b,h){var g=a._root,f=g.expired,k=g.version+
1,m=g._comparator,n=g.cache;a=t(a);if(!a)return!1;for(var e=-1,p=a["\u001ef_parent"]||n,q=b.length;++e<q;)c(b[e].json,0,n,p,a,k,f,g,m,h);d[0]=void 0;d[1]=void 0;return n["\u001ef_version"]===k?(g.version=k,!0):!1}},function(b,e,a){var c=a(34),f=a(101),d=a(9),g=a(32),x=a(51),m=a(0),q=a(2),p=a(46),t=a(50),r=a(49),u=a(11);a(29);b.exports=function(a,b,h,l,e,A,y,v,D,B,G,E,C,z){z=f(b,A);if(e||A){if(z&&m(b,!0)&&(q(b,B,G),z=b.$expires===c?z:"expired"),z&&"ref"!==z||!b||"object"!==typeof b)b=t(b,{},a,h,G,
D),b=p(b,a,h,D,v)}else e=f(l),(z||e)&&(E?3>E.length?E(b,l):E(b,l,v.slice(0,v.index)):!1!==g(l)<g(b))||(C&&"error"===e&&(l=C(r(y,h),l)),y=d(b)-d(l=x(l,e,e?l.value:l)),b=t(b,l,a,h,G,D),a=u(a,y,G,D),b=p(b,a,h,D,v));return b}},function(b,e){b.exports=function(a,c){a=a.slice(0,a.depth);a[a.length]=c;return a}},function(b,e,a){var c=a(83),f=a(29),d=a(31);b.exports=function(a,b,m,e,p,t){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,m,e,p),d(b,t));return m[e]=b}},function(b,e,a){var c=Array.isArray,
f=a(59),d=a(99),g=a(9),x=a(100),m=a(34);b.exports=function(a,b,e){var p=0;if(b){var q=a["\u001ef_wrapped_value"];a=d(a);p=g(a);a.$type=b;a["\u001ef_prev"]=void 0;a["\u001ef_next"]=void 0;a["\u001ef_wrapped_value"]=q||!1}else a={$type:"atom",value:e,"\u001ef_prev":void 0,"\u001ef_next":void 0,"\u001ef_wrapped_value":!0};if(null==e)p=51;else if(null==p||0>=p)switch(typeof e){case "object":p=c(e)?50+e.length:51;break;case "string":p=50+e.length;break;default:p=51}b=x(a);"number"===typeof b&&b<m&&(a.$expires=
f()+-1*b);a.$size=p;return a}},function(b,e,a){e=a(5);b.exports=e("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,e,a){e=a(5);b.exports=e("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,e,a){b.exports=function(a,b){var d=b["\u001ef_prev"],c=b["\u001ef_next"];c&&(c["\u001ef_prev"]=d);d&&(d["\u001ef_next"]=c);b["\u001ef_prev"]=b["\u001ef_next"]=void 0;b===a["\u001ef_head"]&&
(a["\u001ef_head"]=c);b===a["\u001ef_tail"]&&(a["\u001ef_tail"]=d)}},function(b,e,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var d=a(14),g=a(15),e=a(103).default;b.exports=f;f.prototype[e]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,c,b){return new g([this.operator.call(this.source,a instanceof d?a:new d(a,c,b))])};f.prototype.then=function(a,
d){var b=this;this._promise||(this._promise=new c.Promise(function(a,d){var c=[],g=!1;b.subscribe({next:function(a){c[c.length]=a},error:function(a){g=!0;d(a)},complete:function(){!g&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,d)}}).call(e,a(35))},function(b,e){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&"json"in a}},function(b,e,a){var c=Array.isArray,
f=a(6);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,e){b.exports=Date.now},function(b,e){b.exports=1},function(b,e,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(66);e=a(3);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=e;c.toProps=e.prototype.toProps;b.exports=c},function(b,e,a){function c(a){if(void 0!==a){for(var d="",b=a.$keys,e=-1,q=b.length;++e<q;){var p=b[e];if(null===
p)d=""+f(""+d+"null");else{"object"===typeof p&&(p="["+p.from+".."+(p.from+p.length-1)+"]");var t=c(a[e]),d=void 0===t?""+f(""+d+p):""+f(""+d+p+t.$code)}}a.$code=d;return a}}var f=a(22);b.exports=c},function(b,e,a){function c(a,b,e,q){if(e===q)return!0;var g,m=-1,r=0,u=e+1,n,k,h;g=b[e];if(null===g)return a===d;a:do{if("object"!==typeof g)e=g,k=void 0,n=!1;else if(f(g)){if(void 0!==h)break a;m=0;h=g;r=g.length;if(0===r)break a;g=h[m];continue a}else{k=g.to;e=g.from||0;"number"!==typeof k&&(k=e+(g.length||
0)-1);if(0>k-e)break a;n=!0}do if(u===q){if(null!==a[e])return!1}else if(g=a[e],null===g||void 0===g||!1===c(g,b,u,q))return!1;while(n&&++e<=k);if(++m===r)break a;g=h[m]}while(1);return!0}var f=Array.isArray,d=a(8);b.exports=c},function(b,e,a){function c(a,b){return a.reduce(function(a,b){return d(b)?f(a,b,0,b.length):d(b.$keys)?c(x(b),a):a},b||{})}function f(a,c,b,e){if(b!==e){a=a||{};var m=a.$keys||(a.$keys=[]),q=a.$keysMap||(a.$keysMap={}),n,k=-1,h=0,l,w=b+1,p;n=c[b];if(null===n)return g;a:do{if("object"!==
typeof n)l=n,"undefined"===typeof(b=q[l])&&(b=m.length),m[b]=l,q[l]=b,n=f(a[b],c,w,e),void 0!==n&&(a[b]=n);else if(d(n)){if(void 0!==p)break a;k=0;p=n;h=n.length;if(0===h)break a;n=p[k];continue a}else{b=n.to;l=n.from||0;"number"!==typeof b&&(b=l+(n.length||0)-1);if(0>b-l)break a;n={from:l,length:b-l+1};l="["+l+".."+b+"]";"undefined"===typeof(b=q[l])&&(b=m.length);m[b]=n;q[l]=b;n=f(a[b],c,w,e);void 0!==n&&(a[b]=n)}if(++k===h)break a;n=p[k]}while(1);return a}}var d=Array.isArray,g={$keys:[null],$keysMap:{"null":0}},
x=a(21);b.exports=c},function(b,e,a){function c(a,b,e,q,p){if(e===q)return!0;a=a||{};var g,m=-1,u=0,n,k=e+1,h,l,w;g=b[e];if(null===g)return d;a:do{if("object"!==typeof g)e=g,l=void 0,h=!1;else if(f(g)){if(void 0!==w)break a;m=0;w=g;u=g.length;if(0===u)break a;g=w[m];continue a}else{l=g.to;e=g.from||0;"number"!==typeof l&&(l=e+(g.length||0)-1);if(0>l-e)break a;h=!0}do k===q?a[e]=p:(g=a[e],(n=c(g,b,k,q,p))?g||(a[e]=n):a[e]=p);while(h&&++e<=l);if(++m===u)break a;g=w[m]}while(1);return a}var f=Array.isArray,
d=a(8);b.exports=function(a,b){return a.reduce(function(a,b){return c(a,b,0,b.length,null)},b||{})}},function(b,e,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new d(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new q;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={},this._seed.__proto__=
g.prototype);this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(94),d=a(68),g=a(3),x=a(67),m=a(98),q=a(56),p=a(36);a(9);var t=a(6),r=a(57),u=a(10),n=a(58),k=a(19),h=a(18),l=a(24),w=a(78),A=a(25);b.exports=c;c.prototype.constructor=c;c.prototype.get=
function(){var a=this._seed;a||(a={},a.__proto__=g.prototype);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("get",this,c))._toJSON(a,[])};c.prototype.set=function(){var a={};a.__proto__=g.prototype;for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("set",this,c))._toJSON(a,[])};c.prototype.preload=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("get",this,b))._toJSON(null,[])};c.prototype.call=
function(){var a={};a.__proto__=g.prototype;for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return(new f("call",this,c))._toJSON(a,[])};c.prototype.invalidate=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("invalidate",this,b))._toJSON(null,null).then()};c.prototype.deref=a(87);c.prototype._hasValidParentReference=a(86);c.prototype.getValue=function(a){return(new f("get",this,[a]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var d=
-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var d=-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=
function(a){var b=this._root,c=b.cache;if(a!==c){var d={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof c&&(b.expired=[],b["\u001ef_head"]=void 0,b["\u001ef_tail"]=void 0,this._recycleJSON&&(this._seed={},this._seed.__proto__=g.prototype));var f,e;n(a)?f=h(d,[a]):r(a)?f=k(d,[a]):t(a)&&(f=k(d,[{json:a}]));f&&(f[0].length&&l(d,f[0],null,!1,!1),f[2]&&(e=b.onChange)&&e.call(b.topLevelModel))}else"undefined"===typeof c&&(this._root.cache=
{});return this};c.prototype.getCache=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];if(0===b.length)return w(this,this._root.cache);a={};a.__proto__=g.prototype;a=A({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},b,a).data;a.paths=p(b);return a};c.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&
(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=new c(this);if(a)for(var d in a){var g=a[d];"delete"===g?delete b[d]:"_path"===d?(b[d]=g,!1===a.hasOwnProperty("_node")&&delete b._node):b[d]=g}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new m(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new m(1);return this._clone({_scheduler:b})};c.prototype.unbatch=
function(){return this._clone({_scheduler:new q})};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new x(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=
function(){return this._clone({_source:"delete"})};c.prototype.inspect=function(){return"{ v: "+this.getVersion()+" p: ["+this._path.join(", ")+"] }"};c.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=u(this._root.cache,a);return(a&&a["\u001ef_abs_path"]||[]).slice(0)};c.prototype._getVersion=
a(79);c.prototype._getPathValuesAsPathMap=l;c.prototype._getPathValuesAsJSONG=A;c.prototype._setPathValues=a(30);c.prototype._setPathMaps=a(19);c.prototype._setJSONGs=a(18);c.prototype._setCache=a(19);c.prototype._invalidatePathValues=a(28);c.prototype._invalidatePathMaps=a(47)},function(b,e){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};
a.prototype.call=function(a,b,d,g){return this._model.call.apply(this._model,[a,b,d].concat(g))._toJSONG()};b.exports=a},function(b,e,a){function c(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&
(this.comparator=a.comparator);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(95),d=a(32);c.comparator=c.prototype.comparator=function(a,b){var c=a&&a.$type,g=b&&b.$type;
return c?g?!0===d(b)<d(a)?!0:!(c!==g||a.value!==b.value||a.$expires!==b.$expires):a.value===b:g?!1:a===b};b.exports=c},function(b,e,a){var c=a(24),f=a(25);b.exports={json:function(a,b,f,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};var g=[].concat(b[1]||[]),m=[].concat(b[2]||[]),r=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&r&&r.length&&(d=c(a,r,f,e,!0).hasValue);return{data:f,missing:!0,hasValue:d,fragments:[b,g,m,r]}},jsonGraph:function(a,b,c,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};
var g=[].concat(b[1]||[]),m=[].concat(b[2]||[]),r=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&r&&r.length&&(d=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},r,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:d,fragments:[b,g,m,r]}}}},function(b,e,a){b.exports={json:a(40),jsonGraph:a(43)}},function(b,e,a){var c=a(1);b.exports=function(a,b,g,e,m,q){var d=-1;b+=!!m;m=Array(b);for(a=q?c(a):a.value;++d<b;)m[d]=e[d];(g.errors||
(g.errors=[])).push({path:m,value:a})}},function(b,e,a){function c(a,b,h,e,t,D,B,G,E,C,z,F,I,M,L,N,S,P,H,K,Q){var l,w,y=z;if(void 0===b||void 0!==(l=b.$type)||void 0===e)return g[1]=H&&void 0===b,g[0]=p(b,l,h,e,t,D,B,G,t,E,C,y,I,M,L,N,S,P,H,K,x,f,u),g;var v,A,U;l="";var T,J,ca;z=e.$keys;var ea=t+1,Z,aa,da,ia,ba,fa=C+1,Y,ga;Q&&F&&(ga=F.value,Y=F["\u001ef_abs_path"]);if(!h||"object"!==typeof h)h=void 0;else if(v=h["\u001ef_meta"]){U=b["\u001ef_abs_path"];A=v.abs_path;N||h instanceof m||(h.__proto__=
{},h.__proto__["\u001ef_meta"]=v,h.__proto__.__proto__=m.prototype);if(!d(U,A)){v.$code="";v.status="pending";v.abs_path=U;v.version=b["\u001ef_version"];ga&&(v.deref_to=ga);Y&&(v.deref_from=Y);if(A=v.keys)for(J in v.keys=Object.create(null),A)A[J]&&delete h[J];g[0]=h;g[1]=!0;return g}if(v.version===b["\u001ef_version"]&&v.$code===e.$code)return B.hasValue=!0,g[0]=h,g[1]=!1,g;A=v.keys;v.abs_path=U;v.version=b["\u001ef_version"];ga&&(v.deref_to=ga);Y&&(v.deref_from=Y)}U=Object.create(null);var ka=
-1,ma=z.length,ha,la,ja=!1;a:for(;++ka<ma;)if(y=z[ka],ha=e[ka],null===y){if(void 0!==ha)throw new n;l=""+k(""+l+"null")}else{if("object"!==typeof y)J=y,Z=void 0,ca=!1,la=J;else{Z=y.to;J=y.from||0;"number"!==typeof Z&&(Z=J+(y.length||0)-1);if(0>Z-J)break a;ca=!0;la="["+J+".."+Z+"]"}do{y=!1;aa=h&&h[J];ba=E;ia=fa;da=F;T=b[J];G[t]=J;E[C]=J;if(void 0===ha){if(c(a,T,aa,ha,ea,D,B,G,ba,ia,y,da,I,M,L,N,S,P,H,K,Q),!0===g[1]&&(ja=!0),void 0===(aa=g[0])&&!P){h&&h.hasOwnProperty(J)&&delete h[J];continue}}else if(T&&
"ref"===T.$type&&!q(T,L)&&(w=r(a,T,I,L),T=w[0],y=!0,ba=w[1],da=w[2],ia=ba.length,w[0]=w[1]=w[2]=void 0),c(a,T,aa,ha,ea,D,B,G,ba,ia,y,da,I,M,L,N,S,P,H,K,Q),!0===g[1]&&(ja=!0),void 0===(aa=g[0])){h&&h.hasOwnProperty(J)&&delete h[J];continue}void 0===v&&(v={},v.version=b["\u001ef_version"],v.abs_path=b["\u001ef_abs_path"],ga&&(v.deref_to=ga),Y&&(v.deref_from=Y),h={},h["\u001ef_meta"]=v,h.__proto__=m.prototype,N?h=N(h):(y=h,h={},h.__proto__=y));U[J]=!0;A&&J in A&&(A[J]=!1);h[J]=aa}while(ca&&++J<=Z);l=
""+k(""+l+(ja?"":la)+(ha?ha.$code:""))}if(v&&(v.$code=l,v.keys=U,v.status=ja&&"pending"||"resolved",A))for(J in A)A[J]&&delete h[J];g[0]=h;g[1]=ja;return g}function f(a,b,c,d,g,e,k,n,m,p,q,u,r,x,L){if(p)return x(q,a,b,b,u,r,L,c,d,k,n,e,m,f);a=a?h(a):[[]];var l=d.slice(0,g);return a.forEach(function(a){g=b+a.length;return t(l.concat(a),b,c,d,g,e,k,n,m,!1,q,u,r,x,L)})}function d(a,b){if(a===b)return!0;var c=a.length;if(c!==b.length)return!1;for(;~--c;)if(a[c]!==b[c])return!1;return!0}var g=Array(2),
x=a(42),m=a(3),q=a(0),p=a(16),t=a(27),r=a(41),u=a(77),n=a(4);a(12);var k=a(22),h=a(21);b.exports=c},function(b,e,a){function c(a,b,e,w,A,y,v,D,B,G,E,C,z,F,I,M,L,N,S,P,H,K){var h,k;if(void 0===b||(h=b.$type)||A===B)return f[1]=P&&void 0===b,f[0]=q(b,h,e,w,A,y,v,D,B,G,E,C,F,I,M,L,N,S,P,H,g,x,t),f;var l,O,V,W=A+1,U,T,J,ca,ea=-1,Z=0,aa,da,ia=E+1,ba,fa;C=w[A];if(null===C){if(W<B)throw new u;f[0]=e;f[1]=!1;return f}K&&z&&(fa=z.value,ba=z["\u001ef_abs_path"]);if(!e||"object"!==typeof e)e=void 0;else if(l=
e["\u001ef_meta"])l.version=b["\u001ef_version"],l.abs_path=b["\u001ef_abs_path"],fa&&(l.deref_to=fa),ba&&(l.deref_from=ba);var Y=!1;a:do{if("object"!==typeof C)h=C,U=void 0,V=!1;else if(d(C)){if(void 0!==T)throw new n(w,T);ea=0;T=C;Z=C.length;if(0===Z)break a;C=T[ea];continue a}else{U=C.to;h=C.from||0;"number"!==typeof U&&(U=h+(C.length||0)-1);if(0>U-h)break a;V=!0}do{C=!1;J=e&&e[h];da=G;aa=ia;ca=z;O=b[h];D[A]=h;G[E]=h;if(W===B){if(c(a,O,J,w,W,y,v,D,B,da,aa,C,ca,F,I,M,L,N,S,P,H,K),!0===f[1]&&(Y=
!0),void 0===(J=f[0])&&!S)continue}else if(O&&"ref"===O.$type&&!p(O,M)&&(k=r(a,O,F,M),O=k[0],C=!0,da=k[1],ca=k[2],aa=da.length,k[0]=k[1]=k[2]=void 0),c(a,O,J,w,W,y,v,D,B,da,aa,C,ca,F,I,M,L,N,S,P,H,K),!0===f[1]&&(Y=!0),void 0===(J=f[0]))continue;void 0===l&&(l={},l.version=b["\u001ef_version"],l.abs_path=b["\u001ef_abs_path"],fa&&(l.deref_to=fa),ba&&(l.deref_from=ba),e={},e["\u001ef_meta"]=l,e.__proto__=m.prototype,L&&(e=L(e)));e[h]=J}while(V&&++h<=U);if(++ea===Z)break a;C=T[ea]}while(1);l&&(l.status=
Y&&"pending"||"resolved");f[0]=e;f[1]=Y;return f}var f=Array(2),d=Array.isArray,g=a(42),x=a(27),m=a(3),q=a(16),p=a(0),t=a(44),r=a(41),u=a(4),n=a(12);b.exports=c},function(b,e,a){var c=Array(2),f=a(1),d=a(26),g=a(13),x=a(0),m=a(7),q=a(52);b.exports=function(a,b,e,u,n){g(e,b);var k,h,l=0,p=a,r=b.value,t=r,v=r.length;do{if(0===l&&void 0!==(k=b["\u001ef_context"]))p=k,l=v;else if(h=r[l++],void 0===(p=p[h]))break;if(l===v){h=p.$type;if(void 0!==h&&x(p,n))break;else{if(p===b)throw new q(r);p!==k&&m(b,p)}if("ref"===
h)g(e,p),u&&d(f(p),r,v,u),l=0,b=p,p=a,r=t=b.value,v=r.length;else break}else if(void 0!==p.$type)break}while(1);l<v&&void 0!==p&&(v=l);l=-1;for(r=Array(v);++l<v;)r[l]=t[l];c[0]=p;c[1]=r;return c}},function(b,e,a){var c=a(1),f=a(26);b.exports=function(a,b,e,m,q,p,t,r,u,n,k){k=a.value;if(n||"ref"===b||"error"===b||!a["\u001ef_wrapped_value"]||"object"===typeof k)k=c(a);q.hasValue=!0;f(k,t,r,m);(m.paths||(m.paths=[])).push(p.slice(0,e+!!u));return k}},function(b,e,a){function c(a,b,h,e,r,D,B,G,E,C,z,
F,I,M,L,N,S,P){var l,w;if(void 0===b||(l=b.$type)||e===G)return p(b,l,r,h,e,r,D,B,G,E,C,z,F,I,M,void 0,L,N,S,P,x,f,t);var v,y,A=e+1,O,V,W=-1,U=0,T,J,ca=C+1;z=h[e];if(null===z){if(A<G)throw new n;}else{a:do{if("object"!==typeof z)l=z,O=void 0,y=!1;else if(d(z)){if(void 0!==V)throw new k(h,V);W=0;V=z;U=z.length;if(0===U)break a;z=V[W];continue a}else{O=z.to;l=z.from||0;"number"!==typeof O&&(O=l+(z.length||0)-1);if(0>O-l)break a;y=!0}do z=!1,J=E,T=ca,v=b[l],B[e]=l,E[C]=l,v&&A<G&&"ref"===v.$type&&!q(v,
M)&&(r&&m(g(v),E,T,r),w=u(a,v,F,r,M),v=w[0],z=!0,J=w[1],T=J.length,w[0]=w[1]=void 0),c(a,v,h,A,r,D,B,G,J,T,z,F,I,M,L,N,S,P);while(y&&++l<=O);if(++W===U)break a;z=V[W]}while(1)}}function f(a,b,c,d,e,f,k,n,p,q,u,t,x,M,L){var l,w;u&&q&&((u.paths||(u.paths=[])).push((w=0===e-b)&&d.slice(0,b+!!f)||d.slice(0,b).concat(a.slice(b,e+!!f))),l=m(w&&g(h)||void 0,k,n,u,!w));return r(a,b,c,d,e,f,k,n,p,!w&&q,l,t,!0,M,L)}var d=Array.isArray,g=a(1),x=a(75),m=a(26),q=a(0),p=a(16),t=a(44),r=a(27),u=a(74),n=a(4),k=a(12),
h=a(8);b.exports=c},function(b,e,a){function c(a,b,e,r,u,n,k,h,l,w,A,y,v,D){if(void 0===b)return d(void 0,void 0,a,b,e,void 0,h,l,e,w,A,y,k,void 0,!1,u,n,!1,v,!1,void 0,D,void 0),n?f(m):void 0;var p,q,t,C,z=b.$keys,F=e+1,I,M=A+1;a&&"object"===typeof a?((p=a["\u001ef_meta"])?q=p.keys:a["\u001ef_meta"]=p={},p.$code="",p.status="resolved",p.version=k.version,p.abs_path=w.slice(0,A)):(a={},a.__proto__=g.prototype,a["\u001ef_meta"]=p={},p.$code="",p.status="resolved",p.version=k.version,p.abs_path=w.slice(0,
A),u&&(a=u(a)));r=Object.create(null);var L,N=-1,S=z.length;a:for(;++N<S;)if(C=z[N],L=b[N],null===C){if(void 0!==L)throw new x;}else{if("object"!==typeof C)t=C,I=void 0,C=!1;else{I=C.to;t=C.from||0;"number"!==typeof I&&(I=t+(C.length||0)-1);if(0>I-t)break a;C=!0}do l[e]=t,w[A]=t,r[t]=!0,q&&t in q&&(q[t]=!1),a[t]=c(a[t],L,F,F,u,n,k,h,l,w,M,y,v,D);while(C&&++t<=I)}p.keys=r;if(q)for(t in q)q[t]&&delete a[t];return a}var f=a(1),d=a(16),g=a(3),x=a(4);a(12);var m=a(8);b.exports=c},function(b,e,a){function c(a,
b,e,q){var g,m;if(!a||"object"!==typeof a)return a;if(g=a.$type){if(void 0===(m=a.value))q?m={$type:"atom"}:a["\u001ef_wrapped_value"]&&(m=f(a));else if(e||"ref"===g||"error"===g||!a["\u001ef_wrapped_value"]||"object"===typeof m)m=f(a);return m}g=Object.keys(a);for(var r=g.length,u=-1;++u<r;){var n=g[u];"$size"===n||d(n)||void 0===(m=c(a[n],b&&b[n],e,q))||(void 0===b&&(b={}),b[n]=m)}return b}var f=a(1),d=a(20);b.exports=function(a,b){return c(b,{},a._boxed,a._materialized)}},function(b,e,a){var c=
a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001ef_version"];return null==a?-1:a}},function(b,e,a){function c(a,c,e,q,p){c=d(c);e=!1;q=-1;for(var g=c.length;++q<g;){var m=c[q],u=m.inputType,m=m.arguments;0<m.length&&("PathValues"===u&&(m=m.map(f)),(0,b.exports["invalidate"+u])(a,m,p)&&(e=!0))}e&&(p=a._root.onChange)&&p.call(a._root.topLevelModel);return{}}function f(a){return a.path||a.paths}var d=a(45);b.exports={json:c,jsonGraph:c,invalidatePathMaps:a(47),invalidatePathValues:a(28)}},function(b,
e,a){var c=a(51),f=a(0),d=a(46),g=a(2),x=a(50),m=a(9),q=a(49),p=a(32),t=a(11);b.exports=function(a,b,e,k,h,l,w,A,y,v,D,B){var n,r,u,z,F,I;if(b===e){if(void 0===e)return e;if(null===e)return b=c(e,void 0,e),a=t(a,-b.$size,y,w),b=d(b,a,k,void 0,l);if((u=!(!b||"object"!==typeof b))&&void 0===(n=b.$type))return void 0===b["\u001ef_parent"]&&d(b,a,k,w,l),b}else if(u=!(!b||"object"!==typeof b))n=b.$type;if("ref"!==n){if(z=!(!e||"object"!==typeof e))r=e.$type;if(u&&!n&&(null==e||z&&!r))return b}else{if(null==
e){if(f(b,B)){g(b,A,y);return}return b}if(z=!(!e||"object"!==typeof e))if(r=e.$type,"ref"===r)if(b===e){if(null!=b["\u001ef_parent"])return b}else if(F=b.$timestamp,I=e.$timestamp,!f(b,B)&&!f(e,B)&&I<F)return}if(n&&z&&!r)return d(x(b,e,a,k,y,w),a,k,void 0,l);r||!z?("error"===r&&D&&(e=D(q(h,k),e)),r&&b===e?b["\u001ef_parent"]||(b=c(b,n,b.value),a=t(a,-b.$size,y,w),b=d(b,a,k,w,l)):(h=!0,n||r?u&&f(b,B)||(h=v?!(3>v.length?v(b,e):v(b,e,l.slice(0,l.index))):!1===p(e)<p(b)):h=!0,h&&(v=m(b)-m(e=c(e,r,r?e.value:
e)),b=x(b,e,a,k,y,w),a=t(a,v,y,w),b=d(b,a,k,w,l))),f(b,!0)&&g(b,A,y)):null==b&&(b=d(e,a,k,void 0,l));return b}},function(b,e,a){function c(a,c,e){var g=!1,m=-1,n=c.length,k=[],h=[],l=a._root,p=l.errorSelector;e=e&&!a._source;for(l=a._source?null:l.comparator;++m<n;){var q=c[m],t=q.inputType,q=q.arguments;if(0<q.length){var v=(0,b.exports["set"+t])(a,q,p,l,e),g=g||v[2];h.push.apply(h,v[1]);"PathValues"===t?k.push.apply(k,q.map(f)):"JSONGraphs"===t?k.push.apply(k,d(q,f)):k.push.apply(k,v[0])}}return{changed:g,
requested:k,optimized:h}}function f(a){return a.path||a.paths}function d(a,b){for(var c=-1,d=-1,e=a.length,g=[];++d<e;)for(var f=b(a[d],d,a),h=-1,l=f.length;++h<l;)g[++c]=f[h];return g}var g=a(24),x=a(25),m=a(45);b.exports={json:function(a,b,d,e,f){var n,k,h,l,p,q,r=m(b);n=c(a,r,f);if((b=n.requested).length){if(!(l=n.changed)||e)k=g(a,b,d,e,f);l&&(h=x({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},n.optimized,{},e,f),q=h.data,p=q.paths,h=h.requested,(e=
a._root.onChange)&&e.call(a._root.topLevelModel))}return{args:r,data:d,missing:p,relative:b,fragments:q,requested:h,error:k&&k.error,errors:k&&k.errors,hasValue:k&&k.hasValue}},jsonGraph:function(a,b,d,e,g){var f,k,h,l,p,q,r=m(b);f=c(a,r,g);(b=f.requested).length&&(e||(h=f.changed))&&(k=x({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},f.optimized,d,e,g),p=k.data,l=p.paths,q=k.requested,h&&(e=a._root.onChange)&&e.call(a._root.topLevelModel));return{args:r,
data:d,missing:l,relative:b,fragments:p,requested:q,error:k&&k.error,hasValue:k&&k.hasValue}},setPathMaps:a(19),setPathValues:a(30),setJSONGraphs:a(18)}},function(b,e,a){b.exports=function(a,b){for(var c=a["\u001ef_refs_length"]||0,e=b["\u001ef_refs_length"]||0,f=-1;++f<c;){var m=a["\u001ef_ref"+f];void 0!==m&&(m["\u001ef_context"]=b,b["\u001ef_ref"+(e+f)]=m,a["\u001ef_ref"+f]=void 0)}b["\u001ef_refs_length"]=c+e;a["\u001ef_refs_length"]=void 0;return b}},function(b,e,a){b.exports=function(a){for(var b=
-1,c=a["\u001ef_refs_length"]||0;++b<c;){var e=a["\u001ef_ref"+b];null!=e&&(e["\u001ef_context"]=e["\u001ef_ref_index"]=a["\u001ef_ref"+b]=void 0)}a["\u001ef_refs_length"]=void 0;return a}},function(b,e,a){b.exports=function(a){var b=a["\u001ef_context"];if(b){for(var c=(a["\u001ef_ref_index"]||0)-1,e=(b["\u001ef_refs_length"]||0)-1;++c<=e;)b["\u001ef_ref"+c]=b["\u001ef_ref"+(c+1)];b["\u001ef_refs_length"]=e;a["\u001ef_ref_index"]=a["\u001ef_context"]=void 0}return a}},function(b,e,a){b.exports=function(){var a=
this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001ef_parent"]||a&&a["\u001ef_invalidated"]?!1:!0:!0}},function(b,e,a){var c=a(3),f=a(10);a(89);b.exports=function(a){var b,d;if(!a||"object"!==typeof a||!(d=a["\u001ef_meta"])||"object"!==typeof d)return null;var e=this._root.cache,q=this._recycleJSON,p=d.abs_path,t,r;if(!p)return q&&(b={json:a},b.__proto__=c.prototype),this._clone({_node:void 0,_seed:b});if(0===p.length)return q&&(b={json:a},b.__proto__=
c.prototype),this._clone({_node:e,_path:p,_referenceContainer:!0,_seed:b});var u=d.deref_to,n=d.deref_from,k=f(e,p),h="e";if(n){h=!1;d=-1;r=n.length;for(t=e;++d<r&&(t=t[n[d]],t&&!t.$type););if(u&&t&&"ref"===t.$type)for(h=!0,r=u.length,e=t.value,d=0;d<r;++d)if(e[d]!==u[d]){k=void 0;h=!1;break}}h?"e"===h&&(t=!0):t=!1;q&&(b={json:a},b.__proto__=c.prototype);return this._clone({_seed:b,_node:k,_path:p,_referenceContainer:t})}},function(b,e,a){e=a(5);b.exports=e("BoundJSONGraphModelError",function(){this.message=
"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,e,a){e=a(5);b.exports=e("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,e,a){e=a(5);b.exports=e("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},
function(b,e,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}e=a(5);b.exports=e("MaxRetryExceededError",function(a,b,e,x){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(e&&"relative: [\n\t"+c(e)+"\n]\n"||"")+(x&&"optimized: [\n\t"+c(x)+"\n]\n"||"")})},function(b,e){b.exports=String.fromCharCode(30)+"f_"},function(b,e,a){var c=a(11);b.exports=function(a,b,e,x,m,q){"number"!==typeof m&&(m=.75);for(var d,
f=x*m;m=b.pop();)e-=d=m.$size||0,c(m,d,a,q);if(e>=x){for(b=a["\u001ef_tail"];e>=f&&(m=b);)b=b["\u001ef_prev"],e-=d=m.$size||0,c(m,d,a,q);a["\u001ef_tail"]=m;null==m?a["\u001ef_head"]=void 0:m["\u001ef_next"]=void 0}}},function(b,e,a){function c(a,b,c){q.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function d(a,b,c,d,e,f){p.call(this,a);this.data=b;this.request=this.missing=
null;this.started=!1;this.retryCount=-1;this.errors=c;this.errored=!1;this.relative=null;this.hasValue=!1;this.requested=this.fragments=null;this.completed=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function g(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=u(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(y){throw y;}finally{--c.syncRefCount}}function x(a,b){try{throw b;}catch(w){p.prototype.onError.call(a,w)}}function m(a,b){for(var c,d,e,h=Object.keys(b),f=-1,g=h.length;++f<g;)e=
h[f],"\u001ef_meta"!==e&&(d=b[e],c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:m(c,d):void 0===c&&(a[e]=d)));return a}var q=a(55),p=a(14),t=a(93),r=a(3),u=a(36),n=a(53),k=a(91);b.exports=c;c.prototype=Object.create(q.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;a.progressive=a.progressive||
this.operator.progressive;a.maxRetryCount=a.maxRetryCount||this.operator.maxRetryCount;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){void 0===a&&(a={},a.__proto__=r.prototype);return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};
c.prototype._toJSONG=function(a,b){void 0===a&&(a={},a.__proto__=r.prototype);return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),
this.source)};f.prototype.call=function(a,b){return a.subscribe(new d(b,this.data,this.errors,this.operation,this.progressive))};d.prototype=Object.create(p.prototype);d.prototype.operations={get:a(70),set:a(82),call:a(69),invalidate:a(80)};d.prototype.next=d.prototype.onNext=function(a){if(!this.started)this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount;else if(this.destination){var b,c=a.type;a=a.args||
a.paths;var d=this.data,e=this.model,h=this.errors,f,k=this.hasValue,n=this.operation,p=this.progressive,q=p&&d;e._recycleJSON&&"get"===this.type&&(q=!1);q&&(d={},d.__proto__=r.prototype);if(a&&a.length){f=this.operations[c][n](e,a,d,p||!e._source,-1===this.retryCount);if(f.error)return x(this,f.error);h&&f.errors&&h.push.apply(h,f.errors);if(b=f.fragments)a=f.args,this.fragments=b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=k||(k=f.hasValue)}this.completed=
!b||!e._source;"set"!==c&&(this.args=a,q&&(this.data=m(d,this.data)));p&&k&&d&&(d.json||d.jsonGraph)&&g(d,n,e._root,this.destination)}};d.prototype.error=d.prototype.onError=function(a){if(a instanceof n)return p.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};d.prototype.complete=d.prototype.onCompleted=function(a){if(this.destination){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&
this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&g(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?x(this,b.length&&b||a):p.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return x(this,new k(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)}};d.prototype.dispose=d.prototype.unsubscribe=function(){var a=
this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;p.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&t(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,e,a){function c(a){m.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=
b;this.scheduler=c;this.requested=d;this.optimized=e}var d=a(55),g=a(96),x=a(14),m=a(15),q=a(56);b.exports=c;c.prototype=Object.create(m.prototype);c.prototype.set=function(a,b,c,e){var f=this;return new d(function(d){var h=new g("set",f,a._source,new q);d=h.subscribe(new x(d,h));f.add(h);h.data=e.jsonGraph;h.requested.push(c);h.optimized.push(b);h.connect();return d})};c.prototype.call=function(a,b,c,e){var f=this;return new d(function(b){var c=new g("call",f,a._source,new q);b=c.subscribe(new x(b,
c));f.add(c);c.data=e;c.boundPath=a._path;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,h=-1,l=b.subscriptions,p=l.length,q=new m([],a);++h<p;){var y=l[h];if("get"===y.type&&((y=y.batch(d,e,d=[],e=[]))&&q.add(y.subscribe(new x(a,y))),!e.length))break}e.length&&(y=l[h]=(new g("get",b,c,f)).batch(d,e),q.add(y.subscribe(new x(a,
y))),y.connect());return q}},function(b,e,a){function c(a,b,c,d){g.call(this,[],b);this.trees=[];this.type=a;this.data=null;this.responded=this.active=!1;this.paths=null;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){var a,b=this.paths=t(u(this.optimized.reduce(function(a,b){return r(b,a)},{})));this.trees=this.optimized.map(function(a){return u(r(a))});this.active=!0;try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=
this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(l){this.disposable={},g.prototype.onError.call(this,new x(l))}}function d(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,g,h=-1,k=b.length;a:for(;++h<k;)if(g=b[h],g.length>c){f=0;do if(g[f]!==a[f])continue a;while(++f<c);d[++e]=g.slice(c)}return d}var g=a(97);a(14);a(15);var x=a(53),m=a(18),q=a(30),p=a(28),t=a(39),r=a(37),
u=a(38),n=a(63);b.exports=c;c.prototype=Object.create(g.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){this.responded=!0;var c=!1,e=a.jsonGraph,f=this.boundPath,b=b.modelRoot,g=a.invalidated,k=a.paths||this.paths,n=this.requested.slice(0);a=this.observers.slice(0);var q=b.onChange;g&&g.length&&(c=p({_root:b,_path:[]},g,!1));k&&k.length&&e&&"object"===typeof e&&(e=m({_root:b},[{paths:k,jsonGraph:e}],b.errorSelector,b.comparator,!1),k=e[0],c=c||e[2]);c&&q&&q.call(b.topLevelModel);
a.forEach(function(a,b){a.onNext({type:"get",paths:n[b]||d(f,k)})})}};c.prototype.error=c.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=t(u(this.requested.reduce(function(a,b){return r(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&q({_root:b,_path:[]},c,b.errorSelector,b.comparator,
!1);g.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});g.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.trees.splice(a,1),this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.trees=[];
this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();g.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};c.prototype.batch=function(a,b,c,d){if(this.active){var e=[],f=
[],g=this.trees,h=-1,k=-1,l=-1,m=-1,p=-1,q=g.length,t=b.length,w=a.length-1;a:for(;++h<t;){for(var x=-1,L=b[h],N=L.length;++x<q;){var S=g[x][N];if(S&&n(S,L,0,N)){f[++m]=L;p<w&&(e[++p]=a[h<w?h:w]);continue a}}d[++k]=L;l<w&&(c[++l]=a[h<w?h:w])}return~m?(this.requested.push(e),this.optimized.push(f),this.trees.push(u(r(f))),this):null}this.trees.push({});this.requested.push(a);this.optimized.push(b);return this}},function(b,e,a){function c(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),d=
a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new d([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=[]}},function(b,e){function a(a){this.delay=
a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,e,a){var c=Array.isArray,f=a(20);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=a[d])}return b}},function(b,e,a){var c=a(6);b.exports=function(a){return c(a)&&a.$expires||void 0}},
function(b,e,a){var c=a(6);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,e,a){var c=Array.isArray,f=a(6);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,e,a){b.exports=a(104)},function(b,e,a){(function(b,f){Object.defineProperty(e,"__esModule",{value:!0});var c=a(105),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);e["default"]=
b}).call(e,a(35),a(106)(b))},function(b,e,a){Object.defineProperty(e,"__esModule",{value:!0});e["default"]=function(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,e){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),
a.webpackPolyfill=1);return a}},function(b,e,a){b.exports=a(61)}])});
//# sourceMappingURL=falcor.all.min.js.map
