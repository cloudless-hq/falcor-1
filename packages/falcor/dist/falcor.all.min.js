/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("falcor",[],d):"object"===typeof exports?exports.falcor=d():b.falcor=d()})(this,function(){return function(b){function d(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,d);f.l=!0;return f.exports}var a={};d.m=b;d.c=a;d.i=function(a){return a};d.d=function(a,f,e){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:e})};
d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};d.p="";return d(d.s=109)}([function(b,d,a){var c=a(61),f=a(34),e=a(62);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===e?!1:a===f?b:a<c()}},function(b,d,a){var c=a(56);b.exports=function(a,e,h){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,e.push(a),c(h,a));return a}},function(b,
d,a){(function(a){function c(a){a?(this["\u001e\u0192_meta"]=a["\u001e\u0192_meta"])||(this["\u001e\u0192_meta"]=a):this["\u001e\u0192_meta"]={}}function e(a){function e(){return e.fn.apply(this,arguments)}return(e.fn=a)&&e}function h(e){var c=typeof e,h=arguments.length;if(0===h)e=this;else if(c!==v){if(!e||c!==u)return e}else{if(1!==h)return e;e=this}return e===a?void 0:e}function r(){return q(h.apply(this,arguments),r)}function p(a){a=h.apply(this,arguments);var e,c,g=0,f=q(a,p,!0,!0);a&&(e=a["\u001e\u0192_meta"])&&
(g=e.version);f&&typeof f===u&&(c=f["\u001e\u0192_meta"])&&(c.version=g);return f}function q(a,e,h,g){if(!a||typeof a!==u)return a;var f,k,x,n,b,w;if(m(a))w=a;else{f=-1;n=Object.keys(a);k=n.length;w={};g&&(w.__proto__=c.prototype);if(h&&(x=a["\u001e\u0192_meta"])){var q=x.$code,r=x.abs_path,p=x.deref_to,v=x.deref_from;x={};q&&(x.$code=q);r&&(x.abs_path=r);p&&(x.deref_to=p);v&&(x.deref_from=v);w["\u001e\u0192_meta"]=x;g&&(g={},g.__proto__=w,w=g)}for(;++f<k;)"\u001e\u0192_meta"!==(b=n[f])&&(w[b]=e(a[b],
e,h))}return w}Object.defineProperties(c.prototype,"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,c){a[c]={writable:!0,enumerable:!1,value:e(Array.prototype[c])};return a},{toJSON:{enumerable:!1,value:r},toProps:{enumerable:!1,value:p},toString:{enumerable:!1,value:function(a){return JSON.stringify(q(h.call(this,this),q,!0===
a))}},$__hash:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__path:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.abs_path||[]}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.version||0}}}));var m=Array.isArray,u="object",v="string";b.exports=c}).call(d,a(35))},function(b,d,a){d=a(4);b.exports=d("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,
d){b.exports=function(a,c){function f(a){this.message=a;c&&c.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}f.prototype=Object.create(Error.prototype);f.prototype.name=a;f.prototype.constructor=f;f.is=function(e){return e.name===a};return f}},function(b,d){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,d){b.exports={$type:"atom"}},function(b,d,a){var c=a(32);b.exports=function(a){for(var e,h=Object.keys(a),
f={},b=-1,q=h.length;++b<q;)e=h[b],c(e)||(f[e]=a[e]);return f}},function(b,d,a){b.exports=function(a,f){var e=f["\u001e\u0192_refs_length"]||0;f["\u001e\u0192_ref"+e]=a;f["\u001e\u0192_refs_length"]=e+1;a["\u001e\u0192_ref_index"]=e;a["\u001e\u0192_context"]=f}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&a.$size||0}},function(b,d,a){function c(a,e){var h=a,f,b=0,q=e.length;if(0<q){do for(h=h[e[b]];h&&"ref"===(f=h.$type);)h=c(a,h.value);while(++b<q&&h&&!f)}return h}b.exports=c},
function(b,d,a){var c=a(30),f=a(51);b.exports=function(a,h,b,p){var e=a;do{var m=e["\u001e\u0192_parent"];0>=(e.$size=(e.$size||0)-h)&&null!=m?c(e,m,e["\u001e\u0192_key"],b):e["\u001e\u0192_version"]!==p&&f(e,p);e=m}while(e);return a}},function(b,d,a){d=a(4);b.exports=d("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,d,a){var c=a(62);b.exports=function(a,e){if(e.$expires!==
c){var h=a["\u001e\u0192_head"];if(!h)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=e;else if(h!==e){var f=e["\u001e\u0192_prev"],b=e["\u001e\u0192_next"];b&&(b["\u001e\u0192_prev"]=f);f&&(f["\u001e\u0192_next"]=b);e["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=e;e["\u001e\u0192_next"]=h;h["\u001e\u0192_prev"]=e;e===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=f)}}}},function(b,d,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination=
{error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var e=this.destination;if(e)if(e.onNext)e.onNext(a);else e.next&&e.next(a)};c.prototype.error=c.prototype.onError=function(a){var e=!1,c=this.destination;c&&(c.onError?(e=!0,c.onError(a)):c.error&&(e=!0,c.error(a)),this.dispose());if(!e)throw a;};c.prototype.complete=c.prototype.onCompleted=
function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,d){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=
a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,d,a){var c=a(0),f=a(1),e=a(13);b.exports=function(a,b,p,q,m,u,v,n,k,x,g,l,t,F,y,z,w,A,E,C,d,B,G){var h=E;if(b)if(c(a,y))a["\u001e\u0192_invalidated"]||f(a,F,t);else if(e(t,a),void 0===a.value)E=!1,h=A;else{if(u)return l&&(n[m]=null),d(a,b,m,u,v,n,x,g,l,w,A,C);return}if(A)u&&(v.hasValue=!0);else if(!h)return;return B(q,
m,v,n,k,l,x,g,E,A,p,z,w,G,t)}},function(b,d,a){var c=a(10);b.exports=function(a,e){e=e||a._path;var f=a._node;if(!f||void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=null,0===e.length?f=a._root.cache:(f=c(a._root.cache,e),e===a._path&&(a._node=f));return f}},function(b,d,a){var c=a(30),f=a(21);b.exports=function h(a,b,q,m){if(c(a,b,q,m)){if(null==a.$type)for(var p in a)f(p)||h(a[p],a,p,m);return!0}return!1}},function(b,d,a){function c(a,e,h,x,g,l,b,m,q,p,w,r,E,C,d,B,G,H){var k=
{},t=e<a.length-1,n=a[e],v=u(n,k),z=r.index;do{w.depth=e;var A=f(h,x,g,l,b,m,v,t,!1,w,r,E,C,d,B,G,H);w[e]=v;w.index=e;var F=A[0],y=A[1],D=A[4];D[D.index++]=v;F&&(t?c(a,e+1,h,y,F,l,A[3],A[2],q,p,w,D,E,C,d,B,G,H):(q.push(w.slice(0,w.index+1)),p.push(D.slice(0,D.index))));v=u(n,k);if(k.done)break;r.index=z}while(1)}function f(a,c,k,x,g,l,b,u,y,z,w,A,E,C,d,B,G){for(y=k.$type;"ref"===y;){a:{c=a;g=x;w=z;var t=A,n=E,v=C,F=d,D=B,S=G,T,L,Q=k.value;y=Q.slice(0);if(h(k,S))r(k,n,v),k=void 0,T=c,L=g,y.index=Q.length;
else{var W=0,R=k,O=Q.length-1;T=k=c;L=l=g;do{var U=Q[W],M=W<O;y.index=W;L=f(c,T,k,g,L,l,U,M,!0,w,y,t,n,v,F,D,S);k=L[0];y=L[4];if(!k||"object"!==typeof k){y.index=W;w=L;break a}T=L[1];l=L[2];L=L[3]}while(W++<O);y.index=W;R["\u001e\u0192_context"]!==k&&p(R,k)}e[0]=k;e[1]=T;e[2]=l;e[3]=L;e[4]=y;w=e}k=w[0];if(!k||"object"!==typeof k)return w;c=w[1];l=w[2];g=w[3];w=w[4];y=k.$type}if(void 0===y){if(null==b){if(u)throw new m;k&&(b=k["\u001e\u0192_key"])}else c=k,g=l,k=c[b],l=g&&g[b];k=q(c,k,l,b,z,w,A,E,
C,d,B,G)}e[0]=k;e[1]=c;e[2]=l;e[3]=g;e[4]=w;return e}var e=Array(5),h=a(0),r=a(1),p=a(8),q=a(83),m=a(3),u=a(24);b.exports=function(a,f,h,x,g){a=a._root;for(var l=a.expired,k=a.version+1,b=a.cache,m=b["\u001e\u0192_version"],n=[],w=[],q=[],p=[],r=-1,u=f.length;++r<u;)for(var v=f[r],d=v.paths,v=v.jsonGraph,H=-1,J=d.length;++H<J;){var K=d[H];w.index=0;c(K,0,b,b,b,v,v,v,q,p,n,w,k,l,a,x,h,g)}e[0]=void 0;e[1]=void 0;e[2]=void 0;e[3]=void 0;e[4]=void 0;f=b["\u001e\u0192_version"];h=a.onChange;m!==f&&(a.version=
k,h&&h());return[q,p,m!==f]}},function(b,d,a){function c(a,e,g,l,b,m,n,q,w,p,r,v,d,B,G){var x;if(a&&"object"===typeof a&&!a.$type){x=[];var k=0;h(a)&&(x[k++]="length");for(var t in a)u(t)||(x[k++]=t)}else x=void 0;if(x&&x.length){k=0;t=x.length;var A=w.index;do{var z=x[k],C=a[z],F=!(!C||"object"!==typeof C)&&!C.$type;q.depth=e;var y=f(g,l,b,z,C,F,!1,q,w,p,r,v,d,B,G);q[e]=z;q.index=e;var E=y[0],D=y[1],y=y[2];y[y.index++]=z;E&&(F?c(C,e+1,g,D,E,m,n,q,y,p,r,v,d,B,G):(m.push(q.slice(0,q.index+1)),n.push(y.slice(0,
y.index))));if(++k>=t)break;w.index=A}while(1)}}function f(a,c,g,h,b,m,u,z,w,A,d,C,D,B,G){for(var l=g.$type;"ref"===l;){a:{c=b;w=a;var l=z,k,x=A,t=d,y=C,F=D,E=B,L=G,Q,W=g.value;k=W.slice(0);if(r(g,L))p(g,t,y),g=void 0,Q=w,k.index=W.length;else{var R=g;g=g["\u001e\u0192_context"];if(null!=g)Q=g["\u001e\u0192_parent"]||w,k.index=W.length;else{var O=0,U=W.length-1;k.index=O;Q=g=w;do{Q=f(w,Q,g,W[O],c,O<U,!0,l,k,x,t,y,F,E,L);g=Q[0];k=Q[2];if(!g||"object"!==typeof g){k.index=O;w=Q;break a}Q=Q[1]}while(O++<
U);k.index=O;R["\u001e\u0192_context"]!==g&&q(R,g)}}e[0]=g;e[1]=Q;e[2]=k;w=e}g=w[0];if(!g||"object"!==typeof g)return w;c=w[1];w=w[2];l=g&&g.$type}if(void 0===l){if(null==h){if(m)throw new v;g&&(h=g["\u001e\u0192_key"])}else c=g,g=c[h];g=n(c,g,h,b,m,u,z,w,A,d,C,D,B,G)}e[0]=g;e[1]=c;e[2]=w;return e}var e=Array(3),h=Array.isArray,r=a(0),p=a(1),q=a(8),m=a(10),u=a(21),v=a(3),n=a(48);b.exports=function(a,f,g,h,b){var l=a._root,k=l.expired,x=l.version+1,w=a._path,t=l.cache,n=m(t,w);if(!n)return[[],[],!1];
var q=n["\u001e\u0192_parent"]||t;a=t["\u001e\u0192_version"];for(var p=[],r=[],v=[],u=w.length,d=-1,K=f.length;++d<K;){var N=f[d],P=w.slice(0);P.index=u;c(N.json,0,t,q,n,r,v,p,P,x,k,l,h,g,b)}e[0]=void 0;e[1]=void 0;e[2]=void 0;f=t["\u001e\u0192_version"];g=l.onChange;a!==f&&(l.version=x,g&&g());return[r,v,a!==f]}},function(b,d,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(32)},function(b,d){function a(c,f,e){e=e||[];f=f||[];if(!c)return f;for(var h=[],b=c.$keys,p=b.length,q=-1;++q<
p;){var m=c[q],u=b[q];m&&"object"===typeof m?a(m,f,e.concat([u])):h.push(u)}1===h.length?f.push(e.concat(h)):1<h.length&&f.push(e.concat([h]));return f}b.exports=a},function(b,d){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,d){function a(a,e){var c=e.from=a.from||0;a=e.to=a.to||"number"===typeof a.length&&e.from+a.length-1||0;e.rangeOffset=e.from;e.loaded=!0;c>a&&(e.empty=!0)}var c=Array.isArray;b.exports=function(f,e){if(void 0===e.isArray){e.done=
!1;var h=e.isObject=!(!f||"object"!==typeof f);e.isArray=h&&c(f);e.arrayOffset=0}if(e.isArray){var b;do{e.loaded&&e.rangeOffset>e.to&&(++e.arrayOffset,e.loaded=!1);if(e.arrayOffset>=f.length){e.done=!0;break}h=f[e.arrayOffset];"object"===typeof h?(e.loaded||a(h,e),e.empty||(b=e.rangeOffset++)):(++e.arrayOffset,b=h)}while(void 0===b);return b}if(e.isObject){e.loaded||a(f,e);if(e.rangeOffset>e.to){e.done=!0;return}return e.rangeOffset++}e.done=!0;return f}},function(b,d,a){b.exports=a(40)},function(b,
d,a){b.exports=a(43)},function(b,d){b.exports=function(a,c,f,e,h){var b=0,p;p=e.jsonGraph;p||(e.jsonGraph=p={});do{e=c[b++];if(b>=f){p=p[e]=!0!==h?a:p[e]||{};break}p=p[e]||(p[e]={})}while(1);return p}},function(b,d){var a=Array.isArray;b.exports=function(c,f,e,h,b,p,q,m,u,v,n,k,x,g,l){if(u||v){for(var t,r=-1,d=(p=b-f)&&Array(p)||void 0;++r<p;){t=c[r+f];var z;z=t;if("object"!==typeof z||null===z)z=!1;else if(a(z))z=0===z.length;else{var w=z.to,A=z.from||0;"number"!==typeof w&&(w=A+(z.length||0));z=
A>=w}if(z)return;d[r]=t}var E;c=null===t;t=u;var C;u?(z=b,w=h,C=e.requested||(e.requested=[])):(f=m,w=q,z=m+p-Number(c));do{if(p<b||!t){h=-1;r=f;for(E=Array(z);++h<r;)E[h]=w[h];for(r=-1;h<z;)E[h++]=d[++r]}if(t=!t){u&&(C[C.length]=E);break}C[C.length]=E||d;f=m;w=q;C=e.missing||(e.missing=[]);z=m+p-Number(c)}while(1);if(v)return g(n,E,f,z,k,x,l)}}},function(b,d,a){function c(a,g,h,b,m,p,u,w,r){var l={},x=g<a.length-1,t=a[g],d=k(t,l);do{e=f(h,b,m,d,x,!1,p,u,w,r);var z=e[0],A=e[1];z&&(x?c(a,g+1,h,A,z,
p,u,w,r):n(z,A,d,w)&&v(A,q(z),w,p));d=k(t,l)}while(!l.done)}function f(a,g,c,b,k,n,q,w,u,v){for(n=c.$type;"ref"===n;){a:{g=a;n=q;var l=w,x=u,t=v;if(h(c,t))r(c,l,x),e[0]=void 0,e[1]=g;else{p(x,c);var d=c,z=c.value,A;c=c["\u001e\u0192_context"];if(null!=c)A=c["\u001e\u0192_parent"]||g;else{var y=0,E=z.length-1;A=c=g;do{e=f(g,A,c,z[y],y<E,!0,n,l,x,t);c=e[0];if(!c&&"object"!==typeof c)break a;A=e[1]}while(y++<E);d["\u001e\u0192_context"]!==c&&m(d,c)}e[0]=c;e[1]=A}}c=e[0];if(!c&&"object"!==typeof c)return e;
g=e[1];n=c.$type}if(void 0!==n)return[c,g];if(null==b){if(k)throw Error("`null` is not allowed in branch key positions.");}else g=c,c=g[b];e[0]=c;e[1]=g;return e}var e=Array(2),h=a(0),r=a(1),p=a(13),q=a(9),m=a(8),u=a(17),v=a(11),n=a(18),k=a(24);b.exports=function(a,g,f){var h=a._root,b=h.expired,k=h.version++,l=h.cache,x=u(a);if(x){var m=x["\u001e\u0192_parent"]||l;a=l["\u001e\u0192_version"];for(var n=-1,q=g.length;++n<q;)c(g[n],0,l,m,x,k,b,h,f);e[0]=void 0;e[1]=void 0;g=l["\u001e\u0192_version"];
(h=h.onChange)&&a!==g&&h()}}},function(b,d,a){var c=a(56),f=a(86),e=a(87);b.exports=function(a,b,p,q){if(a&&"object"===typeof a){var h=a.$type;h&&("ref"===h&&e(a),c(q,a));f(a);b[p]=a["\u001e\u0192_parent"]=void 0;return!0}return!1}},function(b,d,a){function c(a,e,h,g,b,m,q,p,v,w,r,d,C,D,B,G){var l={},k=h<e.length-1,x=e[h],n=u(x,l),t=w.index;do{v.depth=h;v[h]=n;v.index=h;var A=f(g,b,m,n,a,k,!1,v,w,r,d,C,D,B,G);v[h]=n;v.index=h;var z=A[0],y=A[1],A=A[2];A[A.index++]=n;z&&(k?c(a,e,h+1,g,y,z,q,p,v,A,r,
d,C,D,B,G):(q.push(v.slice(0,v.index+1)),p.push(A.slice(0,A.index))));n=u(x,l);if(l.done)break;w.index=t}while(1)}function f(a,c,b,g,l,t,q,u,d,w,A,E,C,D,B){for(var k=b.$type;"ref"===k;){a:{c=l;d=a;var k=u,n,x=w,y=A,z=E,F=C,S=D,T=B,L,Q=b.value;n=Q.slice(0);if(h(b,T))r(b,y,z),b=void 0,L=d,n.index=Q.length;else{var W=b;b=b["\u001e\u0192_context"];if(null!=b)L=b["\u001e\u0192_parent"]||d,n.index=Q.length;else{var R=0,O=Q.length-1;L=b=d;do{var U=Q[R],M=R<O;n.index=R;L=f(d,L,b,U,c,M,!0,k,n,x,y,z,F,S,T);
b=L[0];n=L[2];if(!b||"object"!==typeof b){n.index=R;d=L;break a}L=L[1]}while(R++<O);n.index=R;W["\u001e\u0192_context"]!==b&&p(W,b)}}e[0]=b;e[1]=L;e[2]=n;d=e}b=d[0];if(!b||"object"!==typeof b)return d;c=d[1];d=d[2];k=b.$type}if(!t||void 0===k){if(null==g){if(t)throw new m;b&&(g=b["\u001e\u0192_key"])}else c=b,b=c[g];b=v(c,b,g,l,t,q,u,d,w,A,E,C,D,B)}e[0]=b;e[1]=c;e[2]=d;return e}var e=Array(3),h=a(0),r=a(1),p=a(8),q=a(10),m=a(3),u=a(24),v=a(48);b.exports=function(a,b,h,g,f){var l=a._root,k=l.expired,
n=l.version+1,m=a._path,w=l.cache,x=q(w,m);if(!x)return[[],[],!1];var p=x["\u001e\u0192_parent"]||w;a=w["\u001e\u0192_version"];for(var v=[],d=[],u=[],r=m.length,H=-1,J=b.length;++H<J;){var K=b[H],N=K.path,K=K.value,P=m.slice(0);P.index=r;c(K,N,0,w,p,x,d,u,v,P,n,k,l,g,h,f)}e[0]=void 0;e[1]=void 0;e[2]=void 0;b=w["\u001e\u0192_version"];h=l.onChange;a!==b&&(l.version=n,h&&h());return[d,u,a!==b]}},function(b,d,a){d=a(94);d=new RegExp("^"+d,"i","g");b.exports=d.test.bind(d)},function(b,d,a){var c=a(5);
b.exports=function(a){return c(a)&&a.$timestamp||void 0}},function(b,d){b.exports=0},function(b,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(d=window)}b.exports=d},function(b,d,a){var c=a(39),f=a(37),e=a(38);b.exports=function(a){return c(e(f(a)))}},function(b,d,a){var c=Array.isArray,f=a(22);b.exports=function(a,b){if(a)c(a)||c(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,c){var e=c.length;a[e]||(a[e]=[]);a[e].push(c);
return a},b||{})}},function(b,d,a){var c=a(67);b.exports=function(a,e){return Object.keys(a).reduce(function(e,b){e[b]=c(a[b],e[b]);return e},e||{})}},function(b,d,a){function c(a,b,f){var k,g=Object.create(null),l=""+m(""+b),n=[],q=-1,p=0,d=[],w=0,u,v,r,D,B,G;r=[];D=-1;if(b<f-1){for(B=e(a,r);++D<B;)k=r[D],u=c(a[k],b+1,f),v=u.code,g[v]?u=g[v]:(n[p++]=v,u=g[v]={keys:[],sets:u.sets}),l=""+m(l+k+v),h(k)&&u.keys.push(parseInt(k,10))||u.keys.push(k);for(;++q<p;)if(k=n[q],u=g[k],r=u.keys,B=r.length,0<B)for(a=
u.sets,b=-1,f=a.length,D=r[0];++b<f;){k=a[b];u=-1;v=k.length;G=Array(v+1);for(G[0]=1<B&&r||D;++u<v;)G[u+1]=k[u];d[w++]=G}}else for(B=e(a,r),1<B?d[w++]=[r]:d[w++]=r;++D<B;)l=""+m(l+r[D]);return{code:l,sets:d}}function f(a,e){return a-e}function e(a,e,c){var b=0;if(a===u)e[b++]=null;else{for(var g in a)e[b++]=g;1<b&&e.sort(c)}return b}function h(a){var e=a,c=typeof a;if("string"===c){e=a.length;if(0===e||17<e||!q.test(a))return!1;if(16>e)return!0;e=+a}else if("number"!==c)return!1;return 0===e%1&&9007199254740991>=
p(e)}var r=Array.isArray,p=Math.abs,q=/^(0|(\-?[1-9][0-9]*))$/,m=a(23),u=a(6);b.exports=function(a){var e,b=[],m=0,g;for(g in a){var l;if(l=h(g))l=e=a[g],l=null!==l&&"object"===typeof l;if(l){l=c(e,0,parseInt(g,10)).sets;for(var q=-1,p=l.length;++q<p;){for(var u=m++,d=l[q],w=-1,v=d.length;++w<v;){var E=d[w];if(r(E)){var C=d,D=w;for(var B=-1,G=E.length-1,H=0<G;++B<=G;){var J=E[B];if(!h(J)){H=!1;break}E[B]=parseInt(J,10)}!0===H&&(E.sort(f),B=E[0],H=E[G],H-B<=G&&(E={from:B,to:H}));C[D]=E}}b[u]=d}}}return b};
b.exports._isSafeNumber=h},function(b,d,a){var c=Array.isArray,f=a(75),e=a(74),h=a(17),r=a(92),p=a(66),q=a(64);b.exports=function(a,b,d,n,k){var m,g;n=a._path;var l=a._root,t=l.cache,u,v,z,w=n&&n.length||0;if(w){if((m=h(a))&&m.$type)return{error:new r(n,n)};z=[];for(var A=0;A<w;++A)z[A]=n[A];g=a._referenceContainer}else m=t,z=[];u=[];var A=!1,E=d&&d.json,C={data:d},D=a._boxed,B=l.expired;v=a._recycleJSON;var G=!!a._source,H=l.branchSelector,J=d&&a._materialized,K=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;
var N,P=0,S=b.length;if(0<S)if(v){A=!0;if(1<S||c(b[0]))b=[q(p(b,{}))];k=e(t,m,E,b[0],0,d,C,u,z,w,!1,g,l,B,k,H,D,J,G,K,a);E=k[0];k[0]=void 0;k[1]=void 0}else{do N=b[P],v=N.length,E=f(t,m,E,N,0,d,C,u,v,z,w,!1,g,l,B,k,H,D,J,G,K,a);while(++P<S)}k=C.requested;C.args=A&&b||k;if(k&&k.length&&(C.relative=C.args,w)){b=[];A=0;for(w=k.length;A<w;++A)b[A]=n.concat(k[A]);C.requested=b}C.hasValue&&(d.json=E);return C}},function(b,d,a){var c=Array(3),f=a(13),e=a(0),h=a(8),r=a(53);b.exports=function(a,b,m,d){f(m,
b);var q,n,k=0,p=a,g=b.value,l=g,t=g.length;do{if(0===k&&void 0!==(q=b["\u001e\u0192_context"]))p=q,k=t;else if(n=g[k++],void 0===(p=p[n]))break;if(k===t){n=p.$type;if(void 0!==n&&e(p,d))break;else{if(p===b)throw new r(g);p!==q&&h(b,p)}if("ref"===n)f(m,p),k=0,b=p,p=a,g=l=b.value,t=g.length;else break}else if(void 0!==p.$type)break}while(1);k<t&&void 0!==p&&(t=k);k=-1;for(g=Array(t);++k<t;)g[k]=l[k];c[0]=p;c[1]=g;c[2]=b;return c}},function(b,d,a){var c=a(7),f=a(73);b.exports=function(a,b,d,p,q,m,u,
v,n,k,x,g){if("error"===b&&!g)return f(a,d,q,m,n,k);q.hasValue=!0;return k?c(a):a.value}},function(b,d,a){var c=a(78),f=a(90);b.exports=function(a,b,d,p,q){var e,h;e=a._path;p=a._root;var r,n,k=e&&e.length||0;if(k)return{error:new f};n=[];h=e=p.cache;r=[];for(var x=a._boxed,g=p.expired,l=a._materialized,t=!!a._source,F=a._treatErrorsAsValues,y={data:d},z=-1,w=b.length;++z<w;){var A=b[z];a=A.length;c(h,e,A,0,d,y,r,a,n,k,!1,p,g,q,x,l,t,F)}y.args=y.relative=y.requested;return y}},function(b,d,a){function c(a,
b,d,v,n,k,x){if(d===v)return k?e(p):void 0;var g,l,m=d+1,q,u=-1,z=0;l=b[d];a&&"object"===typeof a?((g=a["\u001e\u0192_meta"])||(a["\u001e\u0192_meta"]=g={}),g.version=x.version,g.abs_path=b.slice(0,d)):(a={},a.__proto__=h.prototype,a["\u001e\u0192_meta"]=g={},g.version=x.version,g.abs_path=b.slice(0,d),n&&(a=n(a)));a:do{if("object"!==typeof l)d=l,g=void 0,l=!1;else if(f(l)){if(void 0!==q)throw new r(b,q);u=0;q=l;z=l.length;if(0===z)break a;l=q[u];continue a}else{g=l.to;d=l.from||0;"number"!==typeof g&&
(g=d+(l.length||0)-1);if(0>g-d)break a;l=!0}do a[d]=c(a[d],b,m,v,n,k,x);while(l&&++d<=g);if(++u===z)break a;l=q[u]}while(1);return a}var f=Array.isArray,e=a(7),h=a(2);a(3);var r=a(12),p=a(6);b.exports=c},function(b,d,a){var c=Array.isArray,f=a(104),e=a(59),h=a(60);b.exports=function(a){for(var b=[],d=-1,m=a.length,u,r,n,k;++d<m;)n=a[d],c(n)?(n={path:n},k="PathValues"):f(n)?k="PathValues":h(n)?k="JSONGraphs":e(n)&&(k="PathMaps"),r!==k&&(r=k,b.push(u={arguments:[],inputType:k})),u.arguments.push(n);
return b}},function(b,d,a){b.exports=function(a,b,e,h,d){a["\u001e\u0192_key"]=e;a["\u001e\u0192_parent"]=b;void 0!==h&&(a["\u001e\u0192_version"]=h);a["\u001e\u0192_abs_path"]||(a["\u001e\u0192_abs_path"]=d.slice(0,d.index).concat(e));return b[e]=a}},function(b,d,a){function c(a,e,g,b,h,d,m,q,w,r){if(a&&"object"===typeof a&&!a.$type)for(var l in a)if(!u(l)){var k=a[l],t=!(!k||"object"!==typeof k)&&!k.$type,x=f(g,b,h,l,k,t,!1,d,m,q,w,r),A=x[0],x=x[1];A&&(t?c(k,e+1,g,x,A,d,m,q,w,r):n(A,x,l,q)&&v(x,
p(A),q,d))}}function f(a,c,g,b,d,p,m,n,w,u,v,C){for(m=g.$type;"ref"===m;){a:{c=d;m=a;var l=n,k=w,t=u,x=v,A=C;if(e(g,A))h(g,k,t),c=[void 0,m];else{r(t,g);var z=g,E=g.value,y;g=g["\u001e\u0192_context"];if(null!=g)y=g["\u001e\u0192_parent"]||m;else{var F=0,T=E.length-1;y=g=m;do{y=f(m,y,g,E[F],c,F<T,!0,l,k,t,x,A);g=y[0];if(!g||"object"!==typeof g){c=y;break a}y=y[1]}while(F++<T);z["\u001e\u0192_context"]!==g&&q(z,g)}c=[g,y]}}g=c[0];if(!g&&"object"!==typeof g)return c;c=c[1];m=g&&g.$type}if(void 0!==
m)return[g,c];if(null==b){if(p)throw Error("`null` is not allowed in branch key positions.");}else c=g,g=c[b];return[g,c]}var e=a(0),h=a(1),r=a(13),p=a(9),q=a(8),m=a(17),u=a(21),v=a(11),n=a(18);b.exports=function(a,e,g){var b=a._root,h=b.expired,f=b.version++,k=b._comparator,d=b.cache,w=m(a);if(w){var p=w["\u001e\u0192_parent"]||d;a=d["\u001e\u0192_version"];for(var n=-1,q=e.length;++n<q;)c(e[n].json,0,d,p,w,f,h,b,k,g);e=d["\u001e\u0192_version"];(b=b.onChange)&&a!==e&&b()}}},function(b,d,a){var c=
a(34),f=a(103),e=a(9),h=a(33),r=a(52),p=a(0),q=a(1),m=a(46),u=a(50),v=a(49),n=a(11);a(18);b.exports=function(a,b,g,l,d,F,y,z,w,A,E,C,D,B){B=f(b,F);if(d||F){if(B&&p(b,!0)&&(q(b,A,E),B=b.$expires===c?B:"expired"),B&&"ref"!==B||!b||"object"!==typeof b)b=u(b,{},a,g,E,w),b=m(b,a,g,w,z)}else d=f(l),(B||d)&&(C?3>C.length?C(b,l):C(b,l,z.slice(0,z.index)):!1!==h(l)<h(b))||(D&&"error"===d&&(l=D(v(y,g),l)),y=e(b)-e(l=r(l,d,d?l.value:l)),b=u(b,l,a,g,E,w),a=n(a,y,E,w),b=m(b,a,g,w,z));return b}},function(b,d){b.exports=
function(a,c){a=a.slice(0,a.depth);a[a.length]=c;return a}},function(b,d,a){var c=a(85),f=a(18),e=a(51);b.exports=function(a,b,d,q,m,u){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,d,q,m),e(b,u));return d[q]=b}},function(b,d,a){b.exports=function(a,b){var e=[a],c=0;do{var f=e[c];if(f&&f["\u001e\u0192_version"]!==b){f["\u001e\u0192_version"]=b;e[c++]=f["\u001e\u0192_parent"];for(var d=-1,q=f["\u001e\u0192_refs_length"]||0;++d<q;)e[c++]=f["\u001e\u0192_ref"+d]}}while(-1<--c);return a}},function(b,
d,a){var c=Array.isArray,f=a(61),e=a(101),h=a(9),r=a(102),p=a(34);b.exports=function(a,b,d){var m=0;if(b){var n=a["\u001e\u0192_wrapped_value"];a=e(a);m=h(a);a.$type=b;a["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=n||!1}else a={$type:"atom",value:d,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==d)m=51;else if(null==m||0>=m)switch(typeof d){case "object":m=c(d)?50+d.length:51;break;case "string":m=50+d.length;
break;default:m=51}b=r(a);"number"===typeof b&&b<p&&(a.$expires=f()+-1*b);a.$size=m;return a}},function(b,d,a){d=a(4);b.exports=d("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,d,a){d=a(4);b.exports=d("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,d,a){var c=a(30),f=a(11);b.exports=function(a,b,d,p,q,m){var e=q;"number"!==typeof e&&(e=.75);q="number"===typeof m;
var e=p*e,h,n,k;for(n=b.pop();n;)k=n.$size||0,d-=k,!0===q?f(n,k,a,m):(h=n["\u001e\u0192_parent"])&&c(n,h,n["\u001e\u0192_key"],a),n=b.pop();if(d>=p){for(n=b=a["\u001e\u0192_tail"];d>=e&&n;)b=b["\u001e\u0192_prev"],k=n.$size||0,d-=k,!0===q&&f(n,k,a,m),n=b;a["\u001e\u0192_tail"]=a["\u001e\u0192_prev"]=n;null==n?a["\u001e\u0192_head"]=a["\u001e\u0192_next"]=void 0:n["\u001e\u0192_next"]=void 0}}},function(b,d,a){b.exports=function(a,b){var e=b["\u001e\u0192_prev"],c=b["\u001e\u0192_next"];c&&(c["\u001e\u0192_prev"]=
e);e&&(e["\u001e\u0192_next"]=c);b["\u001e\u0192_prev"]=b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=c);b===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=e)}},function(b,d,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var e=a(14),h=a(15),d=a(105).default;b.exports=f;f.prototype[d]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=
function(a,b,c){return new h([this.operator.call(this.source,a instanceof e?a:new e(a,b,c))])};f.prototype.then=function(a,b){var e=this;this._promise||(this._promise=new c.Promise(function(a,b){var c=[],f=!1;e.subscribe({next:function(a){c[c.length]=a},error:function(a){f=!0;b(a)},complete:function(){!f&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,b)}}).call(d,a(35))},function(b,d){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();
return c};b.exports=a},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&"json"in a}},function(b,d,a){var c=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,d){b.exports=Date.now},function(b,d){b.exports=1},function(b,d,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(68);d=a(2);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=d;c.toProps=d.prototype.toProps;
b.exports=c},function(b,d,a){function c(a){if(void 0!==a){for(var b="",e=a.$keys,d=-1,q=e.length;++d<q;){var m=e[d];if(null===m)b=""+f(""+b+"null");else{"object"===typeof m&&(m="["+m.from+".."+(m.from+m.length-1)+"]");var u=c(a[d]),b=void 0===u?""+f(""+b+m):""+f(""+b+m+u.$code)}}a.$code=b;return a}}var f=a(23);b.exports=c},function(b,d,a){function c(a,b,d,q){if(d===q)return!0;var h,p=-1,v=0,n=d+1,k,r,g;h=b[d];if(null===h)return a===e;a:do{if("object"!==typeof h)d=h,r=void 0,k=!1;else if(f(h)){if(void 0!==
g)break a;p=0;g=h;v=h.length;if(0===v)break a;h=g[p];continue a}else{r=h.to;d=h.from||0;"number"!==typeof r&&(r=d+(h.length||0)-1);if(0>r-d)break a;k=!0}do if(n===q){if(null!==a[d])return!1}else if(h=a[d],null===h||void 0===h||!1===c(h,b,n,q))return!1;while(k&&++d<=r);if(++p===v)break a;h=g[p]}while(1);return!0}var f=Array.isArray,e=a(6);b.exports=c},function(b,d,a){function c(a,b){return a.reduce(function(a,b){return e(b)?f(a,b,0,b.length):e(b.$keys)?c(r(b),a):a},b||{})}function f(a,b,c,d){if(c!==
d){a=a||{};var q=a.$keys||(a.$keys=[]),n=a.$keysMap||(a.$keysMap={}),k,p=-1,g=0,l,t=c+1,m;k=b[c];if(null===k)return h;a:do{if("object"!==typeof k)l=k,"undefined"===typeof(c=n[l])&&(c=q.length),q[c]=l,n[l]=c,k=f(a[c],b,t,d),void 0!==k&&(a[c]=k);else if(e(k)){if(void 0!==m)break a;p=0;m=k;g=k.length;if(0===g)break a;k=m[p];continue a}else{c=k.to;l=k.from||0;"number"!==typeof c&&(c=l+(k.length||0)-1);if(0>c-l)break a;k={from:l,length:c-l+1};l="["+l+".."+c+"]";"undefined"===typeof(c=n[l])&&(c=q.length);
q[c]=k;n[l]=c;k=f(a[c],b,t,d);void 0!==k&&(a[c]=k)}if(++p===g)break a;k=m[p]}while(1);return a}}var e=Array.isArray,h={$keys:[null],$keysMap:{"null":0}},r=a(22);b.exports=c},function(b,d,a){function c(a,b,d,q,m){if(d===q)return!0;a=a||{};var h,p=-1,n=0,k,r=d+1,g,l,t;h=b[d];if(null===h)return e;a:do{if("object"!==typeof h)d=h,l=void 0,g=!1;else if(f(h)){if(void 0!==t)break a;p=0;t=h;n=h.length;if(0===n)break a;h=t[p];continue a}else{l=h.to;d=h.from||0;"number"!==typeof l&&(l=d+(h.length||0)-1);if(0>
l-d)break a;g=!0}do r===q?a[d]=m:(h=a[d],(k=c(h,b,r,q,m))?h||(a[d]=k):a[d]=m);while(g&&++d<=l);if(++p===n)break a;h=t[p]}while(1);return a}var f=Array.isArray,e=a(6);b.exports=function(a,b){return a.reduce(function(a,b){return c(a,b,0,b.length,null)},b||{})}},function(b,d,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new e(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||
new q;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={},this._seed.__proto__=h.prototype);this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(95),e=a(70),
h=a(2),r=a(69),p=a(99),q=a(58),m=a(36),u=a(55),v=a(9),n=a(5),k=a(59),x=a(10),g=a(60),l=a(20),t=a(19),F=a(25),y=a(80),z=a(26);b.exports=c;c.prototype.constructor=c;c.prototype.get=function(){var a=this._seed;a||(a={},a.__proto__=h.prototype);for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];return(new f("get",this,c))._toJSON(a,[])};c.prototype.set=function(){var a={};a.__proto__=h.prototype;for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];return(new f("set",this,
c))._toJSON(a,[])};c.prototype.preload=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("get",this,b))._toJSON(null,[])};c.prototype.call=function(){var a={};a.__proto__=h.prototype;for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];return(new f("call",this,c))._toJSON(a,[])};c.prototype.invalidate=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return(new f("invalidate",this,b))._toJSON(null,null).then()};
c.prototype.deref=a(89);c.prototype._hasValidParentReference=a(88);c.prototype.getValue=function(a){return(new f("get",this,[a]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var e=-1;c=c.json;for(var g=a.length;c&&!c.$type&&++e<g;)c=c[a[e]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({},[]).lift(function(b){return this.subscribe({onNext:function(c){var e=
-1;c=c.json;for(var g=a.length;c&&!c.$type&&++e<g;)c=c[a[e]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=function(a){var b=this._root,c=b.cache;if(a!==c){var e={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof c&&(u(b,b.expired,v(c),0),this._recycleJSON&&(this._seed={},this._seed.__proto__=h.prototype));var d;g(a)?d=t(e,[a])[0]:k(a)?d=l(e,[a])[0]:n(a)&&(d=l(e,[{json:a}])[0]);d&&F(e,
d,null,!1,!1)}else"undefined"===typeof c&&(this._root.cache={});return this};c.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return y(this._root.cache);var b={};b.__proto__=h.prototype;b=z({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},a,b).data;b.paths=m(a);return b};c.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");
this._path.length&&(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=new c(this);if(a)for(var e in a){var g=a[e];"delete"===g?delete b[e]:"_path"===e?(b[e]=g,!1===a.hasOwnProperty("_node")&&delete b._node):b[e]=g}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new p(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new p(1);return this._clone({_scheduler:b})};
c.prototype.unbatch=function(){return this._clone({_scheduler:new q})};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new r(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};
c.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};c.prototype.inspect=function(){return"{ v: "+this.getVersion()+" p: ["+this._path.join(", ")+"] }"};c.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=x(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||
[]).slice(0)};c.prototype._getVersion=a(81);c.prototype._getPathValuesAsPathMap=F;c.prototype._getPathValuesAsJSONG=z;c.prototype._setPathValues=a(31);c.prototype._setPathMaps=a(20);c.prototype._setJSONGs=a(19);c.prototype._setCache=a(20);c.prototype._invalidatePathValues=a(29);c.prototype._invalidatePathMaps=a(47)},function(b,d){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};
a.prototype.call=function(a,b,e,d){return this._model.call.apply(this._model,[a,b,e].concat(d))._toJSONG()};b.exports=a},function(b,d,a){function c(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&
(this.comparator=a.comparator);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(96),e=a(33);c.comparator=c.prototype.comparator=function(a,b){var c=a&&a.$type,d=b&&b.$type;
return c?d?!0===e(b)<e(a)?!0:!(c!==d||a.value!==b.value||a.$expires!==b.$expires):a.value===b:d?!1:a===b};b.exports=c},function(b,d,a){var c=a(25),f=a(26);b.exports={json:function(a,b,d,f){var e=!1;if(!b)return{missing:!1,hasValue:!1};var h=[].concat(b[1]||[]),p=[].concat(b[2]||[]),r=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);f&&r&&r.length&&(e=c(a,r,d,f,!0).hasValue);return{data:d,missing:!0,hasValue:e,fragments:[b,h,p,r]}},jsonGraph:function(a,b,c,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};
var h=[].concat(b[1]||[]),p=[].concat(b[2]||[]),r=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&r&&r.length&&(e=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},r,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:e,fragments:[b,h,p,r]}}}},function(b,d,a){b.exports={json:a(40),jsonGraph:a(43)}},function(b,d,a){var c=a(7);b.exports=function(a,b,d,r,p,q){var e=-1;b+=!!p;p=Array(b);for(a=q?c(a):a.value;++e<b;)p[e]=r[e];(d.errors||
(d.errors=[])).push({path:p,value:a})}},function(b,d,a){function c(a,b,d,m,x,z,w,A,E,C,D,B,G,H,J,K,N,P,S,T,L){var g,l;if(void 0===b||void 0!==(g=b.$type)||void 0===m)return e[1]=S&&void 0===b,e[0]=q(b,g,d,m,x,z,w,A,x,E,C,D,G,H,J,K,N,P,S,T,h,f,v),e;var t,y,F;g="";var M,I,V,Y=m.$keys,ba=x+1,Z,X,aa,fa,ca,ga=C+1,ha,ia;L&&B&&(ia=B.value,ha=B["\u001e\u0192_abs_path"]);if(!d||"object"!==typeof d)d=void 0;else if(t=d["\u001e\u0192_meta"]){F=b["\u001e\u0192_abs_path"];y=t.abs_path;K||d instanceof r||(d.__proto__=
{},d.__proto__["\u001e\u0192_meta"]=t,d.__proto__.__proto__=r.prototype);if(F!==y){t.$code="__incomplete__";t.abs_path=F;t.version=b["\u001e\u0192_version"];t.deref_to=ia;t.deref_from=ha;if(y=t.keys)for(I in t.keys=Object.create(null),y)y[I]&&delete d[I];e[0]=d;e[1]=!0;return e}if(t.version===b["\u001e\u0192_version"]&&t.$code===m.$code)return w.hasValue=!0,e[0]=d,e[1]=!1,e;y=t.keys;t.abs_path=F;t.version=b["\u001e\u0192_version"];t.deref_to=ia;t.deref_from=ha}F=Object.create(null);var ja=-1,la=Y.length,
ea,ka,da=!1;a:for(;++ja<la;)if(D=Y[ja],ea=m[ja],null===D){if(void 0!==ea)throw new n;g=""+k(""+g+"null")}else{if("object"!==typeof D)I=D,Z=void 0,V=!1,ka=I;else{Z=D.to;I=D.from||0;"number"!==typeof Z&&(Z=I+(D.length||0)-1);if(0>Z-I)break a;V=!0;ka="["+I+".."+Z+"]"}do{D=!1;X=d&&d[I];ca=E;fa=ga;aa=B;M=b[I];A[x]=I;E[C]=I;if(void 0===ea){if(e=c(a,M,X,ea,ba,z,w,A,ca,fa,D,aa,G,H,J,K,N,P,S,T,L),X=e[0],da=da||e[1],void 0===X&&!P){da=!0;d&&d.hasOwnProperty(I)&&delete d[I];continue}}else if(M&&"ref"===M.$type&&
!p(M,J)&&(l=u(a,M,G,J),M=l[0],D=!0,ca=l[1],aa=l[2],fa=ca.length,l[0]=l[1]=l[2]=void 0),e=c(a,M,X,ea,ba,z,w,A,ca,fa,D,aa,G,H,J,K,N,P,S,T,L),X=e[0],da=da||e[1],void 0===X){da=!0;d&&d.hasOwnProperty(I)&&delete d[I];continue}void 0===t&&(t={},t.version=b["\u001e\u0192_version"],t.abs_path=b["\u001e\u0192_abs_path"],t.deref_to=ia,t.deref_from=ha,d={},d["\u001e\u0192_meta"]=t,d.__proto__=r.prototype,K?d=K(d):(D=d,d={},d.__proto__=D));F[I]=!0;y&&I in y&&(y[I]=!1);d[I]=X}while(V&&++I<=Z);g=""+k(""+g+ka+(ea&&
ea.$code||""))}da&&(g=""+k(""+g+"__incomplete__"));if(t&&(t.$code=g,t.keys=F,y))for(I in y)y[I]&&delete d[I];e[0]=d;e[1]=da;return e}function f(a,b,c,e,d,h,k,n,q,p,r,v,u,H,J){if(p)return H(r,a,b,b,v,u,J,c,e,k,n,h,q,f);a=a?x(a):[[]];var g=e.slice(0,d);return a.forEach(function(a){d=b+a.length;return m(g.concat(a),b,c,e,d,h,k,n,q,!1,r,v,u,H,J)})}var e=Array(2),h=a(42),r=a(2),p=a(0),q=a(16),m=a(28),u=a(41),v=a(79),n=a(3);a(12);var k=a(23),x=a(22);b.exports=c},function(b,d,a){function c(a,b,g,d,t,F,y,
z,w,A,E,C,D,B,G,H,J,K,N,P,S,T){var l,k;if(void 0===b||(l=b.$type)||t===w)return p(b,l,g,d,t,F,y,z,w,A,E,C,B,G,H,J,K,N,P,S,e,h,m);var x,R,O,U=t+1,M,I,V,Y,ba=-1,Z=0,X,aa,fa=E+1,ca,ga;C=d[t];if(null===C){if(U<w)throw new v;return g}T&&D&&(ga=D.value,ca=D["\u001e\u0192_abs_path"]);if(!g||"object"!==typeof g)g=void 0;else if(x=g["\u001e\u0192_meta"])x.version=b["\u001e\u0192_version"],x.abs_path=b["\u001e\u0192_abs_path"],x.deref_to=ga,x.deref_from=ca;a:do{if("object"!==typeof C)l=C,M=void 0,O=!1;else if(f(C)){if(void 0!==
I)throw new n(d,I);ba=0;I=C;Z=C.length;if(0===Z)break a;C=I[ba];continue a}else{M=C.to;l=C.from||0;"number"!==typeof M&&(M=l+(C.length||0)-1);if(0>M-l)break a;O=!0}do{C=!1;V=g&&g[l];aa=A;X=fa;Y=D;R=b[l];z[t]=l;A[E]=l;if(U===w){if(V=c(a,R,V,d,U,F,y,z,w,aa,X,C,Y,B,G,H,J,K,N,P,S,T),void 0===V&&!N)continue}else if(R&&"ref"===R.$type&&!q(R,H)&&(k=u(a,R,B,H),R=k[0],C=!0,aa=k[1],Y=k[2],X=aa.length,k[0]=k[1]=k[2]=void 0),void 0===(V=c(a,R,V,d,U,F,y,z,w,aa,X,C,Y,B,G,H,J,K,N,P,S,T)))continue;void 0===x&&(x=
{},x.version=b["\u001e\u0192_version"],x.abs_path=b["\u001e\u0192_abs_path"],x.deref_to=ga,x.deref_from=ca,g={},g["\u001e\u0192_meta"]=x,g.__proto__=r.prototype,J&&(g=J(g)));g[l]=V}while(O&&++l<=M);if(++ba===Z)break a;C=I[ba]}while(1);return g}var f=Array.isArray,e=a(42),h=a(28),r=a(2),p=a(16),q=a(0),m=a(44),u=a(41),v=a(3),n=a(12);a(6);b.exports=c},function(b,d,a){var c=Array(2),f=a(7),e=a(27),h=a(13),r=a(0),p=a(8),q=a(53);b.exports=function(a,b,d,n,k){h(d,b);var m,g,l=0,t=a,v=b.value,u=v,z=v.length;
do{if(0===l&&void 0!==(m=b["\u001e\u0192_context"]))t=m,l=z;else if(g=v[l++],void 0===(t=t[g]))break;if(l===z){g=t.$type;if(void 0!==g&&r(t,k))break;else{if(t===b)throw new q(v);t!==m&&p(b,t)}if("ref"===g)h(d,t),n&&e(f(t),v,z,n),l=0,b=t,t=a,v=u=b.value,z=v.length;else break}else if(void 0!==t.$type)break}while(1);l<z&&void 0!==t&&(z=l);l=-1;for(v=Array(z);++l<z;)v[l]=u[l];c[0]=t;c[1]=v;return c}},function(b,d,a){var c=a(7),f=a(27);b.exports=function(a,b,d,p,q,m,u,v,n,k,x){x=a.value;if(k||"ref"===
b||"error"===b||!a["\u001e\u0192_wrapped_value"]||"object"===typeof x)x=c(a);q.hasValue=!0;f(x,u,v,p);(p.paths||(p.paths=[])).push(m.slice(0,d+!!n));return x}},function(b,d,a){function c(a,b,g,d,v,w,A,E,C,D,B,G,H,J,K,N,P,S){var l,t;if(void 0===b||(l=b.$type)||d===E)return m(b,l,v,g,d,v,w,A,E,C,D,B,G,H,J,void 0,K,N,P,S,r,f,u);var y,z,F=d+1,O,U,M=-1,I=0,V,Y,ba=D+1;B=g[d];if(null===B){if(F<E)throw new k;}else{a:do{if("object"!==typeof B)l=B,O=void 0,z=!1;else if(e(B)){if(void 0!==U)throw new x(g,U);
M=0;U=B;I=B.length;if(0===I)break a;B=U[M];continue a}else{O=B.to;l=B.from||0;"number"!==typeof O&&(O=l+(B.length||0)-1);if(0>O-l)break a;z=!0}do B=!1,Y=C,V=ba,y=b[l],A[d]=l,C[D]=l,y&&F<E&&"ref"===y.$type&&!q(y,J)&&(v&&p(h(y),C,V,v),t=n(a,y,G,v,J),y=t[0],B=!0,Y=t[1],V=Y.length,t[0]=t[1]=void 0),c(a,y,g,F,v,w,A,E,Y,V,B,G,H,J,K,N,P,S);while(z&&++l<=O);if(++M===I)break a;B=U[M]}while(1)}}function f(a,b,c,e,d,f,k,n,m,q,r,u,x,J,K){var l,t;r&&q&&((r.paths||(r.paths=[])).push((t=0===d-b)&&e.slice(0,b+!!f)||
e.slice(0,b).concat(a.slice(b,d+!!f))),l=p(t&&h(g)||void 0,k,n,r,!t));return v(a,b,c,e,d,f,k,n,m,!t&&q,l,u,!0,J,K)}var e=Array.isArray,h=a(7),r=a(77),p=a(27),q=a(0),m=a(16),u=a(44),v=a(28),n=a(76),k=a(3),x=a(12),g=a(6);b.exports=c},function(b,d,a){function c(a,b,d,v,n,k,x,g,l,t,F,y,z,w){if(void 0===b)return e(void 0,void 0,a,b,d,void 0,g,l,d,t,F,y,x,void 0,!1,n,k,!1,z,!1,void 0,w,void 0),k?f(p):void 0;var m,q,u,D,B=b.$keys,G=d+1,H,J=F+1;a&&"object"===typeof a?((v=a["\u001e\u0192_meta"])?m=v.keys:
(a["\u001e\u0192_meta"]=v={},v.version=x.version),v.abs_path=t.slice(0,F)):(a={},a.__proto__=h.prototype,a["\u001e\u0192_meta"]=v={},v.version=x.version,v.abs_path=t.slice(0,F),n&&(a=n(a)));q={};var K,N=-1,P=B.length;a:for(;++N<P;)if(D=B[N],K=b[N],null===D){if(void 0!==K)throw new r;}else{if("object"!==typeof D)u=D,H=void 0,D=!1;else{H=D.to;u=D.from||0;"number"!==typeof H&&(H=u+(D.length||0)-1);if(0>H-u)break a;D=!0}do l[d]=u,t[F]=u,q[u]=!0,m&&u in m&&(m[u]=!1),a[u]=c(a[u],K,G,G,n,k,x,g,l,t,J,y,z,
w);while(D&&++u<=H)}v.$code="__incomplete__";v.keys=q;if(m)for(u in m)m[u]&&delete a[u];return a}var f=a(7),e=a(16),h=a(2),r=a(3);a(12);var p=a(6);b.exports=c},function(b,d,a){function c(a,b,d){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===b||!f(b))&&void 0!==a[b]}).forEach(function(e){var d=a[e],h=b[e];h||(h=b[e]={});if(d.$type){h=!d["\u001e\u0192_wrapped_value"];if(d.value&&"object"===typeof d.value||h){var h={},p=Object.keys(d),r,n,k;n=0;for(k=p.length;n<k;n++)r=p[n],
"$type"!==r&&f(r)||(h[r]=d[r]);d=h}else d=d.value;b[e]=d}else c(d,h,e)})}var f=a(21);b.exports=function(a){var b={};c(a,b);return b}},function(b,d,a){var c=a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,d,a){function c(a,c,d,q,m){c=e(c);d=-1;for(q=c.length;++d<q;){var h=c[d],r=h.inputType,h=h.arguments;0<h.length&&("PathValues"===r&&(h=h.map(f)),b.exports["invalidate"+r](a,h,m))}return{}}function f(a){return a.path||a.paths}var e=a(45);b.exports=
{json:c,jsonGraph:c,invalidatePathMaps:a(47),invalidatePathValues:a(29)}},function(b,d,a){var c=a(52),f=a(0),e=a(46),h=a(1),r=a(50),p=a(9),q=a(49),m=a(33),u=a(11);b.exports=function(a,b,d,x,g,l,t,F,y,z,w,A){var k,n,v,B,G,H;if(b===d){if(void 0===d)return d;if(null===d)return b=c(d,void 0,d),a=u(a,-b.$size,y,t),b=e(b,a,x,void 0,l);if((v=!(!b||"object"!==typeof b))&&void 0===(k=b.$type))return void 0===b["\u001e\u0192_parent"]&&e(b,a,x,t,l),b}else if(v=!(!b||"object"!==typeof b))k=b.$type;if("ref"!==
k){if(B=!(!d||"object"!==typeof d))n=d.$type;if(v&&!k&&(null==d||B&&!n))return b}else{if(null==d){if(f(b,A)){h(b,F,y);return}return b}if(B=!(!d||"object"!==typeof d))if(n=d.$type,"ref"===n)if(b===d){if(null!=b["\u001e\u0192_parent"])return b}else if(G=b.$timestamp,H=d.$timestamp,!f(b,A)&&!f(d,A)&&H<G)return}if(k&&B&&!n)return e(r(b,d,a,x,y,t),a,x,void 0,l);n||!B?("error"===n&&w&&(d=w(q(g,x),d)),n&&b===d?b["\u001e\u0192_parent"]||(b=c(b,k,b.value),a=u(a,-b.$size,y,t),b=e(b,a,x,t,l)):(g=!0,k||n?v&&
f(b,A)||(g=z?!(3>z.length?z(b,d):z(b,d,l.slice(0,l.index))):!1===m(d)<m(b)):g=!0,g&&(z=p(b)-p(d=c(d,n,n?d.value:d)),b=r(b,d,a,x,y,t),a=u(a,z,y,t),b=e(b,a,x,t,l))),f(b,!0)&&h(b,F,y)):null==b&&(b=e(d,a,x,void 0,l));return b}},function(b,d,a){function c(a,c,e){var d=!1,h=-1,k=c.length,m=[],g=[],l=a._root,t=l.errorSelector;e=e&&!a._source;for(l=a._source?null:l.comparator;++h<k;){var p=c[h],q=p.inputType,p=p.arguments;if(0<p.length){var u=(0,b.exports["set"+q])(a,p,t,l,e),d=d||u[2];g.push.apply(g,u[1]);
"PathValues"===q?m.push.apply(m,p.map(f)):"JSONGraphs"===q?m.push.apply(m,r(p,f)):m.push.apply(m,u[0])}}return{changed:d,requested:m,optimized:g}}function f(a){return a.path||a.paths}var e=a(25),h=a(26),r=a(100),p=a(45);b.exports={json:function(a,b,d,f,n){var k,m,g,l,t,r,q=p(b);k=c(a,q,n);if((b=k.requested).length){if(!(g=k.changed)||f)m=e(a,b,d,f,n);g&&(a=h({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},k.optimized,{},f,n),t=a.data,l=t.paths,r=a.requested)}return{args:q,
data:d,missing:l,relative:b,fragments:t,requested:r,error:m&&m.error,errors:m&&m.errors,hasValue:m&&m.hasValue}},jsonGraph:function(a,b,e,d,f){var k,m,g,l,t,n=p(b);b=c(a,n,f);(m=b.requested).length&&(d||b.changed)&&(k=h({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},b.optimized,e,d,f),l=k.data,g=l.paths,t=k.requested);return{args:n,data:e,missing:g,relative:m,fragments:l,requested:t,error:k&&k.error,hasValue:k&&k.hasValue}},setPathMaps:a(20),setPathValues:a(31),
setJSONGraphs:a(19)}},function(b,d,a){b.exports=function(a,b){for(var c=a["\u001e\u0192_refs_length"]||0,d=b["\u001e\u0192_refs_length"]||0,f=-1;++f<c;){var p=a["\u001e\u0192_ref"+f];void 0!==p&&(p["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(d+f)]=p,a["\u001e\u0192_ref"+f]=void 0)}b["\u001e\u0192_refs_length"]=c+d;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,d,a){b.exports=function(a){for(var b=-1,c=a["\u001e\u0192_refs_length"]||0;++b<c;){var d=a["\u001e\u0192_ref"+b];null!=d&&
(d["\u001e\u0192_context"]=d["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,d,a){b.exports=function(a){var b=a["\u001e\u0192_context"];if(b){for(var c=(a["\u001e\u0192_ref_index"]||0)-1,d=(b["\u001e\u0192_refs_length"]||0)-1;++c<=d;)b["\u001e\u0192_ref"+c]=b["\u001e\u0192_ref"+(c+1)];b["\u001e\u0192_refs_length"]=d;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=void 0}return a}},function(b,d,a){b.exports=function(){var a=
this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?!1:!0:!0}},function(b,d,a){var c=a(2),f=a(10);a(91);b.exports=function(a){var b,d;if(!a||"object"!==typeof a||!(d=a["\u001e\u0192_meta"])||"object"!==typeof d)return null;var e=this._root.cache,q=this._recycleJSON,m=d.abs_path,u,v;if(!m)return q&&(b={json:a},b.__proto__=c.prototype),this._clone({_node:void 0,_seed:b});if(0===m.length)return q&&(b={json:a},
b.__proto__=c.prototype),this._clone({_node:e,_path:m,_referenceContainer:!0,_seed:b});var n=d.deref_to,k=d.deref_from,x=f(e,m),g="e";if(k){g=!1;d=-1;v=k.length;for(u=e;++d<v&&(u=u[k[d]],u&&!u.$type););if(n&&u&&"ref"===u.$type)for(g=!0,v=n.length,e=u.value,d=0;d<v;++d)if(e[d]!==n[d]){x=void 0;g=!1;break}}g?"e"===g&&(u=!0):u=!1;q&&(b={json:a},b.__proto__=c.prototype);return this._clone({_seed:b,_node:x,_path:m,_referenceContainer:u})}},function(b,d,a){d=a(4);b.exports=d("BoundJSONGraphModelError",
function(){this.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,d,a){d=a(4);b.exports=d("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,d,a){d=a(4);b.exports=d("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=
a;this.shortedPath=b})},function(b,d,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}d=a(4);b.exports=d("MaxRetryExceededError",function(a,b,d,r){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(d&&"relative: [\n\t"+c(d)+"\n]\n"||"")+(r&&"optimized: [\n\t"+c(r)+"\n]\n"||"")})},function(b,d){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,d,a){function c(a,b,c){q.call(this,a);b&&c&&(this.type=
a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function e(a,b,c,d,e,f){m.call(this,a);this.data=b;this.retryCount=-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function h(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=n(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(y){throw y;}finally{--c.syncRefCount}}function r(a,b){try{throw b;}catch(t){m.prototype.onError.call(a,
t)}}function p(a,b){for(var c,d,e,g=Object.keys(b),f=-1,l=g.length;++f<l;)e=g[f],"\u001e\u0192_meta"===e?a["\u001e\u0192_meta"]=b["\u001e\u0192_meta"]:(d=b[e],c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:p(c,d):void 0===c&&(a[e]=d)));return a}var q=a(57),m=a(14),u=a(55),v=a(2),n=a(36),k=a(54),x=a(93);b.exports=c;c.prototype=Object.create(q.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;
a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;a.progressive=a.progressive||this.operator.progressive;a.maxRetryCount=a.maxRetryCount||this.operator.maxRetryCount;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){void 0===a&&(a={},a.__proto__=v.prototype);
return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype._toJSONG=function(a,b){void 0===a&&(a={},a.__proto__=v.prototype);return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=
function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),this.source)};f.prototype.call=function(a,b){return a.subscribe(new e(b,this.data,this.errors,this.operation,this.progressive))};e.prototype=Object.create(m.prototype);e.prototype.operations={get:a(72),set:a(84),call:a(71),invalidate:a(82)};e.prototype.next=e.prototype.onNext=function(a){if(!this.started)this.args=a.args,this.type=a.type,this.model=a.model,this.version=
a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount;else if(this.destination){var b,c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,g=this.errors,f,k=this.hasValue,m=this.operation,n=this.progressive,q=n&&d;e._recycleJSON&&"get"===this.type&&(q=!1);q&&(d={},d.__proto__=v.prototype);if(a&&a.length){f=this.operations[c][m](e,a,d,n||!e._source,-1===this.retryCount);if(f.error)return r(this,f.error);g&&f.errors&&g.push.apply(g,f.errors);if(b=f.fragments)a=f.args,this.fragments=
b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=k||(k=f.hasValue)}this.completed=!b||!e._source;"set"!==c&&(this.args=a,q&&(this.data=p(d,this.data)));n&&k&&d&&(d.json||d.jsonGraph)&&h(d,m,e._root,this.destination)}};e.prototype.error=e.prototype.onError=function(a){if(a instanceof k)return m.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};e.prototype.complete=e.prototype.onCompleted=function(a){if(this.destination){var b,c;if(!this.started&&
(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&h(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?r(this,b.length&&b||a):m.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return r(this,new x(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,
this.missing,this.relative,this.fragments).subscribe(this)}};e.prototype.dispose=e.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;m.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&u(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},
function(b,d,a){function c(a){p.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var e=a(57),h=a(97),r=a(14),p=a(15),q=a(58);b.exports=c;c.prototype=Object.create(p.prototype);c.prototype.set=function(a,b,c,d){var f=this;return new e(function(e){var g=new h("set",f,a._source,new q);e=g.subscribe(new r(e,g));f.add(g);g.data=d.jsonGraph;g.requested.push(c);g.optimized.push(b);g.connect();return e})};c.prototype.call=
function(a,b,c,d){var f=this;return new e(function(b){var c=new h("call",f,a._source,new q);b=c.subscribe(new r(b,c));f.add(c);c.data=d;c.boundPath=a._path;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,g=-1,l=b.subscriptions,m=l.length,q=new p([],a);++g<m;){var y=l[g];if("get"===y.type&&((y=y.batch(d,e,d=[],e=[]))&&q.add(y.subscribe(new r(a,
y))),!e.length))break}e.length&&(y=l[g]=(new h("get",b,c,f)).batch(d,e),q.add(y.subscribe(new r(a,y))),y.connect());return q}},function(b,d,a){function c(a,b,c,d){r.call(this,[],b);this.tree={};this.paths=[];this.type=a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=v(this.tree=k(this.optimized.reduce(function(a,b){return n(b,a)},{})));try{switch(this.type){case "get":a=
this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(t){this.disposable={},r.prototype.onError.call(this,new p(t))}}function e(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,g,h=-1,k=b.length;a:for(;++h<k;)if(g=b[h],g.length>c){f=0;do if(g[f]!==a[f])continue a;while(++f<c);d[++e]=g.slice(c)}return d}var h=Array.isArray,r=a(98);a(14);
a(15);var p=a(54),q=a(19),m=a(31),u=a(29),v=a(39),n=a(37),k=a(38),x=a(65);b.exports=c;c.prototype=Object.create(r.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){var c=a,d=0,f=0;if(h(a)){if(0>=(f=a.length))return;c=a[0]}!1===this.responded&&(this.responded=!0,b.remove(this));var g,k=this.boundPath;do{g=c.paths||this.paths;var m=c.jsonGraph,n=b.modelRoot,p=c.invalidated;p&&p.length&&u({_root:n,_path:[]},p,!1);g&&g.length&&m&&"object"===typeof m&&(g=q({_root:n},[{paths:g,
jsonGraph:m}],n.errorSelector,n.comparator,!1)[0])}while(++d<f&&(c=a[d]));var r=this.requested.slice(0);this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",paths:r[b]||e(k,g)})})}};c.prototype.error=c.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=v(k(this.requested.reduce(function(a,b){return n(b,
a)},{}))).map(function(b){return{path:b,value:a}});c.length&&m({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);r.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});r.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();
return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();r.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=
a)}return this};c.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,h=-1,k=-1,l=-1,m=b.length,n=a.length-1;++h<m;){var p=b[h],q=p.length,r=g[q];r&&x(r,p,0,q)?(f[++l]=p,e[l]=a[h<n?h:n]):(d[++k]=p,c[k]=a[h<n?h:n])}return~l?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,d,a){function c(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),e=a(15);b.exports=c;c.prototype=Object.create(f.prototype);
c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new e([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=[]}},function(b,d){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=
!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,d){b.exports=function(a,b){for(var c=-1,d=-1,h=a.length,r=[];++d<h;)for(var p=b(a[d],d,a),q=-1,m=p.length;++q<m;)r[++c]=p[q];return r}},function(b,d,a){var c=Array.isArray,f=a(32);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=
a[d])}return b}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,d,a){var c=a(5);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,d,a){var c=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,d,a){b.exports=a(106)},function(b,d,a){(function(b,f){Object.defineProperty(d,"__esModule",{value:!0});var c=a(107),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?
self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);d["default"]=b}).call(d,a(35),a(108)(b))},function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d["default"]=function(a){var b=a.Symbol;"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,d){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,
configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,d,a){b.exports=a(63)}])});
//# sourceMappingURL=falcor.all.min.js.map
