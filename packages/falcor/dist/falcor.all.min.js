/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("falcor",[],d):"object"===typeof exports?exports.falcor=d():b.falcor=d()})(this,function(){return function(b){function d(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,d);f.l=!0;return f.exports}var a={};d.m=b;d.c=a;d.i=function(a){return a};d.d=function(a,f,e){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:e})};
d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};d.p="";return d(d.s=109)}([function(b,d,a){var c=a(60),f=a(33),e=a(61);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===e?!1:a===f?b:a<c()}},function(b,d,a){var c=a(54);b.exports=function(a,e,r){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,e.push(a),c(r,a));return a}},function(b,
d,a){(function(a){function c(a){a?(this["\u001e\u0192_meta"]=a["\u001e\u0192_meta"])||(this["\u001e\u0192_meta"]=a):this["\u001e\u0192_meta"]={}}function e(a){function e(){return e.fn.apply(this,arguments)}return(e.fn=a)&&e}function r(e){var c=typeof e,f=arguments.length;if(0===f)e=this;else if(c!==y){if(!e||c!==q)return e}else{if(1!==f)return e;e=this}return e===a?void 0:e}function t(){return n(r.apply(this,arguments),t)}function p(a){a=r.apply(this,arguments);var e,c,h=0,f=n(a,p,!0,!0);a&&(e=a["\u001e\u0192_meta"])&&
(h=e.version);f&&typeof f===q&&(c=f["\u001e\u0192_meta"])&&(c.version=h);return f}function n(a,e,f,h){if(!a||typeof a!==q)return a;var r,g,x,m,b,u;if(k(a))u=a;else{r=-1;m=Object.keys(a);g=m.length;u=!h&&{}||{__proto__:c.prototype};if(f&&(x=a["\u001e\u0192_meta"])){var n=x.$code,p=x.abs_path,t=x.deref_to,y=x.deref_from;x={__proto__:null};n&&(x.$code=n);p&&(x.abs_path=p);t&&(x.deref_to=t);y&&(x.deref_from=y);u["\u001e\u0192_meta"]=x;h&&(u={__proto__:u})}for(;++r<g;)"\u001e\u0192_meta"!==(b=m[r])&&(u[b]=
e(a[b],e,f))}return u}c.prototype.toJSON=t;c.prototype.toProps=p;c.prototype.toString=function(a){return JSON.stringify(n(r.call(this,this),n,!0===a))};c.prototype.constructor=c;Object.defineProperties(c.prototype,"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,c){a[c]={writable:!0,enumerable:!1,value:e(Array.prototype[c])};return a},
{$__hash:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.version||0}}}));var k=Array.isArray,q="object",y="string";b.exports=c}).call(d,a(34))},function(b,d,a){d=a(4);b.exports=d("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,d){b.exports=function(a,c){function f(a){this.message=a;c&&c.apply(this,arguments);Error.captureStackTrace?
Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}f.prototype=Error();f.prototype.name=a;f.prototype.constructor=f;f.is=function(e){return e.name===a};return f}},function(b,d){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,d){b.exports={$type:"atom"}},function(b,d,a){var c=a(32);b.exports=function(a){for(var e,f=Object.keys(a),b={},p=-1,n=f.length;++p<n;)e=f[p],c(e)||(b[e]=a[e]);return b}},function(b,d,a){b.exports=function(a,f){var e=f["\u001e\u0192_refs_length"]||
0;f["\u001e\u0192_ref"+e]=a;f["\u001e\u0192_refs_length"]=e+1;a["\u001e\u0192_ref_index"]=e;a["\u001e\u0192_context"]=f}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&a.$size||0}},function(b,d,a){function c(a,e){var f=a,b,p=0,n=e.length;if(0<n){do for(f=f[e[p]];f&&"ref"===(b=f.$type);)f=c(a,f.value);while(++p<n&&f&&!b)}return f}b.exports=c},function(b,d,a){var c=a(30),f=a(49);b.exports=function(a,r,b,p){var e=a;do{var k=e["\u001e\u0192_parent"];0>=(e.$size=(e.$size||0)-r)&&null!=
k?c(e,k,e["\u001e\u0192_key"],b):e["\u001e\u0192_version"]!==p&&f(e,p);e=k}while(e);return a}},function(b,d,a){d=a(4);b.exports=d("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,d,a){var c=a(61);b.exports=function(a,e){if(e.$expires!==c){var f=a["\u001e\u0192_head"];if(!f)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=e;else if(f!==e){var b=e["\u001e\u0192_prev"],
p=e["\u001e\u0192_next"];p&&(p["\u001e\u0192_prev"]=b);b&&(b["\u001e\u0192_next"]=p);e["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=e;e["\u001e\u0192_next"]=f;f["\u001e\u0192_prev"]=e;e===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=b)}}}},function(b,d,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination={error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=
a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var e=this.destination;if(e)if(e.onNext)e.onNext(a);else e.next&&e.next(a)};c.prototype.error=c.prototype.onError=function(a){var e=!1,c=this.destination;c&&(c.onError?(e=!0,c.onError(a)):c.error&&(e=!0,c.error(a)),this.dispose());if(!e)throw a;};c.prototype.complete=c.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};
c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,d){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();
if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,d,a){var c=a(0),f=a(1),e=a(13);b.exports=function(a,b,p,n,k,q,y,m,g,x,h,l,w,E,v,A,u,C,z,d,F,B,G){var r=z;if(b)if(c(a,v))a["\u001e\u0192_invalidated"]||f(a,E,w);else if(e(w,a),void 0===a.value)z=!1,r=C;else{if(q)return l&&(m[k]=null),F(a,b,k,q,y,m,x,h,l,u,C,d);return}if(C)q&&(y.hasValue=!0);else if(!r)return;return B(n,k,y,m,g,l,x,h,z,C,p,A,u,G)}},function(b,d,a){var c=a(10);b.exports=function(a,e){e=e||a._path;var f=a._node;if(!f||
void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=null,0===e.length?f=a._root.cache:(f=c(a._root.cache,e),e===a._path&&(a._node=f));return f}},function(b,d,a){var c=a(30),f=a(21);b.exports=function r(a,b,n,k){if(c(a,b,n,k)){if(null==a.$type)for(var p in a)f(p)||r(a[p],a,p,k);return!0}return!1}},function(b,d,a){function c(a,e,g,x,h,l,r,b,k,n,u,p,t,d,F,B,G,H){var m={},w=e<a.length-1,v=a[e],y=q(v,m),E=p.index;do{u.depth=e;var z=f(g,x,h,l,r,b,y,w,!1,u,p,t,d,F,B,G,H);u[e]=y;u.index=
e;var A=z[0],C=z[1],D=z[4];D[D.index++]=y;A&&(w?c(a,e+1,g,C,A,l,z[3],z[2],k,n,u,D,t,d,F,B,G,H):(k.push(u.slice(0,u.index+1)),n.push(D.slice(0,D.index))));y=q(v,m);if(m.done)break;p.index=E}while(1)}function f(a,c,g,x,h,l,b,E,v,q,u,d,z,D,F,B,G){for(v=g.$type;"ref"===v;){a:{c=a;h=x;u=q;var m=d,w=z,y=D,A=F,C=B,U=G,S,K,O=g.value;v=O.slice(0);if(r(g,U))t(g,w,y),g=void 0,S=c,K=h,v.index=O.length;else{var W=0,P=g,N=O.length-1;S=g=c;K=l=h;do{var T=O[W],M=W<N;v.index=W;K=f(c,S,g,h,K,l,T,M,!0,u,v,m,w,y,A,C,
U);g=K[0];v=K[4];if(!g||"object"!==typeof g){v.index=W;u=K;break a}S=K[1];l=K[2];K=K[3]}while(W++<N);v.index=W;P["\u001e\u0192_context"]!==g&&p(P,g)}e[0]=g;e[1]=S;e[2]=l;e[3]=K;e[4]=v;u=e}g=u[0];if(!g||"object"!==typeof g)return u;c=u[1];l=u[2];h=u[3];u=u[4];v=g.$type}if(void 0===v){if(null==b){if(E)throw new k;g&&(b=g["\u001e\u0192_key"])}else c=g,h=l,g=c[b],l=h&&h[b];g=n(c,g,l,b,q,u,d,z,D,F,B,G)}e[0]=g;e[1]=c;e[2]=l;e[3]=h;e[4]=u;return e}var e=Array(5),r=a(0),t=a(1),p=a(8),n=a(83),k=a(3),q=a(24);
b.exports=function(a,f,g,x,h){a=a._root;for(var l=a.expired,r=a.version+1,b=a.cache,m=b["\u001e\u0192_version"],k=[],u=[],n=[],p=[],y=-1,t=f.length;++y<t;)for(var q=f[y],d=q.paths,q=q.jsonGraph,H=-1,J=d.length;++H<J;){var L=d[H];u.index=0;c(L,0,b,b,b,q,q,q,n,p,k,u,r,l,a,x,g,h)}e[0]=void 0;e[1]=void 0;e[2]=void 0;e[3]=void 0;e[4]=void 0;f=b["\u001e\u0192_version"];g=a.onChange;m!==f&&(a.version=r,g&&g());return[n,p,m!==f]}},function(b,d,a){function c(a,e,h,l,b,m,k,n,u,p,y,t,d,B,G){var x;if(a&&"object"===
typeof a&&!a.$type){x=[];var g=0;r(a)&&(x[g++]="length");for(var w in a)q(w)||(x[g++]=w)}else x=void 0;if(x&&x.length){g=0;w=x.length;var v=u.index;do{var z=x[g],E=a[z],A=!(!E||"object"!==typeof E)&&!E.$type;n.depth=e;var C=f(h,l,b,z,E,A,!1,n,u,p,y,t,d,B,G);n[e]=z;n.index=e;var D=C[0],F=C[1],C=C[2];C[C.index++]=z;D&&(A?c(E,e+1,h,F,D,m,k,n,C,p,y,t,d,B,G):(m.push(n.slice(0,n.index+1)),k.push(C.slice(0,C.index))));if(++g>=w)break;u.index=v}while(1)}}function f(a,c,h,l,r,b,k,q,u,d,z,D,F,B,G){for(var x=
h.$type;"ref"===x;){a:{c=r;u=a;var x=q,g,w=d,v=z,E=D,C=F,A=B,K=G,O,W=h.value;g=W.slice(0);if(t(h,K))p(h,v,E),h=void 0,O=u,g.index=W.length;else{var P=h;h=h["\u001e\u0192_context"];if(null!=h)O=h["\u001e\u0192_parent"]||u,g.index=W.length;else{var N=0,T=W.length-1;g.index=N;O=h=u;do{O=f(u,O,h,W[N],c,N<T,!0,x,g,w,v,E,C,A,K);h=O[0];g=O[2];if(!h||"object"!==typeof h){g.index=N;u=O;break a}O=O[1]}while(N++<T);g.index=N;P["\u001e\u0192_context"]!==h&&n(P,h)}}e[0]=h;e[1]=O;e[2]=g;u=e}h=u[0];if(!h||"object"!==
typeof h)return u;c=u[1];u=u[2];x=h&&h.$type}if(void 0===x){if(null==l){if(b)throw new y;h&&(l=h["\u001e\u0192_key"])}else c=h,h=c[l];h=m(c,h,l,r,b,k,q,u,d,z,D,F,B,G)}e[0]=h;e[1]=c;e[2]=u;return e}var e=Array(3),r=Array.isArray,t=a(0),p=a(1),n=a(8),k=a(10),q=a(21),y=a(3),m=a(46);b.exports=function(a,f,h,l,r){var g=a._root,x=g.expired,b=g.version+1,u=a._path,m=g.cache,w=k(m,u);if(!w)return[[],[],!1];var n=w["\u001e\u0192_parent"]||m;a=m["\u001e\u0192_version"];for(var p=[],y=[],t=[],q=u.length,d=-1,
L=f.length;++d<L;){var Q=f[d],R=u.slice(0);R.index=q;c(Q.json,0,m,n,w,y,t,p,R,b,x,g,l,h,r)}e[0]=void 0;e[1]=void 0;e[2]=void 0;f=m["\u001e\u0192_version"];h=g.onChange;a!==f&&(g.version=b,h&&h());return[y,t,a!==f]}},function(b,d,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(32)},function(b,d){function a(c,f,e){e=e||[];f=f||[];for(var r=[],b=c.$keys,p=b.length,n=-1;++n<p;){var k=c[n],q=b[n];k?a(k,f,e.concat([q])):r.push(q)}1===r.length?f.push(e.concat(r)):1<r.length&&f.push(e.concat([r]));
return f}b.exports=a},function(b,d){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,d){function a(a,e){var c=e.from=a.from||0;a=e.to=a.to||"number"===typeof a.length&&e.from+a.length-1||0;e.rangeOffset=e.from;e.loaded=!0;c>a&&(e.empty=!0)}var c=Array.isArray;b.exports=function(f,e){if(void 0===e.isArray){e.done=!1;var b=e.isObject=!(!f||"object"!==typeof f);e.isArray=b&&c(f);e.arrayOffset=0}if(e.isArray){var t;do{e.loaded&&e.rangeOffset>e.to&&
(++e.arrayOffset,e.loaded=!1);if(e.arrayOffset>=f.length){e.done=!0;break}b=f[e.arrayOffset];"object"===typeof b?(e.loaded||a(b,e),e.empty||(t=e.rangeOffset++)):(++e.arrayOffset,t=b)}while(void 0===t);return t}if(e.isObject){e.loaded||a(f,e);if(e.rangeOffset>e.to){e.done=!0;return}return e.rangeOffset++}e.done=!0;return f}},function(b,d,a){b.exports=a(39)},function(b,d,a){b.exports=a(42)},function(b,d){b.exports=function(a,c,f,e,b){var r=0,p;p=e.jsonGraph;p||(e.jsonGraph=p={});do{e=c[r++];if(r>=f){p=
p[e]=!0!==b?a:p[e]||{};break}p=p[e]||(p[e]={})}while(1);return p}},function(b,d){var a=Array.isArray;b.exports=function(c,f,e,b,d,p,n,k,q,y,m,g,x,h){if(q||y){for(var l,r=-1,t=(p=d-f)&&Array(p)||void 0;++r<p;){l=c[r+f];var v;v=l;if("object"!==typeof v||null===v)v=!1;else if(a(v))v=0===v.length;else{var A=v.to,u=v.from||0;"number"!==typeof A&&(A=u+(v.length||0));v=u>=A}if(v)return;t[r]=l}var C;c=null===l;l=q;var z;q?(v=d,A=b,z=e.requested||(e.requested=[])):(f=k,A=n,v=k+p-Number(c));do{if(p<d||!l){b=
-1;r=f;for(C=Array(v);++b<r;)C[b]=A[b];for(r=-1;b<v;)C[b++]=t[++r]}if(l=!l){q&&(z[z.length]=C);break}z[z.length]=C||t;f=k;A=n;z=e.missing||(e.missing=[]);v=k+p-Number(c)}while(1);if(y)return h(m,C,f,v,g,x)}}},function(b,d,a){function c(a,h,l,b,r,k,p,u,d){var x={},w=h<a.length-1,q=a[h],v=g(q,x);do{e=f(l,b,r,v,w,!1,k,p,u,d);var t=e[0],E=e[1];t&&(w?c(a,h+1,l,E,t,k,p,u,d):m(t,E,v,u)&&y(E,n(t),u,k));v=g(q,x)}while(!x.done)}function f(a,c,l,b,g,m,n,u,y,d){for(m=l.$type;"ref"===m;){a:{c=a;m=n;var h=u,x=
y,w=d;if(r(l,w))t(l,h,x),e[0]=void 0,e[1]=c;else{p(x,l);var q=l,v=l.value,z;l=l["\u001e\u0192_context"];if(null!=l)z=l["\u001e\u0192_parent"]||c;else{var E=0,A=v.length-1;z=l=c;do{e=f(c,z,l,v[E],E<A,!0,m,h,x,w);l=e[0];if(!l&&"object"!==typeof l)break a;z=e[1]}while(E++<A);q["\u001e\u0192_context"]!==l&&k(q,l)}e[0]=l;e[1]=z}}l=e[0];if(!l&&"object"!==typeof l)return e;c=e[1];m=l.$type}if(void 0!==m)return[l,c];if(null==b){if(g)throw Error("`null` is not allowed in branch key positions.");}else c=l,
l=c[b];e[0]=l;e[1]=c;return e}var e=Array(2),r=a(0),t=a(1),p=a(13),n=a(9),k=a(8),q=a(17),y=a(11),m=a(18),g=a(24);b.exports=function(a,h,f){var b=a._root,l=b.expired,g=b.version++,x=b.cache,r=q(a),m=r["\u001e\u0192_parent"]||x;a=x["\u001e\u0192_version"];for(var k=-1,n=h.length;++k<n;)c(h[k],0,x,m,r,g,l,b,f);e[0]=void 0;e[1]=void 0;h=x["\u001e\u0192_version"];(b=b.onChange)&&a!==h&&b()}},function(b,d,a){var c=a(54),f=a(86),e=a(87);b.exports=function(a,b,p,n){if(a&&"object"===typeof a){var r=a.$type;
r&&("ref"===r&&e(a),c(n,a));f(a);b[p]=a["\u001e\u0192_parent"]=void 0;return!0}return!1}},function(b,d,a){function c(a,e,b,h,l,r,k,n,p,u,y,d,t,F,B,G){var g={},x=b<e.length-1,m=e[b],w=q(m,g),v=u.index;do{p.depth=b;p[b]=w;p.index=b;var z=f(h,l,r,w,a,x,!1,p,u,y,d,t,F,B,G);p[b]=w;p.index=b;var E=z[0],C=z[1],z=z[2];z[z.index++]=w;E&&(x?c(a,e,b+1,h,C,E,k,n,p,z,y,d,t,F,B,G):(k.push(p.slice(0,p.index+1)),n.push(z.slice(0,z.index))));w=q(m,g);if(g.done)break;u.index=v}while(1)}function f(a,c,b,h,l,n,d,q,A,
u,C,z,D,F,B){for(var g=b.$type;"ref"===g;){a:{c=l;A=a;var g=q,m,x=u,w=C,v=z,E=D,U=F,S=B,K,O=b.value;m=O.slice(0);if(r(b,S))t(b,w,v),b=void 0,K=A,m.index=O.length;else{var W=b;b=b["\u001e\u0192_context"];if(null!=b)K=b["\u001e\u0192_parent"]||A,m.index=O.length;else{var P=0,N=O.length-1;K=b=A;do{var T=O[P],M=P<N;m.index=P;K=f(A,K,b,T,c,M,!0,g,m,x,w,v,E,U,S);b=K[0];m=K[2];if(!b||"object"!==typeof b){m.index=P;A=K;break a}K=K[1]}while(P++<N);m.index=P;W["\u001e\u0192_context"]!==b&&p(W,b)}}e[0]=b;e[1]=
K;e[2]=m;A=e}b=A[0];if(!b||"object"!==typeof b)return A;c=A[1];A=A[2];g=b.$type}if(!n||void 0===g){if(null==h){if(n)throw new k;b&&(h=b["\u001e\u0192_key"])}else c=b,b=c[h];b=y(c,b,h,l,n,d,q,A,u,C,z,D,F,B)}e[0]=b;e[1]=c;e[2]=A;return e}var e=Array(3),r=a(0),t=a(1),p=a(8),n=a(10),k=a(3),q=a(24),y=a(46);b.exports=function(a,b,f,h,l){var g=a._root,r=g.expired,m=g.version+1,x=a._path,u=g.cache,k=n(u,x);if(!k)return[[],[],!1];var p=k["\u001e\u0192_parent"]||u;a=u["\u001e\u0192_version"];for(var y=[],d=
[],q=[],t=x.length,H=-1,J=b.length;++H<J;){var L=b[H],Q=L.path,L=L.value,R=x.slice(0);R.index=t;c(L,Q,0,u,p,k,d,q,y,R,m,r,g,h,f,l)}e[0]=void 0;e[1]=void 0;e[2]=void 0;b=u["\u001e\u0192_version"];f=g.onChange;a!==b&&(g.version=m,f&&f());return[d,q,a!==b]}},function(b,d,a){d=a(94);d=new RegExp("^"+d,"i","g");b.exports=d.test.bind(d)},function(b,d){b.exports=0},function(b,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(d=window)}b.exports=
d},function(b,d,a){var c=a(38),f=a(36),e=a(37);b.exports=function(a){return c(e(f(a)))}},function(b,d,a){var c=Array.isArray,f=a(22);b.exports=function(a,b){if(a)c(a)||c(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,e){var c=e.length;a[c]||(a[c]=[]);a[c].push(e);return a},b||{})}},function(b,d,a){var c=a(66);b.exports=function(a,e){return Object.keys(a).reduce(function(e,b){e[b]=c(a[b],e[b]);return e},e||{})}},function(b,d,a){function c(a,b,f){var g,h=Object.create(null),l=""+k(""+b),
m=[],n=-1,p=0,d=[],u=0,q,y,t,F,B,G;t=[];F=-1;if(b<f-1){for(B=e(a,t);++F<B;)g=t[F],q=c(a[g],b+1,f),y=q.code,h[y]?q=h[y]:(m[p++]=y,q=h[y]={keys:[],sets:q.sets}),l=""+k(l+g+y),r(g)&&q.keys.push(parseInt(g,10))||q.keys.push(g);for(;++n<p;)if(g=m[n],q=h[g],t=q.keys,B=t.length,0<B)for(a=q.sets,b=-1,f=a.length,F=t[0];++b<f;){g=a[b];q=-1;y=g.length;G=Array(y+1);for(G[0]=1<B&&t||F;++q<y;)G[q+1]=g[q];d[u++]=G}}else for(B=e(a,t),1<B?d[u++]=[t]:d[u++]=t;++F<B;)l=""+k(l+t[F]);return{code:l,sets:d}}function f(a,
e){return a-e}function e(a,e,c){var b=0;if(a===q)e[b++]=null;else{for(var h in a)e[b++]=h;1<b&&e.sort(c)}return b}function r(a){var e=a,c=typeof a;if("string"===c){e=a.length;if(0===e||17<e||!n.test(a))return!1;if(16>e)return!0;e=+a}else if("number"!==c)return!1;return 0===e%1&&9007199254740991>=p(e)}var t=Array.isArray,p=Math.abs,n=/^(0|(\-?[1-9][0-9]*))$/,k=a(23),q=a(6);b.exports=function(a){var e,b=[],k=0,h;for(h in a){var l;if(l=r(h))l=e=a[h],l=null!==l&&"object"===typeof l;if(l){l=c(e,0,parseInt(h,
10)).sets;for(var n=-1,p=l.length;++n<p;){for(var q=k++,d=l[n],u=-1,y=d.length;++u<y;){var z=d[u];if(t(z)){var D=d,F=u;for(var B=-1,G=z.length-1,H=0<G;++B<=G;){var J=z[B];if(!r(J)){H=!1;break}z[B]=parseInt(J,10)}!0===H&&(z.sort(f),B=z[0],H=z[G],H-B<=G&&(z={from:B,to:H}));D[F]=z}}b[q]=d}}}return b};b.exports._isSafeNumber=r},function(b,d,a){var c=a(74),f=a(73),e=a(17),r=a(92),t=a(65),p=a(63);b.exports=function(a,b,q,d,m){var g,k;d=a._path;var h=a._root,l=h.cache,n,y,v,A=d&&d.length||0;if(A){if((g=
e(a))&&g.$type)return{error:new r(d,d)};v=[];for(var u=0;u<A;++u)v[u]=d[u];k=a._referenceContainer}else g=l,v=[];n=[];var u=!1,C=q&&q.json,z={data:q},D=a._boxed,F=h.expired;y=a._recycleJSON;var B=a._materialized,G=!!a._source,H=h.branchSelector,J=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;var L,Q=0,R=b.length;if(0<R)if(y)u=!0,b[0].$keys||(b=[p(t(b,{}))]),m=f(l,g,C,b[0],0,q,z,n,v,A,!1,k,h,F,m,H,D,B,G,J,a),C=m[0],m[0]=void 0,m[1]=void 0;else{do L=b[Q],y=L.length,C=c(l,g,C,L,0,q,z,n,y,v,A,!1,
k,h,F,m,H,D,B,G,J,a);while(++Q<R)}m=z.requested;z.args=u&&b||m;if(m&&m.length&&(z.relative=z.args,A)){b=[];u=0;for(A=m.length;u<A;++u)b[u]=d.concat(m[u]);z.requested=b}z.hasValue&&(q.json=C);return z}},function(b,d,a){var c=Array(3),f=a(13),e=a(0),r=a(8),t=a(51);b.exports=function(a,b,k,d){f(k,b);var p,m,g=0,n=a,h=b.value,l=h,w=h.length;do{if(0===g&&void 0!==(p=b["\u001e\u0192_context"]))n=p,g=w;else if(m=h[g++],void 0===(n=n[m]))break;if(g===w){m=n.$type;if(void 0!==m&&e(n,d))break;else{if(n===b)throw new t(h);
n!==p&&r(b,n)}if("ref"===m)f(k,n),g=0,b=n,n=a,h=l=b.value,w=h.length;else break}else if(void 0!==n.$type)break}while(1);g<w&&void 0!==n&&(w=g);g=-1;for(h=Array(w);++g<w;)h[g]=l[g];c[0]=n;c[1]=h;c[2]=b;return c}},function(b,d,a){var c=a(7),f=a(72);b.exports=function(a,b,d,p,n,k,q,y,m,g,x,h){if("error"===b&&!h)return f(a,d,n,k,m,g);n.hasValue=!0;return g?c(a):a.value}},function(b,d,a){var c=a(77),f=a(90);b.exports=function(a,b,d,p,n){var e,r;e=a._path;p=a._root;var t,m,g=e&&e.length||0;if(g)return{error:new f};
m=[];r=e=p.cache;t=[];for(var x=a._boxed,h=p.expired,l=a._materialized,w=!!a._source,E=a._treatErrorsAsValues,v={data:d},A=-1,u=b.length;++A<u;){var C=b[A];a=C.length;c(r,e,C,0,d,v,t,a,m,g,!1,p,h,n,x,l,w,E)}v.args=v.relative=v.requested;return v}},function(b,d,a){function c(a,b,d,y,m,g){if(d===y)return g?e(p):void 0;var k,h,l=d+1,n,q=-1,v=0;h=b[d];a&&"object"===typeof a?((k=a["\u001e\u0192_meta"])||(a["\u001e\u0192_meta"]=k={__proto__:null}),k.version=0,k.abs_path=b.slice(0,d)):(a={__proto__:r.prototype},
a["\u001e\u0192_meta"]=k={__proto__:null},k.version=0,k.abs_path=b.slice(0,d),m&&(a=m(a)));a:do{if("object"!==typeof h)d=h,k=void 0,h=!1;else if(f(h)){if(void 0!==n)throw new t(b,n);q=0;n=h;v=h.length;if(0===v)break a;h=n[q];continue a}else{k=h.to;d=h.from||0;"number"!==typeof k&&(k=d+(h.length||0)-1);if(0>k-d)break a;h=!0}do a[d]=c(a[d],b,l,y,m,g);while(h&&++d<=k);if(++q===v)break a;h=n[q]}while(1);return a}var f=Array.isArray,e=a(7),r=a(2);a(3);var t=a(12),p=a(6);b.exports=c},function(b,d,a){b.exports=
function(a,b,e,r,d){a["\u001e\u0192_key"]=e;a["\u001e\u0192_parent"]=b;void 0!==r&&(a["\u001e\u0192_version"]=r);a["\u001e\u0192_abs_path"]||(a["\u001e\u0192_abs_path"]=d.slice(0,d.index).concat(e));return b[e]=a}},function(b,d,a){function c(a,e,b,l,r,k,d,n,u,t){if(a&&"object"===typeof a&&!a.$type)for(var h in a)if(!q(h)){var g=a[h],w=!(!g||"object"!==typeof g)&&!g.$type,x=f(b,l,r,h,g,w,!1,k,d,n,u,t),v=x[0],x=x[1];v&&(w?c(g,e+1,b,x,v,k,d,n,u,t):m(v,x,h,n)&&y(x,p(v),n,k))}}function f(a,c,b,l,k,m,d,
p,u,q,y,D){for(d=b.$type;"ref"===d;){a:{c=k;d=a;var h=p,g=u,w=q,x=y,v=D;if(e(b,v))r(b,g,w),c=[void 0,d];else{t(w,b);var z=b,E=b.value,C;b=b["\u001e\u0192_context"];if(null!=b)C=b["\u001e\u0192_parent"]||d;else{var A=0,S=E.length-1;C=b=d;do{C=f(d,C,b,E[A],c,A<S,!0,h,g,w,x,v);b=C[0];if(!b||"object"!==typeof b){c=C;break a}C=C[1]}while(A++<S);z["\u001e\u0192_context"]!==b&&n(z,b)}c=[b,C]}}b=c[0];if(!b&&"object"!==typeof b)return c;c=c[1];d=b&&b.$type}if(void 0!==d)return[b,c];if(null==l){if(m)throw Error("`null` is not allowed in branch key positions.");
}else c=b,b=c[l];return[b,c]}var e=a(0),r=a(1),t=a(13),p=a(9),n=a(8),k=a(17),q=a(21),y=a(11),m=a(18);b.exports=function(a,e,b){var h=a._root,f=h.expired,g=h.version++,r=h._comparator,d=h.cache,u=k(a),m=u["\u001e\u0192_parent"]||d;a=d["\u001e\u0192_version"];for(var n=-1,p=e.length;++n<p;)c(e[n].json,0,d,m,u,g,f,h,r,b);e=d["\u001e\u0192_version"];(h=h.onChange)&&a!==e&&h()}},function(b,d,a){var c=a(33),f=a(103),e=a(9),r=a(57),t=a(50),p=a(0),n=a(1),k=a(44),q=a(48),y=a(47),m=a(11);a(18);b.exports=function(a,
b,h,l,d,E,v,A,u,C,z,D,F,B){B=f(b,E);if(d||E){if(B&&p(b,!0)&&(n(b,C,z),B=b.$expires===c?B:"expired"),B&&"ref"!==B||!b||"object"!==typeof b)b=q(b,{},a,h,z,u),b=k(b,a,h,u,A)}else d=f(l),(D?D(b,l,A.slice(0,A.index)):d?B&&!1!==r(l)<r(b)&&(B!==d||b.value!==l.value||b.$expires!==l.$expires):b&&b.value===l)||(F&&"error"===d&&(l=F(y(v,h),l)),v=e(b)-e(l=t(l,d,d?l.value:l)),b=q(b,l,a,h,z,u),a=m(a,v,z,u),b=k(b,a,h,u,A));return b}},function(b,d){b.exports=function(a,b){a=a.slice(0,a.depth);a[a.length]=b;return a}},
function(b,d,a){var c=a(85),f=a(18),e=a(49);b.exports=function(a,b,d,n,k,q){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,d,n,k),e(b,q));return d[n]=b}},function(b,d,a){b.exports=function(a,b){var e=[a],c=0;do{var f=e[c];if(f&&f["\u001e\u0192_version"]!==b){f["\u001e\u0192_version"]=b;e[c++]=f["\u001e\u0192_parent"];for(var d=-1,n=f["\u001e\u0192_refs_length"]||0;++d<n;)e[c++]=f["\u001e\u0192_ref"+d]}}while(-1<--c);return a}},function(b,d,a){var c=Array.isArray,f=a(60),e=a(101),r=a(9),t=a(102),
p=a(33);b.exports=function(a,b,d){var k=0;if(b){var m=a["\u001e\u0192_wrapped_value"];a=e(a);k=r(a);a.$type=b;a["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=m||!1}else a={$type:"atom",value:d,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==d)k=51;else if(null==k||0>=k)switch(typeof d){case "object":k=c(d)?50+d.length:51;break;case "string":k=50+d.length;break;default:k=51}b=t(a);"number"===typeof b&&b<p&&
(a.$expires=f()+-1*b);a.$size=k;return a}},function(b,d,a){d=a(4);b.exports=d("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,d,a){d=a(4);b.exports=d("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,d,a){var c=a(30),f=a(11);b.exports=function(a,b,d,p,n,k){var e=n;"number"!==typeof e&&(e=.75);n="number"===typeof k;var e=p*e,r,m,g;for(m=b.pop();m;)g=m.$size||0,d-=g,!0===
n?f(m,g,a,k):(r=m["\u001e\u0192_parent"])&&c(m,r,m["\u001e\u0192_key"],a),m=b.pop();if(d>=p){for(m=b=a["\u001e\u0192_tail"];d>=e&&m;)b=b["\u001e\u0192_prev"],g=m.$size||0,d-=g,!0===n&&f(m,g,a,k),m=b;a["\u001e\u0192_tail"]=a["\u001e\u0192_prev"]=m;null==m?a["\u001e\u0192_head"]=a["\u001e\u0192_next"]=void 0:m["\u001e\u0192_next"]=void 0}}},function(b,d,a){b.exports=function(a,b){var e=b["\u001e\u0192_prev"],c=b["\u001e\u0192_next"];c&&(c["\u001e\u0192_prev"]=e);e&&(e["\u001e\u0192_next"]=c);b["\u001e\u0192_prev"]=
b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=c);b===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=e)}},function(b,d,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var e=a(14),d=a(15),t=a(105).default;b.exports=f;f.prototype[t]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,b,c){return new d([this.operator.call(this.source,
a instanceof e?a:new e(a,b,c))])};f.prototype.then=function(a,b){var e=this;this._promise||(this._promise=new c.Promise(function(a,b){var c=[],f=!1;e.subscribe({next:function(a){c[c.length]=a},error:function(a){f=!0;b(a)},complete:function(){!f&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,b)}}).call(d,a(34))},function(b,d){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,d,a){var c=a(5);b.exports=
function(a){return c(a)&&a.$timestamp||void 0}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&"json"in a}},function(b,d,a){var c=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,d){b.exports=Date.now},function(b,d){b.exports=1},function(b,d,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(67);d=a(2);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=
d;c.toProps=d.prototype.toProps;b.exports=c},function(b,d,a){function c(a){if(void 0!==a){for(var b="",e=a.$keys,d=-1,n=e.length;++d<n;){var k=e[d];if(null===k)b=""+f(""+b+"null");else{"object"===typeof k&&(k="{from:"+k.from+",length:"+k.length+"}");var q=c(a[d]),b=void 0===q?""+f(""+b+k):""+f(""+b+k+q.$code)}}a.$code=b;return a}}var f=a(23);b.exports=c},function(b,d,a){function c(a,b,d,n){if(d===n)return!0;var k,r=-1,p=0,m=d+1,g,t,h;k=b[d];if(null===k)return a===e;a:do{if("object"!==typeof k)d=k,
t=void 0,g=!1;else if(f(k)){if(void 0!==h)break a;r=0;h=k;p=k.length;if(0===p)break a;k=h[r];continue a}else{t=k.to;d=k.from||0;"number"!==typeof t&&(t=d+(k.length||0)-1);if(0>t-d)break a;g=!0}do if(m===n){if(null!==a[d])return!1}else if(k=a[d],null===k||void 0===k||!1===c(k,b,m,n))return!1;while(g&&++d<=t);if(++r===p)break a;k=h[r]}while(1);return!0}var f=Array.isArray,e=a(6);b.exports=c},function(b,d,a){function c(a,b){return a.reduce(function(a,b){return e(b)?f(a,b,0,b.length):c(t(b),a)},b||{})}
function f(a,b,c,d){if(c!==d){a=a||{};var k=a.$keys||(a.$keys=[]),m=a.$keysMap||(a.$keysMap={}),g,n=-1,h=0,l,p=c+1,t;g=b[c];if(null===g)return r;a:do{if("object"!==typeof g)l=g,"undefined"===typeof(c=m[l])&&(c=k.length),k[c]=l,m[l]=c,g=f(a[c],b,p,d),void 0!==g&&(a[c]=g);else if(e(g)){if(void 0!==t)break a;n=0;t=g;h=g.length;if(0===h)break a;g=t[n];continue a}else{c=g.to;l=g.from||0;"number"!==typeof c&&(c=l+(g.length||0)-1);if(0>c-l)break a;g={from:l,length:c-l+1};l="{from:"+l+",length:"+(c-l+1)+
"}";"undefined"===typeof(c=m[l])&&(c=k.length);k[c]=g;m[l]=c;g=f(a[c],b,p,d);void 0!==g&&(a[c]=g)}if(++n===h)break a;g=t[n]}while(1);return a}}var e=Array.isArray,r={$keys:[null],$keysMap:{"null":0}},t=a(22);b.exports=c},function(b,d,a){function c(a,b,d,n,k,q){if(d===n)return!0;var r,m,g=-1,p=0,h,l=d+1,w,t,v;m=b[d];if(null===m)return e;r=m;a=a?a:q?q(b,d,a):{};a:do{if("object"!==typeof m)q=m,t=void 0,w=!1;else if(f(m)){if(void 0!==v)break a;g=0;v=m;p=m.length;if(0===p)break a;m=v[g];continue a}else{t=
m.to;q=m.from||0;"number"!==typeof t&&(t=q+(m.length||0)-1);if(0>t-q)break a;w=!0}do l===n?a[q]=k:(m=a[b[d]=q],(h=c(m,b,l,n,k))?m||(a[q]=h):a[q]=k);while(w&&++q<=t);if(++g===p)break a;m=v[g]}while(1);b[d]=r;return a}var f=Array.isArray,e=a(6);b.exports=function(a,b){return a.reduce(function(a,b){return c(a,b,0,b.length,null)},b||{})};b.exports.pathToTree=c},function(b,d,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new e(a,
this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new n;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={__proto__:r.prototype});this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||
a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(95),e=a(69),r=a(2),t=a(68),p=a(99),n=a(56),k=a(35),q=a(53),y=a(9),m=a(5),g=a(58),x=a(10),h=a(59),l=a(20),w=a(19),E=a(25),v=a(79),A=a(26);b.exports=c;c.prototype.constructor=c;c.prototype.get=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(this._seed||{__proto__:r.prototype},[])};c.prototype.set=function(){return(new f("set",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:r.prototype},
[])};c.prototype.preload=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,[])};c.prototype.call=function(){return(new f("call",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:r.prototype},[])};c.prototype.invalidate=function(){return(new f("invalidate",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,null).then()};c.prototype.deref=a(89);c.prototype._hasValidParentReference=a(88);c.prototype.getValue=function(a){return(new f("get",
this,[a]))._toJSON({__proto__:r.prototype},[]).lift(function(b){return this.subscribe({onNext:function(c){var e=-1;c=c.json;for(var h=a.length;c&&!c.$type&&++e<h;)c=c[a[e]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({__proto__:r.prototype},[]).lift(function(b){return this.subscribe({onNext:function(c){var e=-1;c=c.json;
for(var h=a.length;c&&!c.$type&&++e<h;)c=c[a[e]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=function(a){var b=this._root,c=b.cache;if(a!==c){var e={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof c&&(q(b,b.expired,y(c),0),this._recycleJSON&&(this._seed={__proto__:r.prototype}));var f;h(a)?f=w(e,[a])[0]:g(a)?f=l(e,[a])[0]:m(a)&&(f=l(e,[{json:a}])[0]);f&&E(e,f,null,!1,!1)}else"undefined"===
typeof c&&(this._root.cache={});return this};c.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return v(this._root.cache);var b=A({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},a,{__proto__:r.prototype}).data;b.paths=k(a);return b};c.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&
(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=new c(this);if(a)for(var e in a){var h=a[e];"delete"===h?delete b[e]:"_path"===e?(b[e]=h,!1===a.hasOwnProperty("_node")&&delete b._node):b[e]=h}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new p(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new p(1);return this._clone({_scheduler:b})};c.prototype.unbatch=
function(){return this._clone({_scheduler:new n})};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new t(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=
function(){return this._clone({_source:"delete"})};c.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=x(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||[]).slice(0)};c.prototype._getVersion=a(80);c.prototype._getPathValuesAsPathMap=E;c.prototype._getPathValuesAsJSONG=
A;c.prototype._setPathValues=a(31);c.prototype._setPathMaps=a(20);c.prototype._setJSONGs=a(19);c.prototype._setCache=a(20);c.prototype._invalidatePathValues=a(29);c.prototype._invalidatePathMaps=a(45)},function(b,d){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,e,d){return this._model.call.apply(this._model,
[a,b,e].concat(d))._toJSONG()};b.exports=a},function(b,d,a){function c(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&(this.comparator=a.comparator);"function"===typeof a.branchSelector&&
(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(96);c.comparator=function(a,b){var c=a&&a.$type,e=b&&b.$type;return c?e?!(c!==e||a.value!==b.value||a.$expires!==b.$expires):a.value===b:e?!1:a===b};b.exports=
c},function(b,d,a){var c=a(25),f=a(26);b.exports={json:function(a,b,f,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};var k=[].concat(b[1]||[]),r=[].concat(b[2]||[]),p=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&p&&p.length&&(e=c(a,p,f,d,!0).hasValue);return{data:f,missing:!0,hasValue:e,fragments:[b,k,r,p]}},jsonGraph:function(a,b,c,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};var k=[].concat(b[1]||[]),r=[].concat(b[2]||[]),p=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&
p&&p.length&&(e=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},p,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:e,fragments:[b,k,r,p]}}}},function(b,d,a){b.exports={json:a(39),jsonGraph:a(42)}},function(b,d,a){var c=a(7);b.exports=function(a,b,d,t,p,n){var e=-1;b+=!!p;p=Array(b);for(a=n?c(a):a.value;++e<b;)p[e]=t[e];(d.errors||(d.errors=[])).push({path:p,value:a})}},function(b,d,a){function c(a,b,d,k,v,x,u,C,z,D,F,B,G,H,J,L,Q,R,U,
S,K){var h,l;if(void 0===b||void 0!==(h=b.$type)||void 0===k)return e[1]=U&&void 0===b,e[0]=n(b,h,d,k,v,x,u,C,v,z,D,F,G,H,J,L,Q,R,U,S,r,f,y),e;var w,E,A="",M,I,V,Y=k.$keys,ba=v+1,Z,X,aa,fa,ca,ga=D+1,ia,ja;K&&B&&(ja=B.value,ia=B["\u001e\u0192_abs_path"]);if(d)if("object"!==typeof d)d=void 0;else if(w=d["\u001e\u0192_meta"]){if(!(L||d instanceof t))d.__proto__={__proto__:t.prototype},d.__proto__["\u001e\u0192_meta"]=w;else if(w.version===b["\u001e\u0192_version"]&&w.$code===k.$code&&w.abs_path===b["\u001e\u0192_abs_path"])return u.hasValue=
!0,e[0]=d,e[1]=!1,e;E=w.keys;w.version=b["\u001e\u0192_version"];w.abs_path=b["\u001e\u0192_abs_path"];w.deref_to=ja;w.deref_from=ia}h={__proto__:null};var ka=-1,la=Y.length,ea,ha,da=!1;a:for(;++ka<la;)if(F=Y[ka],ea=k[ka],null===F){if(void 0!==ea)throw new m;A=""+g(""+A+"null")}else{if("object"!==typeof F)I=F,Z=void 0,V=!1,ha=I;else{Z=F.to;I=F.from||0;"number"!==typeof Z&&(Z=I+(F.length||0)-1);if(0>Z-I)break a;V=!0;ha="{from:"+I+",length:"+(Z-I+1)+"}"}do{F=!1;X=d&&d[I];ca=z;fa=ga;aa=B;M=b[I];C[v]=
I;z[D]=I;if(void 0===ea){if(e=c(a,M,X,ea,ba,x,u,C,ca,fa,F,aa,G,H,J,L,Q,R,U,S,K),X=e[0],da=da||e[1],void 0===X&&!R){da=!0;d&&d.hasOwnProperty(I)&&delete d[I];continue}}else if(M&&"ref"===M.$type&&!p(M,J)&&(l=q(a,M,G,J),M=l[0],F=!0,ca=l[1],aa=l[2],fa=ca.length,l[0]=l[1]=l[2]=void 0),e=c(a,M,X,ea,ba,x,u,C,ca,fa,F,aa,G,H,J,L,Q,R,U,S,K),X=e[0],da=da||e[1],void 0===X){da=!0;d&&d.hasOwnProperty(I)&&delete d[I];continue}void 0===w&&(w={__proto__:null},w.version=b["\u001e\u0192_version"],w.abs_path=b["\u001e\u0192_abs_path"],
w.deref_to=ja,w.deref_from=ia,d={__proto__:t.prototype},d["\u001e\u0192_meta"]=w,d=!L&&{__proto__:d}||L(d));h[I]=!0;E&&I in E&&(E[I]=!1);d[I]=X}while(V&&++I<=Z);da||(A=void 0===ea?""+g(""+A+ha):""+g(""+A+ha+ea.$code))}da&&(A="__incomplete__");if(w&&(w.$code=A,w.keys=h,E))for(I in E)E[I]&&delete d[I];e[0]=d;e[1]=da;return e}function f(a,b,c,e,d,g,m,n,r,p,t,q,y,H){if(p)return H(t,a,b,b,q,y,c,e,m,n,g,r,f);a=a?x(a):[[]];var h=e.slice(0,d);return a.forEach(function(a){d=b+a.length;return k(h.concat(a),
b,c,e,d,g,m,n,r,!1,t,q,y,H)})}var e=Array(2),r=a(41),t=a(2),p=a(0),n=a(16),k=a(28),q=a(40),y=a(78),m=a(3);a(12);var g=a(23),x=a(22);b.exports=c},function(b,d,a){function c(a,b,h,d,w,E,v,A,u,C,z,D,F,B,G,H,J,L,Q,R,U,S){var g,l;if(void 0===b||(g=b.$type)||w===u)return p(b,g,h,d,w,E,v,A,u,C,z,D,B,G,H,J,L,Q,R,U,e,r,k);var x,P,N,T=w+1,M,I,V,Y,ba=-1,Z=0,X,aa,fa=z+1,ca,ga;D=d[w];if(null===D){if(T<u)throw new y;return h}S&&F&&(ga=F.value,ca=F["\u001e\u0192_abs_path"]);if(h)if("object"!==typeof h)h=void 0;
else if(x=h["\u001e\u0192_meta"])x.version=b["\u001e\u0192_version"],x.abs_path=b["\u001e\u0192_abs_path"],x.deref_to=ga,x.deref_from=ca;a:do{if("object"!==typeof D)g=D,M=void 0,N=!1;else if(f(D)){if(void 0!==I)throw new m(d,I);ba=0;I=D;Z=D.length;if(0===Z)break a;D=I[ba];continue a}else{M=D.to;g=D.from||0;"number"!==typeof M&&(M=g+(D.length||0)-1);if(0>M-g)break a;N=!0}do{D=!1;V=h&&h[g];aa=C;X=fa;Y=F;P=b[g];A[w]=g;C[z]=g;if(T===u){if(V=c(a,P,V,d,T,E,v,A,u,aa,X,D,Y,B,G,H,J,L,Q,R,U,S),void 0===V&&
!Q)continue}else if(P&&"ref"===P.$type&&!n(P,H)&&(l=q(a,P,B,H),P=l[0],D=!0,aa=l[1],Y=l[2],X=aa.length,l[0]=l[1]=l[2]=void 0),void 0===(V=c(a,P,V,d,T,E,v,A,u,aa,X,D,Y,B,G,H,J,L,Q,R,U,S)))continue;void 0===x&&(x={__proto__:null},x.version=b["\u001e\u0192_version"],x.abs_path=b["\u001e\u0192_abs_path"],x.deref_to=ga,x.deref_from=ca,h={__proto__:t.prototype},h["\u001e\u0192_meta"]=x,J&&(h=J(h)));h[g]=V}while(N&&++g<=M);if(++ba===Z)break a;D=I[ba]}while(1);return h}var f=Array.isArray,e=a(41),r=a(28),
t=a(2),p=a(16),n=a(0),k=a(43),q=a(40),y=a(3),m=a(12);a(6);b.exports=c},function(b,d,a){var c=Array(2),f=a(7),e=a(27),r=a(13),t=a(0),p=a(8),n=a(51);b.exports=function(a,b,d,m,g){r(d,b);var k,h,l=0,w=a,q=b.value,v=q,y=q.length;do{if(0===l&&void 0!==(k=b["\u001e\u0192_context"]))w=k,l=y;else if(h=q[l++],void 0===(w=w[h]))break;if(l===y){h=w.$type;if(void 0!==h&&t(w,g))break;else{if(w===b)throw new n(q);w!==k&&p(b,w)}if("ref"===h)r(d,w),m&&e(f(w),q,y,m),l=0,b=w,w=a,q=v=b.value,y=q.length;else break}else if(void 0!==
w.$type)break}while(1);l<y&&void 0!==w&&(y=l);l=-1;for(q=Array(y);++l<y;)q[l]=v[l];c[0]=w;c[1]=q;return c}},function(b,d,a){var c=a(7),f=a(27);b.exports=function(a,b,d,p,n,k,q,y,m,g,x){x=a.value;if(g||"ref"===b||"error"===b||!a["\u001e\u0192_wrapped_value"]||"object"===typeof x)x=c(a);p&&(n.hasValue=!0,f(x,q,y,p),(p.paths||(p.paths=[])).push(k.slice(0,d+!!m)));return x}},function(b,d,a){function c(a,b,h,d,y,u,C,z,D,F,B,G,H,J,L,Q,R,U){var l,w;if(void 0===b||(l=b.$type)||d===z)return k(b,l,y,h,d,y,
u,C,z,D,F,B,G,H,J,void 0,L,Q,R,U,t,f,q);var v,E,A=d+1,N,T,M=-1,I=0,V,Y,ba=F+1;B=h[d];if(null===B){if(A<z)throw new g;}else{a:do{if("object"!==typeof B)l=B,N=void 0,E=!1;else if(e(B)){if(void 0!==T)throw new x(h,T);M=0;T=B;I=B.length;if(0===I)break a;B=T[M];continue a}else{N=B.to;l=B.from||0;"number"!==typeof N&&(N=l+(B.length||0)-1);if(0>N-l)break a;E=!0}do B=!1,Y=D,V=ba,v=b[l],C[d]=l,D[F]=l,v&&A<z&&"ref"===v.$type&&!n(v,J)&&(y&&p(r(v),D,V,y),w=m(a,v,G,y,J),v=w[0],B=!0,Y=w[1],V=Y.length,w[0]=w[1]=
void 0),c(a,v,h,A,y,u,C,z,Y,V,B,G,H,J,L,Q,R,U);while(E&&++l<=N);if(++M===I)break a;B=T[M]}while(1)}}function f(a,b,c,e,d,f,g,m,k,n,q,t,x,J){var l,w;q&&n&&((q.paths||(q.paths=[])).push((w=0===d-b)&&e.slice(0,b+!!f)||e.slice(0,b).concat(a.slice(b,d+!!f))),l=p(w&&r(h)||void 0,g,m,q,!w));return y(a,b,c,e,d,f,g,m,k,!w&&n,l,t,!0,J)}var e=Array.isArray,r=a(7),t=a(76),p=a(27),n=a(0),k=a(16),q=a(43),y=a(28),m=a(75),g=a(3),x=a(12),h=a(6);b.exports=c},function(b,d,a){function c(a,b,d,y,m,g,x,h,l,w,E,v,A){if(void 0===
b)return e(void 0,void 0,a,b,d,void 0,x,h,d,l,w,E,void 0,void 0,!1,m,g,!1,v,!1,void 0,A,void 0),g?f(p):void 0;var k,n,q,D,F=b.$keys,B=d+1,G,H=w+1;a&&"object"===typeof a?((y=a["\u001e\u0192_meta"])?k=y.keys:(a["\u001e\u0192_meta"]=y={__proto__:null},y.version=0),y.abs_path=l.slice(0,w)):(a={__proto__:r.prototype},a["\u001e\u0192_meta"]=y={__proto__:null},y.version=0,y.abs_path=l.slice(0,w),m&&(a=m(a)));n={__proto__:null};var J,L=-1,Q=F.length;a:for(;++L<Q;)if(D=F[L],J=b[L],null===D){if(void 0!==J)throw new t;
}else{if("object"!==typeof D)q=D,G=void 0,D=!1;else{G=D.to;q=D.from||0;"number"!==typeof G&&(G=q+(D.length||0)-1);if(0>G-q)break a;D=!0}do h[d]=q,l[w]=q,n[q]=!0,k&&q in k&&(k[q]=!1),a[q]=c(a[q],J,B,B,m,g,x,h,l,H,E,v,A);while(D&&++q<=G)}y.$code="__incomplete__";y.keys=n;if(k)for(q in k)k[q]&&delete a[q];return a}var f=a(7),e=a(16),r=a(2),t=a(3);a(12);var p=a(6);b.exports=c},function(b,d,a){function c(a,b,d){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===b||!f(b))&&void 0!==
a[b]}).forEach(function(e){var d=a[e],k=b[e];k||(k=b[e]={});if(d.$type){k=!d["\u001e\u0192_wrapped_value"];if(d.value&&"object"===typeof d.value||k){var k={},r=Object.keys(d),p,m,g;m=0;for(g=r.length;m<g;m++)p=r[m],"$type"!==p&&f(p)||(k[p]=d[p]);d=k}else d=d.value;b[e]=d}else c(d,k,e)})}var f=a(21);b.exports=function(a){var b={};c(a,b);return b}},function(b,d,a){var c=a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,d,a){var c=Array.isArray,f=
a(104),e=a(58),r=a(59);b.exports=function(a){for(var b=[],d=-1,k=a.length,q,t,m,g;++d<k;)m=a[d],c(m)?(m={path:m},g="PathValues"):f(m)?g="PathValues":r(m)?g="JSONGraphs":e(m)&&(g="PathMaps"),t!==g&&(t=g,b.push(q={arguments:[],inputType:g})),q.arguments.push(m);return b}},function(b,d,a){function c(a,b,c,d,n){f(a,b,n);return{}}var f=a(29);a(45);b.exports={json:c,jsonGraph:c}},function(b,d,a){var c=a(50),f=a(0),e=a(44),r=a(1),t=a(48),p=a(9),n=a(47),k=a(57),q=a(11);b.exports=function(a,b,d,x,h,l,w,E,
v,A,u,C){var g,m,y,B,G,H;if(b===d){if(void 0===d)return d;if(null===d)return b=c(d,void 0,d),a=q(a,-b.$size,v,w),b=e(b,a,x,void 0,l);if((y=!(!b||"object"!==typeof b))&&void 0===(g=b.$type))return void 0===b["\u001e\u0192_parent"]&&e(b,a,x,w,l),b}else if(y=!(!b||"object"!==typeof b))g=b.$type;if("ref"!==g){if(B=!(!d||"object"!==typeof d))m=d.$type;if(y&&!g&&(null==d||B&&!m))return b}else{if(null==d){if(f(b,C)){r(b,E,v);return}return b}if(B=!(!d||"object"!==typeof d))if(m=d.$type,"ref"===m)if(b===d){if(null!=
b["\u001e\u0192_parent"])return b}else if(G=b.$timestamp,H=d.$timestamp,!f(b,C)&&!f(d,C)&&H<G)return}if(g&&B&&!m)return e(t(b,d,a,x,v,w),a,x,void 0,l);if(m||!B){"error"===m&&u&&(d=u(n(h,x),d));if(m&&b===d)null==b["\u001e\u0192_parent"]&&(b=c(b,g,b.value),a=q(a,-b.$size,v,w),b=e(b,a,x,w,l));else{h=!0;if(!y||g&&!f(b,C))h=A?!A(b,d,l.slice(0,l.index)):m?!g||!1===k(d)<k(b)||!(g!==m||b.value!==d.value||b.$expires!==d.$expires):!b||b.value!==d;h&&(d=c(d,m,m?d.value:d),A=p(b)-p(d),b=t(b,d,a,x,v,w),a=q(a,
A,v,w),b=e(b,a,x,w,l))}f(b,!0)&&r(b,E,v)}else null==b&&(b=e(d,a,x,void 0,l));return b}},function(b,d,a){function c(a,c){for(var e=!1,d=-1,k=c.length,g=[],r=[],h=a._root.errorSelector;++d<k;){var l=c[d],n=l.inputType,l=l.arguments;if(0<l.length){var p=(0,b.exports["set"+n])(a,l,h,null,!1),e=e||p[2];r.push.apply(r,p[1]);"PathValues"===n?g.push.apply(g,l.map(f)):"JSONGraphs"===n?g.push.apply(g,t(l,f)):g.push.apply(g,p[0])}}return{changed:e,requested:g,optimized:r}}function f(a){return a.path||a.paths}
var e=a(25),r=a(26),t=a(100),p=a(81);b.exports={json:function(a,b,d,f,m){var g,k,h,l,n,q,t=p(b);g=c(a,t);if((b=g.requested).length){if(!(h=g.changed)||f)k=e(a,b,d,f,m);h&&(a=r({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},g.optimized,{},f,m),n=a.data,l=n.paths,q=a.requested)}return{args:t,data:d,missing:l,relative:b,fragments:n,requested:q,error:k&&k.error,errors:k&&k.errors,hasValue:k&&k.hasValue}},jsonGraph:function(a,b,e,d,f){var g,k,h,l,m,n=p(b);
b=c(a,n);(k=b.requested).length&&(d||b.changed)&&(g=r({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},b.optimized,e,d,f),l=g.data,h=l.paths,m=g.requested);return{args:n,data:e,missing:h,relative:k,fragments:l,requested:m,error:g&&g.error,hasValue:g&&g.hasValue}},setPathMaps:a(20),setPathValues:a(31),setJSONGraphs:a(19)}},function(b,d,a){b.exports=function(a,b){for(var c=a["\u001e\u0192_refs_length"]||0,d=b["\u001e\u0192_refs_length"]||0,f=-1;++f<c;){var p=
a["\u001e\u0192_ref"+f];void 0!==p&&(p["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(d+f)]=p,a["\u001e\u0192_ref"+f]=void 0)}b["\u001e\u0192_refs_length"]=c+d;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,d,a){b.exports=function(a){for(var b=-1,c=a["\u001e\u0192_refs_length"]||0;++b<c;){var d=a["\u001e\u0192_ref"+b];null!=d&&(d["\u001e\u0192_context"]=d["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,d,a){b.exports=
function(a){var b=a["\u001e\u0192_context"];if(b){for(var c=(a["\u001e\u0192_ref_index"]||0)-1,d=(b["\u001e\u0192_refs_length"]||0)-1;++c<=d;)b["\u001e\u0192_ref"+c]=b["\u001e\u0192_ref"+(c+1)];b["\u001e\u0192_refs_length"]=d;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=void 0}return a}},function(b,d,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?!1:!0:!0}},function(b,
d,a){var c=a(2),f=a(10);a(91);b.exports=function(a){var b;if(!a||"object"!==typeof a||!(b=a["\u001e\u0192_meta"])||"object"!==typeof b)return null;var d=this._root.cache,e=this._recycleJSON,n=b.abs_path,k,q;if(!n)return this._clone({_node:void 0,_seed:e&&{json:a,__proto__:c.prototype}||void 0});if(0===n.length)return this._clone({_node:d,_path:n,_referenceContainer:!0,_seed:e&&{json:a,__proto__:c.prototype}||void 0});var y=b.deref_to,m=b.deref_from,g=f(d,n),x="e";if(m){x=!1;b=-1;q=m.length;for(k=
d;++b<q&&(k=k[m[b]],k&&!k.$type););if(y&&k&&"ref"===k.$type)for(x=!0,q=y.length,d=k.value,b=0;b<q;++b)if(d[b]!==y[b]){g=void 0;x=!1;break}}x?"e"===x&&(k=!0):k=!1;return this._clone({_node:g,_path:n,_referenceContainer:k,_seed:e&&{json:a,__proto__:c.prototype}||void 0})}},function(b,d,a){d=a(4);b.exports=d("BoundJSONGraphModelError",function(){this.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,d,a){d=a(4);
b.exports=d("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,d,a){d=a(4);b.exports=d("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},function(b,d,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}d=a(4);b.exports=d("MaxRetryExceededError",function(a,
b,d,t){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(d&&"relative: [\n\t"+c(d)+"\n]\n"||"")+(t&&"optimized: [\n\t"+c(t)+"\n]\n"||"")})},function(b,d){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,d,a){function c(a,b,c){n.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function e(a,b,c,d,e,f){k.call(this,
a);this.data=b;this.retryCount=-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function r(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=m(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(v){throw v;}finally{--c.syncRefCount}}function t(a,b){try{throw b;}catch(w){k.prototype.onError.call(a,w)}}function p(a,b){for(var c,d,e,h=Object.keys(b),f=-1,l=h.length;++f<l;)e=h[f],"\u001e\u0192_meta"===e?a["\u001e\u0192_meta"]=b["\u001e\u0192_meta"]:(d=b[e],
c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:p(c,d):void 0===c&&(a[e]=d)));return a}var n=a(55),k=a(14),q=a(53),y=a(2),m=a(35),g=a(52),x=a(93);b.exports=c;c.prototype=Object.create(n.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;a.progressive=a.progressive||this.operator.progressive;a.maxRetryCount=
a.maxRetryCount||this.operator.maxRetryCount;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){void 0===a&&(a={__proto__:y.prototype});return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype._toJSONG=function(a,b){void 0===
a&&(a={__proto__:y.prototype});return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),this.source)};f.prototype.call=
function(a,b){return a.subscribe(new e(b,this.data,this.errors,this.operation,this.progressive))};e.prototype=Object.create(k.prototype);e.prototype.operations={get:a(71),set:a(84),call:a(70),invalidate:a(82)};e.prototype.next=e.prototype.onNext=function(a){if(this.started){var b,c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,f=this.errors,h,g=this.hasValue,k=this.operation,m=this.progressive,n=m&&d;n&&(d={__proto__:y.prototype});if(a&&a.length){h=this.operations[c][k](e,a,d,m||!e._source,
-1===this.retryCount);if(h.error)return t(this,h.error);f&&h.errors&&f.push.apply(f,h.errors);if(b=h.fragments)a=h.args,this.fragments=b;this.relative=h.relative;this.requested=h.requested;this.missing=b=h.missing;this.hasValue=g||(g=h.hasValue)}this.completed=!b||!e._source;"set"!==c&&(this.args=a,n&&(this.data=p(d,this.data)));m&&g&&d&&(d.json||d.jsonGraph)&&r(d,k,e._root,this.destination)}else this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||
this.model._root.maxRetryCount};e.prototype.error=e.prototype.onError=function(a){if(a instanceof g)return k.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};e.prototype.complete=e.prototype.onCompleted=function(a){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&r(b,this.operation,this.model._root,this.destination),
b=this.errors,c||a||b&&b.length?t(this,b.length&&b||a):k.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return t(this,new x(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)};e.prototype.dispose=e.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=
this.started=this.errored=!1;k.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&q(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,d,a){function c(a){p.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var e=a(55),r=a(97),t=a(14),p=a(15),n=a(56);b.exports=c;c.prototype=
Object.create(p.prototype);c.prototype.set=function(a,b,c,d){var f=this;return new e(function(e){var h=new r("set",f,a._source,new n);e=h.subscribe(new t(e,h));f.add(h);h.data=d.jsonGraph;h.requested.push(c);h.optimized.push(b);h.connect();return e})};c.prototype.call=function(a,b,c,d){var f=this;return new e(function(b){var c=new r("call",f,a._source,new n);b=c.subscribe(new t(b,c));f.add(c);c.data=d;c.boundPath=a._path;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,
a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,h=-1,l=b.subscriptions,k=l.length,n=new p([],a);++h<k;){var v=l[h];if("get"===v.type&&((v=v.batch(d,e,d=[],e=[]))&&n.add(v.subscribe(new t(a,v))),!e.length))break}e.length&&(v=l[h]=(new r("get",b,c,f)).batch(d,e),n.add(v.subscribe(new t(a,v))),v.connect());return n}},function(b,d,a){function c(a,b,c,d){t.call(this,[],b);this.tree={};this.paths=[];this.type=
a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=y(this.tree=g(this.optimized.reduce(function(a,b){return m(b,a)},{})));try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(w){this.disposable=
{},t.prototype.onError.call(this,new p(w))}}function e(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,h,g=-1,l=b.length;a:for(;++g<l;)if(h=b[g],h.length>c){f=0;do if(h[f]!==a[f])continue a;while(++f<c);d[++e]=h.slice(c)}return d}var r=Array.isArray,t=a(98);a(14);a(15);var p=a(52),n=a(19),k=a(31),q=a(29),y=a(38),m=a(36),g=a(37),x=a(64);b.exports=c;c.prototype=Object.create(t.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){var c=a,d=0,f=0;if(r(a)){if(0>=
(f=a.length))return;c=a[0]}!1===this.responded&&(this.responded=!0,b.remove(this));var h=this.boundPath;do{var g=c.jsonGraph,k=this.requested,m=b.modelRoot,p=c.invalidated,t=c.paths||this.paths;p&&p.length&&q({_root:m,_path:[]},p,!1);t&&t.length&&g&&"object"===typeof g&&(t=n({_root:m},[{paths:t,jsonGraph:g}],m.errorSelector,m.comparator,!1)[0])}while(++d<f&&(c=a[d]));this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",paths:k[b]||e(h,t)})})}};c.prototype.error=c.prototype.onError=function(a){var b=
this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=y(g(this.requested.reduce(function(a,b){return m(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&k({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);t.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});
t.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=
this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();t.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};c.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,h=-1,k=-1,l=-1,m=b.length,p=a.length-1;++h<m;){var n=b[h],r=n.length,q=g[r];q&&x(q,n,0,r)?(f[++l]=n,e[l]=a[h<p?h:p]):(d[++k]=n,c[k]=a[h<p?
h:p])}return~l?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,d,a){function c(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),e=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};
c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new e([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=[]}},function(b,d){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,d){b.exports=
function(a,b){for(var c=-1,d=-1,r=a.length,t=[];++d<r;)for(var p=b(a[d],d,a),n=-1,k=p.length;++n<k;)t[++c]=p[n];return t}},function(b,d,a){var c=Array.isArray,f=a(32);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=a[d])}return b}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,d,a){var c=a(5);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,d,a){var c=Array.isArray,
f=a(5);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,d,a){b.exports=a(106)},function(b,d,a){(function(b,f){Object.defineProperty(d,"__esModule",{value:!0});var c=a(107),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);d["default"]=b}).call(d,a(34),a(108)(b))},function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d["default"]=function(a){var b=a.Symbol;
"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,d){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,d,a){b.exports=a(62)}])});
//# sourceMappingURL=falcor.all.min.js.map
