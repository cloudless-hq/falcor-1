(function(b,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("falcor",[],e):"object"===typeof exports?exports.falcor=e():b.falcor=e()})(this,function(){return function(b){function e(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,e);f.l=!0;return f.exports}var a={};e.m=b;e.c=a;e.i=function(a){return a};e.d=function(a,f,d){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:d})};
e.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};e.d(c,"a",c);return c};e.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};e.p="";return e(e.s=111)}([function(b,e){b.exports="ref"},function(b,e,a){var c=a(61),f=a(35),d=a(62);b.exports=function(a,l){a=a.$expires;return void 0===a||null===a||a===d?!1:a===f?l:a<c()}},function(b,e){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,e,a){var c=a(55);b.exports=function(a,d,
m){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,d.push(a),c(m,a));return a}},function(b,e){b.exports=function(a,c){function f(a){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack;this.message=a;c&&c.apply(this,arguments)}f.prototype=Error();f.prototype.name=a;f.prototype.constructor=f;f.is=function(d){return d.name===a};return f}},function(b,e){b.exports={$type:"atom"}},function(b,e,a){b.exports=function(a,f){var d=f["\u001e\u0192_refs_length"]||
0;f["\u001e\u0192_ref"+d]=a;f["\u001e\u0192_refs_length"]=d+1;a["\u001e\u0192_ref_index"]=d;a["\u001e\u0192_context"]=f}},function(b,e,a){(function(a){function c(a){this["\u001e\u0192_meta"]=a||{}}function d(d){var c=typeof d,f=arguments.length;if(0===f)d=this;else if(c!==e){if(!d||c!==q)return d}else{if(1!==f)return d;d=this}return d===a?void 0:d}function m(){return n(d.apply(this,arguments),m,!1)}function l(a){a=d.apply(this,arguments);var f,m=0,k=n(a,l,!0);a&&(f=a["\u001e\u0192_meta"])&&(m=f.version);
k&&typeof k===q&&(k.__proto__=c.prototype,f=k["\u001e\u0192_meta"])&&(f.version=m);return k}function n(a,d,c){if(!a||typeof a!==q)return a;var f,g,h,m,l,b;if(p(a))b=a;else{b={};f=-1;m=Object.keys(a);g=m.length;if(c&&(h=a["\u001e\u0192_meta"])){var u=h.$code,n=h.abs_path,v=h.deref_to,x=h.deref_from;h=b["\u001e\u0192_meta"]={};u&&(h.$code=u);n&&(h.abs_path=n);v&&(h.deref_to=v);x&&(h.deref_from=x)}for(;++f<g;)"\u001e\u0192_meta"!==(l=m[f])&&(b[l]=d(a[l],d,c))}return b}c.prototype=Object.create(Object.prototype,
Object.assign({toJSON:{value:m},toProps:{value:l},toString:{value:function(a){return JSON.stringify(n(d.call(this,this),n,!0===a))}},$__hash:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.version||0}}},"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,
d){var c=Array.prototype[d];a[d]={writable:!0,enumerable:!1,value:function(){return c.apply(this,arguments)}};return a},{})));var p=Array.isArray,q="object",e="string";b.exports=c}).call(e,a(36))},function(b,e,a){e=a(4);b.exports=e("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,e,a){var c=a(2);b.exports=function(a){return c(a)&&a.$size||0}},function(b,e,a){var c=a(34);b.exports=function(a){for(var d,f=Object.keys(a),l={},b=-1,p=f.length;++b<
p;)d=f[b],c(d)||(l[d]=a[d]);return l}},function(b,e,a){function c(a,m){var d=a,b,p=0,q=m.length;if(0<q){do for(d=d[m[p]];d&&(b=d.$type)===f;)d=c(a,d.value);while(++p<q&&d&&!b)}return d}var f=a(0);b.exports=c},function(b,e,a){var c=a(30),f=a(50);b.exports=function(a,m,b,n){var d=a;do{var q=d["\u001e\u0192_parent"];0>=(d.$size=(d.$size||0)-m)&&null!=q?c(d,q,d["\u001e\u0192_key"],b):d["\u001e\u0192_version"]!==n&&f(d,n);d=q}while(d);return a}},function(b,e,a){var c=a(62);b.exports=function(a,d){if(d.$expires!==
c){var f=a["\u001e\u0192_head"];if(!f)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=d;else if(f!==d){var b=d["\u001e\u0192_prev"],n=d["\u001e\u0192_next"];n&&(n["\u001e\u0192_prev"]=b);b&&(b["\u001e\u0192_next"]=n);d["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=d;d["\u001e\u0192_next"]=f;f["\u001e\u0192_prev"]=d;d===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=b)}}}},function(b,e,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination=
{error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.next=c.prototype.onNext=function(a){var d=this.destination;if(d)if(d.onNext)d.onNext(a);else d.next&&d.next(a)};c.prototype.error=c.prototype.onError=function(a){var d=!1,c=this.destination;c&&(c.onError?(d=!0,c.onError(a)):c.error&&(d=!0,c.error(a)),this.dispose());if(!d)throw a;};c.prototype.complete=c.prototype.onCompleted=
function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,e){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=
a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&a.remove(this)}},function(b,e){b.exports="error"},function(b,e,a){var c=a(11);b.exports=function(a,d){d=d||a._path;var f=a._node;if(!f||void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=null,0===d.length?f=a._root.cache:(f=c(a._root.cache,d),d===a._path&&(a._node=f));return f}},function(b,e,a){function c(a,d,k,g,h,m,b,q,
u,l,n,p,e,r,D,F,G,J){var z={},t=d<a.length-1,v=a[d],A=y(v,z),x=p.index;do{n.depth=d;var w=f(k,g,h,m,b,q,A,t,!1,n,p,e,r,D,F,G,J);n[d]=A;n.index=d;var C=w[0],B=w[1],E=w[4];E[E.index++]=A;C&&(t?c(a,d+1,k,B,C,m,w[3],w[2],u,l,n,E,e,r,D,F,G,J):(u.push(n.slice(0,n.index+1)),l.push(E.slice(0,E.index))));A=y(v,z);if(z.done)break;p.index=x}while(1)}function f(a,c,k,g,h,b,t,w,u,A,e,y,E,H,D,F,G){for(u=k.$type;u===m;){a:{c=a;h=g;e=A;var z=y,v=E,x=H,C=D,B=F,X=G,R,I,K=k.value;u=K.slice(0);if(l(k,X))n(k,v,x),k=void 0,
R=c,I=h,u.index=K.length;else{var S=0,O=k,P=K.length-1;R=k=c;I=b=h;do{var V=K[S],ba=S<P;u.index=S;I=f(c,R,k,h,I,b,V,ba,!0,e,u,z,v,x,C,B,X);k=I[0];u=I[4];if(!k||"object"!==typeof k){u.index=S;e=I;break a}R=I[1];b=I[2];I=I[3]}while(S++<P);u.index=S;O["\u001e\u0192_context"]!==k&&p(O,k)}d[0]=k;d[1]=R;d[2]=b;d[3]=I;d[4]=u;e=d}k=e[0];if(!k||"object"!==typeof k)return e;c=e[1];b=e[2];h=e[3];e=e[4];u=k.$type}if(void 0===u){if(null==t){if(w)throw new r;k&&(t=k["\u001e\u0192_key"])}else c=k,h=b,k=c[t],b=h&&
h[t];k=q(c,k,b,t,A,e,y,E,H,D,F,G)}d[0]=k;d[1]=c;d[2]=b;d[3]=h;d[4]=e;return d}var d=Array(5),m=a(0),l=a(1),n=a(3),p=a(6),q=a(83),r=a(8),y=a(23);b.exports=function(a,f,k,g,h){var m=a._root,b=m.expired,q=m.version++,u=m.cache;a=u["\u001e\u0192_version"];for(var l=[],n=[],p=[],v=[],e=-1,x=f.length;++e<x;)for(var r=f[e],y=r.paths,r=r.jsonGraph,J=-1,N=y.length;++J<N;){var L=y[J];n.index=0;c(L,0,u,u,u,r,r,r,p,v,l,n,q,b,m,g,k,h)}d[0]=void 0;d[1]=void 0;d[2]=void 0;d[3]=void 0;d[4]=void 0;f=u["\u001e\u0192_version"];
(k=m.onChange)&&a!==f&&k();return[p,v]}},function(b,e,a){function c(a,d,h,b,q,l,u,n,p,v,e,x,r,F,G){var g;if(a&&"object"===typeof a&&!a.$type){g=[];var k=0;m(a)&&(g[k++]="length");for(var t in a)y(t)||(g[k++]=t)}else g=void 0;if(g&&g.length){k=0;t=g.length;var z=p.index;do{var w=g[k],A=a[w],C=!(!A||"object"!==typeof A)&&!A.$type;n.depth=d;var B=f(h,b,q,w,A,C,!1,n,p,v,e,x,r,F,G);n[d]=w;n.index=d;var E=B[0],D=B[1],B=B[2];B[B.index++]=w;E&&(C?c(A,d+1,h,D,E,l,u,n,B,v,e,x,r,F,G):(l.push(n.slice(0,n.index+
1)),u.push(B.slice(0,B.index))));if(++k>=t)break;p.index=z}while(1)}}function f(a,c,h,m,b,e,u,A,r,y,E,H,D,F,G){for(var g=h.$type;g===l;){a:{c=b;r=a;var g=A,k,t=y,z=E,w=H,C=D,B=F,I=G,K,S=h.value;k=S.slice(0);if(n(h,I))p(h,z,w),h=void 0,K=r,k.index=S.length;else{var O=h;h=h["\u001e\u0192_context"];if(null!=h)K=h["\u001e\u0192_parent"]||r,k.index=S.length;else{var P=0,V=S.length-1;k.index=P;K=h=r;do{K=f(r,K,h,S[P],c,P<V,!0,g,k,t,z,w,C,B,I);h=K[0];k=K[2];if(!h||"object"!==typeof h){k.index=P;r=K;break a}K=
K[1]}while(P++<V);k.index=P;O["\u001e\u0192_context"]!==h&&q(O,h)}}d[0]=h;d[1]=K;d[2]=k;r=d}h=r[0];if(!h||"object"!==typeof h)return r;c=r[1];r=r[2];g=h&&h.$type}if(void 0===g){if(null==m){if(e)throw new v;h&&(m=h["\u001e\u0192_key"])}else c=h,h=c[m];h=x(c,h,m,b,e,u,A,r,y,E,H,D,F,G)}d[0]=h;d[1]=c;d[2]=r;return d}var d=Array(3),m=Array.isArray,l=a(0),n=a(1),p=a(3),q=a(6),r=a(11),y=a(20),v=a(8),x=a(47);b.exports=function(a,g,h,f,m){var k=a._root,b=k.expired,q=k.version++,n=a._path,t=k.cache,l=r(t,n),
z=l["\u001e\u0192_parent"]||t;a=t["\u001e\u0192_version"];for(var p=[],v=[],e=[],x=n.length,y=-1,L=g.length;++y<L;){var M=g[y],T=n.slice(0);T.index=x;c(M.json,0,t,z,l,v,e,p,T,q,b,k,f,h,m)}d[0]=void 0;d[1]=void 0;d[2]=void 0;g=t["\u001e\u0192_version"];(k=k.onChange)&&a!==g&&k();return[v,e]}},function(b,e,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(34)},function(b,e){function a(c,f,d){d=d||[];f=f||[];for(var m=[],b=c.$keys,n=b.length,p=-1;++p<n;){var q=c[p],e=b[p];q?a(q,f,d.concat([e])):
m.push(e)}1===m.length?f.push(d.concat(m)):1<m.length&&f.push(d.concat([m]));return f}b.exports=a},function(b,e){b.exports=function(a){for(var c=5381,f=a.length;f;)c=33*c^a.charCodeAt(--f);return c>>>0}},function(b,e){function a(a,d){var c=d.from=a.from||0;a=d.to=a.to||"number"===typeof a.length&&d.from+a.length-1||0;d.rangeOffset=d.from;d.loaded=!0;c>a&&(d.empty=!0)}var c=Array.isArray;b.exports=function(f,d){if(void 0===d.isArray){d.done=!1;var m=d.isObject=!(!f||"object"!==typeof f);d.isArray=
m&&c(f);d.arrayOffset=0}if(d.isArray){var b;do{d.loaded&&d.rangeOffset>d.to&&(++d.arrayOffset,d.loaded=!1);if(d.arrayOffset>=f.length){d.done=!0;break}m=f[d.arrayOffset];"object"===typeof m?(d.loaded||a(m,d),d.empty||(b=d.rangeOffset++)):(++d.arrayOffset,b=m)}while(void 0===b);return b}if(d.isObject){d.loaded||a(f,d);if(d.rangeOffset>d.to){d.done=!0;return}return d.rangeOffset++}d.done=!0;return f}},function(b,e,a){b.exports=a(41)},function(b,e,a){b.exports=a(44)},function(b,e){b.exports=function(a,
c,f,d,m){var b=0,n;n=d.jsonGraph;n||(d.jsonGraph=n={});do{d=c[b++];if(b>=f){n=n[d]=!0!==m?a:n[d]||{};break}n=n[d]||(n[d]={})}while(1);return n}},function(b,e,a){var c=Array.isArray,f=a(40).pathToTree,d=a(5);b.exports=function(a,b,n,p,q,e,y,v,x,k,g,h){if(x||g){for(var m,t=-1,l=(e=q-b)&&Array(e)||void 0;++t<e;){m=a[t+b];var u;u=m;if("object"!==typeof u||null===u)u=!1;else if(c(u))u=0===u.length;else{var A=u.to,r=u.from||0;"number"!==typeof A&&(A=r+(u.length||0));u=r>=A}if(u)return;l[t]=m}var B;a=null===
m;m=x;var E;x?(u=q,A=p,E=n.requested||(n.requested=[])):(b=v,A=y,u=v+e-Number(a));do{if(e<q||!m){p=-1;t=b;for(B=Array(u);++p<t;)B[p]=A[p];for(t=-1;p<u;)B[p++]=l[++t]}if(m=!m){x&&(E[E.length]=B);break}E[E.length]=B||l;b=v;A=y;E=n.missing||(n.missing=[]);u=v+e-Number(a)}while(1);if(g)return 0===e?d:f(k,B,b,u,d,h)}}},function(b,e,a){var c=a(1),f=a(3),d=a(13);b.exports=function(a,b,n,e,q,r,y,v,x,k,g,h,z,t,w,u,A,C,B,E,H,D){var m=C;if(!a||!b)return C&&(m=!0,r&&(y.hasValue=!0)),D(e,q,y,v,x,h,k,g,B,n,m,u);
if(c(a,w))return a["\u001e\u0192_invalidated"]||f(a,t,z),D(e,q,y,v,x,h,k,g,B,n,m,u);d(z,a);if(r)return h&&(v[q]=null),H(a,b,q,r,y,v,k,g,h,A,C,E)}},function(b,e,a){function c(a,h,b,m,q,u,n,l,e){var g={},t=h<a.length-1,z=a[h],p=v(z,g);do{d=f(b,m,q,p,t,!1,u,n,l,e);var A=d[0],w=d[1];A&&(t?c(a,h+1,b,w,A,u,n,l,e):k(A,w,p,l)&&x(w,r(A),l,u));p=v(z,g)}while(!g.done)}function f(a,c,b,k,l,u,e,v,x,r){for(u=b.$type;u===m;){a:{c=a;u=e;var g=v,h=x,t=r;if(n(b,t))p(b,g,h),d[0]=void 0,d[1]=c;else{q(h,b);var A=b,z=
b.value,w;b=b["\u001e\u0192_context"];if(null!=b)w=b["\u001e\u0192_parent"]||c;else{var B=0,C=z.length-1;w=b=c;do{d=f(c,w,b,z[B],B<C,!0,u,g,h,t);b=d[0];if(!b&&"object"!==typeof b)break a;w=d[1]}while(B++<C);A["\u001e\u0192_context"]!==b&&y(A,b)}d[0]=b;d[1]=w}}b=d[0];if(!b&&"object"!==typeof b)return d;c=d[1];u=b.$type}if(void 0!==u)return[b,c];if(null==k){if(l)throw Error("`null` is not allowed in branch key positions.");}else c=b,b=c[k];d[0]=b;d[1]=c;return d}var d=Array(2),m=a(0),l=a(17),n=a(1),
p=a(3),q=a(13),r=a(9),y=a(6),v=a(23),x=a(12),k=a(31);b.exports=function(a,b,f){var g=a._root,h=g.expired,k=g.version++,m=g.cache,q=l(a),n=q["\u001e\u0192_parent"]||m;a=m["\u001e\u0192_version"];for(var e=-1,p=b.length;++e<p;)c(b[e],0,m,n,q,k,h,g,f);d[0]=void 0;d[1]=void 0;b=m["\u001e\u0192_version"];(g=g.onChange)&&a!==b&&g()}},function(b,e,a){var c=a(0),f=a(55),d=a(86),m=a(87);b.exports=function(a,b,e,q){if(a&&"object"===typeof a){var n=a.$type;n&&(n===c&&m(a),f(q,a));d(a);b[e]=a["\u001e\u0192_parent"]=
void 0;return!0}return!1}},function(b,e,a){var c=a(30),f=a(20);b.exports=function m(a,b,e,q){if(c(a,b,e,q)){if(null==a.$type)for(var n in a)f(n)||m(a[n],a,n,q);return!0}return!1}},function(b,e,a){function c(a,d,g,b,m,q,n,u,e,p,v,l,r,D,F,G){var h={},k=g<d.length-1,t=d[g],x=y(t,h),z=p.index;do{e.depth=g;e[g]=x;e.index=g;var w=f(b,m,q,x,a,k,!1,e,p,v,l,r,D,F,G);e[g]=x;e.index=g;var A=w[0],B=w[1],w=w[2];w[w.index++]=x;A&&(k?c(a,d,g+1,b,B,A,n,u,e,w,v,l,r,D,F,G):(n.push(e.slice(0,e.index+1)),u.push(w.slice(0,
w.index))));x=y(t,h);if(h.done)break;p.index=z}while(1)}function f(a,c,g,b,q,e,w,u,A,y,B,E,H,D,F){for(var h=g.$type;h===m;){a:{c=q;A=a;var h=u,k,t=y,x=B,z=E,C=H,X=D,R=F,I,K=g.value;k=K.slice(0);if(l(g,R))n(g,x,z),g=void 0,I=A,k.index=K.length;else{var S=g;g=g["\u001e\u0192_context"];if(null!=g)I=g["\u001e\u0192_parent"]||A,k.index=K.length;else{var O=0,P=K.length-1;I=g=A;do{var V=K[O],ba=O<P;k.index=O;I=f(A,I,g,V,c,ba,!0,h,k,t,x,z,C,X,R);g=I[0];k=I[2];if(!g||"object"!==typeof g){k.index=O;A=I;break a}I=
I[1]}while(O++<P);k.index=O;S["\u001e\u0192_context"]!==g&&p(S,g)}}d[0]=g;d[1]=I;d[2]=k;A=d}g=A[0];if(!g||"object"!==typeof g)return A;c=A[1];A=A[2];h=g.$type}if(!e||void 0===h){if(null==b){if(e)throw new r;g&&(b=g["\u001e\u0192_key"])}else c=g,g=c[b];g=v(c,g,b,q,e,w,u,A,y,B,E,H,D,F)}d[0]=g;d[1]=c;d[2]=A;return d}var d=Array(3),m=a(0),l=a(1),n=a(3),p=a(6),q=a(11),r=a(8),y=a(23),v=a(47);b.exports=function(a,b,g,h,f){var k=a._root,m=k.expired,n=k.version++,e=a._path,p=k.cache,v=q(p,e),l=v["\u001e\u0192_parent"]||
p;a=p["\u001e\u0192_version"];for(var x=[],z=[],r=[],y=e.length,J=-1,N=b.length;++J<N;){var L=b[J],M=L.path,L=L.value,T=e.slice(0);T.index=y;c(L,M,0,p,l,v,z,r,x,T,n,m,k,h,g,f)}d[0]=void 0;d[1]=void 0;d[2]=void 0;b=p["\u001e\u0192_version"];(k=k.onChange)&&a!==b&&k();return[z,r]}},function(b,e,a){e=a(4);b.exports=e("InvalidKeySetError",function(a,b){this.mesage="The KeySet "+JSON.stringify(b)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,
e,a){e=a(94);e=new RegExp("^"+e,"i","g");b.exports=e.test.bind(e)},function(b,e){b.exports=0},function(b,e){e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(e=window)}b.exports=e},function(b,e,a){var c=Array.isArray,f=a(21);b.exports=function(a,b){if(a)c(a)||c(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,d){var c=d.length;a[c]||(a[c]=[]);a[c].push(d);return a},b||{})}},function(b,e,a){var c=a(40);b.exports=function(a,
d){return Object.keys(a).reduce(function(d,b){d[b]=c(a[b],d[b]);return d},d||{})}},function(b,e,a){function c(a,b,f){var k,g=Object.create(null),h=""+q(""+b),n=[],e=-1,p=0,u=[],v=0,l,x,r,y,D,F;r=[];y=-1;if(b<f-1){for(D=d(a,r);++y<D;)k=r[y],l=c(a[k],b+1,f),x=l.code,g[x]?l=g[x]:(n[p++]=x,l=g[x]={keys:[],sets:l.sets}),h=""+q(h+k+x),m(k)&&l.keys.push(parseInt(k,10))||l.keys.push(k);for(;++e<p;)if(k=n[e],l=g[k],r=l.keys,D=r.length,0<D)for(a=l.sets,b=-1,f=a.length,y=r[0];++b<f;){k=a[b];l=-1;x=k.length;
F=Array(x+1);for(F[0]=1<D&&r||y;++l<x;)F[l+1]=k[l];u[v++]=F}}else for(D=d(a,r),1<D?u[v++]=[r]:u[v++]=r;++y<D;)h=""+q(h+r[y]);return{code:h,sets:u}}function f(a,d){return a-d}function d(a,d,c){var b=0;if(a===r)d[b++]=null;else{for(var g in a)d[b++]=g;1<b&&d.sort(c)}return b}function m(a){var d=a,c=typeof a;if("string"===c){d=a.length;if(0===d||17<d||!p.test(a))return!1;if(16>d)return!0;d=+a}else if("number"!==c)return!1;return 0===d%1&&9007199254740991>=n(d)}var l=Array.isArray,n=Math.abs,p=/^(0|(\-?[1-9][0-9]*))$/,
q=a(22),r=a(5);b.exports=function(a){var d,b=[],k=0,g;for(g in a){var h;if(h=m(g))h=d=a[g],h=null!==h&&"object"===typeof h;if(h){h=c(d,0,parseInt(g,10)).sets;for(var q=-1,n=h.length;++q<n;){for(var e=k++,u=h[q],p=-1,r=u.length;++p<r;){var y=u[p];if(l(y)){var E=u,H=p;for(var D=-1,F=y.length-1,G=0<F;++D<=F;){var J=y[D];if(!m(J)){G=!1;break}y[D]=parseInt(J,10)}!0===G&&(y.sort(f),D=y[0],G=y[F],G-D<=F&&(y={from:D,to:G}));E[H]=y}}b[e]=u}}}return b};b.exports._isSafeNumber=m},function(b,e,a){function c(a,
b,n,e,q,r){if(n===e)return!0;var m,p,l=-1,k=0,g,h=n+1,z,t,w;p=b[n];if(null===p)return d;m=p;a=a?a:r?r(b,n,a):{};a:do{if("object"!==typeof p)r=p,t=void 0,z=!1;else if(f(p)){if(void 0!==w)break a;l=0;w=p;k=p.length;if(0===k)break a;p=w[l];continue a}else{t=p.to;r=p.from||0;"number"!==typeof t&&(t=r+(p.length||0)-1);if(0>t-r)break a;z=!0}do h===e?a[r]=q:(p=a[b[n]=r],(g=c(p,b,h,e,q))?p||(a[r]=g):a[r]=q);while(z&&++r<=t);if(++l===k)break a;p=w[l]}while(1);b[n]=m;return a}var f=Array.isArray,d=a(5);b.exports=
function(a,d){return a.reduce(function(a,d){return c(a,d,0,d.length,null)},d||{})};b.exports.pathToTree=c},function(b,e,a){var c=a(75),f=a(74),d=a(17),m=a(92),l=a(67),n=a(65);b.exports=function(a,b,e,y,v){var q,k;y=a._path;var g=a._root,h=g.cache,p,t,r,u=y&&y.length||0;if(u){if((q=d(a))&&q.$type)return{error:new m(y,y)};r=[];for(k=0;k<u;++k)r[k]=y[k];k=a._referenceContainer}else q=h,r=[];p=[];var A=!1,C=e&&e.json,B={data:e},E=a._boxed,H=g.expired;t=a._recycleJSON;var D=a._materialized,F=!!a._source,
G=g.branchSelector,J=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;var N,L=0,M=b.length;if(0<M)if(t){M=1;A=!0;b[0].$keys||(b=[n(l(b,{}))]);do N=b[L],t=f(h,q,C,N,0,e,B,p,r,u,!1,k,g,H,v,G,E,D,F,J,a),C=t[0],t[0]=void 0,t[1]=void 0;while(++L<M)}else{do N=b[L],t=N.length,C=c(h,q,C,N,0,e,B,p,t,r,u,!1,k,g,H,v,G,E,D,F,J,a);while(++L<M)}v=B.requested;B.args=A&&b||v;if(v&&v.length&&(B.relative=B.args,u)){b=[];k=0;for(u=v.length;k<u;++k)b[k]=y.concat(v[k]);B.requested=b}B.hasValue&&(e.json=C);return B}},
function(b,e,a){var c=Array(3),f=a(0),d=a(13),m=a(1),l=a(6),n=a(52);b.exports=function(a,b,e,y){d(e,b);var q,p,k=0,g=a,h=b.value,r=h,t=h.length;do{if(0===k&&void 0!==(q=b["\u001e\u0192_context"]))g=q,k=t;else if(p=h[k++],void 0===(g=g[p]))break;if(k===t){p=g.$type;if(void 0!==p&&m(g,y))break;else{if(g===b)throw new n(h);g!==q&&l(b,g)}if(p===f)d(e,g),k=0,b=g,g=a,h=r=b.value,t=h.length;else break}else if(void 0!==g.$type)break}while(1);k<t&&void 0!==g&&(t=k);k=-1;for(h=Array(t);++k<t;)h[k]=r[k];c[0]=
g;c[1]=h;c[2]=b;return c}},function(b,e,a){var c=a(10),f=a(73),d=a(16),m=a(5);b.exports=function(a,b,e,q,r,y,v,x,k,g,h,z){if(d===b&&!z)return f(a,e,r,y,k,g);e=a&&a.value;if(b&&void 0===e){if(h)return r.hasValue=!0,m}else return r.hasValue=!0,g?c(a):e}},function(b,e,a){var c=a(78),f=a(90);b.exports=function(a,b,e,n,p){var d,m;d=a._path;n=a._root;var l,v,x=d&&d.length||0;if(x)return{error:new f};v=[];m=d=n.cache;l=[];for(var k=a._boxed,g=n.expired,h=a._materialized,z=!!a._source,t=a._treatErrorsAsValues,
w={data:e},u=-1,A=b.length;++u<A;){var C=b[u];a=C.length;c(m,d,C,0,e,w,l,a,v,x,!1,n,g,p,k,h,z,t)}w.args=w.relative=w.requested;return w}},function(b,e,a){b.exports=function(a,b,d,m,e){a["\u001e\u0192_key"]=d;a["\u001e\u0192_parent"]=b;void 0!==m&&(a["\u001e\u0192_version"]=m);a["\u001e\u0192_abs_path"]||(a["\u001e\u0192_abs_path"]=e.slice(0,e.index).concat(d));return b[d]=a}},function(b,e,a){function c(a,d,b,m,e,q,n,l,r,B){if(a&&"object"===typeof a&&!a.$type)for(var g in a)if(!y(g)){var h=a[g],k=
!(!h||"object"!==typeof h)&&!h.$type,u=f(b,m,e,g,h,k,!1,q,n,l,r,B),t=u[0],u=u[1];t&&(k?c(h,d+1,b,u,t,q,n,l,r,B):x(t,u,g,l)&&v(u,p(t),l,q))}}function f(a,b,c,e,p,r,u,v,x,y,E,H){for(u=c.$type;u===d;){a:{b=p;u=a;var g=v,k=x,h=y,t=E,w=H;if(m(c,w))l(c,k,h),b=[void 0,u];else{n(h,c);var z=c,A=c.value,B;c=c["\u001e\u0192_context"];if(null!=c)B=c["\u001e\u0192_parent"]||u;else{var C=0,R=A.length-1;B=c=u;do{B=f(u,B,c,A[C],b,C<R,!0,g,k,h,t,w);c=B[0];if(!c||"object"!==typeof c){b=B;break a}B=B[1]}while(C++<R);
z["\u001e\u0192_context"]!==c&&q(z,c)}b=[c,B]}}c=b[0];if(!c&&"object"!==typeof c)return b;b=b[1];u=c&&c.$type}if(void 0!==u)return[c,b];if(null==e){if(r)throw Error("`null` is not allowed in branch key positions.");}else b=c,c=b[e];return[c,b]}var d=a(0),m=a(1),l=a(3),n=a(13),p=a(9),q=a(6),r=a(17),y=a(20),v=a(12),x=a(31);b.exports=function(a,d,b){var g=a._root,f=g.expired,k=g.version++,h=g._comparator,m=g.cache,e=r(a),q=e["\u001e\u0192_parent"]||m;a=m["\u001e\u0192_version"];for(var n=-1,p=d.length;++n<
p;)c(d[n].json,0,m,q,e,k,f,g,h,b);d=m["\u001e\u0192_version"];(g=g.onChange)&&a!==d&&g()}},function(b,e,a){var c=a(0),f=a(16),d=a(35),m=a(103),l=a(9),n=a(58),p=a(51),q=a(1),r=a(3),y=a(45),v=a(49),x=a(48),k=a(12);b.exports=function(a,b,e,t,w,u,A,C,B,E,H,D,F,G){G=m(b,u);if(w||u){if(G&&q(b,!0)&&(r(b,E,H),G=b.$expires===d?G:"expired"),G&&G!==c||!b||"object"!==typeof b)b=v(b,{},a,e,H,B),b=y(b,a,e,B,C)}else w=m(t),u=!1===n(t)<n(b),(G||w)&&D&&(u=!D(b,t,C.slice(0,C.index))),u&&(F&&w===f&&(t=F(x(A,e),t)),
t=p(t,w,w?t.value:t),A=l(b)-l(t),b=v(b,t,a,e,H,B),a=k(a,A,H,B),b=y(b,a,e,B,C));return b}},function(b,e){b.exports=function(a,b){a=a.slice(0,a.depth);a[a.length]=b;return a}},function(b,e,a){var c=a(85),f=a(31),d=a(50);b.exports=function(a,b,e,p,q,r){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,e,p,q),d(b,r));return e[p]=b}},function(b,e,a){b.exports=function(a,b){var d=[a],c=0;do{var f=d[c];if(f&&f["\u001e\u0192_version"]!==b){f["\u001e\u0192_version"]=b;d[c++]=f["\u001e\u0192_parent"];for(var e=
-1,p=f["\u001e\u0192_refs_length"]||0;++e<p;)d[c++]=f["\u001e\u0192_ref"+e]}}while(-1<--c);return a}},function(b,e,a){var c=Array.isArray,f=a(61),d=a(35),m=a(106),l=a(101),n=a(9),p=a(102);b.exports=function(a,b,e){var q=0;if(b){var r=a["\u001e\u0192_wrapped_value"];a=l(a);q=n(a);a.$type=b;a["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=r||!1}else a={$type:m,value:e,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==
e)q=51;else if(null==q||0>=q)switch(typeof e){case "object":q=c(e)?50+e.length:51;break;case "string":q=50+e.length;break;default:q=51}b=p(a);"number"===typeof b&&b<d&&(a.$expires=f()+-1*b);a.$size=q;return a}},function(b,e,a){e=a(4);b.exports=e("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,e,a){e=a(4);b.exports=e("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,
e,a){var c=a(30),f=a(12);b.exports=function(a,b,e,n,p,q){var d=p;"number"!==typeof d&&(d=.75);p="number"===typeof q;var d=n*d,m,l,x;for(l=b.pop();l;)x=l.$size||0,e-=x,!0===p?f(l,x,a,q):(m=l["\u001e\u0192_parent"])&&c(l,m,l["\u001e\u0192_key"],a),l=b.pop();if(e>=n){for(l=b=a["\u001e\u0192_tail"];e>=d&&l;)b=b["\u001e\u0192_prev"],x=l.$size||0,e-=x,!0===p&&f(l,x,a,q),l=b;a["\u001e\u0192_tail"]=a["\u001e\u0192_prev"]=l;null==l?a["\u001e\u0192_head"]=a["\u001e\u0192_next"]=void 0:l["\u001e\u0192_next"]=
void 0}}},function(b,e,a){b.exports=function(a,b){var d=b["\u001e\u0192_prev"],c=b["\u001e\u0192_next"];c&&(c["\u001e\u0192_prev"]=d);d&&(d["\u001e\u0192_next"]=c);b["\u001e\u0192_prev"]=b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=c);b===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=d)}},function(b,e,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var d=a(14),e=a(15),l=a(107).default;
b.exports=f;f.prototype[l]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,b,c){return new e([this.operator.call(this.source,a instanceof d?a:new d(a,b,c))])};f.prototype.then=function(a,b){var d=this;this._promise||(this._promise=new c.Promise(function(a,b){var c=[],f=!1;d.subscribe({next:function(a){c[c.length]=a},error:function(a){f=!0;b(a)},complete:function(){!f&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,b)}}).call(e,
a(36))},function(b,e){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,e,a){var c=a(2);b.exports=function(a){return c(a)&&a.$timestamp||void 0}},function(b,e,a){var c=a(2);b.exports=function(a){return c(a)&&"json"in a}},function(b,e,a){var c=Array.isArray,f=a(2);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,e){b.exports=Date.now},
function(b,e){b.exports=1},function(b,e,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(68);e=a(7);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=e;c.toProps=e.prototype.toProps;b.exports=c},function(b,e,a){var c=a(39),f=a(37),d=a(38);b.exports=function(a){return c(d(f(a)))}},function(b,e,a){function c(a){if(void 0!==a){for(var b="",d=a.$keys,e=-1,p=d.length;++e<p;){var q=d[e];if(null===q)b=""+f(""+b+"null");else{"object"===typeof q&&(q="{from:"+q.from+
",length:"+q.length+"}");var r=c(a[e]),b=void 0===r?""+f(""+b+q):""+f(""+b+q+r.$code)}}a.$code=b;return a}}var f=a(22);b.exports=c},function(b,e,a){function c(a,b,e,p){if(e===p)return!0;var m,n=-1,l=0,v=e+1,x,k,g;m=b[e];if(null===m)return a===d;a:do{if("object"!==typeof m)e=m,k=void 0,x=!1;else if(f(m)){if(void 0!==g)break a;n=0;g=m;l=m.length;if(0===l)break a;m=g[n];continue a}else{k=m.to;e=m.from||0;"number"!==typeof k&&(k=e+(m.length||0)-1);if(0>k-e)break a;x=!0}do if(v===p){if(null!==a[e])return!1}else if(m=
a[e],null===m||void 0===m||!1===c(m,b,v,p))return!1;while(x&&++e<=k);if(++n===l)break a;m=g[n]}while(1);return!0}var f=Array.isArray,d=a(5);b.exports=c},function(b,e,a){function c(a,b){return a.reduce(function(a,b){return d(b)?f(a,b,0,b.length):c(l(b),a)},b||{})}function f(a,b,c,e){if(c!==e){a=a||{};var p=a.$keys||(a.$keys=[]),l=a.$keysMap||(a.$keysMap={}),n,k=-1,g=0,h,q=c+1,t;n=b[c];if(null===n)return m;a:do{if("object"!==typeof n)h=n,"undefined"===typeof(c=l[h])&&(c=p.length),p[c]=h,l[h]=c,n=f(a[c],
b,q,e),void 0!==n&&(a[c]=n);else if(d(n)){if(void 0!==t)break a;k=0;t=n;g=n.length;if(0===g)break a;n=t[k];continue a}else{c=n.to;h=n.from||0;"number"!==typeof c&&(c=h+(n.length||0)-1);if(0>c-h)break a;n={from:h,length:c-h+1};h="{from:"+h+",length:"+(c-h+1)+"}";"undefined"===typeof(c=l[h])&&(c=p.length);p[c]=n;l[h]=c;n=f(a[c],b,q,e);void 0!==n&&(a[c]=n)}if(++k===g)break a;n=t[k]}while(1);return a}}var d=Array.isArray,m={$keys:[null],$keysMap:{"null":0}},l=a(21);b.exports=c},function(b,e,a){function c(a){a=
a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new d(a,this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new p;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={__proto__:m.prototype});this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=
!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(95),d=a(70),m=a(7),l=a(69),n=a(99),p=a(57),q=a(54),r=a(9),y=a(2),v=a(59),x=a(11),k=a(60),g=a(19),h=a(18),z=a(24),t=a(79),w=a(25);b.exports=c;c.prototype.constructor=c;c.prototype.get=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(this._seed||{__proto__:m.prototype},[])};c.prototype.set=
function(){return(new f("set",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:m.prototype},[])};c.prototype.preload=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,[])};c.prototype.call=function(){return(new f("call",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:m.prototype},[])};c.prototype.invalidate=function(){return(new f("invalidate",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,null).then()};c.prototype.deref=
a(89);c.prototype._hasValidParentReference=a(88);c.prototype.getValue=function(a){return this.get(a).lift(function(b){return this.subscribe({onNext:function(c){var d=-1;c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return this.set(b).lift(function(b){return this.subscribe({onNext:function(c){var d=-1;
c=c.json;for(var g=a.length;c&&!c.$type&&++d<g;)c=c[a[d]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=function(a){var b=this._root.cache;if(a!==b){var c=this._root,d=this._path;this._path=[];this._node=this._root.cache={};"undefined"!==typeof b&&(q(c,c.expired,r(b),0),this._recycleJSON&&(this._seed={__proto__:m.prototype}));var e;k(a)?e=h(this,[a])[0]:v(a)?e=g(this,[a])[0]:y(a)&&(e=g(this,[{json:a}])[0]);e&&z(this,e,null,!1,!0);this._path=d}else"undefined"===
typeof b&&(this._root.cache={});return this};c.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return t(this._root.cache);var b={},c=this._path;this._path=[];w(this,a,b);this._path=c;return b.jsonGraph};c.prototype.getVersion=function(a){a=void 0===a?[]:a;if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=
new c(this);if(a)for(var d in a){var g=a[d];"delete"===g?delete b[d]:"_path"===d?(b[d]=g,!1===a.hasOwnProperty("_node")&&delete b._node):b[d]=g}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new n(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new n(1);return this._clone({_scheduler:b})};c.prototype.unbatch=function(){return this._clone({_scheduler:new p})};c.prototype.treatErrorsAsValues=
function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new l(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};c.prototype.toJSON=
function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=x(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||[]).slice(0)};c.prototype._getVersion=a(80);c.prototype._getPathValuesAsPathMap=z;c.prototype._getPathValuesAsJSONG=w;c.prototype._setPathValues=a(32);c.prototype._setPathMaps=a(19);c.prototype._setJSONGs=
a(18);c.prototype._setCache=a(19);c.prototype._invalidatePathValues=a(29);c.prototype._invalidatePathMaps=a(46)},function(b,e){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,d,e){return this._model.call.apply(this._model,[a,b,d].concat(e))._toJSONG()};b.exports=a},function(b,e,a){function c(a,b){a=a||{};
this.cache={};this.syncRefCount=this.version=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new d(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&(this.comparator=a.comparator);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=
a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(104),d=a(96);c.prototype.errorSelector=function(a,b){return b};c.prototype.comparator=function(a,b){return f(a,"value")&&f(b,"value")?a.value===b.value&&a.$type===b.$type&&a.$expires===b.$expires:a===b};b.exports=c},function(b,e,a){var c=a(24),f=a(25);
b.exports={json:function(a,b,e,f){var d=!1;if(!b)return{missing:!1,hasValue:!1};var m=[].concat(b[1]||[]),n=[].concat(b[2]||[]),l=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);f&&l&&l.length&&(d=c(a,l,e,f,!0).hasValue);return{data:e,missing:!0,hasValue:d,fragments:[b,m,n,l]}},jsonGraph:function(a,b,c,e){var d=!1;if(!b)return{missing:!1,hasValue:!1};var m=[].concat(b[1]||[]),n=[].concat(b[2]||[]),l=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);e&&l&&l.length&&(d=f({_root:a._root,_boxed:a._boxed,
_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},l,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:d,fragments:[b,m,n,l]}}}},function(b,e,a){b.exports={json:a(41),jsonGraph:a(44)}},function(b,e,a){var c=a(10);b.exports=function(a,b,e,l,n,p){var d=-1;b+=!!n;n=Array(b);for(a=p?c(a):a.value;++d<b;)n[d]=l[d];(e.errors||(e.errors=[])).push({path:n,value:a})}},function(b,e,a){function c(a,b,d,e,h,m,v,E,H,D,F,G,J,N,L,M,T,X,R,I,K){var t,u;if(void 0===b||void 0!==(t=b.$type)||
void 0===e)return l[1]=!1,l[0]=r(b,t,d,e,h,m,v,E,h,H,D,F,J,N,L,M,T,X,R,I,n,f),l;var z,w,A;t="";var B,C,Q,Z=e.$keys,ha=h+1,U,Y,ca,aa,ea,ia=D+1,da,la;K&&G&&(la=G.value,da=G["\u001e\u0192_abs_path"]);if(d)if("object"!==typeof d)d=void 0;else if(z=d["\u001e\u0192_meta"]){if(!(M||d instanceof q))w={},d=(w["\u001e\u0192_meta"]=z,w.__proto__=q.prototype,w);else if(z.version===b["\u001e\u0192_version"]&&z.$code===e.$code&&z.abs_path===b["\u001e\u0192_abs_path"])return v.hasValue=!0,l[0]=d,l[1]=!1,l;w=z.keys;
z.version=b["\u001e\u0192_version"];z.abs_path=b["\u001e\u0192_abs_path"];z.deref_to=la;z.deref_from=da}A={};var ma=-1,na=Z.length,fa,ka,ga=!1;a:for(;++ma<na;)if(Q=Z[ma],fa=e[ma],null===Q){if(void 0!==fa)throw new k;t=""+g(""+t+"null")}else{if("object"!==typeof Q)C=Q,U=void 0,Q=!1,ka=C;else{U=Q.to;C=Q.from||0;"number"!==typeof U&&(U=C+(Q.length||0)-1);if(0>U-C)break a;Q=!0;ka="{from:"+C+",length:"+(U-C+1)+"}"}do F=!1,Y=d&&d[C],ea=H,aa=ia,ca=G,B=b[C],E[h]=C,H[D]=C,B&&void 0!==fa&&B.$type===p&&!y(B,
L)&&(u=x(a,B,J,L),B=u[0],F=!0,ea=u[1],ca=u[2],aa=ea.length,u[0]=u[1]=u[2]=void 0),l=c(a,B,Y,fa,ha,m,v,E,ea,aa,F,ca,J,N,L,M,T,X,R,I,K),Y=l[0],ga=ga||l[1],m&&(void 0!==Y?(void 0===z&&(z={},z.version=b["\u001e\u0192_version"],z.abs_path=b["\u001e\u0192_abs_path"],z.deref_to=la,z.deref_from=da,d={},F={},d=M&&M((d["\u001e\u0192_meta"]=z,d.__proto__=q.prototype,d))||(F["\u001e\u0192_meta"]=z,F.__proto__=q.prototype,F)),A[C]=!0,w&&w.hasOwnProperty(C)&&(w[C]=!1),d[C]=Y):(ga=!0,d&&d.hasOwnProperty(C)&&delete d[C]));
while(Q&&++C<=U);ga||(t=void 0===fa?""+g(""+t+ka):""+g(""+t+ka+fa.$code))}ga&&(t="__incomplete__");if(z&&(z.$code=t,z.keys=A,w))for(C in w)w[C]&&delete d[C];l[0]=d;l[1]=ga;return l}function f(a,b,c,g,e,f,k,n,p,l,q,r){a=a?h(a):[[]];var t=g.slice(0,e),z=r?d(r):m;return a.reduce(function(a,d){e=b+d.length;return v(t.concat(d),b,c,g,e,f,k,n,p,a,q,z)},l)}function d(a){return function(b,c,d){return a(d=m(b,c,d))||d}}function m(a,b,c){c={version:0};c.abs_path=a.slice(0,b);a={};return a["\u001e\u0192_meta"]=
c,a.__proto__=q.prototype,a}var l=Array(2),n=a(43),p=a(0),q=a(7),r=a(28),y=a(1),v=a(27),x=a(42),k=a(8);a(33);var g=a(22),h=a(21);b.exports=c},function(b,e,a){function c(a,b,d,e,m,v,C,B,E,H,D,F,G,J,N,L,M,T,X,R,I,K){var h,t;if(void 0===b||(h=b.$type)||m===E)return r(b,h,d,e,m,v,C,B,E,H,D,F,J,N,L,M,T,X,R,I,n,f);var z,u,w,A=m+1,W,Q,Z,ha,U=-1,Y=0,ca,aa,ea=D+1,ia,da;w=e[m];if(null===w){if(A<E)throw new k;return d}K&&G&&(da=G.value,ia=G["\u001e\u0192_abs_path"]);if(d)if("object"!==typeof d)d=void 0;else if(z=
d["\u001e\u0192_meta"])z.version=b["\u001e\u0192_version"],z.abs_path=b["\u001e\u0192_abs_path"],z.deref_to=da,z.deref_from=ia;a:do{if("object"!==typeof w)h=w,W=void 0,w=!1;else if(l(w)){if(void 0!==Q)throw new g(e,Q);U=0;Q=w;Y=w.length;if(0===Y)break a;w=Q[U];continue a}else{W=w.to;h=w.from||0;"number"!==typeof W&&(W=h+(w.length||0)-1);if(0>W-h)break a;w=!0}do F=!1,Z=d&&d[h],aa=H,ca=ea,ha=G,u=b[h],B[m]=h,H[D]=h,u&&A<E&&u.$type===p&&!y(u,L)&&(t=x(a,u,J,L),u=t[0],F=!0,aa=t[1],ha=t[2],ca=aa.length,
t[0]=t[1]=t[2]=void 0),Z=c(a,u,Z,e,A,v,C,B,E,aa,ca,F,ha,J,N,L,M,T,X,R,I,K),void 0!==Z&&(void 0===z&&(z={},z.version=b["\u001e\u0192_version"],z.abs_path=b["\u001e\u0192_abs_path"],z.deref_to=da,z.deref_from=ia,d={},F={},d=M&&M((d["\u001e\u0192_meta"]=z,d.__proto__=q.prototype,d))||(F["\u001e\u0192_meta"]=z,F.__proto__=q.prototype,F)),d[h]=Z);while(w&&++h<=W);if(++U===Y)break a;w=Q[U]}while(1);return d}function f(a,b,c,e,g,f,k,n,p,l,q,r){r=r?d(r):m;return v(a,b,c,e,g,f,k,n,p,l,q,r)}function d(a){return function(b,
c,d){return a(d=m(b,c,d))||d}}function m(a,b,c){c={version:0};c.abs_path=a.slice(0,b);a={};return a["\u001e\u0192_meta"]=c,a.__proto__=q.prototype,a}var l=Array.isArray,n=a(43),p=a(0),q=a(7),r=a(28),y=a(1),v=a(27),x=a(42),k=a(8),g=a(33);b.exports=c},function(b,e,a){var c=Array(2),f=a(10),d=a(0),m=a(26),l=a(13),n=a(1),p=a(6),q=a(52);b.exports=function(a,b,e,x,k){l(e,b);var g,h,r=0,t=a,w=b.value,u=w,v=w.length;do{if(0===r&&void 0!==(g=b["\u001e\u0192_context"]))t=g,r=v;else if(h=w[r++],void 0===(t=
t[h]))break;if(r===v){h=t.$type;if(void 0!==h&&n(t,k))break;else{if(t===b)throw new q(w);t!==g&&p(b,t)}if(h===d)l(e,t),x&&m(f(t),w,v,x),r=0,b=t,t=a,w=u=b.value,v=w.length;else break}else if(void 0!==t.$type)break}while(1);r<v&&void 0!==t&&(v=r);r=-1;for(w=Array(v);++r<v;)w[r]=u[r];c[0]=t;c[1]=w;return c}},function(b,e,a){var c=a(10),f=a(0),d=a(16),m=a(26),l=a(5);b.exports=function(a,b,e,r,y,v,x,k,g,h,z){var n=a&&a.value;if(b&&void 0===n)if(z)n=l;else return;else if(h||f===b||d===b||!a["\u001e\u0192_wrapped_value"]||
"object"===typeof n)n=c(a);r&&(y.hasValue=!0,m(n,x,k,r),(r.paths||(r.paths=[])).push(v.slice(0,e+!!g)));return n}},function(b,e,a){function c(a,b,e,g,u,y,C,B,E,H,D,F,G,J,N,L,M,T){var h,t;if(void 0===b||(h=b.$type)||g===B)return q(b,h,u,e,g,u,y,C,B,E,H,D,F,G,J,void 0,N,L,M,T,n,f);var w,z,A=g+1,O,P,V=-1,ba=0,ja,W,Q=H+1;D=e[g];if(null===D){if(A<B)throw new x;}else{a:do{if("object"!==typeof D)h=D,O=void 0,z=!1;else if(d(D)){if(void 0!==P)throw new k(e,P);V=0;P=D;ba=D.length;if(0===ba)break a;D=P[V];continue a}else{O=
D.to;h=D.from||0;"number"!==typeof O&&(O=h+(D.length||0)-1);if(0>O-h)break a;z=!0}do D=!1,W=E,ja=Q,w=b[h],C[g]=h,E[H]=h,w&&A<B&&w.$type===l&&!r(w,J)&&(u&&p(m(w),E,ja,u),t=v(a,w,F,u,J),w=t[0],D=!0,W=t[1],ja=W.length,t[0]=t[1]=void 0),c(a,w,e,A,u,y,C,B,W,ja,D,F,G,J,N,L,M,T);while(z&&++h<=O);if(++V===ba)break a;D=P[V]}while(1)}}function f(a,b,c,d,e,f,k,m,n,l,q,r){var h;l&&q&&((l.paths||(l.paths=[])).push((r=0===e-b)&&d.slice(0,b+!!f)||d.slice(0,b).concat(a.slice(b,e+!!f))),h=p(r&&g||void 0,k,m,l,!r));
return y(a,b,c,d,e,f,k,m,n,h,q)}var d=Array.isArray,m=a(10),l=a(0),n=a(77),p=a(26),q=a(28),r=a(1),y=a(27),v=a(76),x=a(8),k=a(33),g=a(5);b.exports=c},function(b,e,a){function c(a,b,e){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===b||!f(b))&&void 0!==a[b]}).forEach(function(d){var e=a[d],m=b[d];m||(m=b[d]={});if(e.$type){m=!e["\u001e\u0192_wrapped_value"];if(e.value&&"object"===typeof e.value||m){var m={},n=Object.keys(e),l,v,x;v=0;for(x=n.length;v<x;v++)l=n[v],"$type"!==
l&&f(l)||(m[l]=e[l]);e=m}else e=e.value;b[d]=e}else c(e,m,d)})}var f=a(20);b.exports=function(a){var b={};c(a,b);return b}},function(b,e,a){var c=a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,e,a){var c=Array.isArray,f=a(105),d=a(59),m=a(60);b.exports=function(a){for(var b=[],e=-1,l=a.length,r,y,v,x;++e<l;)v=a[e],c(v)?(v={path:v},x="PathValues"):f(v)?x="PathValues":m(v)?x="JSONGraphs":d(v)&&(x="PathMaps"),y!==x&&(y=x,b.push(r={arguments:[],
inputType:x})),r.arguments.push(v);return b}},function(b,e,a){function c(a,b,c,e,p){f(a,b,p);return{}}var f=a(29);a(46);b.exports={json:c,jsonGraph:c}},function(b,e,a){var c=a(0),f=a(16),d=a(9),m=a(58),l=a(51),n=a(1),p=a(45),q=a(3),r=a(49),y=a(48),v=a(12);b.exports=function(a,b,e,h,z,t,w,u,A,C,B,E){var g,k,x,G,J,N;if(b===e){if(null===e)return b=l(e,void 0,e),a=v(a,-b.$size,A,w),b=p(b,a,h,void 0,t);if(void 0===e)return e;if(x=!(!b||"object"!==typeof b))if(g=b.$type,null==g)return null==b["\u001e\u0192_parent"]&&
p(b,a,h,w,t),b}else if(x=!(!b||"object"!==typeof b))g=b.$type;if(g!==c){if(G=!(!e||"object"!==typeof e))k=e.$type;if(x&&!g&&(null==e||G&&!k))return b}else{if(null==e){if(n(b,E)){q(b,u,A);return}return b}if(G=!(!e||"object"!==typeof e))if(k=e.$type,k===c)if(b===e){if(null!=b["\u001e\u0192_parent"])return b}else if(J=b.$timestamp,N=e.$timestamp,!n(b,E)&&!n(e,E)&&N<J)return}if(g&&G&&!k)return p(r(b,e,a,h,A,w),a,h,void 0,t);k||!G?(k===f&&B&&(e=B(y(z,h),e)),k&&b===e?null==b["\u001e\u0192_parent"]&&(b=
l(b,g,b.value),a=v(a,-b.$size,A,w),b=p(b,a,h,w,t)):(z=!0,(g&&!n(b,E)||!x)&&(z=!1===m(e)<m(b))&&(g||k)&&C&&(z=!C(b,e,t.slice(0,t.index))),z&&(e=l(e,k,k?e.value:e),C=d(b)-d(e),b=r(b,e,a,h,A,w),a=v(a,C,A,w),b=p(b,a,h,w,t))),n(b,!0)&&q(b,u,A)):null==b&&(b=p(e,a,h,void 0,t));return b}},function(b,e,a){function c(a,c){for(var d=-1,e=c.length,m=[],n=[],k=a._root.errorSelector;++d<e;){var g=c[d],h=g.inputType,g=g.arguments;if(0<g.length){var p=(0,b.exports["set"+h])(a,g,k,null,!1);n.push.apply(n,p[1]);"PathValues"===
h?m.push.apply(m,g.map(f)):"JSONGraphs"===h?m.push.apply(m,l(g,f)):m.push.apply(m,p[0])}}return{optimized:n,relative:m}}function f(a){return a.path||a.paths}var d=a(24),m=a(25),l=a(100),n=a(81);b.exports={json:function(a,b,e,f,l){b=n(b);var q=c(a,b),k=f&&d(a,q.relative,e,f,l);a=m({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},q.optimized,{},f,l);return{args:b,data:e,fragments:a.data,missing:q.optimized,relative:q.relative,error:k&&k.error,errors:k&&k.errors,
requested:a.requested,hasValue:k&&k.hasValue}},jsonGraph:function(a,b,d,e,f){b=n(b);var l=c(a,b);a=m({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},l.optimized,d,e,f);return{args:b,data:d,error:a.error,fragments:a.data,missing:l.optimized,relative:l.relative,hasValue:a.hasValue,requested:a.requested}},setPathMaps:a(19),setPathValues:a(32),setJSONGraphs:a(18)}},function(b,e,a){b.exports=function(a,b){for(var c=a["\u001e\u0192_refs_length"]||0,e=b["\u001e\u0192_refs_length"]||
0,f=-1;++f<c;){var n=a["\u001e\u0192_ref"+f];void 0!==n&&(n["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(e+f)]=n,a["\u001e\u0192_ref"+f]=void 0)}b["\u001e\u0192_refs_length"]=c+e;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,e,a){b.exports=function(a){for(var b=-1,c=a["\u001e\u0192_refs_length"]||0;++b<c;){var e=a["\u001e\u0192_ref"+b];null!=e&&(e["\u001e\u0192_context"]=e["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,
e,a){b.exports=function(a){var b=a["\u001e\u0192_context"];if(b){for(var c=(a["\u001e\u0192_ref_index"]||0)-1,e=(b["\u001e\u0192_refs_length"]||0)-1;++c<=e;)b["\u001e\u0192_ref"+c]=b["\u001e\u0192_ref"+(c+1)];b["\u001e\u0192_refs_length"]=e;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=void 0}return a}},function(b,e,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?
!1:!0:!0}},function(b,e,a){var c=a(0),f=a(7),d=a(11),m=a(91);b.exports=function(a){if(!a||"object"!==typeof a)throw new m;var b,e,l,r;l=a&&a["\u001e\u0192_meta"];if(!l||"object"!==typeof l)return this._clone({_node:void 0});var y=this._recycleJSON,v=l.abs_path;if(!v)return this._clone({_node:void 0,_seed:y&&{json:a,__proto__:f.prototype}||void 0});if(0===v.length)return this._clone({_path:v,_node:this._root.cache,_referenceContainer:!0,_seed:y&&{json:a,__proto__:f.prototype}||void 0});var x=l.deref_to;
e=l.deref_from;var k=this._root.cache,g=d(k,v),h="e";if(e){h=!1;l=-1;r=e.length;for(b=k;++l<r&&(b=b[e[l]],b&&!b.$type););if(x&&b&&b.$type===c){l=0;r=x.length;e=b.value;for(h=!0;h&&l<r;++l)e[l]!==x[l]&&(h=!1);!1===h&&(g=void 0)}}h?"e"===h&&(b=!0):b=!1;return this._clone({_node:g,_path:v,_referenceContainer:b,_seed:y&&{json:a,__proto__:f.prototype}||void 0})}},function(b,e,a){e=a(4);b.exports=e("BoundJSONGraphModelError",function(){this.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},
function(b,e,a){e=a(4);b.exports=e("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,e,a){e=a(4);b.exports=e("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},function(b,e,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}e=a(4);b.exports=e("MaxRetryExceededError",
function(a,b,e,l){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(e&&"relative: [\n\t"+c(e)+"\n]\n"||"")+(l&&"optimized: [\n\t"+c(l)+"\n]\n"||"")})},function(b,e){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,e,a){function c(a,b,c){p.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function d(a,
b,c,d,e,f){q.call(this,a);this.data=b;this.retryCount=-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function m(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=v(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(w){throw w;}finally{--c.syncRefCount}}function l(a,b){try{throw b;}catch(z){q.prototype.onError.call(a,z)}}function n(a,b){for(var c,d,e,g=Object.keys(b),f=-1,h=g.length;++f<h;)e=g[f],"\u001e\u0192_meta"===e?a["\u001e\u0192_meta"]=b["\u001e\u0192_meta"]:
(d=b[e],c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:n(c,d):void 0===c&&(a[e]=d)));return a}var p=a(56),q=a(14),r=a(54),y=a(7),v=a(64),x=a(53),k=a(93);b.exports=c;c.prototype=Object.create(p.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.operator=a;b.type=this.type;b.model=this.model;b._args=this._args;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});
a.onCompleted();return a};c.prototype._toJSON=function(a,b){a=void 0===a?{__proto__:y.prototype}:a;return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype._toJSONG=function(a,b){a=void 0===a?{__proto__:y.prototype}:a;return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,
this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),this.source)};f.prototype.call=function(a,b){return a.subscribe(new d(b,this.data,this.errors,this.operation,this.progressive))};d.prototype=Object.create(q.prototype);d.prototype.operations={get:a(72),set:a(84),call:a(71),invalidate:a(82)};d.prototype.next=d.prototype.onNext=function(a){if(this.started){var b,
c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,f=this.errors,g,k=this.hasValue,r=this.operation,q=this.progressive,p=q&&d;p&&(d={__proto__:y.prototype});if(a&&a.length){g=this.operations[c][r](e,a,d,q||!e._source,-1===this.retryCount);if(g.error)return l(this,g.error);f&&g.errors&&f.push.apply(f,g.errors);if(b=g.fragments)a=g.args,this.fragments=b;this.relative=g.relative;this.requested=g.requested;this.missing=b=g.missing;this.hasValue=k||(k=g.hasValue)}this.completed=!b||!e._source;"set"!==
c&&(this.args=a,p&&(this.data=n(d,this.data)));q&&k&&d&&(d.json||d.jsonGraph)&&m(d,r,e._root,this.destination)}else this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||this.model._root.maxRetryCount};d.prototype.error=d.prototype.onError=function(a){if(a instanceof x)return q.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};d.prototype.complete=d.prototype.onCompleted=function(a){var b,c;if(!this.started&&(this.started=
!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&m(b,this.operation,this.model._root,this.destination),b=this.errors,c||a||b&&b.length?l(this,b.length&&b||a):q.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return l(this,new k(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,
this.missing,this.relative,this.fragments).subscribe(this)};d.prototype.dispose=d.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=this.started=this.errored=!1;q.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&r(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},
function(b,e,a){function c(a){n.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var d=a(56),m=a(97),l=a(14),n=a(15),p=a(57);b.exports=c;c.prototype=Object.create(n.prototype);c.prototype.set=function(a,b,c,e){var f=this;return new d(function(d){var g=new m("set",f,a._source,new p);d=g.subscribe(new l(d,g));f.add(g);g.data=e.jsonGraph;g.requested.push(c);g.optimized.push(b);g.connect();return d})};c.prototype.call=
function(a,b,c,e){var f=this;return new d(function(b){var c=new m("call",f,a._source,new p);b=c.subscribe(new l(b,c));f.add(c);c.data=e;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,g=-1,h=b.subscriptions,p=h.length,t=new n([],a);++g<p;){var q=h[g];if("get"===q.type&&((q=q.batch(d,e,d=[],e=[]))&&t.add(q.subscribe(new l(a,
q))),!e.length))break}e.length&&(q=h[g]=(new m("get",b,c,f)).batch(d,e),t.add(q.subscribe(new l(a,q))),q.connect());return t}},function(b,e,a){function c(a,b,c,e){d.call(this,[],b);this.tree={};this.paths=[];this.type=a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=e}function f(){this.active=!0;var a,b=this.paths=r(this.tree=v(this.optimized.reduce(function(a,b){return y(b,a)},{})));try{switch(this.type){case "get":a=
this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(h){this.disposable={},d.prototype.onError.call(this,new l(h))}}var d=a(98),m=a(16);a(14);a(15);var l=a(53),n=a(18),p=a(32),q=a(29),r=a(39),y=a(37),v=a(38),x=a(66);b.exports=c;c.prototype=Object.create(d.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){!1===this.responded&&
(this.responded=!0,b.remove(this));var c=a.jsonGraph,d=this.requested,b=b.modelRoot,e=a.invalidated,f=a.paths||this.paths;e&&e.length&&q({_root:b,_path:[]},e,!1);f&&f.length&&c&&"object"===typeof c&&n({_root:b},[{paths:f,jsonGraph:c}],b.errorSelector,b.comparator,!1);this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",paths:d[b]||f})})}};c.prototype.error=c.prototype.onError=function(a){var b=this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof
Error?{$type:m,value:{message:a.message}}:a.$type===m&&a||{$type:m,value:a};var b=b.modelRoot,c=r(v(this.requested.reduce(function(a,b){return y(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&p({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);d.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});d.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,
1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();d.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&
!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};c.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,m=-1,h=-1,l=-1,n=b.length,k=a.length-1;++m<n;){var p=b[m],q=p.length,r=g[q];r&&x(r,p,0,q)?(f[++l]=p,e[l]=a[m<k?m:k]):(d[++h]=p,c[h]=a[m<k?m:k])}return~l?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,e,a){function c(a,b){f.call(this,
null,b);this.observers=a||[]}var f=a(14),d=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new d([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=
[]}},function(b,e){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,e){b.exports=function(a,b){for(var c=-1,d=-1,e=a.length,l=[];++d<e;)for(var n=b(a[d],d,a),p=-1,q=n.length;++p<q;)l[++c]=n[p];return l}},function(b,e,a){var c=Array.isArray,f=a(34);b.exports=
function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=a[d])}return b}},function(b,e,a){var c=a(2);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,e,a){var c=a(2);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,e,a){var c=a(2),f=Object.prototype.hasOwnProperty;b.exports=function(a,b){return c(a)&&f.call(a,b)}},function(b,e,a){var c=Array.isArray,f=a(2);b.exports=function(a){return f(a)&&(c(a.path)||"string"===
typeof a.path)}},function(b,e){b.exports="atom"},function(b,e,a){b.exports=a(108)},function(b,e,a){(function(b,f){Object.defineProperty(e,"__esModule",{value:!0});var c=a(109),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);e["default"]=b}).call(e,a(36),a(110)(b))},function(b,e){Object.defineProperty(e,"__esModule",{value:!0});e["default"]=function(a){var b=a.Symbol;"function"===typeof b?b.observable?
a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,e){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,e,a){b.exports=a(63)}])});
//# sourceMappingURL=falcor.all.min.js.map
