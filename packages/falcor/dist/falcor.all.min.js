/*!
 * 
 * Copyright 2015 Netflix, Inc
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
(function(b,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("falcor",[],d):"object"===typeof exports?exports.falcor=d():b.falcor=d()})(this,function(){return function(b){function d(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};b[c].call(f.exports,f,f.exports,d);f.l=!0;return f.exports}var a={};d.m=b;d.c=a;d.i=function(a){return a};d.d=function(a,f,e){Object.defineProperty(a,f,{configurable:!1,enumerable:!0,get:e})};
d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)};d.p="";return d(d.s=109)}([function(b,d,a){var c=a(60),f=a(33),e=a(61);b.exports=function(a,b){a=a.$expires;return void 0===a||null===a||a===e?!1:a===f?b:a<c()}},function(b,d,a){var c=a(54);b.exports=function(a,e,q){a["\u001e\u0192_invalidated"]||(a["\u001e\u0192_invalidated"]=!0,e.push(a),c(q,a));return a}},function(b,
d,a){(function(a){function c(a){a?(this["\u001e\u0192_meta"]=a["\u001e\u0192_meta"])||(this["\u001e\u0192_meta"]=a):this["\u001e\u0192_meta"]={}}function e(a){function e(){return e.fn.apply(this,arguments)}return(e.fn=a)&&e}function q(e){var c=typeof e,f=arguments.length;if(0===f)e=this;else if(c!==y){if(!e||c!==r)return e}else{if(1!==f)return e;e=this}return e===a?void 0:e}function t(){return k(q.apply(this,arguments),t)}function p(a){a=q.apply(this,arguments);var e,c,h=0,f=k(a,p,!0,!0);a&&(e=a["\u001e\u0192_meta"])&&
(h=e.version);f&&typeof f===r&&(c=f["\u001e\u0192_meta"])&&(c.version=h);return f}function k(a,e,f,h){if(!a||typeof a!==r)return a;var q,g,x,n,k,u;if(m(a))u=a;else{q=-1;n=Object.keys(a);g=n.length;u=!h&&{}||{__proto__:c.prototype};if(f&&(x=a["\u001e\u0192_meta"])){var b=x.$code,p=x.abs_path,t=x.deref_to,y=x.deref_from;x={};b&&(x.$code=b);p&&(x.abs_path=p);t&&(x.deref_to=t);y&&(x.deref_from=y);u["\u001e\u0192_meta"]=x;h&&(u={__proto__:u})}for(;++q<g;)"\u001e\u0192_meta"!==(k=n[q])&&(u[k]=e(a[k],e,
f))}return u}c.prototype.toJSON=t;c.prototype.toProps=p;c.prototype.toString=function(a){return JSON.stringify(k(q.call(this,this),k,!0===a))};c.prototype.constructor=c;Object.defineProperties(c.prototype,"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,c){a[c]={writable:!0,enumerable:!1,value:e(Array.prototype[c])};return a},{$__hash:{enumerable:!1,
get:function(){var a=this["\u001e\u0192_meta"];return a&&a.$code||""}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192_meta"];return a&&a.version||0}}}));var m=Array.isArray,r="object",y="string";b.exports=c}).call(d,a(34))},function(b,d,a){d=a(4);b.exports=d("NullInPathError",function(){this.message="`null` is not allowed in branch key positions."})},function(b,d){b.exports=function(a,c){function f(a){this.message=a;c&&c.apply(this,arguments);Error.captureStackTrace?Error.captureStackTrace(this,
this.constructor):this.stack=Error().stack}f.prototype=Error();f.prototype.name=a;f.prototype.constructor=f;f.is=function(e){return e.name===a};return f}},function(b,d){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,d){b.exports={$type:"atom"}},function(b,d,a){var c=a(32);b.exports=function(a){for(var e,f=Object.keys(a),b={},p=-1,k=f.length;++p<k;)e=f[p],c(e)||(b[e]=a[e]);return b}},function(b,d,a){b.exports=function(a,f){var e=f["\u001e\u0192_refs_length"]||0;f["\u001e\u0192_ref"+
e]=a;f["\u001e\u0192_refs_length"]=e+1;a["\u001e\u0192_ref_index"]=e;a["\u001e\u0192_context"]=f}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&a.$size||0}},function(b,d,a){function c(a,e){var f=a,b,p=0,k=e.length;if(0<k){do for(f=f[e[p]];f&&"ref"===(b=f.$type);)f=c(a,f.value);while(++p<k&&f&&!b)}return f}b.exports=c},function(b,d,a){var c=a(30),f=a(49);b.exports=function(a,q,b,p){var e=a;do{var m=e["\u001e\u0192_parent"];0>=(e.$size=(e.$size||0)-q)&&null!=m?c(e,m,e["\u001e\u0192_key"],
b):e["\u001e\u0192_version"]!==p&&f(e,p);e=m}while(e);return a}},function(b,d,a){d=a(4);b.exports=d("InvalidKeySetError",function(a,f){this.mesage="The KeySet "+JSON.stringify(f)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges"})},function(b,d,a){var c=a(61);b.exports=function(a,e){if(e.$expires!==c){var f=a["\u001e\u0192_head"];if(!f)a["\u001e\u0192_head"]=a["\u001e\u0192_tail"]=e;else if(f!==e){var b=e["\u001e\u0192_prev"],p=e["\u001e\u0192_next"];p&&(p["\u001e\u0192_prev"]=
b);b&&(b["\u001e\u0192_next"]=p);e["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_head"]=e;e["\u001e\u0192_next"]=f;f["\u001e\u0192_prev"]=e;e===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=b)}}}},function(b,d,a){function c(a,c,b){"function"===typeof a||"function"===typeof c||"function"===typeof b?(f.call(this,[]),this.destination={error:c,onError:c,next:a,onNext:a,complete:b,onCompleted:b}):(f.call(this,[],c),this.parent=c,this.destination=a)}var f=a(15);b.exports=c;c.prototype=Object.create(f.prototype);
c.prototype.next=c.prototype.onNext=function(a){var e=this.destination;if(e)if(e.onNext)e.onNext(a);else e.next&&e.next(a)};c.prototype.error=c.prototype.onError=function(a){var e=!1,c=this.destination;c&&(c.onError?(e=!0,c.onError(a)):c.error&&(e=!0,c.error(a)),this.dispose());if(!e)throw a;};c.prototype.complete=c.prototype.onCompleted=function(){var a=this.destination;if(a){if(a.onCompleted)a.onCompleted();else a.complete&&a.complete();this.dispose()}};c.prototype.dispose=c.prototype.unsubscribe=
function(){this.destination=null;f.prototype.dispose.call(this)}},function(b,d){function a(a,f){this.parent=f;this.subscriptions=a||[]}b.exports=a;a.prototype.add=function(a){return this.subscriptions.push(a)&&this||this};a.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&this.subscriptions.splice(a,1);return this};a.prototype.dispose=a.prototype.unsubscribe=function(){for(var a,f=this.subscriptions;f.length;)(a=f.pop())&&a.dispose&&a.dispose();if(a=this.parent)this.parent=null,a.remove&&
a.remove(this)}},function(b,d,a){var c=a(0),f=a(1),e=a(13);b.exports=function(a,b,p,k,m,r,y,n,g,x,h,l,v,E,w,z,u,F,A,d,D,B,G){var q=A;if(b)if(c(a,w))a["\u001e\u0192_invalidated"]||f(a,E,v);else if(e(v,a),void 0===a.value)A=!1,q=F;else{if(r)return l&&(n[m]=null),D(a,b,m,r,y,n,x,h,l,u,F,d);return}if(F)r&&(y.hasValue=!0);else if(!q)return;return B(k,m,y,n,g,l,x,h,A,F,p,z,u,G)}},function(b,d,a){var c=a(10);b.exports=function(a,e){e=e||a._path;var f=a._node;if(!f||void 0===f["\u001e\u0192_parent"]||f["\u001e\u0192_invalidated"])a._node=
null,0===e.length?f=a._root.cache:(f=c(a._root.cache,e),e===a._path&&(a._node=f));return f}},function(b,d,a){var c=a(30),f=a(21);b.exports=function q(a,b,k,m){if(c(a,b,k,m)){if(null==a.$type)for(var p in a)f(p)||q(a[p],a,p,m);return!0}return!1}},function(b,d,a){function c(a,e,g,x,h,l,q,b,m,k,u,p,t,d,D,B,G,H){var n={},v=e<a.length-1,w=a[e],y=r(w,n),E=p.index;do{u.depth=e;var z=f(g,x,h,l,q,b,y,v,!1,u,p,t,d,D,B,G,H);u[e]=y;u.index=e;var F=z[0],A=z[1],C=z[4];C[C.index++]=y;F&&(v?c(a,e+1,g,A,F,l,z[3],
z[2],m,k,u,C,t,d,D,B,G,H):(m.push(u.slice(0,u.index+1)),k.push(C.slice(0,C.index))));y=r(w,n);if(n.done)break;p.index=E}while(1)}function f(a,c,g,x,h,l,b,E,w,z,u,r,d,C,D,B,G){for(w=g.$type;"ref"===w;){a:{c=a;h=x;u=z;var n=r,v=d,y=C,F=D,A=B,U=G,S,K,O=g.value;w=O.slice(0);if(q(g,U))t(g,v,y),g=void 0,S=c,K=h,w.index=O.length;else{var W=0,P=g,N=O.length-1;S=g=c;K=l=h;do{var T=O[W],M=W<N;w.index=W;K=f(c,S,g,h,K,l,T,M,!0,u,w,n,v,y,F,A,U);g=K[0];w=K[4];if(!g||"object"!==typeof g){w.index=W;u=K;break a}S=
K[1];l=K[2];K=K[3]}while(W++<N);w.index=W;P["\u001e\u0192_context"]!==g&&p(P,g)}e[0]=g;e[1]=S;e[2]=l;e[3]=K;e[4]=w;u=e}g=u[0];if(!g||"object"!==typeof g)return u;c=u[1];l=u[2];h=u[3];u=u[4];w=g.$type}if(void 0===w){if(null==b){if(E)throw new m;g&&(b=g["\u001e\u0192_key"])}else c=g,h=l,g=c[b],l=h&&h[b];g=k(c,g,l,b,z,u,r,d,C,D,B,G)}e[0]=g;e[1]=c;e[2]=l;e[3]=h;e[4]=u;return e}var e=Array(5),q=a(0),t=a(1),p=a(8),k=a(83),m=a(3),r=a(24);b.exports=function(a,f,g,x,h){a=a._root;for(var l=a.expired,q=a.version+
1,b=a.cache,n=b["\u001e\u0192_version"],m=[],u=[],k=[],p=[],t=-1,y=f.length;++t<y;)for(var r=f[t],d=r.paths,r=r.jsonGraph,H=-1,J=d.length;++H<J;){var L=d[H];u.index=0;c(L,0,b,b,b,r,r,r,k,p,m,u,q,l,a,x,g,h)}e[0]=void 0;e[1]=void 0;e[2]=void 0;e[3]=void 0;e[4]=void 0;f=b["\u001e\u0192_version"];g=a.onChange;n!==f&&(a.version=q,g&&g());return[k,p,n!==f]}},function(b,d,a){function c(a,e,h,l,b,n,m,k,u,p,t,y,d,B,G){var x;if(a&&"object"===typeof a&&!a.$type){x=[];var g=0;q(a)&&(x[g++]="length");for(var v in a)r(v)||
(x[g++]=v)}else x=void 0;if(x&&x.length){g=0;v=x.length;var w=u.index;do{var E=x[g],z=a[E],F=!(!z||"object"!==typeof z)&&!z.$type;k.depth=e;var A=f(h,l,b,E,z,F,!1,k,u,p,t,y,d,B,G);k[e]=E;k.index=e;var C=A[0],D=A[1],A=A[2];A[A.index++]=E;C&&(F?c(z,e+1,h,D,C,n,m,k,A,p,t,y,d,B,G):(n.push(k.slice(0,k.index+1)),m.push(A.slice(0,A.index))));if(++g>=v)break;u.index=w}while(1)}}function f(a,c,h,l,q,b,m,r,u,d,A,C,D,B,G){for(var x=h.$type;"ref"===x;){a:{c=q;u=a;var x=r,g,v=d,w=A,E=C,z=D,F=B,K=G,O,W=h.value;
g=W.slice(0);if(t(h,K))p(h,w,E),h=void 0,O=u,g.index=W.length;else{var P=h;h=h["\u001e\u0192_context"];if(null!=h)O=h["\u001e\u0192_parent"]||u,g.index=W.length;else{var N=0,T=W.length-1;g.index=N;O=h=u;do{O=f(u,O,h,W[N],c,N<T,!0,x,g,v,w,E,z,F,K);h=O[0];g=O[2];if(!h||"object"!==typeof h){g.index=N;u=O;break a}O=O[1]}while(N++<T);g.index=N;P["\u001e\u0192_context"]!==h&&k(P,h)}}e[0]=h;e[1]=O;e[2]=g;u=e}h=u[0];if(!h||"object"!==typeof h)return u;c=u[1];u=u[2];x=h&&h.$type}if(void 0===x){if(null==l){if(b)throw new y;
h&&(l=h["\u001e\u0192_key"])}else c=h,h=c[l];h=n(c,h,l,q,b,m,r,u,d,A,C,D,B,G)}e[0]=h;e[1]=c;e[2]=u;return e}var e=Array(3),q=Array.isArray,t=a(0),p=a(1),k=a(8),m=a(10),r=a(21),y=a(3),n=a(46);b.exports=function(a,f,h,l,q){var x=a._root,g=x.expired,b=x.version+1,u=a._path,n=x.cache,v=m(n,u);if(!v)return[[],[],!1];var k=v["\u001e\u0192_parent"]||n;a=n["\u001e\u0192_version"];for(var p=[],t=[],r=[],y=u.length,d=-1,L=f.length;++d<L;){var Q=f[d],R=u.slice(0);R.index=y;c(Q.json,0,n,k,v,t,r,p,R,b,g,x,l,h,
q)}e[0]=void 0;e[1]=void 0;e[2]=void 0;f=n["\u001e\u0192_version"];h=x.onChange;a!==f&&(x.version=b,h&&h());return[t,r,a!==f]}},function(b,d,a){b.exports=function(a){return a&&"$"===a[0]||c(a)};var c=a(32)},function(b,d){function a(c,f,e){e=e||[];f=f||[];for(var q=[],b=c.$keys,p=b.length,k=-1;++k<p;){var m=c[k],r=b[k];m?a(m,f,e.concat([r])):q.push(r)}1===q.length?f.push(e.concat(q)):1<q.length&&f.push(e.concat([q]));return f}b.exports=a},function(b,d){b.exports=function(a){for(var c=5381,f=a.length;f;)c=
33*c^a.charCodeAt(--f);return c>>>0}},function(b,d){function a(a,e){var c=e.from=a.from||0;a=e.to=a.to||"number"===typeof a.length&&e.from+a.length-1||0;e.rangeOffset=e.from;e.loaded=!0;c>a&&(e.empty=!0)}var c=Array.isArray;b.exports=function(f,e){if(void 0===e.isArray){e.done=!1;var b=e.isObject=!(!f||"object"!==typeof f);e.isArray=b&&c(f);e.arrayOffset=0}if(e.isArray){var t;do{e.loaded&&e.rangeOffset>e.to&&(++e.arrayOffset,e.loaded=!1);if(e.arrayOffset>=f.length){e.done=!0;break}b=f[e.arrayOffset];
"object"===typeof b?(e.loaded||a(b,e),e.empty||(t=e.rangeOffset++)):(++e.arrayOffset,t=b)}while(void 0===t);return t}if(e.isObject){e.loaded||a(f,e);if(e.rangeOffset>e.to){e.done=!0;return}return e.rangeOffset++}e.done=!0;return f}},function(b,d,a){b.exports=a(39)},function(b,d,a){b.exports=a(42)},function(b,d){b.exports=function(a,c,f,e,b){var q=0,p;p=e.jsonGraph;p||(e.jsonGraph=p={});do{e=c[q++];if(q>=f){p=p[e]=!0!==b?a:p[e]||{};break}p=p[e]||(p[e]={})}while(1);return p}},function(b,d){var a=Array.isArray;
b.exports=function(c,f,e,b,t,p,k,m,r,y,n,g,x,h){if(r||y){for(var l,q=-1,d=(p=t-f)&&Array(p)||void 0;++q<p;){l=c[q+f];var w;w=l;if("object"!==typeof w||null===w)w=!1;else if(a(w))w=0===w.length;else{var z=w.to,u=w.from||0;"number"!==typeof z&&(z=u+(w.length||0));w=u>=z}if(w)return;d[q]=l}var F;c=null===l;l=r;var A;r?(w=t,z=b,A=e.requested||(e.requested=[])):(f=m,z=k,w=m+p-Number(c));do{if(p<t||!l){b=-1;q=f;for(F=Array(w);++b<q;)F[b]=z[b];for(q=-1;b<w;)F[b++]=d[++q]}if(l=!l){r&&(A[A.length]=F);break}A[A.length]=
F||d;f=m;z=k;A=e.missing||(e.missing=[]);w=m+p-Number(c)}while(1);if(y)return h(n,F,f,w,g,x)}}},function(b,d,a){function c(a,h,l,b,q,m,p,u,r){var x={},v=h<a.length-1,d=a[h],w=g(d,x);do{e=f(l,b,q,w,v,!1,m,p,u,r);var t=e[0],z=e[1];t&&(v?c(a,h+1,l,z,t,m,p,u,r):n(t,z,w,u)&&y(z,k(t),u,m));w=g(d,x)}while(!x.done)}function f(a,c,l,b,g,n,k,u,r,d){for(n=l.$type;"ref"===n;){a:{c=a;n=k;var h=u,x=r,v=d;if(q(l,v))t(l,h,x),e[0]=void 0,e[1]=c;else{p(x,l);var y=l,w=l.value,z;l=l["\u001e\u0192_context"];if(null!=
l)z=l["\u001e\u0192_parent"]||c;else{var E=0,A=w.length-1;z=l=c;do{e=f(c,z,l,w[E],E<A,!0,n,h,x,v);l=e[0];if(!l&&"object"!==typeof l)break a;z=e[1]}while(E++<A);y["\u001e\u0192_context"]!==l&&m(y,l)}e[0]=l;e[1]=z}}l=e[0];if(!l&&"object"!==typeof l)return e;c=e[1];n=l.$type}if(void 0!==n)return[l,c];if(null==b){if(g)throw Error("`null` is not allowed in branch key positions.");}else c=l,l=c[b];e[0]=l;e[1]=c;return e}var e=Array(2),q=a(0),t=a(1),p=a(13),k=a(9),m=a(8),r=a(17),y=a(11),n=a(18),g=a(24);
b.exports=function(a,h,f){var b=a._root,l=b.expired,x=b.version++,g=b.cache,q=r(a);if(q){var n=q["\u001e\u0192_parent"]||g;a=g["\u001e\u0192_version"];for(var m=-1,k=h.length;++m<k;)c(h[m],0,g,n,q,x,l,b,f);e[0]=void 0;e[1]=void 0;h=g["\u001e\u0192_version"];(b=b.onChange)&&a!==h&&b()}}},function(b,d,a){var c=a(54),f=a(86),e=a(87);b.exports=function(a,b,p,k){if(a&&"object"===typeof a){var q=a.$type;q&&("ref"===q&&e(a),c(k,a));f(a);b[p]=a["\u001e\u0192_parent"]=void 0;return!0}return!1}},function(b,
d,a){function c(a,e,b,h,l,q,k,m,p,u,d,t,y,D,B,G){var g={},x=b<e.length-1,n=e[b],v=r(n,g),w=u.index;do{p.depth=b;p[b]=v;p.index=b;var E=f(h,l,q,v,a,x,!1,p,u,d,t,y,D,B,G);p[b]=v;p.index=b;var z=E[0],A=E[1],E=E[2];E[E.index++]=v;z&&(x?c(a,e,b+1,h,A,z,k,m,p,E,d,t,y,D,B,G):(k.push(p.slice(0,p.index+1)),m.push(E.slice(0,E.index))));v=r(n,g);if(g.done)break;u.index=w}while(1)}function f(a,c,b,h,l,k,d,r,z,u,F,A,C,D,B){for(var g=b.$type;"ref"===g;){a:{c=l;z=a;var g=r,n,x=u,v=F,w=A,E=C,U=D,S=B,K,O=b.value;
n=O.slice(0);if(q(b,S))t(b,v,w),b=void 0,K=z,n.index=O.length;else{var W=b;b=b["\u001e\u0192_context"];if(null!=b)K=b["\u001e\u0192_parent"]||z,n.index=O.length;else{var P=0,N=O.length-1;K=b=z;do{var T=O[P],M=P<N;n.index=P;K=f(z,K,b,T,c,M,!0,g,n,x,v,w,E,U,S);b=K[0];n=K[2];if(!b||"object"!==typeof b){n.index=P;z=K;break a}K=K[1]}while(P++<N);n.index=P;W["\u001e\u0192_context"]!==b&&p(W,b)}}e[0]=b;e[1]=K;e[2]=n;z=e}b=z[0];if(!b||"object"!==typeof b)return z;c=z[1];z=z[2];g=b.$type}if(!k||void 0===g){if(null==
h){if(k)throw new m;b&&(h=b["\u001e\u0192_key"])}else c=b,b=c[h];b=y(c,b,h,l,k,d,r,z,u,F,A,C,D,B)}e[0]=b;e[1]=c;e[2]=z;return e}var e=Array(3),q=a(0),t=a(1),p=a(8),k=a(10),m=a(3),r=a(24),y=a(46);b.exports=function(a,b,f,h,l){var g=a._root,q=g.expired,n=g.version+1,x=a._path,u=g.cache,m=k(u,x);if(!m)return[[],[],!1];var p=m["\u001e\u0192_parent"]||u;a=u["\u001e\u0192_version"];for(var d=[],r=[],t=[],y=x.length,H=-1,J=b.length;++H<J;){var L=b[H],Q=L.path,L=L.value,R=x.slice(0);R.index=y;c(L,Q,0,u,p,
m,r,t,d,R,n,q,g,h,f,l)}e[0]=void 0;e[1]=void 0;e[2]=void 0;b=u["\u001e\u0192_version"];f=g.onChange;a!==b&&(g.version=n,f&&f());return[r,t,a!==b]}},function(b,d,a){d=a(94);d=new RegExp("^"+d,"i","g");b.exports=d.test.bind(d)},function(b,d){b.exports=0},function(b,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(d=window)}b.exports=d},function(b,d,a){var c=a(38),f=a(36),e=a(37);b.exports=function(a){return c(e(f(a)))}},function(b,
d,a){var c=Array.isArray,f=a(22);b.exports=function(a,b){if(a)c(a)||c(a.$keys)&&(a=f(a));else return b;return a.reduce(function(a,e){var c=e.length;a[c]||(a[c]=[]);a[c].push(e);return a},b||{})}},function(b,d,a){var c=a(66);b.exports=function(a,e){return Object.keys(a).reduce(function(e,b){e[b]=c(a[b],e[b]);return e},e||{})}},function(b,d,a){function c(a,b,f){var g,h=Object.create(null),l=""+m(""+b),n=[],k=-1,p=0,d=[],u=0,r,y,t,D,B,G;t=[];D=-1;if(b<f-1){for(B=e(a,t);++D<B;)g=t[D],r=c(a[g],b+1,f),
y=r.code,h[y]?r=h[y]:(n[p++]=y,r=h[y]={keys:[],sets:r.sets}),l=""+m(l+g+y),q(g)&&r.keys.push(parseInt(g,10))||r.keys.push(g);for(;++k<p;)if(g=n[k],r=h[g],t=r.keys,B=t.length,0<B)for(a=r.sets,b=-1,f=a.length,D=t[0];++b<f;){g=a[b];r=-1;y=g.length;G=Array(y+1);for(G[0]=1<B&&t||D;++r<y;)G[r+1]=g[r];d[u++]=G}}else for(B=e(a,t),1<B?d[u++]=[t]:d[u++]=t;++D<B;)l=""+m(l+t[D]);return{code:l,sets:d}}function f(a,e){return a-e}function e(a,e,c){var b=0;if(a===r)e[b++]=null;else{for(var h in a)e[b++]=h;1<b&&e.sort(c)}return b}
function q(a){var e=a,c=typeof a;if("string"===c){e=a.length;if(0===e||17<e||!k.test(a))return!1;if(16>e)return!0;e=+a}else if("number"!==c)return!1;return 0===e%1&&9007199254740991>=p(e)}var t=Array.isArray,p=Math.abs,k=/^(0|(\-?[1-9][0-9]*))$/,m=a(23),r=a(6);b.exports=function(a){var e,b=[],k=0,h;for(h in a){var l;if(l=q(h))l=e=a[h],l=null!==l&&"object"===typeof l;if(l){l=c(e,0,parseInt(h,10)).sets;for(var m=-1,p=l.length;++m<p;){for(var r=k++,d=l[m],u=-1,y=d.length;++u<y;){var A=d[u];if(t(A)){var C=
d,D=u;for(var B=-1,G=A.length-1,H=0<G;++B<=G;){var J=A[B];if(!q(J)){H=!1;break}A[B]=parseInt(J,10)}!0===H&&(A.sort(f),B=A[0],H=A[G],H-B<=G&&(A={from:B,to:H}));C[D]=A}}b[r]=d}}}return b};b.exports._isSafeNumber=q},function(b,d,a){var c=a(74),f=a(73),e=a(17),q=a(92),t=a(65),p=a(63);b.exports=function(a,b,r,d,n){var g,m;d=a._path;var h=a._root,l=h.cache,k,y,w,z=d&&d.length||0;if(z){if((g=e(a))&&g.$type)return{error:new q(d,d)};w=[];for(var u=0;u<z;++u)w[u]=d[u];m=a._referenceContainer}else g=l,w=[];
k=[];var u=!1,F=r&&r.json,A={data:r},C=a._boxed,D=h.expired;y=a._recycleJSON;var B=a._materialized,G=!!a._source,H=h.branchSelector,J=a._treatErrorsAsValues;a=a._allowFromWhenceYouCame;var L,Q=0,R=b.length;if(0<R)if(y)u=!0,b[0].$keys||(b=[p(t(b,{}))]),n=f(l,g,F,b[0],0,r,A,k,w,z,!1,m,h,D,n,H,C,B,G,J,a),F=n[0],n[0]=void 0,n[1]=void 0;else{do L=b[Q],y=L.length,F=c(l,g,F,L,0,r,A,k,y,w,z,!1,m,h,D,n,H,C,B,G,J,a);while(++Q<R)}n=A.requested;A.args=u&&b||n;if(n&&n.length&&(A.relative=A.args,z)){b=[];u=0;for(z=
n.length;u<z;++u)b[u]=d.concat(n[u]);A.requested=b}A.hasValue&&(r.json=F);return A}},function(b,d,a){var c=Array(3),f=a(13),e=a(0),q=a(8),t=a(51);b.exports=function(a,b,m,d){f(m,b);var p,n,g=0,k=a,h=b.value,l=h,v=h.length;do{if(0===g&&void 0!==(p=b["\u001e\u0192_context"]))k=p,g=v;else if(n=h[g++],void 0===(k=k[n]))break;if(g===v){n=k.$type;if(void 0!==n&&e(k,d))break;else{if(k===b)throw new t(h);k!==p&&q(b,k)}if("ref"===n)f(m,k),g=0,b=k,k=a,h=l=b.value,v=h.length;else break}else if(void 0!==k.$type)break}while(1);
g<v&&void 0!==k&&(v=g);g=-1;for(h=Array(v);++g<v;)h[g]=l[g];c[0]=k;c[1]=h;c[2]=b;return c}},function(b,d,a){var c=a(7),f=a(72);b.exports=function(a,b,d,p,k,m,r,y,n,g,x,h){if("error"===b&&!h)return f(a,d,k,m,n,g);k.hasValue=!0;return g?c(a):a.value}},function(b,d,a){var c=a(77),f=a(90);b.exports=function(a,b,d,p,k){var e,q;e=a._path;p=a._root;var t,n,g=e&&e.length||0;if(g)return{error:new f};n=[];q=e=p.cache;t=[];for(var x=a._boxed,h=p.expired,l=a._materialized,v=!!a._source,E=a._treatErrorsAsValues,
w={data:d},z=-1,u=b.length;++z<u;){var F=b[z];a=F.length;c(q,e,F,0,d,w,t,a,n,g,!1,p,h,k,x,l,v,E)}w.args=w.relative=w.requested;return w}},function(b,d,a){function c(a,b,d,y,n,g){if(d===y)return g?e(p):void 0;var k,h,l=d+1,m,r=-1,w=0;h=b[d];a&&"object"===typeof a?(k=a["\u001e\u0192_meta"])?(k.version=0,k.abs_path=b.slice(0,d)):(k={},a["\u001e\u0192_meta"]=(k.version=0,k.abs_path=b.slice(0,d),k)):(a={},k={},a=(k.__proto__=q.prototype,k["\u001e\u0192_meta"]=(a.version=0,a.abs_path=b.slice(0,d),a),k),
n&&(a=n(a)));a:do{if("object"!==typeof h)d=h,k=void 0,h=!1;else if(f(h)){if(void 0!==m)throw new t(b,m);r=0;m=h;w=h.length;if(0===w)break a;h=m[r];continue a}else{k=h.to;d=h.from||0;"number"!==typeof k&&(k=d+(h.length||0)-1);if(0>k-d)break a;h=!0}do a[d]=c(a[d],b,l,y,n,g);while(h&&++d<=k);if(++r===w)break a;h=m[r]}while(1);return a}var f=Array.isArray,e=a(7),q=a(2);a(3);var t=a(12),p=a(6);b.exports=c},function(b,d,a){b.exports=function(a,b,e,q,d){a["\u001e\u0192_key"]=e;a["\u001e\u0192_parent"]=b;
void 0!==q&&(a["\u001e\u0192_version"]=q);a["\u001e\u0192_abs_path"]||(a["\u001e\u0192_abs_path"]=d.slice(0,d.index).concat(e));return b[e]=a}},function(b,d,a){function c(a,e,b,l,q,k,m,d,u,t){if(a&&"object"===typeof a&&!a.$type)for(var h in a)if(!r(h)){var g=a[h],v=!(!g||"object"!==typeof g)&&!g.$type,x=f(b,l,q,h,g,v,!1,k,m,d,u,t),w=x[0],x=x[1];w&&(v?c(g,e+1,b,x,w,k,m,d,u,t):n(w,x,h,d)&&y(x,p(w),d,k))}}function f(a,c,b,l,n,m,d,p,u,r,y,C){for(d=b.$type;"ref"===d;){a:{c=n;d=a;var h=p,g=u,v=r,x=y,w=
C;if(e(b,w))q(b,g,v),c=[void 0,d];else{t(v,b);var E=b,z=b.value,A;b=b["\u001e\u0192_context"];if(null!=b)A=b["\u001e\u0192_parent"]||d;else{var F=0,S=z.length-1;A=b=d;do{A=f(d,A,b,z[F],c,F<S,!0,h,g,v,x,w);b=A[0];if(!b||"object"!==typeof b){c=A;break a}A=A[1]}while(F++<S);E["\u001e\u0192_context"]!==b&&k(E,b)}c=[b,A]}}b=c[0];if(!b&&"object"!==typeof b)return c;c=c[1];d=b&&b.$type}if(void 0!==d)return[b,c];if(null==l){if(m)throw Error("`null` is not allowed in branch key positions.");}else c=b,b=c[l];
return[b,c]}var e=a(0),q=a(1),t=a(13),p=a(9),k=a(8),m=a(17),r=a(21),y=a(11),n=a(18);b.exports=function(a,e,b){var h=a._root,f=h.expired,g=h.version++,q=h._comparator,k=h.cache,u=m(a);if(u){var d=u["\u001e\u0192_parent"]||k;a=k["\u001e\u0192_version"];for(var n=-1,p=e.length;++n<p;)c(e[n].json,0,k,d,u,g,f,h,q,b);e=k["\u001e\u0192_version"];(h=h.onChange)&&a!==e&&h()}}},function(b,d,a){var c=a(33),f=a(103),e=a(9),q=a(57),t=a(50),p=a(0),k=a(1),m=a(44),r=a(48),y=a(47),n=a(11);a(18);b.exports=function(a,
b,h,l,d,E,w,z,u,F,A,C,D,B){B=f(b,E);if(d||E){if(B&&p(b,!0)&&(k(b,F,A),B=b.$expires===c?B:"expired"),B&&"ref"!==B||!b||"object"!==typeof b)b=r(b,{},a,h,A,u),b=m(b,a,h,u,z)}else d=f(l),(C?C(b,l,z.slice(0,z.index)):d?B&&!1!==q(l)<q(b)&&(B!==d||b.value!==l.value||b.$expires!==l.$expires):b&&b.value===l)||(D&&"error"===d&&(l=D(y(w,h),l)),w=e(b)-e(l=t(l,d,d?l.value:l)),b=r(b,l,a,h,A,u),a=n(a,w,A,u),b=m(b,a,h,u,z));return b}},function(b,d){b.exports=function(a,b){a=a.slice(0,a.depth);a[a.length]=b;return a}},
function(b,d,a){var c=a(85),f=a(18),e=a(49);b.exports=function(a,b,d,k,m,r){if(a===b)return a;a&&"object"===typeof a&&(c(a,b),f(a,d,k,m),e(b,r));return d[k]=b}},function(b,d,a){b.exports=function(a,b){var e=[a],c=0;do{var f=e[c];if(f&&f["\u001e\u0192_version"]!==b){f["\u001e\u0192_version"]=b;e[c++]=f["\u001e\u0192_parent"];for(var d=-1,k=f["\u001e\u0192_refs_length"]||0;++d<k;)e[c++]=f["\u001e\u0192_ref"+d]}}while(-1<--c);return a}},function(b,d,a){var c=Array.isArray,f=a(60),e=a(101),q=a(9),t=a(102),
p=a(33);b.exports=function(a,b,d){var k=0;if(b){var n=a["\u001e\u0192_wrapped_value"];a=e(a);k=q(a);a.$type=b;a["\u001e\u0192_prev"]=void 0;a["\u001e\u0192_next"]=void 0;a["\u001e\u0192_wrapped_value"]=n||!1}else a={$type:"atom",value:d,"\u001e\u0192_prev":void 0,"\u001e\u0192_next":void 0,"\u001e\u0192_wrapped_value":!0};if(null==d)k=51;else if(null==k||0>=k)switch(typeof d){case "object":k=c(d)?50+d.length:51;break;case "string":k=50+d.length;break;default:k=51}b=t(a);"number"===typeof b&&b<p&&
(a.$expires=f()+-1*b);a.$size=k;return a}},function(b,d,a){d=a(4);b.exports=d("CircularReferenceError",function(a){this.message="Encountered circular reference "+JSON.stringify(a)})},function(b,d,a){d=a(4);b.exports=d("InvalidSourceError",function(a){this.message="An exception was thrown when making a request:\n\t"+a})},function(b,d,a){var c=a(30),f=a(11);b.exports=function(a,b,d,p,k,m){var e=k;"number"!==typeof e&&(e=.75);k="number"===typeof m;var e=p*e,q,n,g;for(n=b.pop();n;)g=n.$size||0,d-=g,!0===
k?f(n,g,a,m):(q=n["\u001e\u0192_parent"])&&c(n,q,n["\u001e\u0192_key"],a),n=b.pop();if(d>=p){for(n=b=a["\u001e\u0192_tail"];d>=e&&n;)b=b["\u001e\u0192_prev"],g=n.$size||0,d-=g,!0===k&&f(n,g,a,m),n=b;a["\u001e\u0192_tail"]=a["\u001e\u0192_prev"]=n;null==n?a["\u001e\u0192_head"]=a["\u001e\u0192_next"]=void 0:n["\u001e\u0192_next"]=void 0}}},function(b,d,a){b.exports=function(a,b){var e=b["\u001e\u0192_prev"],c=b["\u001e\u0192_next"];c&&(c["\u001e\u0192_prev"]=e);e&&(e["\u001e\u0192_next"]=c);b["\u001e\u0192_prev"]=
b["\u001e\u0192_next"]=void 0;b===a["\u001e\u0192_head"]&&(a["\u001e\u0192_head"]=c);b===a["\u001e\u0192_tail"]&&(a["\u001e\u0192_tail"]=e)}},function(b,d,a){(function(c){function f(a){if(a)switch(typeof a){case "object":this.source=a;break;case "function":this.source={subscribe:a}}}var e=a(14),d=a(15),t=a(105).default;b.exports=f;f.prototype[t]=function(){return this};f.prototype.operator=function(a){return this.subscribe(a)};f.prototype.subscribe=function(a,b,c){return new d([this.operator.call(this.source,
a instanceof e?a:new e(a,b,c))])};f.prototype.then=function(a,b){var e=this;this._promise||(this._promise=new c.Promise(function(a,b){var c=[],f=!1;e.subscribe({next:function(a){c[c.length]=a},error:function(a){f=!0;b(a)},complete:function(){!f&&a(1>=c.length?c[0]:c)}})}));return this._promise.then(a,b)}}).call(d,a(34))},function(b,d){function a(){}var c={dispose:function(){},unsubscribe:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,d,a){var c=a(5);b.exports=
function(a){return c(a)&&a.$timestamp||void 0}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&"json"in a}},function(b,d,a){var c=Array.isArray,f=a(5);b.exports=function(a){return f(a)&&c(a.paths)&&(f(a.jsonGraph)||f(a.jsong)||f(a.json)||f(a.values)||f(a.value))}},function(b,d){b.exports=Date.now},function(b,d){b.exports=1},function(b,d,a){function c(a){if(!(this instanceof f))return new f(a);f.call(this,a)}var f=a(67);d=a(2);c.prototype=Object.create(f.prototype);c.Model=f;c.FalcorJSON=
d;c.toProps=d.prototype.toProps;b.exports=c},function(b,d,a){function c(a){if(void 0!==a){for(var b="",e=a.$keys,d=-1,k=e.length;++d<k;){var m=e[d];if(null===m)b=""+f(""+b+"null");else{"object"===typeof m&&(m="{from:"+m.from+",length:"+m.length+"}");var r=c(a[d]),b=void 0===r?""+f(""+b+m):""+f(""+b+m+r.$code)}}a.$code=b;return a}}var f=a(23);b.exports=c},function(b,d,a){function c(a,b,d,k){if(d===k)return!0;var m,q=-1,p=0,n=d+1,g,t,h;m=b[d];if(null===m)return a===e;a:do{if("object"!==typeof m)d=m,
t=void 0,g=!1;else if(f(m)){if(void 0!==h)break a;q=0;h=m;p=m.length;if(0===p)break a;m=h[q];continue a}else{t=m.to;d=m.from||0;"number"!==typeof t&&(t=d+(m.length||0)-1);if(0>t-d)break a;g=!0}do if(n===k){if(null!==a[d])return!1}else if(m=a[d],null===m||void 0===m||!1===c(m,b,n,k))return!1;while(g&&++d<=t);if(++q===p)break a;m=h[q]}while(1);return!0}var f=Array.isArray,e=a(6);b.exports=c},function(b,d,a){function c(a,b){return a.reduce(function(a,b){return e(b)?f(a,b,0,b.length):c(t(b),a)},b||{})}
function f(a,b,c,d){if(c!==d){a=a||{};var k=a.$keys||(a.$keys=[]),n=a.$keysMap||(a.$keysMap={}),g,m=-1,h=0,l,v=c+1,p;g=b[c];if(null===g)return q;a:do{if("object"!==typeof g)l=g,"undefined"===typeof(c=n[l])&&(c=k.length),k[c]=l,n[l]=c,g=f(a[c],b,v,d),void 0!==g&&(a[c]=g);else if(e(g)){if(void 0!==p)break a;m=0;p=g;h=g.length;if(0===h)break a;g=p[m];continue a}else{c=g.to;l=g.from||0;"number"!==typeof c&&(c=l+(g.length||0)-1);if(0>c-l)break a;g={from:l,length:c-l+1};l="{from:"+l+",length:"+(c-l+1)+
"}";"undefined"===typeof(c=n[l])&&(c=k.length);k[c]=g;n[l]=c;g=f(a[c],b,v,d);void 0!==g&&(a[c]=g)}if(++m===h)break a;g=p[m]}while(1);return a}}var e=Array.isArray,q={$keys:[null],$keysMap:{"null":0}},t=a(22);b.exports=c},function(b,d,a){function c(a,b,d,k,m,r){if(d===k)return!0;var q,n,g=-1,p=0,h,l=d+1,v,t,w;n=b[d];if(null===n)return e;q=n;a=a?a:r?r(b,d,a):{};a:do{if("object"!==typeof n)r=n,t=void 0,v=!1;else if(f(n)){if(void 0!==w)break a;g=0;w=n;p=n.length;if(0===p)break a;n=w[g];continue a}else{t=
n.to;r=n.from||0;"number"!==typeof t&&(t=r+(n.length||0)-1);if(0>t-r)break a;v=!0}do l===k?a[r]=m:(n=a[b[d]=r],(h=c(n,b,l,k,m))?n||(a[r]=h):a[r]=m);while(v&&++r<=t);if(++g===p)break a;n=w[g]}while(1);b[d]=q;return a}var f=Array.isArray,e=a(6);b.exports=function(a,b){return a.reduce(function(a,b){return c(a,b,0,b.length,null)},b||{})};b.exports.pathToTree=c},function(b,d,a){function c(a){a=a||{};this._node=a._node;this._path=a._path||[];this._source=a.source||a._source;this._root=a._root||new e(a,
this);this._recycleJSON=!0===a.recycleJSON||a._recycleJSON;this._scheduler=a.scheduler||a._scheduler||new k;a._seed?(this._recycleJSON=!0,this._seed=a._seed,this._treatErrorsAsValues=!0):this._recycleJSON&&(this._treatErrorsAsValues=!0,this._seed={__proto__:q.prototype});this._boxed=!0===a.boxed||a._boxed||!1;this._materialized=!0===a.materialized||a._materialized||!1;this._treatErrorsAsValues=!0===a.treatErrorsAsValues||a._treatErrorsAsValues||!1;this._allowFromWhenceYouCame=!0===a.allowFromWhenceYouCame||
a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}var f=a(95),e=a(69),q=a(2),t=a(68),p=a(99),k=a(56),m=a(35),r=a(53),y=a(9),n=a(5),g=a(58),x=a(10),h=a(59),l=a(20),v=a(19),E=a(25),w=a(79),z=a(26);b.exports=c;c.prototype.constructor=c;c.prototype.get=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(this._seed||{__proto__:q.prototype},[])};c.prototype.set=function(){return(new f("set",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:q.prototype},
[])};c.prototype.preload=function(){return(new f("get",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,[])};c.prototype.call=function(){return(new f("call",this,Array.prototype.slice.call(arguments,0)))._toJSON({__proto__:q.prototype},[])};c.prototype.invalidate=function(){return(new f("invalidate",this,Array.prototype.slice.call(arguments,0)))._toJSON(null,null).then()};c.prototype.deref=a(89);c.prototype._hasValidParentReference=a(88);c.prototype.getValue=function(a){return(new f("get",
this,[a]))._toJSON({__proto__:q.prototype},[]).lift(function(b){return this.subscribe({onNext:function(c){var e=-1;c=c.json;for(var h=a.length;c&&!c.$type&&++e<h;)c=c[a[e]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setValue=function(a,b){a=1===arguments.length?a.path:a;b=1===arguments.length?a:{path:a,value:b};return(new f("set",this,[b]))._toJSON({__proto__:q.prototype},[]).lift(function(b){return this.subscribe({onNext:function(c){var e=-1;c=c.json;
for(var h=a.length;c&&!c.$type&&++e<h;)c=c[a[e]];b.onNext(c)},onError:b.onError.bind(b),onCompleted:b.onCompleted.bind(b)})})};c.prototype.setCache=function(a){var b=this._root,c=b.cache;if(a!==c){var e={_path:[],_boxed:!1,_root:b,_materialized:!1,_treatErrorsAsValues:!1};b.cache=this._node={};"undefined"!==typeof c&&(r(b,b.expired,y(c),0),this._recycleJSON&&(this._seed={__proto__:q.prototype}));var f;h(a)?f=v(e,[a])[0]:g(a)?f=l(e,[a])[0]:n(a)&&(f=l(e,[{json:a}])[0]);f&&E(e,f,null,!1,!1)}else"undefined"===
typeof c&&(this._root.cache={});return this};c.prototype.getCache=function(){var a=Array.prototype.slice.call(arguments,0);if(0===a.length)return w(this._root.cache);var b=z({_path:[],_root:this._root,_boxed:this._boxed,_materialized:this._materialized,_treatErrorsAsValues:this._treatErrorsAsValues},a,{__proto__:q.prototype}).data;b.paths=m(a);return b};c.prototype.getVersion=function(a){a=a||[];if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");this._path.length&&
(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._clone=function(a){var b=new c(this);if(a)for(var e in a){var h=a[e];"delete"===h?delete b[e]:"_path"===e?(b[e]=h,!1===a.hasOwnProperty("_node")&&delete b._node):b[e]=h}0<b._path.length&&(b.setCache=void 0);return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new p(Math.round(Math.abs(a))):a?"function"===typeof a.schedule?b=a:"function"===typeof a&&(b={scheudle:a}):b=new p(1);return this._clone({_scheduler:b})};c.prototype.unbatch=
function(){return this._clone({_scheduler:new k})};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new t(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=
function(){return this._clone({_source:"delete"})};c.prototype.toJSON=function(){return{$type:"ref",value:this.getPath()}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===a?!0:a})};c.prototype._optimizePath=function(a){a=x(this._root.cache,a);return(a&&a["\u001e\u0192_abs_path"]||[]).slice(0)};c.prototype._getVersion=a(80);c.prototype._getPathValuesAsPathMap=E;c.prototype._getPathValuesAsJSONG=
z;c.prototype._setPathValues=a(31);c.prototype._setPathMaps=a(20);c.prototype._setJSONGs=a(19);c.prototype._setCache=a(20);c.prototype._invalidatePathValues=a(29);c.prototype._invalidatePathMaps=a(45)},function(b,d){function a(a){this._model=a._materialize().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,e,d){return this._model.call.apply(this._model,
[a,b,e].concat(d))._toJSONG()};b.exports=a},function(b,d,a){function c(a,b){a=a||{};this.cache={};this.version=-1;this.syncRefCount=0;this.maxRetryCount=10;this.topLevelModel=b;this.requests=new f(this);this.expired=a.expired||[];this.collectRatio=.75;this.maxSize=Math.pow(2,53)-1;"number"===typeof a.collectRatio&&(this.collectRatio=a.collectRatio);"number"===typeof a.maxSize&&(this.maxSize=a.maxSize);"function"===typeof a.comparator&&(this.comparator=a.comparator);"function"===typeof a.branchSelector&&
(this.branchSelector=a.branchSelector);"function"===typeof a.errorSelector&&(this.errorSelector=a.errorSelector);"function"===typeof a.branchSelector&&(this.branchSelector=a.branchSelector);"function"===typeof a.onChange&&(this.onChange=a.onChange);"function"===typeof a.onChangesCompleted&&(this.onChangesCompleted=a.onChangesCompleted)}var f=a(96);c.comparator=function(a,b){var c=a&&a.$type,e=b&&b.$type;return c?e?!(c!==e||a.value!==b.value||a.$expires!==b.$expires):a.value===b:e?!1:a===b};b.exports=
c},function(b,d,a){var c=a(25),f=a(26);b.exports={json:function(a,b,f,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};var m=[].concat(b[1]||[]),q=[].concat(b[2]||[]),p=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&p&&p.length&&(e=c(a,p,f,d,!0).hasValue);return{data:f,missing:!0,hasValue:e,fragments:[b,m,q,p]}},jsonGraph:function(a,b,c,d){var e=!1;if(!b)return{missing:!1,hasValue:!1};var m=[].concat(b[1]||[]),q=[].concat(b[2]||[]),p=[].concat(b[3]||[]);b=(a._path||[]).concat(b[0]||[]);d&&
p&&p.length&&(e=f({_root:a._root,_boxed:a._boxed,_materialized:a._materialized,_treatErrorsAsValues:a._treatErrorsAsValues},p,c,!0,!0).hasValue);return{data:c,missing:!0,hasValue:e,fragments:[b,m,q,p]}}}},function(b,d,a){b.exports={json:a(39),jsonGraph:a(42)}},function(b,d,a){var c=a(7);b.exports=function(a,b,d,t,p,k){var e=-1;b+=!!p;p=Array(b);for(a=k?c(a):a.value;++e<b;)p[e]=t[e];(d.errors||(d.errors=[])).push({path:p,value:a})}},function(b,d,a){function c(a,b,d,m,w,x,u,F,A,C,D,B,G,H,J,L,Q,R,U,
S,K){var h,l;if(void 0===b||void 0!==(h=b.$type)||void 0===m)return e[1]=U&&void 0===b,e[0]=k(b,h,d,m,w,x,u,F,w,A,C,D,G,H,J,L,Q,R,U,S,q,f,y),e;var v,z,E="",M,I,V,Y=m.$keys,ba=w+1,Z,X,aa,fa,ca,ga=C+1,ia,ja;K&&B&&(ja=B.value,ia=B["\u001e\u0192_abs_path"]);if(!d||"object"!==typeof d)d=void 0;else if(v=d["\u001e\u0192_meta"]){if(!(L||d instanceof t))d.__proto__={__proto__:t.prototype},d.__proto__["\u001e\u0192_meta"]=v;else if(v.version===b["\u001e\u0192_version"]&&v.abs_path===b["\u001e\u0192_abs_path"]&&
v.$code===m.$code)return u.hasValue=!0,e[0]=d,e[1]=!1,e;z=v.keys;v.version=b["\u001e\u0192_version"];v.abs_path=b["\u001e\u0192_abs_path"];v.deref_to=ja;v.deref_from=ia}h={};var ka=-1,la=Y.length,ea,ha,da=!1;a:for(;++ka<la;)if(D=Y[ka],ea=m[ka],null===D){if(void 0!==ea)throw new n;E=""+g(""+E+"null")}else{if("object"!==typeof D)I=D,Z=void 0,V=!1,ha=I;else{Z=D.to;I=D.from||0;"number"!==typeof Z&&(Z=I+(D.length||0)-1);if(0>Z-I)break a;V=!0;ha="{from:"+I+",length:"+(Z-I+1)+"}"}do{D=!1;X=d&&d[I];ca=A;
fa=ga;aa=B;M=b[I];F[w]=I;A[C]=I;if(void 0===ea){if(e=c(a,M,X,ea,ba,x,u,F,ca,fa,D,aa,G,H,J,L,Q,R,U,S,K),X=e[0],da=da||e[1],void 0===X&&!R){da=!0;d&&d.hasOwnProperty(I)&&delete d[I];continue}}else if(M&&"ref"===M.$type&&!p(M,J)&&(l=r(a,M,G,J),M=l[0],D=!0,ca=l[1],aa=l[2],fa=ca.length,l[0]=l[1]=l[2]=void 0),e=c(a,M,X,ea,ba,x,u,F,ca,fa,D,aa,G,H,J,L,Q,R,U,S,K),X=e[0],da=da||e[1],void 0===X){da=!0;d&&d.hasOwnProperty(I)&&delete d[I];continue}void 0===v&&(v={},v.version=b["\u001e\u0192_version"],v.abs_path=
b["\u001e\u0192_abs_path"],v.deref_to=ja,v.deref_from=ia,d={},d=(d.__proto__=t.prototype,d["\u001e\u0192_meta"]=v,d),d=!L&&{__proto__:d}||L(d));h[I]=!0;z&&I in z&&(z[I]=!1);d[I]=X}while(V&&++I<=Z);da||(E=void 0===ea?""+g(""+E+ha):""+g(""+E+ha+ea.$code))}da&&(E="__incomplete__");if(v&&(v.$code=E,v.keys=h,z))for(I in z)z[I]&&delete d[I];e[0]=d;e[1]=da;return e}function f(a,b,c,e,d,g,n,k,q,p,r,t,y,H){if(p)return H(r,a,b,b,t,y,c,e,n,k,g,q,f);a=a?x(a):[[]];var h=e.slice(0,d);return a.forEach(function(a){d=
b+a.length;return m(h.concat(a),b,c,e,d,g,n,k,q,!1,r,t,y,H)})}var e=Array(2),q=a(41),t=a(2),p=a(0),k=a(16),m=a(28),r=a(40),y=a(78),n=a(3);a(12);var g=a(23),x=a(22);b.exports=c},function(b,d,a){function c(a,b,h,d,v,E,w,z,u,F,A,C,D,B,G,H,J,L,Q,R,U,S){var g,l;if(void 0===b||(g=b.$type)||v===u)return p(b,g,h,d,v,E,w,z,u,F,A,C,B,G,H,J,L,Q,R,U,e,q,m);var x,P,N,T=v+1,M,I,V,Y,ba=-1,Z=0,X,aa,fa=A+1,ca,ga;C=d[v];if(null===C){if(T<u)throw new y;return h}S&&D&&(ga=D.value,ca=D["\u001e\u0192_abs_path"]);if(!h||
"object"!==typeof h)h=void 0;else if(x=h["\u001e\u0192_meta"])x.version=b["\u001e\u0192_version"],x.abs_path=b["\u001e\u0192_abs_path"],x.deref_to=ga,x.deref_from=ca;a:do{if("object"!==typeof C)g=C,M=void 0,N=!1;else if(f(C)){if(void 0!==I)throw new n(d,I);ba=0;I=C;Z=C.length;if(0===Z)break a;C=I[ba];continue a}else{M=C.to;g=C.from||0;"number"!==typeof M&&(M=g+(C.length||0)-1);if(0>M-g)break a;N=!0}do{C=!1;V=h&&h[g];aa=F;X=fa;Y=D;P=b[g];z[v]=g;F[A]=g;if(T===u){if(V=c(a,P,V,d,T,E,w,z,u,aa,X,C,Y,B,
G,H,J,L,Q,R,U,S),void 0===V&&!Q)continue}else if(P&&"ref"===P.$type&&!k(P,H)&&(l=r(a,P,B,H),P=l[0],C=!0,aa=l[1],Y=l[2],X=aa.length,l[0]=l[1]=l[2]=void 0),void 0===(V=c(a,P,V,d,T,E,w,z,u,aa,X,C,Y,B,G,H,J,L,Q,R,U,S)))continue;void 0===x&&(x={},x.version=b["\u001e\u0192_version"],x.abs_path=b["\u001e\u0192_abs_path"],x.deref_to=ga,x.deref_from=ca,h={},h=(h.__proto__=t.prototype,h["\u001e\u0192_meta"]=x,h),J&&(h=J(h)));h[g]=V}while(N&&++g<=M);if(++ba===Z)break a;C=I[ba]}while(1);return h}var f=Array.isArray,
e=a(41),q=a(28),t=a(2),p=a(16),k=a(0),m=a(43),r=a(40),y=a(3),n=a(12);a(6);b.exports=c},function(b,d,a){var c=Array(2),f=a(7),e=a(27),q=a(13),t=a(0),p=a(8),k=a(51);b.exports=function(a,b,d,n,g){q(d,b);var m,h,l=0,v=a,r=b.value,w=r,y=r.length;do{if(0===l&&void 0!==(m=b["\u001e\u0192_context"]))v=m,l=y;else if(h=r[l++],void 0===(v=v[h]))break;if(l===y){h=v.$type;if(void 0!==h&&t(v,g))break;else{if(v===b)throw new k(r);v!==m&&p(b,v)}if("ref"===h)q(d,v),n&&e(f(v),r,y,n),l=0,b=v,v=a,r=w=b.value,y=r.length;
else break}else if(void 0!==v.$type)break}while(1);l<y&&void 0!==v&&(y=l);l=-1;for(r=Array(y);++l<y;)r[l]=w[l];c[0]=v;c[1]=r;return c}},function(b,d,a){var c=a(7),f=a(27);b.exports=function(a,b,d,p,k,m,r,y,n,g,x){x=a.value;if(g||"ref"===b||"error"===b||!a["\u001e\u0192_wrapped_value"]||"object"===typeof x)x=c(a);p&&(k.hasValue=!0,f(x,r,y,p),(p.paths||(p.paths=[])).push(m.slice(0,d+!!n)));return x}},function(b,d,a){function c(a,b,h,d,y,u,F,A,C,D,B,G,H,J,L,Q,R,U){var l,v;if(void 0===b||(l=b.$type)||
d===A)return m(b,l,y,h,d,y,u,F,A,C,D,B,G,H,J,void 0,L,Q,R,U,t,f,r);var w,z,E=d+1,N,T,M=-1,I=0,V,Y,ba=D+1;B=h[d];if(null===B){if(E<A)throw new g;}else{a:do{if("object"!==typeof B)l=B,N=void 0,z=!1;else if(e(B)){if(void 0!==T)throw new x(h,T);M=0;T=B;I=B.length;if(0===I)break a;B=T[M];continue a}else{N=B.to;l=B.from||0;"number"!==typeof N&&(N=l+(B.length||0)-1);if(0>N-l)break a;z=!0}do B=!1,Y=C,V=ba,w=b[l],F[d]=l,C[D]=l,w&&E<A&&"ref"===w.$type&&!k(w,J)&&(y&&p(q(w),C,V,y),v=n(a,w,G,y,J),w=v[0],B=!0,
Y=v[1],V=Y.length,v[0]=v[1]=void 0),c(a,w,h,E,y,u,F,A,Y,V,B,G,H,J,L,Q,R,U);while(z&&++l<=N);if(++M===I)break a;B=T[M]}while(1)}}function f(a,b,c,e,d,f,g,n,k,m,r,t,x,J){var l,v;r&&m&&((r.paths||(r.paths=[])).push((v=0===d-b)&&e.slice(0,b+!!f)||e.slice(0,b).concat(a.slice(b,d+!!f))),l=p(v&&q(h)||void 0,g,n,r,!v));return y(a,b,c,e,d,f,g,n,k,!v&&m,l,t,!0,J)}var e=Array.isArray,q=a(7),t=a(76),p=a(27),k=a(0),m=a(16),r=a(43),y=a(28),n=a(75),g=a(3),x=a(12),h=a(6);b.exports=c},function(b,d,a){function c(a,
b,d,y,n,g,x,h,l,v,E,w,z){if(void 0===b)return e(void 0,void 0,a,b,d,void 0,x,h,d,l,v,E,void 0,void 0,!1,n,g,!1,w,!1,void 0,z,void 0),g?f(p):void 0;var k,m,r,C,D;y=b.$keys;var B=d+1,G,H=v+1;a&&"object"===typeof a?(k=a["\u001e\u0192_meta"])?(m=k.keys,k.abs_path=l.slice(0,v)):(k={},a["\u001e\u0192_meta"]=k=(k.version=0,k.abs_path=l.slice(0,v),k)):(k={},a={},a=(a.__proto__=q.prototype,a["\u001e\u0192_meta"]=k=(k.version=0,k.abs_path=l.slice(0,v),k),a),n&&(a=n(a)));r={};var J,L=-1,Q=y.length;a:for(;++L<
Q;)if(D=y[L],J=b[L],null===D){if(void 0!==J)throw new t;}else{if("object"!==typeof D)C=D,G=void 0,D=!1;else{G=D.to;C=D.from||0;"number"!==typeof G&&(G=C+(D.length||0)-1);if(0>G-C)break a;D=!0}do h[d]=C,l[v]=C,r[C]=!0,m&&C in m&&(m[C]=!1),a[C]=c(a[C],J,B,B,n,g,x,h,l,H,E,w,z);while(D&&++C<=G)}k.$code="__incomplete__";k.keys=r;if(m)for(C in m)m[C]&&delete a[C];return a}var f=a(7),e=a(16),q=a(2),t=a(3);a(12);var p=a(6);b.exports=c},function(b,d,a){function c(a,b,d){a&&"object"===typeof a&&Object.keys(a).filter(function(b){return("$type"===
b||!f(b))&&void 0!==a[b]}).forEach(function(e){var d=a[e],m=b[e];m||(m=b[e]={});if(d.$type){m=!d["\u001e\u0192_wrapped_value"];if(d.value&&"object"===typeof d.value||m){var m={},q=Object.keys(d),p,n,g;n=0;for(g=q.length;n<g;n++)p=q[n],"$type"!==p&&f(p)||(m[p]=d[p]);d=m}else d=d.value;b[e]=d}else c(d,m,e)})}var f=a(21);b.exports=function(a){var b={};c(a,b);return b}},function(b,d,a){var c=a(17);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001e\u0192_version"];return null==a?-1:a}},function(b,d,a){var c=
Array.isArray,f=a(104),e=a(58),q=a(59);b.exports=function(a){for(var b=[],d=-1,m=a.length,r,t,n,g;++d<m;)n=a[d],c(n)?(n={path:n},g="PathValues"):f(n)?g="PathValues":q(n)?g="JSONGraphs":e(n)&&(g="PathMaps"),t!==g&&(t=g,b.push(r={arguments:[],inputType:g})),r.arguments.push(n);return b}},function(b,d,a){function c(a,b,c,d,k){f(a,b,k);return{}}var f=a(29);a(45);b.exports={json:c,jsonGraph:c}},function(b,d,a){var c=a(50),f=a(0),e=a(44),q=a(1),t=a(48),p=a(9),k=a(47),m=a(57),r=a(11);b.exports=function(a,
b,d,x,h,l,v,E,w,z,u,F){var g,n,y,B,G,H;if(b===d){if(void 0===d)return d;if(null===d)return b=c(d,void 0,d),a=r(a,-b.$size,w,v),b=e(b,a,x,void 0,l);if((y=!(!b||"object"!==typeof b))&&void 0===(g=b.$type))return void 0===b["\u001e\u0192_parent"]&&e(b,a,x,v,l),b}else if(y=!(!b||"object"!==typeof b))g=b.$type;if("ref"!==g){if(B=!(!d||"object"!==typeof d))n=d.$type;if(y&&!g&&(null==d||B&&!n))return b}else{if(null==d){if(f(b,F)){q(b,E,w);return}return b}if(B=!(!d||"object"!==typeof d))if(n=d.$type,"ref"===
n)if(b===d){if(null!=b["\u001e\u0192_parent"])return b}else if(G=b.$timestamp,H=d.$timestamp,!f(b,F)&&!f(d,F)&&H<G)return}if(g&&B&&!n)return e(t(b,d,a,x,w,v),a,x,void 0,l);if(n||!B){"error"===n&&u&&(d=u(k(h,x),d));if(n&&b===d)null==b["\u001e\u0192_parent"]&&(b=c(b,g,b.value),a=r(a,-b.$size,w,v),b=e(b,a,x,v,l));else{h=!0;if(!y||g&&!f(b,F))h=z?!z(b,d,l.slice(0,l.index)):n?!g||!1===m(d)<m(b)||!(g!==n||b.value!==d.value||b.$expires!==d.$expires):!b||b.value!==d;h&&(d=c(d,n,n?d.value:d),z=p(b)-p(d),b=
t(b,d,a,x,w,v),a=r(a,z,w,v),b=e(b,a,x,v,l))}f(b,!0)&&q(b,E,w)}else null==b&&(b=e(d,a,x,void 0,l));return b}},function(b,d,a){function c(a,c){for(var e=!1,d=-1,k=c.length,g=[],m=[],h=a._root.errorSelector;++d<k;){var l=c[d],q=l.inputType,l=l.arguments;if(0<l.length){var p=(0,b.exports["set"+q])(a,l,h,null,!1),e=e||p[2];m.push.apply(m,p[1]);"PathValues"===q?g.push.apply(g,l.map(f)):"JSONGraphs"===q?g.push.apply(g,t(l,f)):g.push.apply(g,p[0])}}return{changed:e,requested:g,optimized:m}}function f(a){return a.path||
a.paths}var e=a(25),q=a(26),t=a(100),p=a(81);b.exports={json:function(a,b,d,f,n){var g,m,h,l,k,r,t=p(b);g=c(a,t);if((b=g.requested).length){if(!(h=g.changed)||f)m=e(a,b,d,f,n);h&&(a=q({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},g.optimized,{},f,n),k=a.data,l=k.paths,r=a.requested)}return{args:t,data:d,missing:l,relative:b,fragments:k,requested:r,error:m&&m.error,errors:m&&m.errors,hasValue:m&&m.hasValue}},jsonGraph:function(a,b,e,d,f){var g,m,h,l,k,
n=p(b);b=c(a,n);(m=b.requested).length&&(d||b.changed)&&(g=q({_root:a._root,_boxed:a._boxed,_materialized:!0,_treatErrorsAsValues:a._treatErrorsAsValues},b.optimized,e,d,f),l=g.data,h=l.paths,k=g.requested);return{args:n,data:e,missing:h,relative:m,fragments:l,requested:k,error:g&&g.error,hasValue:g&&g.hasValue}},setPathMaps:a(20),setPathValues:a(31),setJSONGraphs:a(19)}},function(b,d,a){b.exports=function(a,b){for(var c=a["\u001e\u0192_refs_length"]||0,d=b["\u001e\u0192_refs_length"]||0,f=-1;++f<
c;){var p=a["\u001e\u0192_ref"+f];void 0!==p&&(p["\u001e\u0192_context"]=b,b["\u001e\u0192_ref"+(d+f)]=p,a["\u001e\u0192_ref"+f]=void 0)}b["\u001e\u0192_refs_length"]=c+d;a["\u001e\u0192_refs_length"]=void 0;return b}},function(b,d,a){b.exports=function(a){for(var b=-1,c=a["\u001e\u0192_refs_length"]||0;++b<c;){var d=a["\u001e\u0192_ref"+b];null!=d&&(d["\u001e\u0192_context"]=d["\u001e\u0192_ref_index"]=a["\u001e\u0192_ref"+b]=void 0)}a["\u001e\u0192_refs_length"]=void 0;return a}},function(b,d,a){b.exports=
function(a){var b=a["\u001e\u0192_context"];if(b){for(var c=(a["\u001e\u0192_ref_index"]||0)-1,d=(b["\u001e\u0192_refs_length"]||0)-1;++c<=d;)b["\u001e\u0192_ref"+c]=b["\u001e\u0192_ref"+(c+1)];b["\u001e\u0192_refs_length"]=d;a["\u001e\u0192_ref_index"]=a["\u001e\u0192_context"]=void 0}return a}},function(b,d,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192_parent"]||a&&a["\u001e\u0192_invalidated"]?!1:!0:!0}},function(b,
d,a){var c=a(2),f=a(10);a(91);b.exports=function(a){var b;if(!a||"object"!==typeof a||!(b=a["\u001e\u0192_meta"])||"object"!==typeof b)return null;var d=this._root.cache,e=this._recycleJSON,k=b.abs_path,m,r;if(!k)return this._clone({_node:void 0,_seed:e&&{json:a,__proto__:c.prototype}||void 0});if(0===k.length)return this._clone({_node:d,_path:k,_referenceContainer:!0,_seed:e&&{json:a,__proto__:c.prototype}||void 0});var y=b.deref_to,n=b.deref_from,g=f(d,k),x="e";if(n){x=!1;b=-1;r=n.length;for(m=
d;++b<r&&(m=m[n[b]],m&&!m.$type););if(y&&m&&"ref"===m.$type)for(x=!0,r=y.length,d=m.value,b=0;b<r;++b)if(d[b]!==y[b]){g=void 0;x=!1;break}}x?"e"===x&&(m=!0):m=!1;return this._clone({_node:g,_path:k,_referenceContainer:m,_seed:e&&{json:a,__proto__:c.prototype}||void 0})}},function(b,d,a){d=a(4);b.exports=d("BoundJSONGraphModelError",function(){this.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model."})},function(b,d,a){d=a(4);
b.exports=d("InvalidDerefInputError",function(){this.message="Deref can only be used with a non-primitive object from get, set, or call."})},function(b,d,a){d=a(4);b.exports=d("InvalidModelError",function(a,b){this.message="The boundPath of the model is not valid since a value or error was found before the path end.";this.boundPath=a;this.shortedPath=b})},function(b,d,a){function c(a){return a.map(function(a){return JSON.stringify(a)}).join(",\n\t")}d=a(4);b.exports=d("MaxRetryExceededError",function(a,
b,d,t){this.message="Exceeded the max retry count ("+a+") for these paths: \n"+(b&&"absolute: [\n\t"+c(b)+"\n]\n"||"")+(d&&"relative: [\n\t"+c(d)+"\n]\n"||"")+(t&&"optimized: [\n\t"+c(t)+"\n]\n"||"")})},function(b,d){b.exports=String.fromCharCode(30)+"\u0192_"},function(b,d,a){function c(a,b,c){k.call(this,a);b&&c&&(this.type=a,this.source=this,this.model=b,this._args=c)}function f(a,b,c,d,e){this.data=a;this.errors=b;this.operation=c;this.progressive=d;this.maxRetryCount=e}function e(a,b,c,d,e,f){m.call(this,
a);this.data=b;this.retryCount=-1;this.errors=c;this.completed=this.hasValue=!1;this.operation=d;this.progressive=e;this.maxRetryCount=f}function q(a,b,c,d){"jsonGraph"===b&&a.paths&&(a.paths=n(a.paths));try{++c.syncRefCount,d.onNext(a)}catch(w){throw w;}finally{--c.syncRefCount}}function t(a,b){try{throw b;}catch(v){m.prototype.onError.call(a,v)}}function p(a,b){for(var c,d,e,h=Object.keys(b),f=-1,l=h.length;++f<l;)e=h[f],"\u001e\u0192_meta"===e?a["\u001e\u0192_meta"]=b["\u001e\u0192_meta"]:(d=b[e],
c=a[e],c!==d&&(d&&"object"===typeof d?void 0===c?a[e]=d:p(c,d):void 0===c&&(a[e]=d)));return a}var k=a(55),m=a(14),r=a(53),y=a(2),n=a(35),g=a(52),x=a(93);b.exports=c;c.prototype=Object.create(k.prototype);c.prototype.lift=function(a,b){b=new c(b||this);b.type=this.type;b.model=this.model;b._args=this._args;b.operator=a;a.data=a.data||this.operator.data;a.errors=a.errors||this.operator.errors;a.operation=a.operation||this.operator.operation;a.progressive=a.progressive||this.operator.progressive;a.maxRetryCount=
a.maxRetryCount||this.operator.maxRetryCount;return b};c.prototype.operator=function(a){return this._subscribe(a)};c.prototype._subscribe=function(a){a.onNext({type:this.type,args:this._args,model:this.model,version:this.model._root.version});a.onCompleted();return a};c.prototype._toJSON=function(a,b){void 0===a&&(a={__proto__:y.prototype});return this.lift(new f(a,b||this.operator.errors,"json",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype._toJSONG=function(a,b){void 0===
a&&(a={__proto__:y.prototype});return this.lift(new f(a,b||this.operator.errors,"jsonGraph",this.operator.progressive,this.operator.maxRetryCount),this.source)};c.prototype.retry=function(a){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,this.operator.progresive,a),this.source)};c.prototype.progressively=function(){return this.lift(new f(this.operator.data,this.operator.errors,this.operator.operation,!0,this.operator.maxRetryCount),this.source)};f.prototype.call=
function(a,b){return a.subscribe(new e(b,this.data,this.errors,this.operation,this.progressive))};e.prototype=Object.create(m.prototype);e.prototype.operations={get:a(71),set:a(84),call:a(70),invalidate:a(82)};e.prototype.next=e.prototype.onNext=function(a){if(this.started){var b,c=a.type;a=a.args||a.paths;var d=this.data,e=this.model,h=this.errors,f,g=this.hasValue,m=this.operation,k=this.progressive,n=k&&d;n&&(d={__proto__:y.prototype});if(a&&a.length){f=this.operations[c][m](e,a,d,k||!e._source,
-1===this.retryCount);if(f.error)return t(this,f.error);h&&f.errors&&h.push.apply(h,f.errors);if(b=f.fragments)a=f.args,this.fragments=b;this.relative=f.relative;this.requested=f.requested;this.missing=b=f.missing;this.hasValue=g||(g=f.hasValue)}this.completed=!b||!e._source;"set"!==c&&(this.args=a,n&&(this.data=p(d,this.data)));k&&g&&d&&(d.json||d.jsonGraph)&&q(d,m,e._root,this.destination)}else this.args=a.args,this.type=a.type,this.model=a.model,this.version=a.version,this.maxRetryCount=this.maxRetryCount||
this.model._root.maxRetryCount};e.prototype.error=e.prototype.onError=function(a){if(a instanceof g)return m.prototype.onError.call(this,a);this.errored=!0;this.onCompleted(a)};e.prototype.complete=e.prototype.onCompleted=function(a){var b,c;if(!this.started&&(this.started=!0))this.onNext(this);else if(c=this.errored)this.onNext({type:"get",paths:this.relative});if(c||this.completed)return!this.progressive&&this.hasValue&&((b=this.data)&&b.json||b.jsonGraph)&&q(b,this.operation,this.model._root,this.destination),
b=this.errors,c||a||b&&b.length?t(this,b.length&&b||a):m.prototype.onCompleted.call(this);if(++this.retryCount>=this.maxRetryCount)return t(this,new x(this.retryCount,this.requested,this.relative,this.missing));this.request=this.model._root.requests[this.type](this.model,this.missing,this.relative,this.fragments).subscribe(this)};e.prototype.dispose=e.prototype.unsubscribe=function(){var a=this.model,b=this.version,c=this.request;this.errors=this.model=this.data=this.args=null;this.completed=this.hasValue=
this.started=this.errored=!1;m.prototype.dispose.call(this);c&&(this.request=null,c.dispose());a&&(a=a._root,c=a.cache,0>=a.syncRefCount&&b!==a.version&&(c&&r(a,a.expired,c.$size||0,a.maxSize,a.collectRatio,a.version),(b=a.onChangesCompleted)&&b.call(a.topLevelModel)))}},function(b,d,a){function c(a){p.call(this,[]);this.modelRoot=a}function f(a,b,c,d,e){this.queue=a;this.dataSource=b;this.scheduler=c;this.requested=d;this.optimized=e}var e=a(55),q=a(97),t=a(14),p=a(15),k=a(56);b.exports=c;c.prototype=
Object.create(p.prototype);c.prototype.set=function(a,b,c,d){var f=this;return new e(function(e){var h=new q("set",f,a._source,new k);e=h.subscribe(new t(e,h));f.add(h);h.data=d.jsonGraph;h.requested.push(c);h.optimized.push(b);h.connect();return e})};c.prototype.call=function(a,b,c,d){var f=this;return new e(function(b){var c=new q("call",f,a._source,new k);b=c.subscribe(new t(b,c));f.add(c);c.data=d;c.boundPath=a._path;c.connect();return b})};c.prototype.get=function(a,b,c){return new f(this,a._source,
a._scheduler,c,b)};f.prototype.subscribe=function(a){for(var b=this.queue,c=this.dataSource,d=this.requested,e=this.optimized,f=this.scheduler,h=-1,l=b.subscriptions,k=l.length,m=new p([],a);++h<k;){var w=l[h];if("get"===w.type&&((w=w.batch(d,e,d=[],e=[]))&&m.add(w.subscribe(new t(a,w))),!e.length))break}e.length&&(w=l[h]=(new q("get",b,c,f)).batch(d,e),m.add(w.subscribe(new t(a,w))),w.connect());return m}},function(b,d,a){function c(a,b,c,d){t.call(this,[],b);this.tree={};this.paths=[];this.type=
a;this.data=null;this.responded=this.active=!1;this.requested=[];this.optimized=[];this.disposable=null;this.dataSource=c;this.scheduler=d}function f(){this.active=!0;var a,b=this.paths=y(this.tree=g(this.optimized.reduce(function(a,b){return n(b,a)},{})));try{switch(this.type){case "get":a=this.dataSource.get(b);break;case "set":a=this.dataSource.set({paths:b,jsonGraph:this.data});break;case "call":a=this.dataSource.call.apply(this.dataSource,this.data)}this.disposable=a.subscribe(this)}catch(v){this.disposable=
{},t.prototype.onError.call(this,new p(v))}}function e(a,b){var c;if(!a||0===(c=a.length))return b;var d=[],e=-1,f,h,g=-1,l=b.length;a:for(;++g<l;)if(h=b[g],h.length>c){f=0;do if(h[f]!==a[f])continue a;while(++f<c);d[++e]=h.slice(c)}return d}var q=Array.isArray,t=a(98);a(14);a(15);var p=a(52),k=a(19),m=a(31),r=a(29),y=a(38),n=a(36),g=a(37),x=a(64);b.exports=c;c.prototype=Object.create(t.prototype);c.prototype.next=c.prototype.onNext=function(a){var b=this.parent;if(b){var c=a,d=0,f=0;if(q(a)){if(0>=
(f=a.length))return;c=a[0]}!1===this.responded&&(this.responded=!0,b.remove(this));var h=this.boundPath;do{var g=c.jsonGraph,m=this.requested,n=b.modelRoot,p=c.invalidated,t=c.paths||this.paths;p&&p.length&&r({_root:n,_path:[]},p,!1);t&&t.length&&g&&"object"===typeof g&&(t=k({_root:n},[{paths:t,jsonGraph:g}],n.errorSelector,n.comparator,!1)[0])}while(++d<f&&(c=a[d]));this.observers.slice(0).forEach(function(a,b){a.onNext({type:"get",paths:m[b]||e(h,t)})})}};c.prototype.error=c.prototype.onError=function(a){var b=
this.parent;if(b){!1===this.responded&&(this.responded=!0,b.remove(this));a=a||{};a=a instanceof Error?{$type:"error",value:{message:a.message}}:"error"===a.$type&&a||{$type:"error",value:a};var b=b.modelRoot,c=y(g(this.requested.reduce(function(a,b){return n(b,a)},{}))).map(function(b){return{path:b,value:a}});c.length&&m({_root:b,_path:[]},c,b.errorSelector,b.comparator,!1);t.prototype.onError.call(this,a)}};c.prototype.complete=c.prototype.onCompleted=function(){if(!1===this.responded)this.onNext({});
t.prototype.onCompleted.call(this)};c.prototype.remove=function(a){a=this.subscriptions.indexOf(a);~a&&(this.requested.splice(a,1),this.optimized.splice(a,1),this.observers.splice(a,1),this.subscriptions.splice(a,1));0===this.subscriptions.length&&this.dispose();return this};c.prototype.dispose=c.prototype.unsubscribe=function(){this.tree={};this.paths=this.data=null;this.active=!1;this.boundPath=null;this.requested=[];this.optimized=[];var a=this.parent;a&&(this.parent=null,a.remove(this));if(a=
this.disposable)this.disposable=null,a.dispose?a.dispose():a.unsubscribe&&a.unsubscribe();t.prototype.dispose.call(this)};c.prototype.connect=function(){if(!this.active&&!this.disposable){var a=this.scheduler.schedule(f.bind(this));this.disposable||(this.disposable=a)}return this};c.prototype.batch=function(a,b,c,d){if(this.active){for(var e=[],f=[],g=this.tree,h=-1,k=-1,l=-1,m=b.length,n=a.length-1;++h<m;){var p=b[h],q=p.length,t=g[q];t&&x(t,p,0,q)?(f[++l]=p,e[l]=a[h<n?h:n]):(d[++k]=p,c[k]=a[h<n?
h:n])}return~l?(this.requested.push(e),this.optimized.push(f),this):null}this.requested.push(a);this.optimized.push(b);return this}},function(b,d,a){function c(a,b){f.call(this,null,b);this.observers=a||[]}var f=a(14),e=a(15);b.exports=c;c.prototype=Object.create(f.prototype);c.prototype.onError=function(a){var b=this.observers.slice(0);this.dispose();b.forEach(function(b){b.onError(a)})};c.prototype.onCompleted=function(){var a=this.observers.slice(0);this.dispose();a.forEach(function(a){a.onCompleted()})};
c.prototype.subscribe=function(a){this.observers.push(a);this.subscriptions.push(a=new e([a],this));return a};c.prototype.dispose=c.prototype.unsubscribe=function(){this.observers=[]}},function(b,d){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){return new c(setTimeout(a,this.delay))};c.prototype.dispose=c.prototype.unsubscribe=function(){this.disposed||(clearTimeout(this.id),this.id=null,this.disposed=!0)};b.exports=a},function(b,d){b.exports=
function(a,b){for(var c=-1,d=-1,q=a.length,t=[];++d<q;)for(var p=b(a[d],d,a),k=-1,m=p.length;++k<m;)t[++c]=p[k];return t}},function(b,d,a){var c=Array.isArray,f=a(32);b.exports=function(a){var b=a;if(b&&"object"===typeof b){var b=c(a)?[]:{},d;for(d in a)f(d)||(b[d]=a[d])}return b}},function(b,d,a){var c=a(5);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,d,a){var c=a(5);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,d,a){var c=Array.isArray,
f=a(5);b.exports=function(a){return f(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,d,a){b.exports=a(106)},function(b,d,a){(function(b,f){Object.defineProperty(d,"__esModule",{value:!0});var c=a(107),c=c&&c.__esModule?c:{"default":c};b="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof b?b:f;b=(0,c["default"])(b);d["default"]=b}).call(d,a(34),a(108)(b))},function(b,d){Object.defineProperty(d,"__esModule",{value:!0});d["default"]=function(a){var b=a.Symbol;
"function"===typeof b?b.observable?a=b.observable:(a=b("observable"),b.observable=a):a="@@observable";return a}},function(b,d){b.exports=function(a){a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,configurable:!1,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,configurable:!1,get:function(){return a.i}}),a.webpackPolyfill=1);return a}},function(b,d,a){b.exports=a(62)}])});
//# sourceMappingURL=falcor.all.min.js.map
