{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap aafdf9ca5c1fa99ed70b","webpack:///./lib/types/ref.js","webpack:///./lib/cache/isExpired.js","webpack:///./~/@graphistry/falcor-path-utils/index.js","webpack:///./lib/support/isObject.js","webpack:///./lib/cache/expireNode.js","webpack:///./lib/cache/createHardlink.js","webpack:///./lib/errors/NullInPathError.js","webpack:///./lib/request/Subscriber.js","webpack:///./lib/request/Subscription.js","webpack:///./lib/support/getSize.js","webpack:///./lib/cache/clone.js","webpack:///./lib/cache/getCachePosition.js","webpack:///./lib/cache/updateNodeAncestors.js","webpack:///./lib/lru/promote.js","webpack:///./lib/types/error.js","webpack:///.-path-utils/lib/support/nullTerminator.js","webpack:///./lib/cache/getBoundCacheNode.js","webpack:///./lib/cache/set/setJSONGraphs.js","webpack:///./lib/cache/set/setPathMaps.js","webpack:///./lib/types/atom.js","webpack:///.-path-utils/lib/hasIntersection.js","webpack:///./lib/cache/get/json/FalcorJSON.js","webpack:///./lib/cache/get/json/index.js","webpack:///./lib/cache/get/jsonGraph/index.js","webpack:///./lib/cache/get/jsonGraph/inlineValue.js","webpack:///./lib/cache/get/onMissing.js","webpack:///./lib/cache/get/onValueType.js","webpack:///./lib/cache/invalidate/invalidatePathSets.js","webpack:///./lib/cache/removeNode.js","webpack:///./lib/cache/removeNodeAndDescendants.js","webpack:///./lib/cache/set/setPathValues.js","webpack:///./lib/errors/InvalidKeySetError.js","webpack:///./lib/support/now.js","webpack:///./lib/values/expires-never.js","webpack:///./lib/values/expires-now.js","webpack:///.-path-utils/lib/flatBufferToPaths.js","webpack:///.-path-utils/lib/getHashCode.js","webpack:///.-path-utils/lib/iterateKeySet.js","webpack:///.-path-utils/lib/support/cloneArray.js","webpack:///.-path-utils/lib/support/types.js","webpack:///.-path-utils/lib/toCollapseMap.js","webpack:///.-path-utils/lib/toCollapseTrees.js","webpack:///.-path-utils/lib/toPaths.js","webpack:///.-path-utils/lib/toTree.js","webpack:///./lib/cache/get/json/getJSON.js","webpack:///./lib/cache/get/json/getReferenceTarget.js","webpack:///./lib/cache/get/json/onValue.js","webpack:///./lib/cache/get/jsonGraph/getJSONGraph.js","webpack:///./lib/cache/insertNode.js","webpack:///./lib/cache/invalidate/invalidatePathMaps.js","webpack:///./lib/cache/mergeValueOrInsertBranch.js","webpack:///./lib/cache/reconstructPath.js","webpack:///./lib/cache/replaceNode.js","webpack:///./lib/cache/updateBackReferenceVersions.js","webpack:///./lib/cache/wrapNode.js","webpack:///./lib/errors/CircularReferenceError.js","webpack:///./lib/errors/InvalidSourceError.js","webpack:///./lib/lru/collect.js","webpack:///./lib/lru/splice.js","webpack:///./lib/request/Request.js","webpack:///./lib/request/Source.js","webpack:///./lib/schedulers/ImmediateScheduler.js","webpack:///./lib/support/getTimestamp.js","webpack:///./lib/support/isFunction.js","webpack:///./lib/support/isJSONEnvelope.js","webpack:///./lib/support/isJSONGraphEnvelope.js","webpack:///(webpack)/buildin/global.js","webpack:///./lib/index.js","webpack:///.-path-utils/lib/collapse.js","webpack:///.-path-utils/lib/computeFlatBufferHash.js","webpack:///.-path-utils/lib/errors/index.js","webpack:///.-path-utils/lib/followReference.js","webpack:///.-path-utils/lib/index.js","webpack:///.-path-utils/lib/optimizePathSets.js","webpack:///.-path-utils/lib/pathCount.js","webpack:///.-path-utils/lib/pathsComplementFromLengthTree.js","webpack:///.-path-utils/lib/pathsComplementFromTree.js","webpack:///.-path-utils/lib/removeIntersection.js","webpack:///.-path-utils/lib/support/catAndSlice.js","webpack:///.-path-utils/lib/toFlatBuffer.js","webpack:///./lib/Model.js","webpack:///./lib/ModelDataSourceAdapter.js","webpack:///./lib/ModelRoot.js","webpack:///./lib/cache/call/index.js","webpack:///./lib/cache/get/index.js","webpack:///./lib/cache/get/json/onError.js","webpack:///./lib/cache/get/json/walkFlatBuffer.js","webpack:///./lib/cache/get/json/walkPath.js","webpack:///./lib/cache/get/jsonGraph/getReferenceTarget.js","webpack:///./lib/cache/get/jsonGraph/onValue.js","webpack:///./lib/cache/get/jsonGraph/walkPath.js","webpack:///./lib/cache/getCache.js","webpack:///./lib/cache/getVersion.js","webpack:///./lib/cache/groupCacheArguments.js","webpack:///./lib/cache/invalidate/index.js","webpack:///./lib/cache/isAlreadyExpired.js","webpack:///./lib/cache/mergeJSONGraphNode.js","webpack:///./lib/cache/set/index.js","webpack:///./lib/cache/transferBackReferences.js","webpack:///./lib/cache/unlinkBackReferences.js","webpack:///./lib/cache/unlinkForwardReference.js","webpack:///./lib/deref/hasValidParentReference.js","webpack:///./lib/deref/index.js","webpack:///./lib/errors/BoundJSONGraphModelError.js","webpack:///./lib/errors/InvalidDerefInputError.js","webpack:///./lib/errors/InvalidModelError.js","webpack:///./lib/errors/MaxRetryExceededError.js","webpack:///./lib/request/Call.js","webpack:///./lib/request/Dedupe.js","webpack:///./lib/request/Queue.js","webpack:///./lib/request/Subject.js","webpack:///./lib/schedulers/TimeoutScheduler.js","webpack:///./lib/support/array-flat-map.js","webpack:///./lib/support/clone.js","webpack:///./lib/support/getExpires.js","webpack:///./lib/support/getType.js","webpack:///./lib/support/hasOwn.js","webpack:///./lib/support/isInternalKey.js","webpack:///./lib/support/isPathValue.js","webpack:///./lib/support/isPrimitive.js","webpack:///./~/symbol-observable/index.js","webpack:///./~/symbol-observable/lib/index.js","webpack:///./~/symbol-observable/lib/ponyfill.js","webpack:///(webpack)/buildin/module.js"],"names":["module","exports","now","require","$now","$never","isExpired","node","exp","$expires","objTypeof","isObject","value","splice","expireNode","expired","lru","push","createHardlink","from","to","backRefs","Æ’_ref","NAME","MESSAGE","NullInPathError","err","Error","call","name","stack","message","prototype","Object","create","Subscription","Subscriber","destination","parent","onCompleted","error","onError","next","onNext","complete","dest","dispose","unsubscribe","subscriptions","add","subscription","remove","index","indexOf","length","pop","getSize","$size","clone","key","keys","json","charAt","$ref","getCachePosition","cache","path","type","depth","maxDepth","$type","removeNode","updateBackReferenceVersions","updateNodeAncestors","nodeArg","offset","version","child","size","EXPIRES_NEVER","lruPromote","root","object","head","prev","undefined","$__null__$","getBoundCacheNode","model","_path","_node","_root","arr","Array","mergeJSONGraphNode","iterateKeySet","setJSONGraphs","jsonGraphEnvelopes","errorSelector","comparator","modelRoot","initialVersion","requestedPath","optimizedPath","requestedPaths","optimizedPaths","jsonGraphEnvelopeIndex","jsonGraphEnvelopeCount","jsonGraphEnvelope","paths","jsonGraph","pathIndex","pathCount","setJSONGraphPathSet","newVersion","rootChangeHandler","onChange","messageRoot","messageParent","note","branch","keySet","optimizedIndex","results","setNode","nextNode","nextParent","nextOptimizedPath","slice","done","setReference","reference","container","count","isArray","mergeValueOrInsertBranch","setPathMaps","pathMapEnvelopes","bound","pathMapIndex","pathMapCount","pathMapEnvelope","setPathMap","pathMap","getKeys","keyIndex","keyCount","itr","nullTerminator","hasIntersection","tree","intersects","keyset","keysetIndex","keysetLength","nextKey","nextDepth","keyIsRange","rangeEnd","keysOrRanges","iteratingKeyset","FalcorJSON","f_meta","assign","toJSON","toProps","serialize","$__hash","enumerable","get","$__version","arrayProtoMethods","reduce","falcorJSONProto","methodName","method","writable","apply","arguments","typeofObject","typeofString","inst","serializer","argsLen","__proto__","total","xs","$code","fm_abs_path","fm_deref_to","fm_deref_from","inlineJSONGraphValue","seed","curr","onMissing","requestedLength","optimizedLength","restPathIndex","restPathCount","restPath","isEmptyKeySet","lastKeyIsNull","missDepth","missTotal","missingPath","missingPaths","requested","isRequestedPath","mPath","missing","Number","$atom","onValueType","fromReference","boxValues","materialized","hasDataSource","treatErrorsAsValues","onValue","hasValue","removeNodeAndDescendants","invalidatePathSets","invalidatePathSet","invalidateNode","invalidateReference","lruSplice","unlinkBackReferences","unlinkForwardReference","key2","setPathValues","pathValues","pathValueIndex","pathValueCount","pathValue","setPathSet","InvalidKeySetError","JSON","stringify","is","e","Date","flatBufferToPaths","flatBuf","leaf","$keys","keysLen","keysIndex","len","rest","concat","getHashCode","str","hash","i","charCodeAt","initializeNote","nextValue","loaded","rangeOffset","arrayOffset","idx","el","initializeRange","empty","memo","cloneArray","a","$error","toCollapseMap","collapseMap","acc","toTree","toCollapseTrees","collapseTrees","collapseKey","typeOfObject","typeOfString","typeOfNumber","MAX_SAFE_INTEGER","MAX_SAFE_INTEGER_DIGITS","MIN_SAFE_INTEGER_DIGITS","abs","Math","safeNumberRegEx","toPaths","lengths","pathmap","allPaths","allPathsLength","isSafeNumber","collapsePathMap","parseInt","sets","pathsIndex","pathsCount","collapsePathSetIndexes","code","String","subs","codes","codesIndex","codesCount","pathsets","pathsetsCount","subPath","subCode","subKeys","subKeysIndex","subKeysCount","subSets","subSetsIndex","subSetsCount","pathset","pathsetIndex","pathsetCount","firstSubKey","pathsetClone","getSortedKeys","keysetCount","collapseIndex","isSparseRange","sort","sortListAscending","b","map","val","num","test","_isSafeNumber","innerToTree","walkPathAndBuildOutput","walkFlatBufferAndBuildOutput","InvalidModelError","toFlatBuffer","computeFlatBufferHash","getJSON","progressive","forceUsePathWalk","referenceContainer","boundPath","_referenceContainer","hasFlatBuffer","data","_boxed","recycleJSON","_recycleJSON","_materialized","Boolean","_source","branchSelector","_treatErrorsAsValues","allowFromWhenceYouCame","_allowFromWhenceYouCame","args","relative","boundRequested","promote","CircularReferenceError","getReferenceTarget","ref","context","followedRefsCount","copy","console","reportFn","warn","log","toString","onJSONValue","requiresMaterializedToReport","BoundJSONGraphModelError","getJSONGraph","insertNode","invalidatePathMaps","_comparator","_errorSelector","invalidatePathMap","getType","getTimestamp","wrapNode","replaceNode","reconstructPath","mType","isDistinct","sizeOffset","currentPath","transferBackReferences","replacement","n","expiresNow","getExpires","atomSize","typeArg","modelCreated","expires","referencePath","InvalidSourceError","innerError","collect","totalArg","max","ratioArg","ratio","shouldUpdate","targetSize","Subject","util","invalidatePaths","Request","_id","queue","source","scheduler","id","active","optimized","disposable","dataSource","env","invalidated","observers","forEach","observer","errorPathValues","connect","scheduledDisposable","schedule","flush","bind","batch","requestedComplements","optimizedComplements","requestedIntersection","optimizedIntersection","findIntersections","obs","set","subscribe","complementIndex","intersectionIndex","intersectionFound","pathLen","subTree","$$observable","default","Source","operator","lift","x","y","then","_promise","global","resolve","reject","values","rejected","errors","ImmediateScheduler","action","$timestamp","functionTypeof","isFunction","func","isJSONEnvelope","envelope","isJSONGraphEnvelope","jsong","Model","falcor","opts","collapse","keysLength","innerReferences","circularReference","followReference","cacheRoot","maxRefFollow","current","refPath","referenceCount","throwToNext","optimizePathSets","removeIntersection","pathsComplementFromTree","pathsComplementFromLengthTree","catAndSlice","$types","p","optimizePathSet","pathSet","out","isKeySet","iteratorNote","nextOptimized","optimizedPathLength","refResults","getRangeOrKeySize","rangeOrKey","getRangeSize","range","isNaN","getPathCount","numPaths","segment","numKeys","j","outLength","emptyNodeKey","nullBuffer","_toFlatBuffer","keysMap","Call","ModelRoot","ModelDataSourceAdapter","TimeoutScheduler","lruCollect","isPrimitive","setCache","getCache","options","_scheduler","_seed","boxed","constructor","_toJSON","preload","invalidate","deref","_hasValidParentReference","getValue","subscriber","setValue","modelSetCache","cacheOrJSONGraphEnvelope","_getCache","result","getVersion","_getVersion","_clone","cloneModel","hasOwnProperty","schedulerOrDelay","round","scheudle","unbatch","asDataSource","_materialize","materialize","_dematerialize","dematerialize","unboxValues","withoutDataSource","getPath","_fromWhenceYouCame","fromWhenceYouCame","allow","_optimizePath","abs_path","_getPathValuesAsPathMap","_getPathValuesAsJSONG","_setPathValues","_setPathMaps","_setJSONGs","_setCache","_invalidatePathValues","_invalidatePathMaps","_model","pathSets","_toJSONG","jsongResponse","suffixes","hasOwn","Requests","o","syncRefCount","maxRetryCount","topLevelModel","requests","collectRatio","maxSize","pow","onChangesCompleted","cacheNode","messageNode","_args","thisPaths","fragments","errorPath","errorValue","originalOnMissing","refTarget","f_old_keys","f_new_keys","f_code","nextJSON","nextReferenceContainer","nextOptimizedLength","optimizedLengthNext","refContainerAbsPath","refContainerRefPath","nextPath","nextPathKey","hasMissingPath","nextMeta","nextMetaPath","rPath","inlineValue","onJSONGraphValue","isInternalKey","_copyCache","cloneBoxedValue","boxedValue","clonedValue","l","fromKey","filter","k","cacheNext","outNext","isUserCreatedcacheNext","isPathValue","groupCacheArguments","groups","argIndex","argCount","group","groupType","arg","argType","inputType","isAlreadyExpired","cType","cIsObject","mIsObject","cTimestamp","mTimestamp","arrayFlatMap","setGroupsIntoCache","groupIndex","groupCount","selector","groupedArgs","operation","resultPaths","pluckPaths","fromNode","destNode","fromNodeRefsLength","destNodeRefsLength","hasValidParentReference","CONTAINER_DOES_NOT_EXIST","InvalidDerefInputError","boundJSONArg","currentRefPath","jsonMetadata","absolutePath","originalRefPath","originalAbsPath","validContainer","shortedPath","MaxRetryExceededError","absolute","printPaths","join","_subscribe","CallOperator","retry","progresive","progressively","CallSubscriber","retryCount","completed","operations","request","errored","started","shouldCollectCache","rootOnChangesCompletedHandler","seedIsImmutable","mergeInto","tryOnNext","destValue","nodeValue","Dedupe","requestsIndex","requestsCount","Queue","isolateSet","isolateCall","batchAndDedupeGet","delay","TimerDisposable","disposed","setTimeout","clearTimeout","array","array2","array3","anyType","obj","prop"],"mappings":"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","file":"falcor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"falcor\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"falcor\"] = factory();\n\telse\n\t\troot[\"falcor\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 124);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aafdf9ca5c1fa99ed70b","module.exports = \"ref\";\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/ref.js","var now = require(\"../support/now\");\nvar $now = require(\"../values/expires-now\");\nvar $never = require(\"../values/expires-never\");\n\nmodule.exports = function isExpired(node) {\n    var exp = node.$expires;\n    return (exp != null) && (\n        exp !== $never ) && (\n        exp === $now || exp < now());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/isExpired.js","module.exports = require(\"/Users/ptaylor/graphistry/falcor/packages/falcor-path-utils\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/@graphistry/falcor-path-utils/index.js\n// module id = 2\n// module chunks = 0","var objTypeof = \"object\";\nmodule.exports = function isObject(value) {\n    return value !== null && typeof value === objTypeof;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isObject.js","var splice = require(\"./../lru/splice\");\n\nmodule.exports = function expireNode(node, expired, lru) {\n    if (!node[Æ’_invalidated]) {\n        node[Æ’_invalidated] = true;\n        expired.push(node);\n        splice(lru, node);\n    }\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/expireNode.js","module.exports = function createHardlink(from, to) {\n\n    // create a back reference\n    var backRefs = to[Æ’_refs_length] || 0;\n    to[Æ’_ref + backRefs] = from;\n    to[Æ’_refs_length] = backRefs + 1;\n\n    // create a hard reference\n    from[Æ’_ref_index] = backRefs;\n    from[Æ’_context] = to;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/createHardlink.js","var NAME = \"NullInPathError\";\nvar MESSAGE = \"`null` is not allowed in branch key positions.\";\n\n/**\n * Does not allow null in path\n */\nfunction NullInPathError() {\n    var err = Error.call(this, MESSAGE);\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined in the constructor.\nNullInPathError.prototype = Object.create(Error.prototype);\nNullInPathError.prototype.name = NAME;\nNullInPathError.message = MESSAGE;\n\nmodule.exports = NullInPathError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/NullInPathError.js","var Subscription = require('./Subscription');\n\nmodule.exports = Subscriber;\n\nfunction Subscriber(destination, parent, onCompleted) {\n    if (typeof destination === 'function' ||\n             typeof parent === 'function' ||\n        typeof onCompleted === 'function') {\n        Subscription.call(this, []);\n        this.destination = {\n            error: parent,\n            onError: parent,\n            next: destination,\n            onNext: destination,\n            complete: onCompleted,\n            onCompleted: onCompleted\n        }\n    } else {\n        Subscription.call(this, [], parent);\n        this.parent = parent;\n        this.destination = destination;\n    }\n}\n\nSubscriber.prototype = Object.create(Subscription.prototype);\n\nSubscriber.prototype.next =\nSubscriber.prototype.onNext = function onNext(value) {\n    var dest = this.destination;\n    if (dest) {\n        if (dest.onNext) {\n            dest.onNext(value);\n        } else if (dest.next) {\n            dest.next(value);\n        }\n    }\n}\n\nSubscriber.prototype.error =\nSubscriber.prototype.onError = function onError(error) {\n    var dest = this.destination;\n    if (dest) {\n        if (dest.onError) {\n            dest.onError(error);\n        } else if (dest.error) {\n            dest.error(error);\n        }\n        this.dispose();\n    } else {\n        this.dispose();\n        throw error;\n    }\n}\n\nSubscriber.prototype.complete =\nSubscriber.prototype.onCompleted = function onCompleted() {\n    var dest = this.destination;\n    if (dest) {\n        if (dest.onCompleted) {\n            dest.onCompleted();\n        } else if (dest.complete) {\n            dest.complete();\n        }\n        this.dispose();\n    }\n}\n\nSubscriber.prototype.dispose =\nSubscriber.prototype.unsubscribe = function () {\n    this.destination = null;\n    Subscription.prototype.dispose.call(this);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Subscriber.js","module.exports = Subscription;\n\nfunction Subscription(subscriptions, parent) {\n    this.parent = parent;\n    this.subscriptions = subscriptions || [];\n}\n\nSubscription.prototype.add = function(subscription) {\n    return this.subscriptions.push(subscription) && this || this;\n}\n\nSubscription.prototype.remove = function(subscription) {\n    var index = this.subscriptions.indexOf(subscription);\n    if (~index) {\n        this.subscriptions.splice(index, 1);\n    }\n    return this;\n}\n\nSubscription.prototype.dispose =\nSubscription.prototype.unsubscribe = function () {\n    var subscription, subscriptions = this.subscriptions;\n    while (subscriptions.length) {\n        (subscription = subscriptions.pop()) &&\n            subscription.dispose &&\n            subscription.dispose();\n    }\n    var parent = this.parent;\n    if (parent) {\n        this.parent = null;\n        parent.remove && parent.remove(this);\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Subscription.js","var isObject = require(\"./../support/isObject\");\nmodule.exports = function getSize(node) {\n    return isObject(node) && node.$size || 0;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/getSize.js","module.exports = clone;\n\nfunction clone(node) {\n\n    var key, keys = Object.keys(node),\n        json = {}, index = -1, length = keys.length;\n\n    while (++index < length) {\n        key = keys[index];\n        if (key.charAt(0) === Æ’_) {\n            continue;\n        }\n        json[key] = node[key];\n    }\n\n    return json;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/clone.js","var $ref = require(\"./../types/ref\");\n\n/**\n * getCachePosition makes a fast walk to the bound value since all bound\n * paths are the most possible optimized path.\n *\n * @param {Model} model -\n * @param {Array} path -\n * @returns {Mixed} - undefined if there is nothing in this position.\n * @private\n */\nmodule.exports = getCachePosition;\n\nfunction getCachePosition(cache, path) {\n\n    var node = cache;\n    var type, depth = 0;\n    var maxDepth = path.length;\n\n    if (maxDepth > 0) {\n        do {\n            node = node[path[depth]];\n\n            while (node && (type = node.$type) === $ref) {\n                node = getCachePosition(cache, node.value);\n            }\n        } while (++depth < maxDepth && node && !type);\n    }\n\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/getCachePosition.js","var removeNode = require(\"./removeNode\");\nvar updateBackReferenceVersions = require(\"./updateBackReferenceVersions\");\n\nmodule.exports = function updateNodeAncestors(nodeArg, offset, lru, version) {\n    var child = nodeArg;\n    do {\n        var node = child[Æ’_parent];\n        var size = child.$size = (child.$size || 0) - offset;\n        if (size <= 0 && node != null) {\n            removeNode(child, node, child[Æ’_key], lru);\n        } else if (child[Æ’_version] !== version) {\n            updateBackReferenceVersions(child, version);\n        }\n        child = node;\n    } while (child);\n    return nodeArg;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/updateNodeAncestors.js","var EXPIRES_NEVER = require(\"./../values/expires-never\");\n\n// [H] -> Next -> ... -> [T]\n// [T] -> Prev -> ... -> [H]\nmodule.exports = function lruPromote(root, object) {\n    // Never promote node.$expires === 1.  They cannot expire.\n    if (object.$expires === EXPIRES_NEVER) {\n        return;\n    }\n\n    var head = root[Æ’_head];\n\n    // Nothing is in the cache.\n    if (!head) {\n        root[Æ’_head] = root[Æ’_tail] = object;\n        return;\n    }\n\n    if (head === object) {\n        return;\n    }\n\n    // The item always exist in the cache since to get anything in the\n    // cache it first must go through set.\n    var prev = object[Æ’_prev];\n    var next = object[Æ’_next];\n    if (next) {\n        next[Æ’_prev] = prev;\n    }\n    if (prev) {\n        prev[Æ’_next] = next;\n    }\n    object[Æ’_prev] = undefined;\n\n    // Insert into head position\n    root[Æ’_head] = object;\n    object[Æ’_next] = head;\n    head[Æ’_prev] = object;\n\n    // If the item we promoted was the tail, then set prev to tail.\n    if (object === root[Æ’_tail]) {\n        root[Æ’_tail] = prev;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/lru/promote.js","module.exports = \"error\";\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/error.js","module.exports = { $__null__$: null };\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/support/nullTerminator.js","var getCachePosition = require(\"./getCachePosition\");\n\nmodule.exports = getBoundCacheNode;\n\nfunction getBoundCacheNode(model, path) {\n    path = path || model._path;\n    var node = model._node;\n    if (!node || node[Æ’_parent] === undefined || node[Æ’_invalidated]) {\n        model._node = null;\n        if (path.length === 0) {\n            node = model._root.cache;\n        } else {\n            node = getCachePosition(model._root.cache, path);\n            if (path === model._path) {\n                model._node = node;\n            }\n        }\n    }\n    return node;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/getBoundCacheNode.js","var arr = new Array(5);\nvar $ref = require(\"../../types/ref\");\nvar expireNode = require(\"../expireNode\");\nvar isExpired = require(\"../isAlreadyExpired\");\nvar createHardlink = require(\"../createHardlink\");\nvar mergeJSONGraphNode = require(\"../mergeJSONGraphNode\");\nvar NullInPathError = require(\"../../errors/NullInPathError\");\nvar iterateKeySet = require(\"@graphistry/falcor-path-utils\").iterateKeySet;\n\n/**\n * Merges a list of {@link JSONGraphEnvelope}s into a {@link JSONGraph}.\n * @function\n * @param {Object} model - the Model for which to merge the {@link JSONGraphEnvelope}s.\n * @param {Array.<PathValue>} jsonGraphEnvelopes - the {@link JSONGraphEnvelope}s to merge.\n * @return {Array.<Array.<Path>>} - an Array of Arrays where each inner Array is a list of requested and optimized paths (respectively) for the successfully set values.\n */\n\nmodule.exports = function setJSONGraphs(model, jsonGraphEnvelopes, errorSelector, comparator) {\n\n    var modelRoot = model._root;\n    var lru = modelRoot;\n    var expired = modelRoot.expired;\n    var version = modelRoot.version++;\n    var cache = modelRoot.cache;\n    var initialVersion = cache[Æ’_version];\n\n    var requestedPath = [];\n    var optimizedPath = [];\n    var requestedPaths = [];\n    var optimizedPaths = [];\n    var jsonGraphEnvelopeIndex = -1;\n    var jsonGraphEnvelopeCount = jsonGraphEnvelopes.length;\n\n    while (++jsonGraphEnvelopeIndex < jsonGraphEnvelopeCount) {\n\n        var jsonGraphEnvelope = jsonGraphEnvelopes[jsonGraphEnvelopeIndex];\n        var paths = jsonGraphEnvelope.paths;\n        var jsonGraph = jsonGraphEnvelope.jsonGraph;\n\n        var pathIndex = -1;\n        var pathCount = paths.length;\n\n        while (++pathIndex < pathCount) {\n\n            var path = paths[pathIndex];\n            optimizedPath.index = 0;\n\n            setJSONGraphPathSet(\n                path, 0,\n                cache, cache, cache,\n                jsonGraph, jsonGraph, jsonGraph,\n                requestedPaths, optimizedPaths, requestedPath, optimizedPath,\n                version, expired, lru, comparator, errorSelector\n            );\n        }\n    }\n\n    arr[0] = undefined;\n    arr[1] = undefined;\n    arr[2] = undefined;\n    arr[3] = undefined;\n    arr[4] = undefined;\n\n    var newVersion = cache[Æ’_version];\n    var rootChangeHandler = modelRoot.onChange;\n\n    if (rootChangeHandler && initialVersion !== newVersion) {\n        rootChangeHandler();\n    }\n\n    return [requestedPaths, optimizedPaths];\n};\n\n/* eslint-disable no-constant-condition */\nfunction setJSONGraphPathSet(\n    path, depth, root, parent, node,\n    messageRoot, messageParent, message,\n    requestedPaths, optimizedPaths, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var note = {};\n    var branch = depth < path.length - 1;\n    var keySet = path[depth];\n    var key = iterateKeySet(keySet, note);\n    var optimizedIndex = optimizedPath.index;\n\n    do {\n\n        requestedPath.depth = depth;\n\n        var results = setNode(\n            root, parent, node, messageRoot, messageParent, message,\n            key, branch, false, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n\n        requestedPath[depth] = key;\n        requestedPath.index = depth;\n\n        var nextNode = results[0];\n        var nextParent = results[1];\n        var nextOptimizedPath = results[4];\n        nextOptimizedPath[nextOptimizedPath.index++] = key;\n\n        if (nextNode) {\n            if (branch) {\n                setJSONGraphPathSet(\n                    path, depth + 1, root, nextParent, nextNode,\n                    messageRoot, results[3], results[2],\n                    requestedPaths, optimizedPaths, requestedPath, nextOptimizedPath,\n                    version, expired, lru, comparator, errorSelector\n                );\n            } else {\n                requestedPaths.push(requestedPath.slice(0, requestedPath.index + 1));\n                optimizedPaths.push(nextOptimizedPath.slice(0, nextOptimizedPath.index));\n            }\n        }\n        key = iterateKeySet(keySet, note);\n        if (note.done) {\n            break;\n        }\n        optimizedPath.index = optimizedIndex;\n    } while (true);\n}\n/* eslint-enable */\n\nfunction setReference(\n    root, node, messageRoot, message, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var parent;\n    var messageParent;\n    var reference = node.value;\n    optimizedPath = reference.slice(0);\n\n    if (isExpired(node)) {\n        expireNode(node, expired, lru);\n        node = undefined;\n        parent = root;\n        messageParent = messageRoot;\n        optimizedPath.index = reference.length;\n    } else {\n\n        var index = 0;\n        var container = node;\n        var count = reference.length - 1;\n        parent = node = root;\n        messageParent = message = messageRoot;\n\n        do {\n            var key = reference[index];\n            var branch = index < count;\n            optimizedPath.index = index;\n\n            var results = setNode(\n                root, parent, node, messageRoot, messageParent, message,\n                key, branch, true, requestedPath, optimizedPath,\n                version, expired, lru, comparator, errorSelector\n            );\n            node = results[0];\n            optimizedPath = results[4];\n            if (!node || typeof node !== 'object') {\n                optimizedPath.index = index;\n                return results;\n            }\n            parent = results[1];\n            message = results[2];\n            messageParent = results[3];\n        } while (index++ < count);\n\n        optimizedPath.index = index;\n\n        if (container[Æ’_context] !== node) {\n            createHardlink(container, node);\n        }\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n    arr[2] = message;\n    arr[3] = messageParent;\n    arr[4] = optimizedPath;\n\n    return arr;\n}\n\nfunction setNode(\n    root, parent, node, messageRoot, messageParent, message,\n    key, branch, reference, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var type = node.$type;\n\n    while (type === $ref) {\n\n        var results = setReference(\n            root, node, messageRoot, message, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n\n        node = results[0];\n\n        if (!node || typeof node !== 'object') {\n            return results;\n        }\n\n        parent = results[1];\n        message = results[2];\n        messageParent = results[3];\n        optimizedPath = results[4];\n        type = node.$type;\n    }\n\n    if (type === undefined) {\n        if (key == null) {\n            if (branch) {\n                throw new NullInPathError();\n            } else if (node) {\n                key = node[Æ’_key];\n            }\n        } else {\n            parent = node;\n            messageParent = message;\n            node = parent[key];\n            message = messageParent && messageParent[key];\n        }\n\n        node = mergeJSONGraphNode(\n            parent, node, message, key, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n    arr[2] = message;\n    arr[3] = messageParent;\n    arr[4] = optimizedPath;\n\n    return arr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/set/setJSONGraphs.js","var arr = new Array(3);\nvar isArray = Array.isArray;\nvar $ref = require(\"../../types/ref\");\nvar isExpired = require(\"../isExpired\");\nvar expireNode = require(\"../expireNode\");\nvar createHardlink = require(\"../createHardlink\");\nvar getCachePosition = require(\"../getCachePosition\");\nvar NullInPathError = require(\"../../errors/NullInPathError\");\nvar mergeValueOrInsertBranch = require(\"../mergeValueOrInsertBranch\");\n\n/**\n * Sets a list of {@link PathMapEnvelope}s into a {@link JSONGraph}.\n * @function\n * @param {Object} model - the Model for which to insert the PathMaps.\n * @param {Array.<PathMapEnvelope>} pathMapEnvelopes - the a list of {@link PathMapEnvelope}s to set.\n * @return {Array.<Array.<Path>>} - an Array of Arrays where each inner Array is a list of requested and optimized paths (respectively) for the successfully set values.\n */\n\nmodule.exports = function setPathMaps(model, pathMapEnvelopes, errorSelector, comparator) {\n\n    var modelRoot = model._root;\n    var lru = modelRoot;\n    var expired = modelRoot.expired;\n    var version = modelRoot.version++;\n    var bound = model._path;\n    var cache = modelRoot.cache;\n    var node = getCachePosition(cache, bound);\n    var parent = node[Æ’_parent] || cache;\n    var initialVersion = cache[Æ’_version];\n\n    var requestedPath = [];\n    var requestedPaths = [];\n    var optimizedPaths = [];\n    var optimizedIndex = bound.length;\n    var pathMapIndex = -1;\n    var pathMapCount = pathMapEnvelopes.length;\n\n    while (++pathMapIndex < pathMapCount) {\n\n        var pathMapEnvelope = pathMapEnvelopes[pathMapIndex];\n        var optimizedPath = bound.slice(0);\n        optimizedPath.index = optimizedIndex;\n\n        setPathMap(\n            pathMapEnvelope.json, 0, cache, parent, node,\n            requestedPaths, optimizedPaths, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n    }\n\n    arr[0] = undefined;\n    arr[1] = undefined;\n    arr[2] = undefined;\n\n    var newVersion = cache[Æ’_version];\n    var rootChangeHandler = modelRoot.onChange;\n\n    if (rootChangeHandler && initialVersion !== newVersion) {\n        rootChangeHandler();\n    }\n\n    return [requestedPaths, optimizedPaths];\n};\n\n/* eslint-disable no-constant-condition */\nfunction setPathMap(\n    pathMap, depth, root, parent, node,\n    requestedPaths, optimizedPaths, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var keys = getKeys(pathMap);\n\n    if (keys && keys.length) {\n\n        var keyIndex = 0;\n        var keyCount = keys.length;\n        var optimizedIndex = optimizedPath.index;\n\n        do {\n            var key = keys[keyIndex];\n            var child = pathMap[key];\n            var branch = !(!child || typeof child !== 'object') && !child.$type;\n\n            requestedPath.depth = depth;\n\n            var results = setNode(\n                root, parent, node, key, child,\n                branch, false, requestedPath, optimizedPath,\n                version, expired, lru, comparator, errorSelector\n            );\n\n            requestedPath[depth] = key;\n            requestedPath.index = depth;\n\n            var nextNode = results[0];\n            var nextParent = results[1];\n            var nextOptimizedPath = results[2];\n            nextOptimizedPath[nextOptimizedPath.index++] = key;\n\n            if (nextNode) {\n                if (branch) {\n                    setPathMap(\n                        child, depth + 1,\n                        root, nextParent, nextNode,\n                        requestedPaths, optimizedPaths, requestedPath, nextOptimizedPath,\n                        version, expired, lru, comparator, errorSelector\n                    );\n                } else {\n                    requestedPaths.push(requestedPath.slice(0, requestedPath.index + 1));\n                    optimizedPaths.push(nextOptimizedPath.slice(0, nextOptimizedPath.index));\n                }\n            }\n            if (++keyIndex >= keyCount) {\n                break;\n            }\n            optimizedPath.index = optimizedIndex;\n        } while (true);\n    }\n}\n/* eslint-enable */\n\nfunction setReference(\n    value, root, node, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var parent;\n    var reference = node.value;\n    optimizedPath = reference.slice(0);\n\n    if (isExpired(node)) {\n        expireNode(node, expired, lru);\n        node = undefined;\n        parent = root;\n        optimizedPath.index = reference.length;\n    } else {\n        var container = node;\n        parent = root;\n\n        node = node[Æ’_context];\n\n        if (node != null) {\n            parent = node[Æ’_parent] || root;\n            optimizedPath.index = reference.length;\n        } else {\n\n            var index = 0;\n            var count = reference.length - 1;\n            optimizedPath.index = index;\n\n            parent = node = root;\n\n            do {\n                var key = reference[index];\n                var branch = index < count;\n                var results = setNode(\n                    root, parent, node, key, value,\n                    branch, true, requestedPath, optimizedPath,\n                    version, expired, lru, comparator, errorSelector\n                );\n                node = results[0];\n                optimizedPath = results[2];\n                if (!node || typeof node !== 'object') {\n                    optimizedPath.index = index;\n                    return results;\n                }\n                parent = results[1];\n            } while (index++ < count);\n\n            optimizedPath.index = index;\n\n            if (container[Æ’_context] !== node) {\n                createHardlink(container, node);\n            }\n        }\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n    arr[2] = optimizedPath;\n\n    return arr;\n}\n\nfunction setNode(\n    root, parent, node, key, value,\n    branch, reference, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var type = node.$type;\n\n    while (type === $ref) {\n\n        var results = setReference(\n            value, root, node, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector);\n\n        node = results[0];\n\n        if (!node || typeof node !== 'object') {\n            return results;\n        }\n\n        parent = results[1];\n        optimizedPath = results[2];\n        type = node && node.$type;\n    }\n\n    if (type === void 0) {\n        if (key == null) {\n            if (branch) {\n                throw new NullInPathError();\n            } else if (node) {\n                key = node[Æ’_key];\n            }\n        } else {\n            parent = node;\n            node = parent[key];\n        }\n\n        node = mergeValueOrInsertBranch(\n            parent, node, key, value,\n            branch, reference, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n    arr[2] = optimizedPath;\n\n    return arr;\n}\n\nfunction getKeys(pathMap) {\n\n    if (!(!pathMap || typeof pathMap !== 'object') && !pathMap.$type) {\n        var keys = [];\n        var itr = 0;\n        if (isArray(pathMap)) {\n            keys[itr++] = \"length\";\n        }\n        for (var key in pathMap) {\n            if (key[0] === Æ’_ || key[0] === \"$\") {\n                continue;\n            }\n            keys[itr++] = key;\n        }\n        return keys;\n    }\n\n    return void 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/set/setPathMaps.js","module.exports = \"atom\";\n\n\n\n// WEBPACK FOOTER //\n// ./lib/types/atom.js","var isArray = Array.isArray;\nvar nullTerminator = require('./support/nullTerminator');\n\nmodule.exports = hasIntersection\n\n/**\n * Tests to see if the intersection should be stripped from the\n * total paths.  The only way this happens currently is if the entirety\n * of the path is contained in the tree.\n * @private\n */\n\nfunction hasIntersection(tree, path, depth, length) {\n\n    if (depth === length) {\n        return true;\n    }\n\n    var intersects = true;\n    var keyset, keysetIndex = -1, keysetLength = 0;\n    var next, nextKey, nextDepth = depth + 1,\n        keyIsRange, rangeEnd, keysOrRanges;\n\n    keyset = path[depth];\n\n    if (keyset === null) {\n        return tree === nullTerminator;\n    }\n\n    iteratingKeyset: do {\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        if ('object' !== typeof keyset) {\n            nextKey = keyset;\n            rangeEnd = undefined;\n            keyIsRange = false;\n        }\n        // If we encounter a Keyset, either iterate through the Keys and Ranges,\n        // or throw an error if we're already iterating a Keyset. Keysets cannot\n        // contain other Keysets.\n        else if (isArray(keyset)) {\n            // If we've already encountered an Array keyset, throw an error.\n            if (keysOrRanges !== undefined) {\n                break iteratingKeyset;\n            }\n            keysetIndex = 0;\n            keysOrRanges = keyset;\n            keysetLength = keyset.length;\n            // If an Array of keys or ranges is empty, terminate the graph walk\n            // and return the json constructed so far. An example of an empty\n            // Keyset is: ['lolomo', [], 'summary']. This should short circuit\n            // without building missing paths.\n            if (0 === keysetLength) {\n                break iteratingKeyset;\n            }\n            // Assign `keyset` to the first value in the Keyset. Re-entering the\n            // outer loop mimics a singly-recursive function call.\n            keyset = keysOrRanges[keysetIndex];\n            continue iteratingKeyset;\n        }\n        // If the Keyset isn't a primitive or Array, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if (\"number\" !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyIsRange = true;\n        }\n\n        do {\n            if (nextDepth === length) {\n                if (tree[nextKey] !== null) {\n                    return false;\n                }\n            } else {\n                next = tree[nextKey];\n                if (next === null || next === undefined) {\n                    return false;\n                } else if (hasIntersection(next, path, nextDepth, length) === false) {\n                    return false;\n                }\n            }\n        }\n        // Re-enter the inner loop and continue iterating the Range, or exit\n        // here if we encountered a Key.\n        while (keyIsRange && ++nextKey <= rangeEnd);\n\n        // If we've exhausted the Keyset (or never encountered one at all),\n        // exit the outer loop.\n        if (++keysetIndex === keysetLength) {\n            break iteratingKeyset;\n        }\n\n        // Otherwise get the next Key or Range from the Keyset and re-enter the\n        // outer loop from the top.\n        keyset = keysOrRanges[keysetIndex];\n    } while (true);\n\n    return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/hasIntersection.js","function FalcorJSON(f_meta) {\n    this[Æ’_meta] = f_meta || {};\n}\n\nFalcorJSON.prototype = Object.create(Object.prototype, Object.assign({\n        toJSON: { value: toJSON },\n        toProps: { value: toProps },\n        serialize: { value: serialize },\n        $__hash: {\n            enumerable: false,\n            get() {\n                var f_meta = this[Æ’_meta];\n                return f_meta && f_meta[\"$code\"] || '';\n            }\n        },\n        $__version: {\n            enumerable: false,\n            get() {\n                var f_meta = this[Æ’_meta];\n                return f_meta && f_meta[Æ’m_version] || 0;\n            }\n        }\n    },\n    arrayProtoMethods().reduce((falcorJSONProto, methodName) => {\n        var method = Array.prototype[methodName];\n        falcorJSONProto[methodName] = {\n            writable: true, enumerable: false, value() {\n                return method.apply(this, arguments);\n            }\n        };\n        return falcorJSONProto;\n    }, {}))\n);\n\nfunction arrayProtoMethods() {\n    return [\n        'concat', 'copyWithin', 'entries', 'every', 'fill', 'filter', 'find',\n        'findIndex', 'forEach', 'includes', 'indexOf', 'join', 'keys',\n        'lastIndexOf', 'map', 'pop', 'push', 'reduce', 'reduceRight',\n        'reverse', 'shift', 'slice', 'some', 'sort', 'splice', 'unshift', 'values'\n    ];\n}\n\nvar isArray = Array.isArray;\nvar typeofObject = 'object';\nvar typeofString = 'string';\n\nfunction toJSON(inst) {\n    if (typeof inst === typeofString) {\n        if (arguments.length !== 1) {\n            return inst;\n        }\n        inst = this;\n    } else if (!inst) {\n        inst = this;\n    }\n    if (inst['self'] === inst ||\n        inst['global'] === inst ||\n        inst['window'] === inst) {\n        return undefined;\n    }\n    var json = serialize(inst, toJSON);\n    if (json[Æ’_meta]) {\n        delete json[Æ’_meta];\n    }\n    return json;\n}\n\nfunction toProps(inst, serializer) {\n    var argsLen = arguments.length;\n    inst = argsLen === 0 ? this : inst;\n    if (!inst || typeof inst !== typeofObject) {\n        return inst;\n    } else if (inst['self'] === inst ||\n               inst['global'] === inst ||\n               inst['window'] === inst) {\n        return undefined;\n    }\n    var json = serialize(inst, argsLen > 0 && serializer || toProps);\n    var f_meta = json[Æ’_meta];\n    if (f_meta) {\n        delete json[Æ’_meta];\n        f_meta[Æ’m_version] = inst[Æ’_meta][Æ’m_version];\n        json.__proto__ = new FalcorJSON(f_meta);\n    }\n    return json;\n}\n\nfunction serialize(inst, serializer) {\n\n    var argsLen = arguments.length;\n    inst = argsLen === 0 ? this : inst;\n\n    if (!inst || typeof inst !== typeofObject) {\n        return inst;\n    } else if (inst['self'] === inst ||\n               inst['global'] === inst ||\n               inst['window'] === inst) {\n        return undefined;\n    }\n\n    var count, total, f_meta, keys, key, xs;\n\n    serializer = argsLen > 0 && serializer || serialize;\n\n    if (isArray(inst)) {\n        count = -1;\n        total = inst.length;\n        xs = new Array(total);\n        while (++count < total) {\n            xs[count] = inst[count];\n        }\n    } else {\n        xs = {};\n        count = -1;\n        f_meta = inst[Æ’_meta];\n        keys = Object.keys(inst);\n        total = keys.length;\n        if (f_meta) {\n            var $code = f_meta[\"$code\"],\n                fm_abs_path = f_meta[Æ’m_abs_path],\n                fm_deref_to = f_meta[Æ’m_deref_to],\n                fm_deref_from = f_meta[Æ’m_deref_from];\n            xs[Æ’_meta] = f_meta = {};\n            $code && (f_meta[\"$code\"] = $code);\n            fm_abs_path && (f_meta[Æ’m_abs_path] = fm_abs_path);\n            fm_deref_to && (f_meta[Æ’m_deref_to] = fm_deref_to);\n            fm_deref_from && (f_meta[Æ’m_deref_from] = fm_deref_from);\n        }\n        while (++count < total) {\n            key = keys[count]\n            if (key !== Æ’_meta) {\n                xs[key] = serializer(inst[key], serializer);\n            }\n        }\n    }\n\n    return xs;\n}\n\nmodule.exports = FalcorJSON;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/FalcorJSON.js","module.exports = require('./getJSON');\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/index.js","module.exports = require('./getJSONGraph');\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/jsonGraph/index.js","module.exports = inlineJSONGraphValue;\n\n/* eslint-disable no-constant-condition */\nfunction inlineJSONGraphValue(node, path, length, seed) {\n\n    var key, depth = 0, prev,\n        curr = seed.jsonGraph;\n\n    if (!curr) {\n        seed.jsonGraph = curr = {};\n    }\n\n    do {\n        prev = curr;\n        key = path[depth++];\n        if (depth >= length) {\n            curr = prev[key] = node;\n            break;\n        }\n        curr = prev[key] || (prev[key] = {});\n    } while (true);\n\n    return curr;\n}\n/* eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/jsonGraph/inlineValue.js","var isArray = Array.isArray;\n\nmodule.exports = onMissing;\n\n/* eslint-disable no-constant-condition */\nfunction onMissing(path, depth, results,\n                   requestedPath, requestedLength,\n                   optimizedPath, optimizedLength) {\n\n    var keyset,\n        restPathIndex = -1,\n        restPathCount = requestedLength - depth,\n        restPath = restPathCount && new Array(restPathCount) || undefined;\n\n    while (++restPathIndex < restPathCount) {\n        keyset = path[restPathIndex + depth];\n        if (isEmptyKeySet(keyset)) {\n            return;\n        }\n        restPath[restPathIndex] = keyset;\n    }\n\n    var lastKeyIsNull = keyset === null;\n    var missDepth = depth,\n        missTotal = requestedLength, missingPath = requestedPath,\n        missingPaths = results.requested || (results.requested = []);\n\n    var isRequestedPath = true, index, count, mPath;\n\n    do {\n        if (restPathCount < requestedLength || !isRequestedPath) {\n            index = -1;\n            count = missDepth;\n            mPath = new Array(missTotal);\n            while (++index < count) {\n                mPath[index] = missingPath[index];\n            }\n            restPathIndex = -1;\n            while (index < missTotal) {\n                mPath[index++] = restPath[++restPathIndex];\n            }\n            missingPaths[missingPaths.length] = mPath;\n        } else {\n            missingPaths[missingPaths.length] = restPath;\n        }\n\n        // break after inserting both requested and optimized missing paths\n        if (isRequestedPath = !isRequestedPath) {\n            break;\n        }\n\n        missDepth = optimizedLength;\n        missingPath = optimizedPath;\n        missingPaths = results.missing || (results.missing = []);\n        missTotal = optimizedLength + restPathCount - Number(lastKeyIsNull);\n    } while (true);\n}\n/* eslint-enable */\n\nfunction isEmptyKeySet(keyset) {\n\n    // false if the keyset is a primitive\n    if (\"object\" !== typeof keyset) {\n        return false;\n    } else if (keyset === null) {\n        return false;\n    }\n\n    if (isArray(keyset)) {\n        // return true if the keyset is an empty array\n        return keyset.length === 0;\n    }\n\n    var rangeEnd = keyset.to,\n        from = keyset.from || 0;\n    if (\"number\" !== typeof rangeEnd) {\n        rangeEnd = from + (keyset.length || 0);\n    }\n\n    // false if trying to request incorrect or empty ranges\n    // e.g. { from: 10, to: 0 } or { from: 5, length: 0 }\n    return from >= rangeEnd;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/onMissing.js","var $atom = require(\"../../types/atom\");\nvar isExpired = require(\"../isExpired\");\nvar expireNode = require(\"../expireNode\");\nvar lruPromote = require(\"../../lru/promote\");\n\nmodule.exports = onValueType;\n\nfunction onValueType(node, type,\n                     path, depth, seed, results,\n                     requestedPath, requestedLength,\n                     optimizedPath, optimizedLength,\n                     fromReference, modelRoot, expired,\n                     boxValues, materialized, hasDataSource,\n                     treatErrorsAsValues, onValue, onMissing) {\n\n    if (!node || !type) {\n        if (materialized && !hasDataSource) {\n            if (seed) {\n                results.hasValue = true;\n                return { $type: $atom };\n            }\n            return undefined;\n        } else {\n            return onMissing(path, depth, results,\n                             requestedPath, requestedLength,\n                             optimizedPath, optimizedLength);\n        }\n    } else if (isExpired(node)) {\n        if (!node[Æ’_invalidated]) {\n            expireNode(node, expired, modelRoot);\n        }\n        return onMissing(path, depth, results,\n                         requestedPath, requestedLength,\n                         optimizedPath, optimizedLength);\n    }\n\n    lruPromote(modelRoot, node);\n\n    if (seed) {\n        if (fromReference) {\n            requestedPath[depth] = null;\n        }\n        return onValue(node, type, depth, seed, results,\n                       requestedPath, optimizedPath, optimizedLength,\n                       fromReference, boxValues, materialized, treatErrorsAsValues);\n    }\n\n    return undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/onValueType.js","var arr = new Array(2);\nvar $ref = require(\"../../types/ref\");\n\nvar getBoundCacheNode = require(\"../getBoundCacheNode\");\n\nvar isExpired = require(\"../isExpired\");\nvar expireNode = require(\"../expireNode\");\nvar lruPromote = require(\"../../lru/promote\");\nvar getSize = require(\"../../support/getSize\");\nvar createHardlink = require(\"../createHardlink\");\nvar iterateKeySet = require(\"@graphistry/falcor-path-utils\").iterateKeySet;\nvar updateNodeAncestors = require(\"../updateNodeAncestors\");\nvar removeNodeAndDescendants = require(\"../removeNodeAndDescendants\");\n\n/**\n * Invalidates a list of Paths in a JSON Graph.\n * @function\n * @param {Object} model - the Model for which to insert the PathValues.\n * @param {Array.<PathValue>} paths - the PathValues to set.\n */\n\nmodule.exports = function invalidatePathSets(model, paths) {\n\n    var modelRoot = model._root;\n    var lru = modelRoot;\n    var expired = modelRoot.expired;\n    var version = modelRoot.version++;\n    var cache = modelRoot.cache;\n    var node = getBoundCacheNode(model);\n    var parent = node[Æ’_parent] || cache;\n    var initialVersion = cache[Æ’_version];\n\n    var pathIndex = -1;\n    var pathCount = paths.length;\n\n    while (++pathIndex < pathCount) {\n\n        var path = paths[pathIndex];\n\n        invalidatePathSet(\n            path, 0, cache, parent, node,\n            version, expired, lru\n        );\n    }\n\n    arr[0] = undefined;\n    arr[1] = undefined;\n\n    var newVersion = cache[Æ’_version];\n    var rootChangeHandler = modelRoot.onChange;\n\n    if (rootChangeHandler && initialVersion !== newVersion) {\n        rootChangeHandler();\n    }\n};\n\nfunction invalidatePathSet(\n    path, depth, root, parent, node,\n    version, expired, lru) {\n\n    var note = {};\n    var branch = depth < path.length - 1;\n    var keySet = path[depth];\n    var key = iterateKeySet(keySet, note);\n\n    do {\n        arr = invalidateNode(\n            root, parent, node,\n            key, branch, false,\n            version, expired, lru\n        );\n        var nextNode = arr[0];\n        var nextParent = arr[1];\n        if (nextNode) {\n            if (branch) {\n                invalidatePathSet(\n                    path, depth + 1,\n                    root, nextParent, nextNode,\n                    version, expired, lru\n                );\n            } else if (removeNodeAndDescendants(nextNode, nextParent, key, lru)) {\n                updateNodeAncestors(nextParent, getSize(nextNode), lru, version);\n            }\n        }\n        key = iterateKeySet(keySet, note);\n    } while (!note.done);\n}\n\nfunction invalidateReference(root, node, version, expired, lru) {\n\n    if (isExpired(node)) {\n        expireNode(node, expired, lru);\n        arr[0] = undefined;\n        arr[1] = root;\n        return arr;\n    }\n\n    lruPromote(lru, node);\n\n    var container = node;\n    var reference = node.value;\n    var parent = root;\n\n    node = node[Æ’_context];\n\n    if (node != null) {\n        parent = node[Æ’_parent] || root;\n    } else {\n\n        var index = 0;\n        var count = reference.length - 1;\n\n        parent = node = root;\n\n        do {\n            var key = reference[index];\n            var branch = index < count;\n            arr = invalidateNode(\n                root, parent, node,\n                key, branch, true,\n                version, expired, lru\n            );\n            node = arr[0];\n            if (!node && typeof node !== 'object') {\n                return arr;\n            }\n            parent = arr[1];\n        } while (index++ < count);\n\n        if (container[Æ’_context] !== node) {\n            createHardlink(container, node);\n        }\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n\n    return arr;\n}\n\nfunction invalidateNode(\n    root, parent, node,\n    key, branch, reference,\n    version, expired, lru) {\n\n    var type = node.$type;\n\n    while (type === $ref) {\n\n        arr = invalidateReference(root, node, version, expired, lru);\n\n        node = arr[0];\n\n        if (!node && typeof node !== 'object') {\n            return arr;\n        }\n\n        parent = arr[1];\n        type = node.$type;\n    }\n\n    if (type !== void 0) {\n        return [node, parent];\n    }\n\n    if (key == null) {\n        if (branch) {\n            throw new Error(\"`null` is not allowed in branch key positions.\");\n        } else if (node) {\n            key = node[Æ’_key];\n        }\n    } else {\n        parent = node;\n        node = parent[key];\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n\n    return arr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/invalidate/invalidatePathSets.js","var $ref = require(\"../types/ref\");\nvar lruSplice = require(\"../lru/splice\");\nvar unlinkBackReferences = require(\"./unlinkBackReferences\");\nvar unlinkForwardReference = require(\"./unlinkForwardReference\");\n\nmodule.exports = function removeNode(node, parent, key, lru) {\n    if (!(!node || typeof node !== 'object')) {\n        var type = node.$type;\n        if (type) {\n            if (type === $ref) {\n                unlinkForwardReference(node);\n            }\n            lruSplice(lru, node);\n        }\n        unlinkBackReferences(node);\n        parent[key] = node[Æ’_parent] = void 0;\n        return true;\n    }\n    return false;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/removeNode.js","var removeNode = require(\"./removeNode\");\n\nmodule.exports = function removeNodeAndDescendants(node, parent, key, lru) {\n    if (removeNode(node, parent, key, lru)) {\n        if (node.$type == null) {\n            for (var key2 in node) {\n                if (key2[0] !== Æ’_ && key2[0] !== \"$\") {\n                    removeNodeAndDescendants(node[key2], node, key2, lru);\n                }\n            }\n        }\n        return true;\n    }\n    return false;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/removeNodeAndDescendants.js","var arr = new Array(3);\nvar $ref = require(\"../../types/ref\");\nvar isExpired = require(\"../isExpired\");\nvar expireNode = require(\"../expireNode\");\nvar createHardlink = require(\"../createHardlink\");\nvar getCachePosition = require(\"../getCachePosition\");\nvar NullInPathError = require(\"../../errors/NullInPathError\");\nvar iterateKeySet = require(\"@graphistry/falcor-path-utils\").iterateKeySet;\nvar mergeValueOrInsertBranch = require(\"../mergeValueOrInsertBranch\");\n\n/**\n * Sets a list of {@link PathValue}s into a {@link JSONGraph}.\n * @function\n * @param {Object} model - the Model for which to insert the {@link PathValue}s.\n * @param {Array.<PathValue>} pathValues - the list of {@link PathValue}s to set.\n * @return {Array.<Array.<Path>>} - an Array of Arrays where each inner Array is a list of requested and optimized paths (respectively) for the successfully set values.\n */\n\nmodule.exports = function setPathValues(model, pathValues, errorSelector, comparator) {\n\n    var modelRoot = model._root;\n    var lru = modelRoot;\n    var expired = modelRoot.expired;\n    var version = modelRoot.version++;\n    var bound = model._path;\n    var cache = modelRoot.cache;\n    var node = getCachePosition(cache, bound);\n    var parent = node[Æ’_parent] || cache;\n    var initialVersion = cache[Æ’_version];\n\n    var requestedPath = [];\n    var requestedPaths = [];\n    var optimizedPaths = [];\n    var optimizedIndex = bound.length;\n    var pathValueIndex = -1;\n    var pathValueCount = pathValues.length;\n\n    while (++pathValueIndex < pathValueCount) {\n\n        var pathValue = pathValues[pathValueIndex];\n        var path = pathValue.path;\n        var value = pathValue.value;\n        var optimizedPath = bound.slice(0);\n        optimizedPath.index = optimizedIndex;\n\n        setPathSet(\n            value, path, 0, cache, parent, node,\n            requestedPaths, optimizedPaths, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n    }\n\n    arr[0] = undefined;\n    arr[1] = undefined;\n    arr[2] = undefined;\n\n    var newVersion = cache[Æ’_version];\n    var rootChangeHandler = modelRoot.onChange;\n\n    if (rootChangeHandler && initialVersion !== newVersion) {\n        rootChangeHandler();\n    }\n\n    return [requestedPaths, optimizedPaths];\n};\n\n/* eslint-disable no-constant-condition */\nfunction setPathSet(\n    value, path, depth, root, parent, node,\n    requestedPaths, optimizedPaths, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var note = {};\n    var branch = depth < path.length - 1;\n    var keySet = path[depth];\n    var key = iterateKeySet(keySet, note);\n    var optimizedIndex = optimizedPath.index;\n\n    do {\n\n        requestedPath.depth = depth;\n        requestedPath[depth] = key;\n        requestedPath.index = depth;\n\n        var results = setNode(\n            root, parent, node, key, value,\n            branch, false, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n\n        requestedPath[depth] = key;\n        requestedPath.index = depth;\n\n        var nextNode = results[0];\n        var nextParent = results[1];\n        var nextOptimizedPath = results[2];\n        nextOptimizedPath[nextOptimizedPath.index++] = key;\n\n        if (nextNode) {\n            if (branch) {\n                setPathSet(\n                    value, path, depth + 1,\n                    root, nextParent, nextNode,\n                    requestedPaths, optimizedPaths, requestedPath, nextOptimizedPath,\n                    version, expired, lru, comparator, errorSelector\n                );\n            } else {\n                requestedPaths.push(requestedPath.slice(0, requestedPath.index + 1));\n                optimizedPaths.push(nextOptimizedPath.slice(0, nextOptimizedPath.index));\n            }\n        }\n        key = iterateKeySet(keySet, note);\n        if (note.done) {\n            break;\n        }\n        optimizedPath.index = optimizedIndex;\n    } while (true);\n}\n/* eslint-enable */\n\nfunction setReference(\n    value, root, node, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var parent;\n    var reference = node.value;\n    optimizedPath = reference.slice(0);\n\n    if (isExpired(node)) {\n        expireNode(node, expired, lru);\n        node = undefined;\n        parent = root;\n        optimizedPath.index = reference.length;\n    } else {\n\n        var container = node;\n        parent = root;\n\n        node = node[Æ’_context];\n\n        if (node != null) {\n            parent = node[Æ’_parent] || root;\n            optimizedPath.index = reference.length;\n        } else {\n\n            var index = 0;\n            var count = reference.length - 1;\n\n            parent = node = root;\n\n            do {\n                var key = reference[index];\n                var branch = index < count;\n                optimizedPath.index = index;\n\n                var results = setNode(\n                    root, parent, node, key, value,\n                    branch, true, requestedPath, optimizedPath,\n                    version, expired, lru, comparator, errorSelector\n                );\n                node = results[0];\n                optimizedPath = results[2];\n                if (!node || typeof node !== 'object') {\n                    optimizedPath.index = index;\n                    return results;\n                }\n                parent = results[1];\n            } while (index++ < count);\n\n            optimizedPath.index = index;\n\n            if (container[Æ’_context] !== node) {\n                createHardlink(container, node);\n            }\n        }\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n    arr[2] = optimizedPath;\n\n    return arr;\n}\n\nfunction setNode(\n    root, parent, node, key, value,\n    branch, reference, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var type = node.$type;\n\n    while (type === $ref) {\n\n        var results = setReference(\n            value, root, node, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n\n        node = results[0];\n\n        if (!node || typeof node !== 'object') {\n            return results;\n        }\n\n        parent = results[1];\n        optimizedPath = results[2];\n        type = node.$type;\n    }\n\n    if (!branch || type === undefined) {\n        if (key == null) {\n            if (branch) {\n                throw new NullInPathError();\n            } else if (node) {\n                key = node[Æ’_key];\n            }\n        } else {\n            parent = node;\n            node = parent[key];\n        }\n\n        node = mergeValueOrInsertBranch(\n            parent, node, key, value,\n            branch, reference, requestedPath, optimizedPath,\n            version, expired, lru, comparator, errorSelector\n        );\n    }\n\n    arr[0] = node;\n    arr[1] = parent;\n    arr[2] = optimizedPath;\n\n    return arr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/set/setPathValues.js","var NAME = \"InvalidKeySetError\";\nvar MESSAGE = \"Keysets can only contain Keys or Ranges\";\n\n/**\n * InvalidKeySetError happens when a dataSource syncronously throws\n * an exception during a get/set/call operation.\n *\n * @param {Error} error - The error that was thrown.\n * @private\n */\nfunction InvalidKeySetError(path, keysOrRanges) {\n    var err = Error.call(this,\n        \"The KeySet \" + JSON.stringify(keysOrRanges) +\n        \" in path \" + JSON.stringify(path) + \" contains a KeySet. \" + MESSAGE);\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined\n// in the constructor.\nInvalidKeySetError.prototype = Object.create(Error.prototype);\nInvalidKeySetError.prototype.name = NAME;\nInvalidKeySetError.is = function(e) {\n    return e && e.name === NAME;\n};\n\nmodule.exports = InvalidKeySetError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/InvalidKeySetError.js","module.exports = Date.now;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/now.js","module.exports = 1;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/values/expires-never.js","module.exports = 0;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/values/expires-now.js","module.exports = flatBufferToPaths;\n\nfunction flatBufferToPaths(flatBuf, paths, path) {\n\n    path = path || [];\n    paths = paths || [];\n\n    var leaf = [];\n    var keys = flatBuf.$keys;\n    var keysLen = keys.length;\n    var keysIndex = -1, key, len;\n\n    while (++keysIndex < keysLen) {\n\n        var rest = flatBuf[keysIndex];\n        var keyset = keys[keysIndex];\n\n        if (!rest) {\n            leaf.push(keyset);\n        } else {\n            flatBufferToPaths(rest, paths, path.concat([keyset]));\n        }\n    }\n\n    if (leaf.length === 1) {\n        paths.push(path.concat(leaf));\n    } else if (leaf.length > 1) {\n        paths.push(path.concat([leaf]));\n    }\n\n    return paths;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/flatBufferToPaths.js","module.exports = getHashCode;\n\nfunction getHashCode(str) {\n    var hash = 5381, i = str.length;\n    while (i) {\n        hash = (hash * 33) ^ str.charCodeAt(--i);\n    }\n    // JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n    // integers. Since we want the results to be always positive, convert the\n    // signed int to an unsigned by doing an unsigned bitshift.\n    return hash >>> 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/getHashCode.js","var isArray = Array.isArray;\n\n/**\n * Takes in a keySet and a note attempts to iterate over it.\n * If the value is a primitive, the key will be returned and the note will\n * be marked done\n * If the value is an object, then each value of the range will be returned\n * and when finished the note will be marked done.\n * If the value is an array, each value will be iterated over, if any of the\n * inner values are ranges, those will be iterated over.  When fully done,\n * the note will be marked done.\n *\n * @param {Object|Array|String|Number} keySet -\n * @param {Object} note - The non filled note\n * @returns {String|Number|undefined} - The current iteration value.\n * If undefined, then the keySet is empty\n * @public\n */\nmodule.exports = function iterateKeySet(keySet, note) {\n    if (note.isArray === undefined) {\n        initializeNote(keySet, note);\n    }\n\n    // Array iteration\n    if (note.isArray) {\n        var nextValue;\n\n        // Cycle through the array and pluck out the next value.\n        do {\n            if (note.loaded && note.rangeOffset > note.to) {\n                ++note.arrayOffset;\n                note.loaded = false;\n            }\n\n            var idx = note.arrayOffset, length = keySet.length;\n            if (idx >= length) {\n                note.done = true;\n                break;\n            }\n\n            var el = keySet[note.arrayOffset];\n            var type = typeof el;\n\n            // Inner range iteration.\n            if (type === 'object') {\n                if (!note.loaded) {\n                    initializeRange(el, note);\n                }\n\n                // Empty to/from\n                if (note.empty) {\n                    continue;\n                }\n\n                nextValue = note.rangeOffset++;\n            }\n\n            // Primitive iteration in array.\n            else {\n                ++note.arrayOffset;\n                nextValue = el;\n            }\n        } while (nextValue === undefined);\n\n        return nextValue;\n    }\n\n    // Range iteration\n    else if (note.isObject) {\n        if (!note.loaded) {\n            initializeRange(keySet, note);\n        }\n        if (note.rangeOffset > note.to) {\n            note.done = true;\n            return undefined;\n        }\n\n        return note.rangeOffset++;\n    }\n\n    // Primitive value\n    else {\n        note.done = true;\n        return keySet;\n    }\n};\n\nfunction initializeRange(key, memo) {\n    var from = memo.from = key.from || 0;\n    var to = memo.to = key.to ||\n        (typeof key.length === 'number' &&\n        memo.from + key.length - 1 || 0);\n    memo.rangeOffset = memo.from;\n    memo.loaded = true;\n    if (from > to) {\n        memo.empty = true;\n    }\n}\n\nfunction initializeNote(key, note) {\n    note.done = false;\n    var isObject = note.isObject = !!(key && typeof key === 'object');\n    note.isArray = isObject && isArray(key);\n    note.arrayOffset = 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/iterateKeySet.js","function cloneArray(arr, index) {\n    var a = [];\n    var len = arr.length;\n    for (var i = index || 0; i < len; i++) {\n        a[i] = arr[i];\n    }\n    return a;\n}\n\nmodule.exports = cloneArray;\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/support/cloneArray.js","module.exports = {\n    $ref: 'ref',\n    $atom: 'atom',\n    $error: 'error'\n};\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/support/types.js","var isArray = Array.isArray;\nvar flatBufferToPaths = require('./flatBufferToPaths');\n\nmodule.exports = toCollapseMap;\n\nfunction toCollapseMap(paths, collapseMap) {\n    if (!paths) { return collapseMap; }\n    else if (!isArray(paths)) {\n        if (isArray(paths.$keys)) {\n            paths = flatBufferToPaths(paths);\n        }\n    }\n    return paths.reduce(function(acc, path) {\n        var len = path.length;\n        if (!acc[len]) {\n            acc[len] = [];\n        }\n        acc[len].push(path);\n        return acc;\n    }, collapseMap || {});\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/toCollapseMap.js","var toTree = require('./toTree');\n\nmodule.exports = toCollapseTrees;\n\nfunction toCollapseTrees(collapseMap, collapseTrees) {\n    return Object.keys(collapseMap).reduce(function(collapseTrees, collapseKey) {\n        collapseTrees[collapseKey] = toTree(collapseMap[collapseKey], collapseTrees[collapseKey]);\n        return collapseTrees;\n    }, collapseTrees || {});\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/toCollapseTrees.js","var isArray = Array.isArray;\nvar typeOfObject = \"object\";\nvar typeOfString = \"string\";\nvar typeOfNumber = \"number\";\nvar MAX_SAFE_INTEGER = 9007199254740991; // Number.MAX_SAFE_INTEGER in es6\nvar MAX_SAFE_INTEGER_DIGITS = 16; // String(Number.MAX_SAFE_INTEGER).length\nvar MIN_SAFE_INTEGER_DIGITS = 17; // String(Number.MIN_SAFE_INTEGER).length (including sign)\nvar abs = Math.abs;\nvar safeNumberRegEx = /^(0|(\\-?[1-9][0-9]*))$/;\nvar nullTerminator = require('./support/nullTerminator');\n\n/* jshint forin: false */\nmodule.exports = function toPaths(lengths) {\n    var pathmap;\n    var allPaths = [];\n    var allPathsLength = 0;\n    for (var length in lengths) {\n        if (isSafeNumber(length) && isObject(pathmap = lengths[length])) {\n            var paths = collapsePathMap(pathmap, 0, parseInt(length, 10)).sets;\n            var pathsIndex = -1;\n            var pathsCount = paths.length;\n            while (++pathsIndex < pathsCount) {\n                allPaths[allPathsLength++] = collapsePathSetIndexes(paths[pathsIndex]);\n            }\n        }\n    }\n    return allPaths;\n};\n\nfunction isObject(value) {\n    return value !== null && typeof value === typeOfObject;\n}\n\nfunction collapsePathMap(pathmap, depth, length) {\n\n    var key;\n    var code = getHashCode(String(depth));\n    var subs = Object.create(null);\n\n    var codes = [];\n    var codesIndex = -1;\n    var codesCount = 0;\n\n    var pathsets = [];\n    var pathsetsCount = 0;\n\n    var subPath, subCode,\n        subKeys, subKeysIndex, subKeysCount,\n        subSets, subSetsIndex, subSetsCount,\n        pathset, pathsetIndex, pathsetCount,\n        firstSubKey, pathsetClone;\n\n    subKeys = [];\n    subKeysIndex = -1;\n\n    if (depth < length - 1) {\n\n        subKeysCount = getSortedKeys(pathmap, subKeys);\n\n        while (++subKeysIndex < subKeysCount) {\n            key = subKeys[subKeysIndex];\n            subPath = collapsePathMap(pathmap[key], depth + 1, length);\n            subCode = subPath.code;\n            if(subs[subCode]) {\n                subPath = subs[subCode];\n            } else {\n                codes[codesCount++] = subCode;\n                subPath = subs[subCode] = {\n                    keys: [],\n                    sets: subPath.sets\n                };\n            }\n            code = getHashCode(code + key + subCode);\n\n            isSafeNumber(key) &&\n                subPath.keys.push(parseInt(key, 10)) ||\n                subPath.keys.push(key);\n        }\n\n        while(++codesIndex < codesCount) {\n\n            key = codes[codesIndex];\n            subPath = subs[key];\n            subKeys = subPath.keys;\n            subKeysCount = subKeys.length;\n\n            if (subKeysCount > 0) {\n\n                subSets = subPath.sets;\n                subSetsIndex = -1;\n                subSetsCount = subSets.length;\n                firstSubKey = subKeys[0];\n\n                while (++subSetsIndex < subSetsCount) {\n\n                    pathset = subSets[subSetsIndex];\n                    pathsetIndex = -1;\n                    pathsetCount = pathset.length;\n                    pathsetClone = new Array(pathsetCount + 1);\n                    pathsetClone[0] = subKeysCount > 1 && subKeys || firstSubKey;\n\n                    while (++pathsetIndex < pathsetCount) {\n                        pathsetClone[pathsetIndex + 1] = pathset[pathsetIndex];\n                    }\n\n                    pathsets[pathsetsCount++] = pathsetClone;\n                }\n            }\n        }\n    } else {\n        subKeysCount = getSortedKeys(pathmap, subKeys);\n        if (subKeysCount > 1) {\n            pathsets[pathsetsCount++] = [subKeys];\n        } else {\n            pathsets[pathsetsCount++] = subKeys;\n        }\n        while (++subKeysIndex < subKeysCount) {\n            code = getHashCode(code + subKeys[subKeysIndex]);\n        }\n    }\n\n    return {\n        code: code,\n        sets: pathsets\n    };\n}\n\nfunction collapsePathSetIndexes(pathset) {\n\n    var keysetIndex = -1;\n    var keysetCount = pathset.length;\n\n    while (++keysetIndex < keysetCount) {\n        var keyset = pathset[keysetIndex];\n        if (isArray(keyset)) {\n            pathset[keysetIndex] = collapseIndex(keyset);\n        }\n    }\n\n    return pathset;\n}\n\n/**\n * Collapse range indexers, e.g. when there is a continuous\n * range in an array, turn it into an object instead:\n *\n * [1,2,3,4,5,6] => {\"from\":1, \"to\":6}\n *\n * @private\n */\nfunction collapseIndex(keyset) {\n\n    // Do we need to dedupe an indexer keyset if they're duplicate consecutive integers?\n    // var hash = {};\n    var keyIndex = -1;\n    var keyCount = keyset.length - 1;\n    var isSparseRange = keyCount > 0;\n\n    while (++keyIndex <= keyCount) {\n\n        var key = keyset[keyIndex];\n\n        if (!isSafeNumber(key) /* || hash[key] === true*/ ) {\n            isSparseRange = false;\n            break;\n        }\n        // hash[key] = true;\n        // Cast number indexes to integers.\n        keyset[keyIndex] = parseInt(key, 10);\n    }\n\n    if (isSparseRange === true) {\n\n        keyset.sort(sortListAscending);\n\n        var from = keyset[0];\n        var to = keyset[keyCount];\n\n        // If we re-introduce deduped integer indexers, change this comparson to \"===\".\n        if (to - from <= keyCount) {\n            return {\n                from: from,\n                to: to\n            };\n        }\n    }\n\n    return keyset;\n}\n\nfunction sortListAscending(a, b) {\n    return a - b;\n}\n\n/* jshint forin: false */\nfunction getSortedKeys(map, keys, sort) {\n    var len = 0;\n    if (map === nullTerminator) {\n        keys[len++] = null;\n    } else {\n        for (var key in map) {\n            keys[len++] = key;\n        }\n        if (len > 1) {\n            keys.sort(sort);\n        }\n    }\n    return len;\n}\n\nfunction getHashCode(key) {\n    var code = 5381;\n    var index = -1;\n    var count = key.length;\n    while (++index < count) {\n        code = (code << 5) + code + key.charCodeAt(index);\n    }\n    return String(code);\n}\n\n/**\n * Return true if argument is a number or can be cast to a number which\n * roundtrips to the same string.\n * @private\n */\nfunction isSafeNumber(val) {\n    var num = val;\n    var type = typeof val;\n    if (type === typeOfString) {\n        var length = val.length;\n        // Number.MIN_SAFE_INTEGER is 17 digits including the sign.\n        // Anything longer cannot be safe.\n        if (length === 0 || length > MIN_SAFE_INTEGER_DIGITS) {\n            return false;\n        }\n        if (!safeNumberRegEx.test(val)) {\n            return false;\n        }\n        // Number.MAX_SAFE_INTEGER is 16 digits.\n        // Anything shorter must be safe.\n        if (length < MAX_SAFE_INTEGER_DIGITS) {\n            return true;\n        }\n        num = +val;\n    } else if (type !== typeOfNumber) {\n        return false;\n    }\n    // Number.isSafeInteger(num) in es6.\n    return num % 1 === 0 && abs(num) <= MAX_SAFE_INTEGER;\n}\n\n// export for testing\nmodule.exports._isSafeNumber = isSafeNumber;\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/toPaths.js","var isArray = Array.isArray;\nvar nullTerminator = require('./support/nullTerminator');\n\n/**\n * @param {Array} paths -\n * @returns {Object} -\n */\nmodule.exports = function toTree(paths, seed) {\n    return paths.reduce(function(seed, path) {\n        return innerToTree(seed, path, 0, path.length);\n    }, seed || {});\n};\n\nfunction innerToTree(seed, path, depth, length) {\n\n    if (depth === length) {\n        return true;\n    }\n\n    var keyset, keysetIndex = -1, keysetLength = 0;\n    var node, next, nextKey, nextDepth = depth + 1,\n        keyIsRange, rangeEnd, keysOrRanges;\n\n    keyset = path[depth];\n\n    if (keyset === null) {\n        return nullTerminator;\n    }\n\n    seed = seed || {};\n\n    iteratingKeyset: do {\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        if ('object' !== typeof keyset) {\n            nextKey = keyset;\n            rangeEnd = undefined;\n            keyIsRange = false;\n        }\n        // If we encounter a Keyset, either iterate through the Keys and Ranges,\n        // or throw an error if we're already iterating a Keyset. Keysets cannot\n        // contain other Keysets.\n        else if (isArray(keyset)) {\n            // If we've already encountered an Array keyset, throw an error.\n            if (keysOrRanges !== undefined) {\n                break iteratingKeyset;\n            }\n            keysetIndex = 0;\n            keysOrRanges = keyset;\n            keysetLength = keyset.length;\n            // If an Array of keys or ranges is empty, terminate the graph walk\n            // and return the json constructed so far. An example of an empty\n            // Keyset is: ['lolomo', [], 'summary']. This should short circuit\n            // without building missing paths.\n            if (0 === keysetLength) {\n                break iteratingKeyset;\n            }\n            // Assign `keyset` to the first value in the Keyset. Re-entering the\n            // outer loop mimics a singly-recursive function call.\n            keyset = keysOrRanges[keysetIndex];\n            continue iteratingKeyset;\n        }\n        // If the Keyset isn't a primitive or Array, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if (\"number\" !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyIsRange = true;\n        }\n\n        do {\n            if (nextDepth === length) {\n                seed[nextKey] = null;\n            } else {\n                node = seed[nextKey];\n                next = innerToTree(node, path, nextDepth, length);\n                if (!next) {\n                    seed[nextKey] = null;\n                } else if (!node) {\n                    seed[nextKey] = next;\n                }\n            }\n        }\n        // Re-enter the inner loop and continue iterating the Range, or exit\n        // here if we encountered a Key.\n        while (keyIsRange && ++nextKey <= rangeEnd);\n\n        // If we've exhausted the Keyset (or never encountered one at all),\n        // exit the outer loop.\n        if (++keysetIndex === keysetLength) {\n            break iteratingKeyset;\n        }\n\n        // Otherwise get the next Key or Range from the Keyset and re-enter the\n        // outer loop from the top.\n        keyset = keysOrRanges[keysetIndex];\n    } while (true);\n\n    return seed;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/toTree.js","var isArray = Array.isArray;\nvar walkPathAndBuildOutput = require(\"./walkPath\");\nvar walkFlatBufferAndBuildOutput = require(\"./walkFlatBuffer\");\nvar getBoundCacheNode = require(\"../../getBoundCacheNode\");\nvar InvalidModelError = require(\"../../../errors/InvalidModelError\");\nvar toFlatBuffer = require(\"@graphistry/falcor-path-utils\").toFlatBuffer;\nvar computeFlatBufferHash = require(\"@graphistry/falcor-path-utils\").computeFlatBufferHash;\n\nmodule.exports = getJSON;\n\nfunction getJSON(model, paths, seed, progressive, forceUsePathWalk) {\n\n    var node,\n        referenceContainer,\n        boundPath = model._path,\n        modelRoot = model._root,\n        cache = modelRoot.cache,\n        requestedPath, requestedLength,\n        optimizedPath, optimizedLength =\n            boundPath && boundPath.length || 0;\n\n    // If the model is bound, get the cache position.\n    if (optimizedLength) {\n        node = getBoundCacheNode(model);\n        // If there was a short, then we 'throw an error' to the outside\n        // calling function which will onError the observer.\n        if (node && node.$type) {\n            return { error: new InvalidModelError(boundPath, boundPath) };\n        }\n        // We need to get the new cache position and copy the bound path.\n        optimizedPath = [];\n        for (var i = 0; i < optimizedLength; ++i) {\n            optimizedPath[i] = boundPath[i];\n        }\n        referenceContainer = model._referenceContainer;\n    } else {\n        node = cache;\n        optimizedPath = [];\n    }\n\n    requestedPath = [];\n\n    var hasFlatBuffer = false,\n        json = seed && seed.json,\n        results = { data: seed },\n        boxValues = model._boxed,\n        expired = modelRoot.expired,\n        recycleJSON = model._recycleJSON,\n        materialized = model._materialized,\n        hasDataSource = Boolean(model._source),\n        branchSelector = modelRoot.branchSelector,\n        treatErrorsAsValues = model._treatErrorsAsValues,\n        allowFromWhenceYouCame = model._allowFromWhenceYouCame;\n\n    if (recycleJSON && forceUsePathWalk !== true && isArray(paths[0])) {\n        paths = [computeFlatBufferHash(toFlatBuffer(paths))];\n    }\n\n    var pathsIndex = -1, pathsCount = paths.length;\n    while (++pathsIndex < pathsCount) {\n        var path = paths[pathsIndex];\n        if (isArray(path)) {\n            requestedLength = path.length;\n            json = walkPathAndBuildOutput(cache, node, json, path,\n                                       /* depth = */ 0, seed, results,\n                                          requestedPath, requestedLength,\n                                          optimizedPath, optimizedLength,\n                                          /* fromReference = */ false, referenceContainer,\n                                          modelRoot, expired, branchSelector,\n                                          boxValues, materialized, hasDataSource,\n                                          treatErrorsAsValues, allowFromWhenceYouCame);\n        } else {\n            hasFlatBuffer = true;\n            var arr = walkFlatBufferAndBuildOutput(cache, node, json, path, 0, seed, results,\n                                                   requestedPath, optimizedPath, optimizedLength,\n                                                   /* fromReference = */ false, referenceContainer,\n                                                   modelRoot, expired, branchSelector,\n                                                   boxValues, materialized, hasDataSource,\n                                                   treatErrorsAsValues, allowFromWhenceYouCame);\n            json = arr[0];\n            arr[0] = undefined;\n            arr[1] = undefined;\n        }\n    }\n\n    var requested = results.requested;\n\n    results.args = hasFlatBuffer && paths || requested;\n\n    if (requested && requested.length) {\n        results.relative = results.args;//requested;\n        if (optimizedLength) {\n            var boundRequested = [];\n            for (var i = 0, len = requested.length; i < len; ++i) {\n                boundRequested[i] = boundPath.concat(requested[i]);\n            }\n            results.requested = boundRequested;\n        }\n    }\n\n    if (results.hasValue) {\n        seed.json = json;\n    }\n\n    return results;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/getJSON.js","var arr = new Array(3);\nvar $ref = require(\"../../../types/ref\");\nvar promote = require(\"../../../lru/promote\");\nvar isExpired = require(\"../../isExpired\");\nvar createHardlink = require(\"../../createHardlink\");\nvar CircularReferenceError = require(\"../../../errors/CircularReferenceError\");\n\nmodule.exports = getReferenceTarget;\n\n/* eslint-disable no-undef */\n/* eslint-disable no-console */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-constant-condition */\nfunction getReferenceTarget(root, ref, modelRoot) {\n\n    promote(modelRoot, ref);\n\n    var context,\n        key, type, depth = 0,\n        followedRefsCount = 0,\n        node = root, path = ref.value,\n        copy = path, length = path.length;\n\n    do {\n        if (depth === 0 && undefined !== (context = ref[Æ’_context])) {\n            node = context;\n            depth = length;\n        } else {\n            key = path[depth++];\n            if (undefined === (node = node[key])) {\n                break;\n            }\n        }\n\n        if (depth === length) {\n            type = node.$type;\n            // If the reference points to an expired\n            // value node, don't create a hard-link.\n            if (undefined !== type && isExpired(node)) {\n                break;\n            }\n            // If a reference points to itself, throw an error.\n            else if (node === ref) {\n                throw new CircularReferenceError(path);\n            }\n            // If the node we land on isn't the existing ref context,\n            // create a hard-link between the reference and the node\n            // it points to.\n            else if (node !== context) {\n                createHardlink(ref, node);\n            }\n\n            // If the reference points to another ref, follow the new ref\n            // by resetting the relevant state and continuing from the top.\n            if (type === $ref) {\n\n                promote(modelRoot, node);\n\n                depth = 0;\n                ref = node;\n                node = root;\n                path = copy = ref.value;\n                length = path.length;\n\n                if (DEBUG) {\n                    // If we follow too many references, we might have an indirect\n                    // circular reference chain. Warn about this (but don't throw).\n                    if (++followedRefsCount % 50 === 0) {\n                        try {\n                            throw new Error(\n                                \"Followed \" + followedRefsCount + \" references. \" +\n                                \"This might indicate the presence of an indirect \" +\n                                \"circular reference chain.\"\n                            );\n                        } catch (e) {\n                            if (console) {\n                                var reportFn = ((\n                                    typeof console.warn === \"function\" && console.warn) || (\n                                    typeof console.log === \"function\" && console.log));\n                                if (reportFn) {\n                                    reportFn.call(console, e.toString());\n                                }\n                            }\n                        }\n                    }\n                }\n\n                continue;\n            }\n            break;\n        } else if (undefined !== node.$type) {\n            break;\n        }\n    } while (true);\n\n    if (depth < length && undefined !== node) {\n        length = depth;\n    }\n\n    depth = -1;\n    path = new Array(length);\n    while (++depth < length) {\n        path[depth] = copy[depth];\n    }\n\n    arr[0] = node;\n    arr[1] = path;\n    arr[2] = ref;\n\n    return arr;\n}\n/* eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/getReferenceTarget.js","var clone = require(\"../../clone\");\nvar onError = require(\"./onError\");\nvar $atom = require(\"../../../types/atom\");\nvar $error = require(\"../../../types/error\");\n\nmodule.exports = onJSONValue;\n\nfunction onJSONValue(node, type, depth, seed, results,\n                     requestedPath, optimizedPath, optimizedLength,\n                     fromReference, boxValues, materialized,\n                     treatErrorsAsValues) {\n\n    if ($error === type && !treatErrorsAsValues) {\n        return onError(node, depth, results, requestedPath,\n                       fromReference, boxValues);\n    }\n\n    var value = node && node.value;\n    var requiresMaterializedToReport = type && value === undefined;\n\n    if (requiresMaterializedToReport) {\n        if (materialized) {\n            results.hasValue = true;\n            return { $type: $atom };\n        }\n        return undefined;\n    }\n\n    results.hasValue = true;\n\n    // boxValues always clones the node\n    if (boxValues) {\n        return clone(node);\n    }\n\n    return value;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/onValue.js","var walkPathAndBuildOutput = require(\"./walkPath\");\nvar BoundJSONGraphModelError = require(\"../../../errors/BoundJSONGraphModelError\");\n\nmodule.exports = getJSONGraph;\n\nfunction getJSONGraph(model, paths, seed) {\n\n    var node, cache,\n        boundPath = model._path,\n        modelRoot = model._root,\n        requestedPath, requestedLength,\n        optimizedPath, optimizedLength =\n            boundPath && boundPath.length || 0;\n\n    // If the model is bound, then get that cache position.\n    if (optimizedLength) {\n        // JSONGraph output cannot ever be bound or else it will\n        // throw an error.\n        return { error: new BoundJSONGraphModelError() };\n    } else {\n        optimizedPath = [];\n        cache = node = modelRoot.cache;\n    }\n\n    requestedPath = [];\n\n    var boxValues = model._boxed,\n        expired = modelRoot.expired,\n        materialized = model._materialized,\n        hasDataSource = Boolean(model._source),\n        treatErrorsAsValues = model._treatErrorsAsValues,\n\n        results = { data: seed },\n        pathsIndex = -1, pathsCount = paths.length;\n\n    while (++pathsIndex < pathsCount) {\n        var path = paths[pathsIndex];\n        requestedLength = path.length;\n        walkPathAndBuildOutput(cache, node, path,\n                            /* depth = */ 0, seed, results,\n                               requestedPath, requestedLength,\n                               optimizedPath, optimizedLength,\n              /* fromReference = */ false, modelRoot, expired,\n                               boxValues, materialized, hasDataSource,\n                               treatErrorsAsValues);\n    }\n\n    results.args =\n    results.relative = results.requested;\n\n    return results;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/jsonGraph/getJSONGraph.js","module.exports = function insertNode(node, parent, key, version, optimizedPath) {\n    node[Æ’_key] = key;\n    node[Æ’_parent] = parent;\n\n    if (version !== undefined) {\n        node[Æ’_version] = version;\n    }\n    if (!node[Æ’_abs_path]) {\n        node[Æ’_abs_path] = optimizedPath.slice(0, optimizedPath.index).concat(key);\n    }\n\n    parent[key] = node;\n\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/insertNode.js","var $ref = require(\"../../types/ref\");\nvar isExpired = require(\"../isExpired\");\nvar expireNode = require(\"../expireNode\");\nvar lruPromote = require(\"../../lru/promote\");\nvar getSize = require(\"../../support/getSize\");\nvar createHardlink = require(\"../createHardlink\");\nvar getBoundCacheNode = require(\"../getBoundCacheNode\");\nvar updateNodeAncestors = require(\"../updateNodeAncestors\");\nvar removeNodeAndDescendants = require(\"../removeNodeAndDescendants\");\n\n/**\n * Sets a list of PathMaps into a JSON Graph.\n * @function\n * @param {Object} model - the Model for which to insert the PathMaps.\n * @param {Array.<PathMapEnvelope>} pathMapEnvelopes - the a list of @PathMapEnvelopes to set.\n */\n\nmodule.exports = function invalidatePathMaps(model, pathMapEnvelopes) {\n\n    var modelRoot = model._root;\n    var lru = modelRoot;\n    var expired = modelRoot.expired;\n    var version = modelRoot.version++;\n    var comparator = modelRoot._comparator;\n    var errorSelector = modelRoot._errorSelector;\n    var cache = modelRoot.cache;\n    var node = getBoundCacheNode(model);\n    var parent = node[Æ’_parent] || cache;\n    var initialVersion = cache[Æ’_version];\n\n    var pathMapIndex = -1;\n    var pathMapCount = pathMapEnvelopes.length;\n\n    while (++pathMapIndex < pathMapCount) {\n\n        var pathMapEnvelope = pathMapEnvelopes[pathMapIndex];\n\n        invalidatePathMap(\n            pathMapEnvelope.json, 0, cache, parent, node,\n            version, expired, lru, comparator, errorSelector\n        );\n    }\n\n    var newVersion = cache[Æ’_version];\n    var rootChangeHandler = modelRoot.onChange;\n\n    if (rootChangeHandler && initialVersion !== newVersion) {\n        rootChangeHandler();\n    }\n};\n\nfunction invalidatePathMap(pathMap, depth, root, parent, node, version, expired, lru, comparator, errorSelector) {\n\n    if (!pathMap || typeof pathMap !== 'object' || pathMap.$type) {\n        return;\n    }\n\n    for (var key in pathMap) {\n        if (key[0] !== Æ’_ && key[0] !== \"$\") {\n            var child = pathMap[key];\n            var branch = !(!child || typeof child !== 'object') && !child.$type;\n            var results = invalidateNode(\n                root, parent, node,\n                key, child, branch, false,\n                version, expired, lru, comparator, errorSelector\n            );\n            var nextNode = results[0];\n            var nextParent = results[1];\n            if (nextNode) {\n                if (branch) {\n                    invalidatePathMap(\n                        child, depth + 1,\n                        root, nextParent, nextNode,\n                        version, expired, lru, comparator, errorSelector\n                    );\n                } else if (removeNodeAndDescendants(nextNode, nextParent, key, lru)) {\n                    updateNodeAncestors(nextParent, getSize(nextNode), lru, version);\n                }\n            }\n        }\n    }\n}\n\nfunction invalidateReference(value, root, node, version, expired, lru, comparator, errorSelector) {\n\n    if (isExpired(node)) {\n        expireNode(node, expired, lru);\n        return [undefined, root];\n    }\n\n    lruPromote(lru, node);\n\n    var container = node;\n    var reference = node.value;\n    var parent = root;\n\n    node = node[Æ’_context];\n\n    if (node != null) {\n        parent = node[Æ’_parent] || root;\n    } else {\n\n        var index = 0;\n        var count = reference.length - 1;\n\n        parent = node = root;\n\n        do {\n            var key = reference[index];\n            var branch = index < count;\n            var results = invalidateNode(\n                root, parent, node,\n                key, value, branch, true,\n                version, expired, lru, comparator, errorSelector\n            );\n            node = results[0];\n            if (!node || typeof node !== 'object') {\n                return results;\n            }\n            parent = results[1];\n        } while (index++ < count);\n\n        if (container[Æ’_context] !== node) {\n            createHardlink(container, node);\n        }\n    }\n\n    return [node, parent];\n}\n\nfunction invalidateNode(\n    root, parent, node,\n    key, value, branch, reference,\n    version, expired, lru, comparator, errorSelector) {\n\n    var type = node.$type;\n\n    while (type === $ref) {\n\n        var results = invalidateReference(value, root, node, version, expired, lru, comparator, errorSelector);\n\n        node = results[0];\n\n        if (!node && typeof node !== 'object') {\n            return results;\n        }\n\n        parent = results[1];\n        type = node && node.$type;\n    }\n\n    if (type !== void 0) {\n        return [node, parent];\n    }\n\n    if (key == null) {\n        if (branch) {\n            throw new Error(\"`null` is not allowed in branch key positions.\");\n        } else if (node) {\n            key = node[Æ’_key];\n        }\n    } else {\n        parent = node;\n        node = parent[key];\n    }\n\n    return [node, parent];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/invalidate/invalidatePathMaps.js","var $ref = require(\"../types/ref\");\nvar $error = require(\"../types/error\");\nvar getType = require(\"../support/getType\");\nvar getSize = require(\"../support/getSize\");\nvar getTimestamp = require(\"../support/getTimestamp\");\n\nvar wrapNode = require(\"./wrapNode\");\nvar isExpired = require(\"./isExpired\");\nvar expireNode = require(\"./expireNode\");\nvar insertNode = require(\"./insertNode\");\nvar replaceNode = require(\"./replaceNode\");\nvar reconstructPath = require(\"./reconstructPath\");\nvar updateNodeAncestors = require(\"./updateNodeAncestors\");\n\nmodule.exports = function mergeValueOrInsertBranch(\n    parent, node, key, value,\n    branch, reference, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var type = getType(node, reference);\n\n    if (branch || reference) {\n        if (type && isExpired(node)) {\n            type = \"expired\";\n            expireNode(node, expired, lru);\n        }\n        if ((type && type !== $ref) || (!node || typeof node !== 'object')) {\n            node = replaceNode(node, {}, parent, key, lru, version);\n            node = insertNode(node, parent, key, version, optimizedPath);\n        }\n    } else {\n        var message = value;\n        var mType = getType(message);\n        // Compare the current cache value with the new value. If either of\n        // them don't have a timestamp, or the message's timestamp is newer,\n        // replace the cache value with the message value. If a comparator\n        // is specified, the comparator takes precedence over timestamps.\n        //\n        // Comparing either Number or undefined to undefined always results in false.\n        var isDistinct = (getTimestamp(message) < getTimestamp(node)) === false;\n        // If at least one of the cache/message are sentinels, compare them.\n        if ((type || mType) && comparator) {\n            isDistinct = !comparator(node, message, optimizedPath.slice(0, optimizedPath.index));\n        }\n        if (isDistinct) {\n\n            if (errorSelector && mType === $error) {\n                message = errorSelector(reconstructPath(requestedPath, key), message);\n            }\n\n            message = wrapNode(message, mType, mType ? message.value : message);\n\n            var sizeOffset = getSize(node) - getSize(message);\n\n            node = replaceNode(node, message, parent, key, lru, version);\n            parent = updateNodeAncestors(parent, sizeOffset, lru, version);\n            node = insertNode(node, parent, key, version, optimizedPath);\n        }\n    }\n\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/mergeValueOrInsertBranch.js","/**\n * Reconstructs the path for the current key, from currentPath (requestedPath)\n * state maintained during set/merge walk operations.\n *\n * During the walk, since the requestedPath array is updated after we attempt to\n * merge/insert nodes during a walk (it reflects the inserted node's parent branch)\n * we need to reconstitute a path from it.\n *\n * @param  {Array} currentPath The current requestedPath state, during the walk\n * @param  {String} key        The current key value, during the walk\n * @return {Array} A new array, with the path which represents the node we're about\n * to insert\n */\nmodule.exports = function reconstructPath(currentPath, key) {\n\n    var path = currentPath.slice(0, currentPath.depth);\n    path[path.length] = key;\n\n    return path;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/reconstructPath.js","var transferBackReferences = require(\"./transferBackReferences\");\nvar removeNodeAndDescendants = require(\"./removeNodeAndDescendants\");\nvar updateBackReferenceVersions = require(\"./updateBackReferenceVersions\");\n\nmodule.exports = function replaceNode(node, replacement, parent, key, lru, version) {\n    if (node === replacement) {\n        return node;\n    } else if (!(!node || typeof node !== 'object')) {\n        transferBackReferences(node, replacement);\n        removeNodeAndDescendants(node, parent, key, lru);\n        updateBackReferenceVersions(replacement, version);\n    }\n\n    parent[key] = replacement;\n    return replacement;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/replaceNode.js","module.exports = function updateBackReferenceVersions(nodeArg, version) {\n    var stack = [nodeArg];\n    var count = 0;\n    do {\n        var node = stack[count];\n        if (node && node[Æ’_version] !== version) {\n            node[Æ’_version] = version;\n            stack[count++] = node[Æ’_parent];\n            var i = -1;\n            var n = node[Æ’_refs_length] || 0;\n            while (++i < n) {\n                stack[count++] = node[Æ’_ref + i];\n            }\n        }\n    } while (--count > -1);\n    return nodeArg;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/updateBackReferenceVersions.js","var isArray = Array.isArray;\nvar now = require(\"../support/now\");\nvar expiresNow = require(\"../values/expires-now\");\n\nvar $atom = require(\"../types/atom\");\nvar clone = require(\"./../support/clone\");\nvar getSize = require(\"./../support/getSize\");\nvar getExpires = require(\"../support/getExpires\");\n\nvar atomSize = 50;\n\nmodule.exports = function wrapNode(nodeArg, typeArg, value) {\n\n    var size = 0;\n    var node = nodeArg;\n    var type = typeArg;\n\n    if (type) {\n        var modelCreated = node[Æ’_wrapped_value];\n        node = clone(node);\n        size = getSize(node);\n        node.$type = type;\n        node[Æ’_prev] = undefined;\n        node[Æ’_next] = undefined;\n        node[Æ’_wrapped_value] = modelCreated || false;\n    } else {\n        node = { $type: $atom, value: value };\n        node[Æ’_prev] = undefined;\n        node[Æ’_next] = undefined;\n        node[Æ’_wrapped_value] = true;\n    }\n\n    if (value == null) {\n        size = atomSize + 1;\n    } else if (size == null || size <= 0) {\n        switch (typeof value) {\n            case \"object\":\n                if (isArray(value)) {\n                    size = atomSize + value.length;\n                } else {\n                    size = atomSize + 1;\n                }\n                break;\n            case \"string\":\n                size = atomSize + value.length;\n                break;\n            default:\n                size = atomSize + 1;\n                break;\n        }\n    }\n\n    var expires = getExpires(node);\n\n    if (typeof expires === \"number\" && expires < expiresNow) {\n        node.$expires = now() + (expires * -1);\n    }\n\n    node.$size = size;\n\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/wrapNode.js","var NAME = \"CircularReferenceError\";\n\n/**\n * Does not allow null in path\n */\nfunction CircularReferenceError(referencePath) {\n    var err = Error.call(this, \"Encountered circular reference \" +\n        JSON.stringify(referencePath));\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined in the constructor.\nCircularReferenceError.prototype = Object.create(Error.prototype);\nCircularReferenceError.prototype.name = NAME;\n\nmodule.exports = CircularReferenceError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/CircularReferenceError.js","var NAME = \"InvalidSourceError\";\nvar MESSAGE = \"An exception was thrown when making a request.\";\n\n/**\n * InvalidSourceError happens when a dataSource syncronously throws\n * an exception during a get/set/call operation.\n *\n * @param {Error} error - The error that was thrown.\n * @private\n */\nfunction InvalidSourceError(error) {\n    var err = Error.call(this, MESSAGE);\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    this.innerError = error;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined\n// in the constructor.\nInvalidSourceError.prototype = Object.create(Error.prototype);\nInvalidSourceError.prototype.name = NAME;\nInvalidSourceError.is = function(e) {\n    return e && e.name === NAME;\n};\n\nmodule.exports = InvalidSourceError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/InvalidSourceError.js","var removeNode = require(\"../cache/removeNode\");\nvar updateNodeAncestors = require(\"../cache/updateNodeAncestors\");\n\nmodule.exports = function collect(lru, expired, totalArg, max, ratioArg, version) {\n\n    var total = totalArg;\n    var ratio = ratioArg;\n\n    if (typeof ratio !== \"number\") {\n        ratio = 0.75;\n    }\n\n    var shouldUpdate = typeof version === \"number\";\n    var targetSize = max * ratio;\n    var parent, node, size;\n\n    node = expired.pop();\n\n    while (node) {\n        size = node.$size || 0;\n        total -= size;\n        if (shouldUpdate === true) {\n            updateNodeAncestors(node, size, lru, version);\n        } else if (parent = node[Æ’_parent]) {  // eslint-disable-line no-cond-assign\n            removeNode(node, parent, node[Æ’_key], lru);\n        }\n        node = expired.pop();\n    }\n\n    if (total >= max) {\n        var prev = lru[Æ’_tail];\n        node = prev;\n        while ((total >= targetSize) && node) {\n            prev = prev[Æ’_prev];\n            size = node.$size || 0;\n            total -= size;\n            if (shouldUpdate === true) {\n                updateNodeAncestors(node, size, lru, version);\n            }\n            node = prev;\n        }\n\n        lru[Æ’_tail] = lru[Æ’_prev] = node;\n        if (node == null) {\n            lru[Æ’_head] = lru[Æ’_next] = undefined;\n        } else {\n            node[Æ’_next] = undefined;\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/lru/collect.js","module.exports = function lruSplice(root, object) {\n\n    // Its in the cache.  Splice out.\n    var prev = object[Æ’_prev];\n    var next = object[Æ’_next];\n    if (next) {\n        next[Æ’_prev] = prev;\n    }\n    if (prev) {\n        prev[Æ’_next] = next;\n    }\n    object[Æ’_prev] = object[Æ’_next] = undefined;\n\n    if (object === root[Æ’_head]) {\n        root[Æ’_head] = next;\n    }\n    if (object === root[Æ’_tail]) {\n        root[Æ’_tail] = prev;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/lru/splice.js","var Subject = require('./Subject');\nvar $error = require('../types/error');\nvar Subscriber = require('./Subscriber');\nvar Subscription = require('./Subscription');\nvar util = require('@graphistry/falcor-path-utils');\nvar InvalidSourceError = require(\"../errors/InvalidSourceError\");\n\nvar toPaths = util.toPaths;\nvar toCollapseMap = util.toCollapseMap;\nvar toCollapseTrees = util.toCollapseTrees;\nvar hasIntersection = util.hasIntersection;\n\nvar setJSONGraphs = require('../cache/set/setJSONGraphs');\nvar setPathValues = require('../cache/set/setPathValues');\nvar invalidatePaths = require('../cache/invalidate/invalidatePathSets');\n\nmodule.exports = Request;\n\nvar _id = 0;\n\nfunction Request(type, queue, source, scheduler) {\n    Subject.call(this, [], queue);\n    this.id = _id++;\n    this.tree = {};\n    this.paths = [];\n    this.type = type;\n    this.data = null;\n    this.active = false;\n    this.requested = [];\n    this.optimized = [];\n    this.disposable = null;\n    this.dataSource = source;\n    this.scheduler = scheduler;\n}\n\nRequest.prototype = Object.create(Subject.prototype);\n\nRequest.prototype.next =\nRequest.prototype.onNext = function(env) {\n\n    var queue = this.parent;\n\n    if (!queue) {\n        return;\n    }\n\n    // console.log('request received', this.id, this.observers.length, JSON.stringify(env));\n\n    // var errors = env.errors;\n    var jsonGraph = env.jsonGraph;\n    var requested = this.requested;\n    var modelRoot = queue.modelRoot;\n    var invalidated = env.invalidated;\n    var paths = env.paths || this.paths;\n\n    // Insert errors first.\n    // if (errors && errors.length) {\n    //     setPathValues(\n    //         { _root: modelRoot, _path: [] }, errors,\n    //         modelRoot.errorSelector, modelRoot.comparator\n    //     );\n    // }\n\n    // Then run invalidations.\n    if (invalidated && invalidated.length) {\n        debugger\n        invalidatePaths({ _root: modelRoot, _path: [] }, invalidated);\n    }\n\n    setJSONGraphs({ _root: modelRoot }, [{\n        paths: paths, jsonGraph: jsonGraph\n    }], null, modelRoot.comparator);\n\n    this.observers.slice(0).forEach(function(observer, index) {\n        observer.onNext({\n            type: 'get',\n            jsonGraph: env.jsonGraph,\n            paths: requested[index] || paths\n        });\n    });\n}\n\nRequest.prototype.error =\nRequest.prototype.onError = function(error) {\n\n    var queue = this.parent;\n\n    if (!queue) {\n        return;\n    }\n\n    error = error || {};\n\n    // Converts errors to objects, a more friendly storage\n    // of errors.\n    error = !(error instanceof Error) ?\n        // if it's $type error, use it raw\n        error.$type === $error && error ||\n        // Otherwise make it an error\n        { $type: $error, value: error } :\n        // If it's instanceof Error, pluck error.message\n        { $type: $error, value: { message: error.message }};\n\n    var modelRoot = queue.modelRoot;\n\n    var errorPathValues = toPaths(toCollapseTrees(\n        this.requested.reduce(function(collapseMap, paths) {\n            return toCollapseMap(paths, collapseMap);\n        }, {})\n    ))\n    .map(function(path) { return { path: path, value: error }; });\n\n    setPathValues(\n        {_root: modelRoot, _path: []}, errorPathValues,\n        modelRoot.errorSelector, modelRoot.comparator\n    );\n\n    Subject.prototype.onError.call(this, error);\n}\n\nRequest.prototype.complete =\nRequest.prototype.onCompleted = function() {\n    // console.log('request completed', this.id);\n    Subject.prototype.onCompleted.call(this);\n}\n\nRequest.prototype.remove = function(subscription) {\n    var index = this.subscriptions.indexOf(subscription);\n    if (~index) {\n        this.requested.splice(index, 1);\n        this.optimized.splice(index, 1);\n        this.observers.splice(index, 1);\n        this.subscriptions.splice(index, 1);\n    }\n    if (this.subscriptions.length === 0) {\n        this.dispose();\n    }\n    return this;\n}\n\nRequest.prototype.dispose =\nRequest.prototype.unsubscribe = function () {\n    // console.log('disposing request', this.id);\n    this.tree = {};\n    this.data = null;\n    this.paths = null;\n    this.active = false;\n    this.requested = [];\n    this.optimized = [];\n    var queue = this.parent;\n    if (queue) {\n        this.parent = null;\n        queue.remove(this);\n    }\n    var disposable = this.disposable;\n    if (disposable) {\n        this.disposable = null;\n        if (disposable.dispose) {\n            disposable.dispose();\n        } else if (disposable.unsubscribe) {\n            disposable.unsubscribe();\n        }\n    }\n    Subject.prototype.dispose.call(this);\n}\n\nRequest.prototype.connect = function() {\n    if (!this.active && !this.disposable) {\n        var scheduledDisposable = this.scheduler.schedule(flush.bind(this));\n        if (!this.disposable) {\n            this.disposable = scheduledDisposable;\n        }\n    }\n    return this;\n}\n\nRequest.prototype.batch = function(requested, optimized,\n                                   requestedComplements,\n                                   optimizedComplements) {\n    if (this.active) {\n        var requestedIntersection = [];\n        var optimizedIntersection = [];\n        if (findIntersections(this.tree,\n                              requested, optimized,\n                              requestedComplements,\n                              optimizedComplements,\n                              requestedIntersection,\n                              optimizedIntersection)) {\n            // console.log('accepted in flight batch request', this.id);\n            this.requested.push(requestedIntersection);\n            this.optimized.push(optimizedIntersection);\n            return this;\n        }\n        // console.log('rejected in flight batch request', this.id);\n        return null;\n    }\n    // console.log('accepted batch request', this.id);\n    this.requested.push(requested);\n    this.optimized.push(optimized);\n    this.data = requestedComplements;\n    return this;\n}\n\nfunction flush() {\n\n    this.active = true;\n\n    var obs, paths = this.paths = toPaths(this.tree = toCollapseTrees(\n        this.optimized.reduce(function(collapseMap, paths) {\n            return toCollapseMap(paths, collapseMap);\n        }, {})\n    ));\n\n    try {\n        switch (this.type) {\n            case 'get':\n                obs = this.dataSource.get(paths);\n                break;\n            case 'set':\n                obs = this.dataSource.set({\n                    paths: paths, jsonGraph: this.data });\n                break;\n            case 'call':\n                obs = this.dataSource.call(...this.data);\n                break;\n        }\n        this.disposable = obs.subscribe(this);\n    } catch (e) {\n        this.disposable = null;\n        Subject.prototype.onError.call(this, new InvalidSourceError(e));\n    }\n}\n\nfunction findIntersections(tree,\n                           requested, optimized,\n                           requestedComplements,\n                           optimizedComplements,\n                           requestedIntersection,\n                           optimizedIntersection) {\n\n    var index = -1;\n    var complementIndex = 0;\n    var intersectionIndex = 0;\n    var total = optimized.length;\n    var intersectionFound = false;\n\n    while (++index < total) {\n        // If this does not intersect then add it to the output.\n        var path = optimized[index];\n        var pathLen = path.length;\n        var subTree = tree[pathLen];\n\n        // If there is no subtree to look into or there is no intersection.\n        if (!subTree || !hasIntersection(subTree, path, 0, pathLen)) {\n            if (intersectionFound) {\n                requestedComplements[complementIndex] = requested[index];\n                optimizedComplements[complementIndex++] = path;\n            }\n        } else {\n            // If there has been no intersection yet and index is larger than 0\n            // (meaning we have had only complements), then we need to update\n            // our complements to match the current reality.\n            if (!intersectionFound) {\n                while (complementIndex < index) {\n                    requestedComplements[complementIndex] = requested[complementIndex];\n                    optimizedComplements[complementIndex] = optimized[complementIndex++];\n                }\n            }\n\n            intersectionFound = true;\n            requestedIntersection[intersectionIndex] = requested[index];\n            optimizedIntersection[intersectionIndex++] = optimized[index];\n        }\n    }\n\n    return intersectionFound;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Request.js","var Subscriber = require('./Subscriber');\nvar Subscription = require('./Subscription');\nvar $$observable = require('symbol-observable').default;\n\nmodule.exports = Source;\n\nfunction Source(subscribe) {\n    if (!subscribe) {\n        return;\n    }\n    switch (typeof subscribe) {\n        case 'object':\n            this.source = subscribe;\n            break;\n        case 'function':\n            this.source = { subscribe: subscribe };\n            break;\n    }\n}\n\nSource.prototype[$$observable] = function() {\n    return this;\n}\n\nSource.prototype.operator = function(destination) {\n    return this.subscribe(destination);\n}\n\nSource.prototype.lift = function(operator, source) {\n    source = new Source(source || this);\n    source.operator = operator;\n    return source;\n}\n\nSource.prototype.subscribe = function(destination, x, y) {\n    return new Subscription([\n        this.operator.call(\n            this.source, !(destination instanceof Subscriber) ?\n                new Subscriber(destination, x, y) : destination)\n    ]);\n}\n\nSource.prototype.then = function then(onNext, onError) {\n    /* global Promise */\n    var source = this;\n    if (!this._promise) {\n        this._promise = new global['Promise'](function(resolve, reject) {\n            var values = [], rejected = false;\n            source.subscribe({\n                next: function(value) { values[values.length] = value; },\n                error: function(errors) { (rejected = true) && reject(errors); },\n                complete: function() {\n                    !rejected &&\n                    resolve(values.length <= 1 ? values[0] : values);\n                }\n            });\n        });\n    }\n    return this._promise.then(onNext, onError);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Source.js","var empty = {\n    dispose: function() {},\n    unsubscribe: function() {}\n};\n\nfunction ImmediateScheduler() {}\n\nImmediateScheduler.prototype.schedule = function schedule(action) {\n    action();\n    return empty;\n};\n\nmodule.exports = ImmediateScheduler;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/schedulers/ImmediateScheduler.js","var isObject = require(\"./../support/isObject\");\nmodule.exports = function getTimestamp(node) {\n    return isObject(node) && node.$timestamp || undefined;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/getTimestamp.js","var functionTypeof = \"function\";\n\nmodule.exports = function isFunction(func) {\n    return Boolean(func) && typeof func === functionTypeof;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isFunction.js","var isObject = require(\"./../support/isObject\");\n\nmodule.exports = function isJSONEnvelope(envelope) {\n    return isObject(envelope) && (\"json\" in envelope);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isJSONEnvelope.js","var isArray = Array.isArray;\nvar isObject = require(\"./../support/isObject\");\n\nmodule.exports = function isJSONGraphEnvelope(envelope) {\n    return isObject(envelope) && isArray(envelope.paths) && (\n        isObject(envelope.jsonGraph) ||\n        isObject(envelope.jsong) ||\n        isObject(envelope.json) ||\n        isObject(envelope.values) ||\n        isObject(envelope.value)\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isJSONGraphEnvelope.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() { return this; })();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 66\n// module chunks = 0","\"use strict\";\n\nvar Model = require(\"./Model\");\nvar FalcorJSON = require(\"./cache/get/json/FalcorJSON\");\n\nfunction falcor(opts) {\n    return new Model(opts);\n}\n\nfalcor[\"Model\"] = Model;\nfalcor[\"FalcorJSON\"] = FalcorJSON;\nfalcor[\"toProps\"] = FalcorJSON.prototype.toProps;\n\nmodule.exports = falcor;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","var toPaths = require('./toPaths');\nvar toCollapseMap = require('./toCollapseMap');\nvar toCollapseTrees = require('./toCollapseTrees');\n\nmodule.exports = function collapse(paths) {\n    return toPaths(toCollapseTrees(toCollapseMap(paths)));\n};\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/collapse.js","var isArray = Array.isArray;\nvar getHashCode = require('./getHashCode');\n\nmodule.exports = computeFlatBufferHash;\n\nfunction computeFlatBufferHash(seed) {\n\n    if (seed === undefined) {\n        return undefined;\n    }\n\n    var code = '';\n    var keys = seed['$keys'];\n    var keysIndex = -1;\n    var keysLength = keys.length;\n\n    while (++keysIndex < keysLength) {\n\n        var key = keys[keysIndex];\n\n        if (key === null) {\n            code = '' + getHashCode('' + code + 'null');\n            continue;\n        } else if (typeof key === 'object') {\n            key = '{from:' + key.from + ',length:' + key.length + '}';\n        }\n\n        var next = computeFlatBufferHash(seed[keysIndex]);\n        if (next === undefined) {\n            code = '' + getHashCode('' + code + key);\n        } else {\n            code = '' + getHashCode('' + code + key + next['$code']);\n        }\n    }\n\n    seed['$code'] = code;\n\n    return seed;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/computeFlatBufferHash.js","/*eslint-disable*/\nmodule.exports = {\n    innerReferences: 'References with inner references are not allowed.',\n    circularReference: 'There appears to be a circular reference, maximum reference following exceeded.'\n};\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/errors/index.js","var cloneArray = require('./support/cloneArray');\nvar $ref = require('./support/types').$ref;\nvar errors = require('./errors');\n\n/**\n * performs the simplified cache reference follow.  This\n * differs from get as there is just following and reporting,\n * not much else.\n *\n * @param {Object} cacheRoot\n * @param {Array} ref\n */\nmodule.exports = function followReference(cacheRoot, ref, maxRefFollow) {\n    var current = cacheRoot;\n    var refPath = ref;\n    var depth = -1;\n    var length = refPath.length;\n    var key, next, type;\n    var referenceCount = 0;\n\n    while (++depth < length) {\n        key = refPath[depth];\n        next = current[key];\n        type = next && next.$type;\n\n        if (!next || type && type !== $ref) {\n            current = next;\n            break;\n        }\n\n        // Show stopper exception.  This route is malformed.\n        if (type && type === $ref && depth + 1 < length) {\n            var err = new Error(errors.innerReferences);\n            err.throwToNext = true;\n            throw err;\n        }\n\n        // potentially follow reference\n        if (depth + 1 === length) {\n            if (type === $ref) {\n                depth = -1;\n                refPath = next.value;\n                length = refPath.length;\n                next = cacheRoot;\n                referenceCount++;\n            }\n\n            if (referenceCount > maxRefFollow) {\n                throw new Error(errors.circularReference);\n            }\n        }\n        current = next;\n    }\n\n    return [current, cloneArray(refPath)];\n};\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/followReference.js","module.exports = {\n    toTree: require('./toTree'),\n    toPaths: require('./toPaths'),\n    collapse: require('./collapse'),\n    pathCount: require('./pathCount'),\n    getHashCode: require('./getHashCode'),\n    toFlatBuffer: require('./toFlatBuffer'),\n    toCollapseMap: require('./toCollapseMap'),\n    iterateKeySet: require('./iterateKeySet'),\n    toCollapseTrees: require('./toCollapseTrees'),\n    hasIntersection: require('./hasIntersection'),\n    optimizePathSets: require('./optimizePathSets'),\n    flatBufferToPaths: require('./flatBufferToPaths'),\n    removeIntersection: require('./removeIntersection'),\n    computeFlatBufferHash: require('./computeFlatBufferHash'),\n    pathsComplementFromTree: require('./pathsComplementFromTree'),\n    pathsComplementFromLengthTree: require('./pathsComplementFromLengthTree'),\n};\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/index.js","var iterateKeySet = require('./iterateKeySet');\nvar cloneArray = require('./support/cloneArray');\nvar catAndSlice = require('./support/catAndSlice');\nvar $types = require('./support/types');\nvar $ref = $types.$ref;\nvar followReference = require('./followReference');\n\n/**\n * The fastest possible optimize of paths.\n *\n * What it does:\n * - Any atom short-circuit / found value will be removed from the path.\n * - All paths will be exploded which means that collapse will need to be\n *   ran afterwords.\n * - Any missing path will be optimized as much as possible.\n */\nmodule.exports = function optimizePathSets(cache, paths, maxRefFollow) {\n    var optimized = [];\n    paths.forEach(function(p) {\n        optimizePathSet(cache, cache, p, 0, optimized, [], maxRefFollow);\n    });\n\n    return optimized;\n};\n\n\n/**\n * optimizes one pathSet at a time.\n */\nfunction optimizePathSet(cache, cacheRoot, pathSet,\n                         depth, out, optimizedPath, maxRefFollow) {\n\n    // at missing, report optimized path.\n    if (cache === undefined) {\n        out[out.length] = catAndSlice(optimizedPath, pathSet, depth);\n        return;\n    }\n\n    // all other sentinels are short circuited.\n    // Or we found a primitive (which includes null)\n    if (cache === null || (cache.$type && cache.$type !== $ref) ||\n            (typeof cache !== 'object')) {\n        return;\n    }\n\n    // If the reference is the last item in the path then do not\n    // continue to search it.\n    if (cache.$type === $ref && depth === pathSet.length) {\n        return;\n    }\n\n    var keySet = pathSet[depth];\n    var isKeySet = typeof keySet === 'object';\n    var nextDepth = depth + 1;\n    var iteratorNote = false;\n    var key = keySet;\n    if (isKeySet) {\n        iteratorNote = {};\n        key = iterateKeySet(keySet, iteratorNote);\n    }\n    var next, nextOptimized;\n    do {\n        next = cache[key];\n        var optimizedPathLength = optimizedPath.length;\n        if (key !== null) {\n            optimizedPath[optimizedPathLength] = key;\n        }\n\n        if (next && next.$type === $ref && nextDepth < pathSet.length) {\n            var refResults =\n                followReference(cacheRoot, next.value, maxRefFollow);\n            next = refResults[0];\n\n            // must clone to avoid the mutation from above destroying the cache.\n            nextOptimized = cloneArray(refResults[1]);\n        } else {\n            nextOptimized = optimizedPath;\n        }\n\n        optimizePathSet(next, cacheRoot, pathSet, nextDepth,\n                        out, nextOptimized, maxRefFollow);\n        optimizedPath.length = optimizedPathLength;\n\n        if (iteratorNote && !iteratorNote.done) {\n            key = iterateKeySet(keySet, iteratorNote);\n        }\n    } while (iteratorNote && !iteratorNote.done);\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/optimizePathSets.js","\"use strict\";\n\n/**\n * Helper for getPathCount. Used to determine the size of a key or range.\n * @function\n * @param {Object} rangeOrKey\n * @return The size of the key or range passed in.\n */\nfunction getRangeOrKeySize(rangeOrKey) {\n    if (rangeOrKey == null) {\n        return 1;\n    } else if (Array.isArray(rangeOrKey)) {\n        throw new Error(\"Unexpected Array found in keySet: \" + JSON.stringify(rangeOrKey));\n    } else if (typeof rangeOrKey === \"object\") {\n        return getRangeSize(rangeOrKey);\n    } else {\n        return 1;\n    }\n}\n\n/**\n * Returns the size (number of items) in a Range,\n * @function\n * @param {Object} range The Range with both \"from\" and \"to\", or just \"to\"\n * @return The number of items in the range.\n */\nfunction getRangeSize(range) {\n\n    var to = range.to;\n    var length = range.length;\n\n    if (to != null) {\n        if (isNaN(to) || parseInt(to, 10) !== to) {\n            throw new Error(\"Invalid range, 'to' is not an integer: \" + JSON.stringify(range));\n        }\n        var from = range.from || 0;\n        if (isNaN(from) || parseInt(from, 10) !== from) {\n            throw new Error(\"Invalid range, 'from' is not an integer: \" + JSON.stringify(range));\n        }\n        if (from <= to) {\n            return (to - from) + 1;\n        } else {\n            return 0;\n        }\n    } else if (length != null) {\n        if (isNaN(length) || parseInt(length, 10) !== length) {\n            throw new Error(\"Invalid range, 'length' is not an integer: \" + JSON.stringify(range));\n        } else {\n            return length;\n        }\n    } else {\n        throw new Error(\"Invalid range, expected 'to' or 'length': \" + JSON.stringify(range));\n    }\n}\n\n/**\n * Returns a count of the number of paths this pathset\n * represents.\n *\n * For example, [\"foo\", {\"from\":0, \"to\":10}, \"bar\"],\n * would represent 11 paths (0 to 10, inclusive), and\n * [\"foo, [\"baz\", \"boo\"], \"bar\"] would represent 2 paths.\n *\n * @function\n * @param {Object[]} pathSet the path set.\n *\n * @return The number of paths this represents\n */\nfunction getPathCount(pathSet) {\n    if (pathSet.length === 0) {\n        throw new Error(\"All paths must have length larger than zero.\");\n    }\n\n    var numPaths = 1;\n\n    for (var i = 0; i < pathSet.length; i++) {\n        var segment = pathSet[i];\n\n        if (Array.isArray(segment)) {\n\n            var numKeys = 0;\n\n            for (var j = 0; j < segment.length; j++) {\n                var keySet = segment[j];\n\n                numKeys += getRangeOrKeySize(keySet);\n            }\n\n            numPaths *= numKeys;\n\n        } else {\n            numPaths *= getRangeOrKeySize(segment);\n        }\n    }\n\n    return numPaths;\n}\n\n\nmodule.exports = getPathCount;\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/pathCount.js","var hasIntersection = require('./hasIntersection');\n\n/**\n * Compares the paths passed in with the tree.  Any of the paths that are in\n * the tree will be stripped from the paths.\n *\n * **Does not mutate** the incoming paths object.\n * **Proper subset** only matching.\n *\n * @param {Array} paths - A list of paths (complex or simple) to strip the\n * intersection\n * @param {Object} tree -\n * @public\n */\nmodule.exports = function pathsComplementFromLengthTree(paths, tree) {\n    var out = [];\n    var outLength = -1;\n\n    for (var i = 0, len = paths.length; i < len; ++i) {\n        // If this does not intersect then add it to the output.\n        var path = paths[i];\n        if (!hasIntersection(tree[path.length], path, 0, path.length)) {\n            out[++outLength] = path;\n        }\n    }\n    return out;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/pathsComplementFromLengthTree.js","var hasIntersection = require('./hasIntersection');\n\n/**\n * Compares the paths passed in with the tree.  Any of the paths that are in\n * the tree will be stripped from the paths.\n *\n * **Does not mutate** the incoming paths object.\n * **Proper subset** only matching.\n *\n * @param {Array} paths - A list of paths (complex or simple) to strip the\n * intersection\n * @param {Object} tree -\n * @public\n */\nmodule.exports = function pathsComplementFromTree(paths, tree) {\n    var out = [];\n    var outLength = -1;\n\n    for (var i = 0, len = paths.length; i < len; ++i) {\n        // If this does not intersect then add it to the output.\n        if (!hasIntersection(tree, paths[i], 0, paths[i].length)) {\n            out[++outLength] = paths[i];\n        }\n    }\n    return out;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/pathsComplementFromTree.js","var isArray = Array.isArray;\nvar nullTerminator = require('./support/nullTerminator');\n\nmodule.exports = removeIntersection;\n\nfunction removeIntersection(tree, path, depth, length) {\n\n    if (depth === length || tree === null || tree === undefined) {\n        return true;\n    }\n\n    var intersects = true;\n    var emptyNodeKey = undefined;\n    var keyset, keysetIndex = -1, keysetLength = 0;\n    var next, nextKey, nextDepth = depth + 1,\n        keyIsRange, rangeEnd, keysOrRanges;\n\n    keyset = path[depth];\n\n    if (keyset === null) {\n        return tree === nullTerminator;\n    }\n\n    iteratingKeyset: do {\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        if ('object' !== typeof keyset) {\n            nextKey = keyset;\n            rangeEnd = undefined;\n            keyIsRange = false;\n        }\n        // If we encounter a Keyset, either iterate through the Keys and Ranges,\n        // or throw an error if we're already iterating a Keyset. Keysets cannot\n        // contain other Keysets.\n        else if (isArray(keyset)) {\n            // If we've already encountered an Array keyset, throw an error.\n            if (keysOrRanges !== undefined) {\n                break iteratingKeyset;\n            }\n            keysetIndex = 0;\n            keysOrRanges = keyset;\n            keysetLength = keyset.length;\n            // If an Array of keys or ranges is empty, terminate the graph walk\n            // and return the json constructed so far. An example of an empty\n            // Keyset is: ['lolomo', [], 'summary']. This should short circuit\n            // without building missing paths.\n            if (0 === keysetLength) {\n                break iteratingKeyset;\n            }\n            // Assign `keyset` to the first value in the Keyset. Re-entering the\n            // outer loop mimics a singly-recursive function call.\n            keyset = keysOrRanges[keysetIndex];\n            continue iteratingKeyset;\n        }\n        // If the Keyset isn't a primitive or Array, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if (\"number\" !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyIsRange = true;\n        }\n\n        do {\n            next = tree[nextKey];\n            if (removeIntersection(next, path, nextDepth, length)) {\n                emptyNodeKey = undefined;\n                if (next && typeof next === 'object') {\n                    for (emptyNodeKey in next) {\n                        break;\n                    }\n                }\n                if (emptyNodeKey === undefined) {\n                    delete tree[nextKey];\n                }\n            }\n        }\n        // Re-enter the inner loop and continue iterating the Range, or exit\n        // here if we encountered a Key.\n        while (keyIsRange && ++nextKey <= rangeEnd);\n\n        // If we've exhausted the Keyset (or never encountered one at all),\n        // exit the outer loop.\n        if (++keysetIndex === keysetLength) {\n            break iteratingKeyset;\n        }\n\n        // Otherwise get the next Key or Range from the Keyset and re-enter the\n        // outer loop from the top.\n        keyset = keysOrRanges[keysetIndex];\n    } while (true);\n\n    return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/removeIntersection.js","module.exports = function catAndSlice(a, b, slice) {\n    var next = [], i, j, len;\n    for (i = 0, len = a.length; i < len; ++i) {\n        next[i] = a[i];\n    }\n\n    for (j = slice || 0, len = b.length; j < len; ++j, ++i) {\n        next[i] = b[j];\n    }\n\n    return next;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/support/catAndSlice.js","var isArray = Array.isArray;\nvar nullBuffer = { '$keys': [null], '$keysMap': { 'null': 0 } };\n\nmodule.exports = toFlatBuffer;\n\n/*\nvar inspect = require('util').inspect;\nvar computeFlatBufferHash = require('./computeFlatBufferHash');\nvar flatBuf = computeFlatBufferHash(toFlatBuffer([\n    ['genreLists', 'length'],\n    ['genreLists', { from: 1, length: 9 }, ['name', 'rating']],\n    ['genreLists', { from: 1, length: 9 }, 'color', null],\n    ['genreLists', { from: 1, length: 9 }, 'titles', 'length'],\n    ['genreLists', { from: 1, length: 9 }, 'titles', { from: 9, length: 2 }, ['name', 'rating', 'box-shot']],\n]));\n\nconsole.log(inspect(flatBuf, { depth: null }));\n*/\n\nfunction toFlatBuffer(paths) {\n    return paths.reduce(function(seed, path) {\n        return _toFlatBuffer(seed, path, 0, path.length);\n    }, {});\n}\n\nfunction _toFlatBuffer(seed, path, depth, length) {\n\n    if (depth === length) {\n        return undefined;\n    }\n\n    seed = seed || {};\n    var keys = seed['$keys'] || (seed['$keys'] = []);\n    var keysMap = seed['$keysMap'] || (seed['$keysMap'] = {});\n    var keysIndex = -1;\n\n    var keyset, keysetIndex = -1, keysetLength = 0;\n    var node, next, nextKey, nextDepth = depth + 1,\n        rangeEnd, keysOrRanges;\n\n    keyset = path[depth];\n\n    if (keyset === null) {\n        return nullBuffer;\n    }\n\n    iteratingKeyset: do {\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        if ('object' !== typeof keyset) {\n            nextKey = keyset;\n            if ('undefined' === typeof (keysIndex = keysMap[nextKey])) {\n                keysIndex = keys.length;\n            }\n            keys[keysIndex] = nextKey;\n            keysMap[nextKey] = keysIndex;\n            next = _toFlatBuffer(seed[keysIndex], path, nextDepth, length);\n            if (next !== undefined) {\n                seed[keysIndex] = next;\n            }\n        }\n        // If we encounter a Keyset, either iterate through the Keys and Ranges,\n        // or throw an error if we're already iterating a Keyset. Keysets cannot\n        // contain other Keysets.\n        else if (isArray(keyset)) {\n            // If we've already encountered an Array keyset, throw an error.\n            if (keysOrRanges !== undefined) {\n                break iteratingKeyset;\n            }\n            keysetIndex = 0;\n            keysOrRanges = keyset;\n            keysetLength = keyset.length;\n            // If an Array of keys or ranges is empty, terminate the graph walk\n            // and return the json constructed so far. An example of an empty\n            // Keyset is: ['lolomo', [], 'summary']. This should short circuit\n            // without building missing paths.\n            if (0 === keysetLength) {\n                break iteratingKeyset;\n            }\n            // Assign `keyset` to the first value in the Keyset. Re-entering the\n            // outer loop mimics a singly-recursive function call.\n            keyset = keysOrRanges[keysetIndex];\n            continue iteratingKeyset;\n        }\n        // If the Keyset isn't a primitive or Array, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if ('number' !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyset = { from: nextKey, length: rangeEnd - nextKey + 1 };\n            nextKey = '{from:' + nextKey + ',length:' + (rangeEnd - nextKey + 1) + '}';\n            if ('undefined' === typeof (keysIndex = keysMap[nextKey])) {\n                keysIndex = keys.length;\n            }\n            keys[keysIndex] = keyset;\n            keysMap[nextKey] = keysIndex;\n            next = _toFlatBuffer(seed[keysIndex], path, nextDepth, length);\n            if (next !== undefined) {\n                seed[keysIndex] = next;\n            }\n        }\n\n        // If we've exhausted the Keyset (or never encountered one at all),\n        // exit the outer loop.\n        if (++keysetIndex === keysetLength) {\n            break iteratingKeyset;\n        }\n\n        // Otherwise get the next Key or Range from the Keyset and re-enter the\n        // outer loop from the top.\n        keyset = keysOrRanges[keysetIndex];\n    } while (true);\n\n    return seed;\n}\n\n\n\n// WEBPACK FOOTER //\n// .-path-utils/lib/toFlatBuffer.js","var Call = require(\"./request/Call\");\nvar ModelRoot = require(\"./ModelRoot\");\nvar ModelDataSourceAdapter = require(\"./ModelDataSourceAdapter\");\nvar TimeoutScheduler = require(\"./schedulers/TimeoutScheduler\");\nvar ImmediateScheduler = require(\"./schedulers/ImmediateScheduler\");\n\nvar lruCollect = require(\"./lru/collect\");\nvar getSize = require(\"./support/getSize\");\nvar isObject = require(\"./support/isObject\");\nvar isFunction = require(\"./support/isFunction\");\nvar isPrimitive = require(\"./support/isPrimitive\");\nvar isJSONEnvelope = require(\"./support/isJSONEnvelope\");\nvar getCachePosition = require(\"./cache/getCachePosition\");\nvar isJSONGraphEnvelope = require(\"./support/isJSONGraphEnvelope\");\n\nvar setCache = require(\"./cache/set/setPathMaps\");\nvar setJSONGraphs = require(\"./cache/set/setJSONGraphs\");\n\nvar getJSON = require(\"./cache/get/json\");\nvar getCache = require(\"./cache/getCache\");\nvar getJSONGraph = require(\"./cache/get/jsonGraph\");\n\nmodule.exports = Model;\n\n/**\n * This callback is invoked when the Model's cache is changed.\n * @callback Model~onChange\n */\n\n /**\n * This function is invoked on every JSONGraph Error retrieved from the DataSource. This function allows Error objects to be transformed before being stored in the Model's cache.\n * @callback Model~errorSelector\n * @param {Object} jsonGraphError - the JSONGraph Error object to transform before it is stored in the Model's cache.\n * @returns {Object} the JSONGraph Error object to store in the Model cache.\n */\n\n /**\n * This function is invoked every time a value in the Model cache is about to be replaced with a new value. If the function returns true, the existing value is replaced with a new value and the version flag on all of the value's ancestors in the tree are incremented.\n * @callback Model~comparator\n * @param {Object} existingValue - the current value in the Model cache.\n * @param {Object} newValue - the value about to be set into the Model cache.\n * @returns {Boolean} the Boolean value indicating whether the new value and the existing value are equal.\n */\n\n/**\n * A Model object is used to execute commands against a {@link JSONGraph} object. {@link Model}s can work with a local JSONGraph cache, or it can work with a remote {@link JSONGraph} object through a {@link DataSource}.\n * @constructor\n * @param {?Object} options - a set of options to customize behavior\n * @param {?DataSource} options.source - a data source to retrieve and manage the {@link JSONGraph}\n * @param {?JSONGraph} options.cache - initial state of the {@link JSONGraph}\n * @param {?number} options.maxSize - the maximum size of the cache. This value roughly correlates to item count (where itemCount = maxSize / 50). Each item by default is given a metadata `$size` of 50 (or its length when it's an array or string). You can get better control of falcor's memory usage by tweaking `$size`\n * @param {?number} options.collectRatio - the ratio of the maximum size to collect when the maxSize is exceeded\n * @param {?Model~errorSelector} options.errorSelector - a function used to translate errors before they are returned\n * @param {?Model~onChange} options.onChange - a function called whenever the Model's cache is changed\n * @param {?Model~comparator} options.comparator - a function called whenever a value in the Model's cache is about to be replaced with a new value.\n */\nfunction Model(opts) {\n\n    var options = opts || {};\n\n    this._node = options._node;\n    this._path = options._path || [];\n    this._source = options.source || options._source;\n    this._root = options._root || new ModelRoot(options, this);\n    this._recycleJSON = options.recycleJSON === true || options._recycleJSON;\n    this._scheduler = options.scheduler || options._scheduler || new ImmediateScheduler();\n\n    if (options._seed) {\n        this._recycleJSON = true;\n        this._seed = options._seed;\n    }\n\n    this._boxed = options.boxed === true || options._boxed || false;\n    this._materialized = options.materialized === true || options._materialized || false;\n    this._treatErrorsAsValues = options.treatErrorsAsValues === true || options._treatErrorsAsValues || false;\n    this._allowFromWhenceYouCame = options.allowFromWhenceYouCame === true || options._allowFromWhenceYouCame || false;\n\n    if (this._recycleJSON) {\n        this._treatErrorsAsValues = true;\n    }\n\n    if (options.cache) {\n        this.setCache(options.cache);\n    }\n}\n\nModel.prototype.constructor = Model;\n\n/**\n * The get method retrieves several {@link Path}s or {@link PathSet}s from a {@link Model}. The get method loads each value into a JSON object and returns in a ModelResponse.\n * @function\n * @param {...PathSet} path - the path(s) to retrieve\n * @return {ModelResponse.<JSONEnvelope>} - the requested data as JSON\n */\nModel.prototype.get = function get(...paths) {\n    return new Call('get', this, paths)._toJSON({}, []);\n}\n\n/**\n * Sets the value at one or more places in the JSONGraph model. The set method accepts one or more {@link PathValue}s, each of which is a combination of a location in the document and the value to place there.  In addition to accepting  {@link PathValue}s, the set method also returns the values after the set operation is complete.\n * @function\n * @return {ModelResponse.<JSONEnvelope>} - an {@link Observable} stream containing the values in the JSONGraph model after the set was attempted\n */\nModel.prototype.set = function set(...values) {\n    return new Call('set', this, values)._toJSON({}, []);\n}\n\n/**\n * The preload method retrieves several {@link Path}s or {@link PathSet}s from a {@link Model} and loads them into the Model cache.\n * @function\n * @param {...PathSet} path - the path(s) to retrieve\n * @return {ModelResponse.<JSONEnvelope>} - a ModelResponse that completes when the data has been loaded into the cache.\n */\nModel.prototype.preload = function preload(...paths) {\n    return new Call('get', this, paths)._toJSON(null, []);\n}\n\n/**\n * Invokes a function in the JSON Graph.\n * @function\n * @param {Path} functionPath - the path to the function to invoke\n * @param {Array.<Object>} args - the arguments to pass to the function\n * @param {Array.<PathSet>} refPaths - the paths to retrieve from the JSON Graph References in the message returned from the function\n * @param {Array.<PathSet>} thisPaths - the paths to retrieve from function's this object after successful function execution\n * @return {ModelResponse.<JSONEnvelope> - a JSONEnvelope contains the values returned from the function\n */\n\nModel.prototype.call = function call(...args) {\n    return new Call('call', this, args)._toJSON({}, []);\n}\n\n/**\n * The invalidate method synchronously removes several {@link Path}s or {@link PathSet}s from a {@link Model} cache.\n * @function\n * @param {...PathSet} path - the  paths to remove from the {@link Model}'s cache.\n */\nModel.prototype.invalidate = function invalidate(...values) {\n    return new Call('invalidate', this, values)._toJSON(null, null).then();\n}\n\n/**\n * Returns a new {@link Model} bound to a location within the {@link\n * JSONGraph}. The bound location is never a {@link Reference}: any {@link\n * Reference}s encountered while resolving the bound {@link Path} are always\n * replaced with the {@link Reference}s target value. For subsequent operations\n * on the {@link Model}, all paths will be evaluated relative to the bound\n * path. Deref allows you to:\n * - Expose only a fragment of the {@link JSONGraph} to components, rather than\n *   the entire graph\n * - Hide the location of a {@link JSONGraph} fragment from components\n * - Optimize for executing multiple operations and path looksup at/below the\n *   same location in the {@link JSONGraph}\n * @method\n * @param {Object} responseObject - an object previously retrieved from the\n * Model\n * @return {Model} - the dereferenced {@link Model}\n * @example\nvar Model = falcor.Model;\nvar model = new Model({\n  cache: {\n    users: [\n      Model.ref([\"usersById\", 32])\n    ],\n    usersById: {\n      32: {\n        name: \"Steve\",\n        surname: \"McGuire\"\n      }\n    }\n  }\n});\n\nmodel.\n    get(['users', 0, 'name']).\n    subscribe(function(jsonEnv) {\n        var userModel = model.deref(jsonEnv.json.users[0]);\n        console.log(model.getPath());\n        console.log(userModel.getPath());\n   });\n});\n\n// prints the following:\n// []\n// [\"usersById\", 32] - because userModel refers to target of reference at [\"users\", 0]\n */\nModel.prototype.deref = require(\"./deref\");\n\n/**\n * A dereferenced model can become invalid when the reference from which it was\n * built has been removed/collected/expired/etc etc.  To fix the issue, a from\n * the parent request should be made (no parent, then from the root) for a valid\n * path and re-dereference performed to update what the model is bound too.\n *\n * @method\n * @private\n * @return {Boolean} - If the currently deref'd model is still considered a\n * valid deref.\n */\nModel.prototype._hasValidParentReference = require(\"./deref/hasValidParentReference\");\n\n/**\n * Get data for a single {@link Path}.\n * @param {Path} path - the path to retrieve\n * @return {Observable.<*>} - the value for the path\n * @example\n var model = new falcor.Model({source: new falcor.HttpDataSource(\"/model.json\") });\n\n model.\n     getValue('user.name').\n     subscribe(function(name) {\n         console.log(name);\n     });\n\n // The code above prints \"Jim\" to the console.\n */\nModel.prototype.getValue = function getValue(path) {\n    return this.get(path).lift(function(subscriber) {\n        return this.subscribe({\n            onNext: function(data) {\n                var depth = -1;\n                var x = data.json;\n                var length = path.length;\n                while (x && !x.$type && ++depth < length) {\n                    x = x[path[depth]];\n                }\n                subscriber.onNext(x);\n            },\n            onError: subscriber.onError.bind(subscriber),\n            onCompleted: subscriber.onCompleted.bind(subscriber)\n        })\n    });\n}\n\n/**\n * Set value for a single {@link Path}.\n * @param {Path} path - the path to set\n * @param {Object} value - the value to set\n * @return {Observable.<*>} - the value for the path\n * @example\n var model = new falcor.Model({source: new falcor.HttpDataSource(\"/model.json\") });\n\n model.\n     setValue('user.name', 'Jim').\n     subscribe(function(name) {\n         console.log(name);\n     });\n\n // The code above prints \"Jim\" to the console.\n */\nModel.prototype.setValue = function setValue(path, value) {\n    path = arguments.length === 1 ? path.path : path;\n    value = arguments.length === 1 ? path : {path:path,value:value};\n    return this.set(value).lift(function(subscriber) {\n        return this.subscribe({\n            onNext: function(data) {\n                var depth = -1;\n                var x = data.json;\n                var length = path.length;\n                while (x && !x.$type && ++depth < length) {\n                    x = x[path[depth]];\n                }\n                subscriber.onNext(x);\n            },\n            onError: subscriber.onError.bind(subscriber),\n            onCompleted: subscriber.onCompleted.bind(subscriber)\n        })\n    });\n}\n\n/**\n * Set the local cache to a {@link JSONGraph} fragment. This method can be a useful way of mocking a remote document, or restoring the local cache from a previously stored state.\n * @param {JSONGraph} jsonGraph - the {@link JSONGraph} fragment to use as the local cache\n */\nModel.prototype.setCache = function modelSetCache(cacheOrJSONGraphEnvelope) {\n    var cache = this._root.cache;\n    if (cacheOrJSONGraphEnvelope !== cache) {\n        var modelRoot = this._root;\n        var boundPath = this._path;\n        this._path = [];\n        this._seed = null;\n        this._node = this._root.cache = {};\n        if (typeof cache !== \"undefined\") {\n            lruCollect(modelRoot, modelRoot.expired, getSize(cache), 0);\n        }\n        var out;\n        if (isJSONGraphEnvelope(cacheOrJSONGraphEnvelope)) {\n            out = setJSONGraphs(this, [cacheOrJSONGraphEnvelope])[0];\n        } else if (isJSONEnvelope(cacheOrJSONGraphEnvelope)) {\n            out = setCache(this, [cacheOrJSONGraphEnvelope])[0];\n        } else if (isObject(cacheOrJSONGraphEnvelope)) {\n            out = setCache(this, [{ json: cacheOrJSONGraphEnvelope }])[0];\n        }\n\n        // performs promotion without producing output.\n        if (out) {\n            getJSON(this, out, null, false, true);\n        }\n        this._path = boundPath;\n    } else if (typeof cache === \"undefined\") {\n        this._root.cache = {};\n    }\n    return this;\n};\n\n/**\n * Get the local {@link JSONGraph} cache. This method can be a useful to store the state of the cache.\n * @param {...Array.<PathSet>} [pathSets] - The path(s) to retrieve. If no paths are specified, the entire {@link JSONGraph} is returned.\n * @return {JSONGraph} all of the {@link JSONGraph} data in the {@link Model} cache.\n * @example\n // Storing the boxshot of the first 10 titles in the first 10 genreLists to local storage.\n localStorage.setItem('cache', JSON.stringify(model.getCache(\"genreLists[0...10][0...10].boxshot\")));\n */\nModel.prototype.getCache = function _getCache(...paths) {\n    if (paths.length === 0) {\n        return getCache(this._root.cache);\n    }\n    var result = {};\n    var path = this._path;\n    this._path = [];\n    getJSONGraph(this, paths, result);\n    this._path = path;\n    return result.jsonGraph;\n};\n\n/**\n * Retrieves a number which is incremented every single time a value is changed underneath the Model or the object at an optionally-provided Path beneath the Model.\n * @param {Path?} path - a path at which to retrieve the version number\n * @return {Number} a version number which changes whenever a value is changed underneath the Model or provided Path\n */\nModel.prototype.getVersion = function getVersion(path = []) {\n    if (Array.isArray(path) === false) {\n        throw new Error(\"Model#getVersion must be called with an Array path.\");\n    }\n    if (this._path.length) {\n        path = this._path.concat(path);\n    }\n    return this._getVersion(this, path);\n};\n\n/* eslint-disable guard-for-in */\nModel.prototype._clone = function cloneModel(opts) {\n    var clone = new Model(this);\n    if (opts) {\n        for (var key in opts) {\n            var value = opts[key];\n            if (value === \"delete\") {\n                delete clone[key];\n            } else if (key === \"_path\") {\n                clone[key] = value;\n                if (false === opts.hasOwnProperty(\"_node\")) {\n                    delete clone[\"_node\"];\n                }\n            } else {\n                clone[key] = value;\n            }\n        }\n    }\n    if (clone._path.length > 0) {\n        clone.setCache = void 0;\n    }\n    return clone;\n};\n/* eslint-enable */\n\n/**\n * Returns a clone of the {@link Model} that enables batching. Within the configured time period, paths for get operations are collected and sent to the {@link DataSource} in a batch. Batching can be more efficient if the {@link DataSource} access the network, potentially reducing the number of HTTP requests to the server.\n * @param {?Scheduler|number} schedulerOrDelay - Either a {@link Scheduler} that determines when to send a batch to the {@link DataSource}, or the number in milliseconds to collect a batch before sending to the {@link DataSource}. If this parameter is omitted, then batch collection ends at the end of the next tick.\n * @return {Model} a Model which schedules a batch of get requests to the DataSource.\n */\nModel.prototype.batch = function batch(schedulerOrDelay) {\n\n    var scheduler;\n\n    if (typeof schedulerOrDelay === \"number\") {\n        scheduler = new TimeoutScheduler(Math.round(Math.abs(schedulerOrDelay)));\n    } else if (!schedulerOrDelay) {\n        scheduler = new TimeoutScheduler(1);\n    } else if (isFunction(schedulerOrDelay.schedule)) {\n        scheduler = schedulerOrDelay;\n    } else if (isFunction(schedulerOrDelay)) {\n        scheduler = { scheudle: schedulerOrDelay };\n    }\n\n    return this._clone({ _scheduler: scheduler });\n};\n\n/**\n * Returns a clone of the {@link Model} that disables batching. This is the default mode. Each get operation will be executed on the {@link DataSource} separately.\n * @name unbatch\n * @memberof Model.prototype\n * @function\n * @return {Model} a {@link Model} that batches requests of the same type and sends them to the data source together\n */\nModel.prototype.unbatch = function unbatch() {\n    return this._clone({ _scheduler: new ImmediateScheduler() });\n};\n\n/**\n * Returns a clone of the {@link Model} that treats errors as values. Errors will be reported in the same callback used to report data. Errors will appear as objects in responses, rather than being sent to the {@link Observable~onErrorCallback} callback of the {@link ModelResponse}.\n * @return {Model}\n */\nModel.prototype.treatErrorsAsValues = function treatErrorsAsValues() {\n    return this._clone({ _treatErrorsAsValues: true });\n};\n\n/**\n * Adapts a Model to the {@link DataSource} interface.\n * @return {DataSource}\n * @example\nvar model =\n    new falcor.Model({\n        cache: {\n            user: {\n                name: \"Steve\",\n                surname: \"McGuire\"\n            }\n        }\n    }),\n    proxyModel = new falcor.Model({ source: model.asDataSource() });\n\n// Prints \"Steve\"\nproxyModel.getValue(\"user.name\").\n    then(function(name) {\n        console.log(name);\n    });\n */\nModel.prototype.asDataSource = function asDataSource() {\n    return new ModelDataSourceAdapter(this);\n};\n\nModel.prototype._materialize = function materialize() {\n    return this._clone({\n        _materialized: true\n    });\n};\n\nModel.prototype._dematerialize = function dematerialize() {\n    return this._clone({\n        _materialized: \"delete\"\n    });\n};\n\n/**\n * Returns a clone of the {@link Model} that boxes values returning the wrapper ({@link Atom}, {@link Reference}, or {@link Error}), rather than the value inside it. This allows any metadata attached to the wrapper to be inspected.\n * @return {Model}\n */\nModel.prototype.boxValues = function boxValues() {\n    return this._clone({\n        _boxed: true\n    });\n};\n\n/**\n * Returns a clone of the {@link Model} that unboxes values, returning the value inside of the wrapper ({@link Atom}, {@link Reference}, or {@link Error}), rather than the wrapper itself. This is the default mode.\n * @return {Model}\n */\nModel.prototype.unboxValues = function unboxValues() {\n    return this._clone({\n        _boxed: \"delete\"\n    });\n};\n\n/**\n * Returns a clone of the {@link Model} that only uses the local {@link JSONGraph} and never uses a {@link DataSource} to retrieve missing paths.\n * @return {Model}\n */\nModel.prototype.withoutDataSource = function withoutDataSource() {\n    return this._clone({\n        _source: \"delete\"\n    });\n};\n\nModel.prototype.toJSON = function toJSON() {\n    return {\n        $type: \"ref\",\n        value: this.getPath()\n    };\n};\n\n/**\n * Returns the {@link Path} to the object within the JSON Graph that this Model references.\n * @return {Path}\n * @example\nvar Model = falcor.Model;\nvar model = new Model({\n  cache: {\n    users: [\n      Model.ref([\"usersById\", 32])\n    ],\n    usersById: {\n      32: {\n        name: \"Steve\",\n        surname: \"McGuire\"\n      }\n    }\n  }\n});\n\nmodel.\n    get(['users', 0, 'name']).\n    subscribe(function(jsonEnv) {\n        var userModel = model.deref(jsonEnv.json.users[0]);\n        console.log(model.getPath());\n        console.log(userModel.getPath());\n   });\n});\n\n// prints the following:\n// []\n// [\"usersById\", 32] - because userModel refers to target of reference at [\"users\", 0]\n */\nModel.prototype.getPath = function getPath() {\n    return this._path.slice(0);\n};\n\n/**\n * This one is actually private.  I would not use this without talking to\n * jhusain, sdesai, or michaelbpaulson (github).\n * @private\n */\nModel.prototype._fromWhenceYouCame = function fromWhenceYouCame(allow) {\n    return this._clone({\n        _allowFromWhenceYouCame: allow === undefined ? true : allow\n    });\n};\n\nModel.prototype._optimizePath = function _optimizePath(path) {\n    var node = getCachePosition(this._root.cache, path);\n    var abs_path = node && node[Æ’_abs_path] || [];\n    return abs_path.slice(0);\n};\n\nModel.prototype._getVersion = require(\"./cache/getVersion\");\nModel.prototype._getPathValuesAsPathMap = getJSON;\nModel.prototype._getPathValuesAsJSONG = getJSONGraph;\n\nModel.prototype._setPathValues = require(\"./cache/set/setPathValues\");\nModel.prototype._setPathMaps = require(\"./cache/set/setPathMaps\");\nModel.prototype._setJSONGs = require(\"./cache/set/setJSONGraphs\");\nModel.prototype._setCache = require(\"./cache/set/setPathMaps\");\n\nModel.prototype._invalidatePathValues = require(\"./cache/invalidate/invalidatePathSets\");\nModel.prototype._invalidatePathMaps = require(\"./cache/invalidate/invalidatePathMaps\");\n\n\n\n// WEBPACK FOOTER //\n// ./lib/Model.js","function ModelDataSourceAdapter(model) {\n    this._model = model._materialize().treatErrorsAsValues();\n    // this._model = model._materialize().boxValues().treatErrorsAsValues();\n}\n\nModelDataSourceAdapter.prototype.get = function get(pathSets) {\n    return this._model.get.apply(this._model, pathSets)._toJSONG();\n};\n\nModelDataSourceAdapter.prototype.set = function set(jsongResponse) {\n    return this._model.set(jsongResponse)._toJSONG();\n};\n\nModelDataSourceAdapter.prototype.call = function call(path, args, suffixes, paths) {\n    return this._model.call.apply(this._model, [\n        path, args, suffixes\n    ].concat(paths))._toJSONG();\n};\n\nmodule.exports = ModelDataSourceAdapter;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ModelDataSourceAdapter.js","var hasOwn = require(\"./support/hasOwn\");\nvar Requests = require(\"./request/Queue\");\nvar isFunction = require(\"./support/isFunction\");\n\nfunction ModelRoot(o, model) {\n\n    var options = o || {};\n\n    this.cache = {};\n    this.version = 0;\n    this.syncRefCount = 0;\n    this.maxRetryCount = 10;\n    this.topLevelModel = model;\n    this.requests = new Requests(this);\n    this.expired = options.expired || [];\n\n    this.collectRatio = 0.75;\n    this.maxSize = Math.pow(2, 53) - 1;\n\n    if (typeof options.collectRatio === 'number') {\n        this.collectRatio = options.collectRatio;\n    }\n\n    if (typeof options.maxSize === 'number') {\n        this.maxSize = options.maxSize;\n    }\n\n    if (isFunction(options.comparator)) {\n        this.comparator = options.comparator;\n    }\n\n    if (isFunction(options.branchSelector)) {\n        this.branchSelector = options.branchSelector;\n    }\n\n    if (isFunction(options.errorSelector)) {\n        this.errorSelector = options.errorSelector;\n    }\n\n    if (isFunction(options.branchSelector)) {\n        this.branchSelector = options.branchSelector;\n    }\n\n    if (isFunction(options.onChange)) {\n        this.onChange = options.onChange;\n    }\n\n    if (isFunction(options.onChangesCompleted)) {\n        this.onChangesCompleted = options.onChangesCompleted;\n    }\n}\n\nModelRoot.prototype.errorSelector = function errorSelector(x, y) {\n    return y;\n};\n\nModelRoot.prototype.comparator = function comparator(cacheNode, messageNode) {\n    if (hasOwn(cacheNode, \"value\") && hasOwn(messageNode, \"value\")) {\n        // They are the same only if the following fields are the same.\n        return cacheNode.value === messageNode.value &&\n            cacheNode.$type === messageNode.$type &&\n            cacheNode.$expires === messageNode.$expires;\n    }\n    return cacheNode === messageNode;\n};\n\nmodule.exports = ModelRoot;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ModelRoot.js","var getJSON = require('../get/json');\nvar getJSONGraph = require('../get/jsonGraph');\n\nmodule.exports = { json: json, jsonGraph: jsonGraph };\n\nfunction json(model, _args, data, progressive) {\n    if (!_args) {\n        return {};\n    }\n    var hasValue = false;\n    args = _args[1] || [];\n    suffixes = _args[2] || [];\n    thisPaths = _args[3] || [];\n    path = (model._path || []).concat(_args[0] || []);\n    if (progressive && thisPaths && thisPaths.length) {\n        var get = getJSON(model, thisPaths, data, progressive)\n        hasValue =  get.hasValue;\n        thisPaths =  get.relative;\n    }\n    return {\n        args: null,\n        data: data,\n        hasValue: hasValue,\n        relative: thisPaths,\n        missing: [thisPaths],\n        fragments: [\n            path, args, suffixes, thisPaths\n        ]\n    };\n}\n\nfunction jsonGraph(model, _args, data, progressive) {\n    if (!_args) {\n        return {};\n    }\n    var hasValue = false;\n    args = _args[1] || [];\n    suffixes = _args[2] || [];\n    thisPaths = _args[3] || [];\n    path = (model._path || []).concat(_args[0] || []);\n    if (progressive && thisPaths && thisPaths.length) {\n        var get = getJSONGraph({\n            _root: model._root,\n            _boxed: model._boxed,\n            _materialized: model._materialized,\n            _treatErrorsAsValues: model._treatErrorsAsValues\n        }, thisPaths, data)\n        hasValue = get.hasValue;\n        thisPaths = get.requested;\n    }\n    return {\n        args: null,\n        data: data,\n        hasValue: hasValue,\n        relative: thisPaths,\n        missing: [thisPaths],\n        fragments: [\n            path, args, suffixes, thisPaths\n        ]\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/call/index.js","module.exports = {\n    json: require('./json/getJSON'),\n    jsonGraph: require('./jsonGraph/getJSONGraph')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/index.js","var clone = require(\"../../clone\");\n\nmodule.exports = onError;\n\nfunction onError(node, depth, results,\n                 requestedPath, fromReference, boxValues) {\n\n    var index = -1;\n    var length = depth + !!fromReference; // depth + 1 if fromReference === true\n    var errorPath = new Array(length);\n    var errorValue = !boxValues ? node.value : clone(node);\n\n    while (++index < length) {\n        errorPath[index] = requestedPath[index];\n    }\n\n    (results.errors || (results.errors = [])).push({\n        path: errorPath,\n        value: errorValue\n    });\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/onError.js","var arr = new Array(2);\nvar onValue = require(\"./onValue\");\nvar $ref = require(\"../../../types/ref\");\nvar FalcorJSON = require(\"./FalcorJSON\");\nvar onValueType = require(\"../onValueType\");\nvar originalOnMissing = require(\"../onMissing\");\nvar isExpired = require(\"../../isExpired\");\nvar getReferenceTarget = require(\"./getReferenceTarget\");\nvar NullInPathError = require(\"../../../errors/NullInPathError\");\nvar InvalidKeySetError = require(\"../../../errors/InvalidKeySetError\");\nvar getHashCode = require(\"@graphistry/falcor-path-utils\").getHashCode;\nvar flatBufferToPaths = require(\"@graphistry/falcor-path-utils\").flatBufferToPaths;\n\nmodule.exports = walkPathAndBuildOutput;\n\n/* eslint-disable camelcase */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-constant-condition */\nfunction walkPathAndBuildOutput(cacheRoot, node, json, path, depth, seed, results,\n                                requestedPath, optimizedPath, optimizedLength,\n                                fromReference, referenceContainer,\n                                modelRoot, expired, branchSelector,\n                                boxValues, materialized, hasDataSource,\n                                treatErrorsAsValues, allowFromWhenceYouCame) {\n\n    var type, refTarget;\n\n    // ============ Check for base cases ================\n\n    // If there's nowhere to go, we've reached a terminal node, or hit\n    // the end of the path, stop now. Either build missing paths or report the value.\n    if (undefined === node ||\n        undefined !== (type = node.$type) ||\n        undefined === path) {\n        arr[1] = false;\n        arr[0] = onValueType(node, type,\n                             path, depth, seed, results,\n                             requestedPath, depth,\n                             optimizedPath, optimizedLength,\n                             fromReference, modelRoot, expired,\n                             boxValues, materialized, hasDataSource,\n                             treatErrorsAsValues, onValue, onMissing);\n        return arr;\n    }\n\n    var f_meta, f_old_keys, f_new_keys, f_code = \"\";\n\n    var next, nextKey,\n        keyset, keyIsRange,\n        keys = path[\"$keys\"],\n        nextDepth = depth + 1, rangeEnd,\n        nextJSON, nextReferenceContainer,\n        nextOptimizedLength, nextOptimizedPath,\n        optimizedLengthNext = optimizedLength + 1,\n        refContainerAbsPath, refContainerRefPath;\n\n    if (allowFromWhenceYouCame && referenceContainer) {\n        refContainerRefPath = referenceContainer.value;\n        refContainerAbsPath = referenceContainer[Æ’_abs_path];\n    }\n\n    if (json && (f_meta = json[Æ’_meta])) {\n        if (!branchSelector && !(json instanceof FalcorJSON)) {\n            delete json[Æ’_meta];\n            json.__proto__ = new FalcorJSON(f_meta);\n        } else if (\n            f_meta[Æ’m_version] === node[Æ’_version] &&\n            f_meta[\"$code\"]    === path[\"$code\"] &&\n            f_meta[Æ’m_abs_path] === node[Æ’_abs_path]) {\n            results.hasValue = true;\n            arr[0] = json;\n            arr[1] = false;\n            return arr;\n        }\n        f_old_keys = f_meta[Æ’m_keys];\n        f_meta[Æ’m_version] = node[Æ’_version];\n        f_meta[Æ’m_abs_path] = node[Æ’_abs_path];\n        f_meta[Æ’m_deref_to] = refContainerRefPath;\n        f_meta[Æ’m_deref_from] = refContainerAbsPath;\n    }\n\n    f_new_keys = {};\n\n    var keysIndex = -1;\n    var keysLength = keys.length;\n    var nextPath, nextPathKey,\n        hasMissingPath = false,\n        nextMeta, nextMetaPath;\n\n    iteratingKeyset:\n    while (++keysIndex < keysLength) {\n\n        keyset = keys[keysIndex];\n        nextPath = path[keysIndex];\n        nextMeta = undefined;\n        nextMetaPath = undefined;\n\n        // If `null` appears before the end of the path, throw an error.\n        // If `null` is at the end of the path, but the reference doesn't\n        // point to a sentinel value, throw an error.\n        //\n        // Inserting `null` at the end of the path indicates the target of a ref\n        // should be returned, rather than the ref itself. When `null` is the last\n        // key, the path is lengthened by one, ensuring that if a ref is encountered\n        // just before the `null` key, the reference is followed before terminating.\n        if (null === keyset) {\n            if (nextPath !== undefined) {\n                throw new NullInPathError();\n            }\n            f_code = \"\" + getHashCode(\"\" + f_code + \"null\");\n            continue;\n        }\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        else if (\"object\" !== typeof keyset) {\n            nextKey = keyset;\n            rangeEnd = undefined;\n            keyIsRange = false;\n            nextPathKey = nextKey;\n        }\n        // If the Keyset isn't null or primitive, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if (\"number\" !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyIsRange = true;\n            nextPathKey = \"{from:\" + nextKey + \",length:\" + (rangeEnd - nextKey + 1) + \"}\";\n        }\n\n        // Now that we have the next key, step down one level in the cache.\n        do {\n            fromReference = false;\n            nextJSON = json && json[nextKey];\n            nextOptimizedPath = optimizedPath;\n            nextOptimizedLength = optimizedLengthNext;\n            nextReferenceContainer = referenceContainer;\n\n            next = node[nextKey];\n            requestedPath[depth] = nextKey;\n            optimizedPath[optimizedLength] = nextKey;\n\n            // If we encounter a ref, inline the reference target and continue\n            // evaluating the path.\n            if (next &&\n                nextPath !== undefined &&\n                // If the reference is expired, it will be invalidated and\n                // reported as missing in the next call to walkPath below.\n                next.$type === $ref && !isExpired(next)) {\n\n                // Retrieve the reference target and next referenceContainer (if\n                // this reference points to other references) and continue\n                // following the path. If the reference resolves to a missing\n                // path or leaf node, it will be handled in the next call to\n                // walkPath.\n                refTarget = getReferenceTarget(cacheRoot, next, modelRoot);\n\n                next = refTarget[0];\n                fromReference = true;\n                nextOptimizedPath = refTarget[1];\n                nextReferenceContainer = refTarget[2];\n                nextOptimizedLength = nextOptimizedPath.length;\n                refTarget[0] = refTarget[1] = refTarget[2] = undefined;\n            }\n\n            // Continue following the path\n\n            arr = walkPathAndBuildOutput(\n                cacheRoot, next, nextJSON, nextPath, nextDepth, seed,\n                results, requestedPath, nextOptimizedPath,\n                nextOptimizedLength, fromReference, nextReferenceContainer,\n                modelRoot, expired, branchSelector, boxValues, materialized,\n                hasDataSource, treatErrorsAsValues, allowFromWhenceYouCame\n            );\n\n            if (!seed) {\n                continue;\n            }\n\n            nextJSON = arr[0];\n            hasMissingPath = hasMissingPath || arr[1];\n\n            // Inspect the return value from the step and determine whether to\n            // create or write into the JSON branch at this level.\n            //\n            // 1. If the next node was a leaf value, nextJSON is the value.\n            // 2. If the next node was a missing path, nextJSON is undefined.\n            // 3. If the next node was a branch, then nextJSON will either be an\n            //    Object or undefined. If nextJSON is undefined, all paths under\n            //    this step resolved to missing paths. If it's an Object, then\n            //    at least one path resolved to a successful leaf value.\n            //\n            // This check defers creating branches until we see at least one\n            // cache hit. Otherwise, don't waste the cycles creating a branch\n            // if everything underneath is a cache miss.\n\n            if (undefined !== nextJSON) {\n                // The json value will initially be undefined. If we're here,\n                // then at least one leaf value was encountered, so create a\n                // branch to contain it.\n                if (f_meta === undefined) {\n                    f_meta = {};\n                    f_meta[Æ’m_version] = node[Æ’_version];\n                    f_meta[Æ’m_abs_path] = node[Æ’_abs_path];\n                    f_meta[Æ’m_deref_to] = refContainerRefPath;\n                    f_meta[Æ’m_deref_from] = refContainerAbsPath;\n                }\n\n                if (undefined === json || null === json) {\n                    // Enable developers to instrument branch node creation by\n                    // providing a custom function. If they do, delegate branch\n                    // node creation to them.\n                    if (branchSelector) {\n                        json = branchSelector(new FalcorJSON(f_meta));\n                    } else {\n                        json = Object.create(new FalcorJSON(f_meta));\n                    }\n                }\n\n                f_new_keys[nextKey] = true;\n                if (f_old_keys && f_old_keys.hasOwnProperty(nextKey)) {\n                    f_old_keys[nextKey] = false;\n                }\n                // Set the reported branch or leaf into this branch.\n                json[nextKey] = nextJSON;\n            } else {\n                hasMissingPath = true;\n                if (json && json.hasOwnProperty(nextKey)) {\n                    delete json[nextKey];\n                }\n            }\n        }\n        // Re-enter the inner loop and continue iterating the Range, or exit\n        // here if we encountered a Key.\n        while (keyIsRange && ++nextKey <= rangeEnd);\n\n        if (!hasMissingPath) {\n            if (undefined === nextPath) {\n                f_code = \"\" + getHashCode(\"\" + f_code + nextPathKey);\n            } else {\n                f_code = \"\" + getHashCode(\"\" + f_code + nextPathKey + nextPath[\"$code\"]);\n            }\n        }\n    }\n\n    if (hasMissingPath) {\n        f_code = \"__incomplete__\";\n    }\n\n    if (f_meta) {\n        f_meta[\"$code\"] = f_code;\n        f_meta[Æ’m_keys] = f_new_keys;\n        if (f_old_keys) {\n            for (nextKey in f_old_keys) {\n                if (f_old_keys[nextKey]) {\n                    delete json[nextKey];\n                }\n            }\n        }\n    }\n\n    // `json` will either be a branch, or undefined if all paths were cache misses\n\n    arr[0] = json;\n    arr[1] = hasMissingPath;\n\n    return arr;\n}\n\nfunction onMissing(path, depth, results,\n                   requestedPath, requestedLength,\n                   optimizedPath, optimizedLength) {\n\n    var paths = path ? flatBufferToPaths(path) : [[]];\n    var rPath = requestedPath.slice(0, requestedLength);\n\n    paths.forEach(function(restPath) {\n        requestedLength = depth + restPath.length;\n        originalOnMissing(rPath.concat(restPath),\n                          depth, results,\n                          requestedPath, requestedLength,\n                          optimizedPath, optimizedLength);\n    });\n\n    return undefined;\n}\n\n/* eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/walkFlatBuffer.js","var isArray = Array.isArray;\nvar onValue = require(\"./onValue\");\nvar $ref = require(\"../../../types/ref\");\nvar FalcorJSON = require(\"./FalcorJSON\");\nvar onMissing = require(\"../onMissing\");\nvar onValueType = require(\"../onValueType\");\nvar isExpired = require(\"../../isExpired\");\nvar getReferenceTarget = require(\"./getReferenceTarget\");\nvar NullInPathError = require(\"../../../errors/NullInPathError\");\nvar InvalidKeySetError = require(\"../../../errors/InvalidKeySetError\");\n\nmodule.exports = walkPathAndBuildOutput;\n\n/* eslint-disable camelcase */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-constant-condition */\nfunction walkPathAndBuildOutput(cacheRoot, node, json, path,\n                                depth, seed, results,\n                                requestedPath, requestedLength,\n                                optimizedPath, optimizedLength,\n                                fromReference, referenceContainer,\n                                modelRoot, expired, branchSelector,\n                                boxValues, materialized, hasDataSource,\n                                treatErrorsAsValues, allowFromWhenceYouCame) {\n\n    var type, refTarget;\n\n    // ============ Check for base cases ================\n\n    // If there's nowhere to go, we've reached a terminal node, or hit\n    // the end of the path, stop now. Either build missing paths or report the value.\n    if (node === undefined || (\n        type = node.$type) || (\n        depth === requestedLength)) {\n        return onValueType(node, type,\n                           path, depth, seed, results,\n                           requestedPath, requestedLength,\n                           optimizedPath, optimizedLength,\n                           fromReference, modelRoot, expired,\n                           boxValues, materialized, hasDataSource,\n                           treatErrorsAsValues, onValue, onMissing);\n    }\n\n    var f_meta;\n\n    var next, nextKey,\n        keyset, keyIsRange,\n        nextDepth = depth + 1,\n        rangeEnd, keysOrRanges,\n        nextJSON, nextReferenceContainer,\n        keysetIndex = -1, keysetLength = 0,\n        nextOptimizedLength, nextOptimizedPath,\n        optimizedLengthNext = optimizedLength + 1,\n        refContainerAbsPath, refContainerRefPath;\n\n    keyset = path[depth];\n\n    // If `null` appears before the end of the path, throw an error.\n    // If `null` is at the end of the path, but the reference doesn't\n    // point to a sentinel value, throw an error.\n    //\n    // Inserting `null` at the end of the path indicates the target of a ref\n    // should be returned, rather than the ref itself. When `null` is the last\n    // key, the path is lengthened by one, ensuring that if a ref is encountered\n    // just before the `null` key, the reference is followed before terminating.\n    if (null === keyset) {\n        if (nextDepth < requestedLength) {\n            throw new NullInPathError();\n        }\n        return json;\n    }\n\n    if (allowFromWhenceYouCame && referenceContainer) {\n        refContainerRefPath = referenceContainer.value;\n        refContainerAbsPath = referenceContainer[Æ’_abs_path];\n    }\n\n    // Iterate over every key in the keyset. This loop is perhaps a bit clever,\n    // but we do it this way because this is a performance-sensitive code path.\n    // This loop simulates a recursive function if we encounter a Keyset that\n    // contains Keys or Ranges. This is accomplished by a nifty dance between an\n    // outer loop and an inner loop.\n    //\n    // The outer loop is responsible for identifying if the value at this depth\n    // is a Key, Range, or Keyset. If it encounters a Keyset, the `keysetIndex`,\n    // `keysetLength`, and `keysOrRanges` variables are assigned and the outer\n    // loop restarts. If it encounters a Key or Range, `nextKey`, `keyIsRange`,\n    // and `rangeEnd` are assigned values which signal whether the inner loop\n    // should iterate a Range or exit after the first run.\n    //\n    // The inner loop steps `nextKey` one level down in the cache. If a Range\n    // was encountered in the outer loop, the inner loop will iterate until the\n    // Range has been exhausted. If a Key was encountered, the inner loop exits\n    // after the first execution.\n    //\n    // After the inner loop exits, the outer loop iterates the `keysetIndex`\n    // until the Keyset is exhausted. `keysetIndex` and `keysetLength` are\n    // initialized to -1 and 0 respectively, so if a Keyset wasn't encountered\n    // at this depth in the path, then the outer loop exits after one execution.\n\n    iteratingKeyset: do {\n\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        if (\"object\" !== typeof keyset) {\n            nextKey = keyset;\n            rangeEnd = undefined;\n            keyIsRange = false;\n        }\n        // If we encounter a Keyset, either iterate through the Keys and Ranges,\n        // or throw an error if we're already iterating a Keyset. Keysets cannot\n        // contain other Keysets.\n        else if (isArray(keyset)) {\n            // If we've already encountered an Array keyset, throw an error.\n            if (keysOrRanges !== undefined) {\n                throw new InvalidKeySetError(path, keysOrRanges);\n            }\n            keysetIndex = 0;\n            keysOrRanges = keyset;\n            keysetLength = keyset.length;\n            // If an Array of keys or ranges is empty, terminate the graph walk\n            // and return the json constructed so far. An example of an empty\n            // Keyset is: ['lolomo', [], 'summary']. This should short circuit\n            // without building missing paths.\n            if (0 === keysetLength) {\n                break iteratingKeyset;\n            }\n            // Assign `keyset` to the first value in the Keyset. Re-entering the\n            // outer loop mimics a singly-recursive function call.\n            keyset = keysOrRanges[keysetIndex];\n            continue iteratingKeyset;\n        }\n        // If the Keyset isn't a primitive or Array, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if (\"number\" !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyIsRange = true;\n        }\n\n        // Now that we have the next key, step down one level in the cache.\n        do {\n            fromReference = false;\n            nextJSON = json && json[nextKey];\n            nextOptimizedPath = optimizedPath;\n            nextOptimizedLength = optimizedLengthNext;\n            nextReferenceContainer = referenceContainer;\n\n            next = node[nextKey];\n            requestedPath[depth] = nextKey;\n            optimizedPath[optimizedLength] = nextKey;\n\n            // If we encounter a ref, inline the reference target and continue\n            // evaluating the path.\n            if (next &&\n                nextDepth < requestedLength &&\n                // If the reference is expired, it will be invalidated and\n                // reported as missing in the next call to walkPath below.\n                next.$type === $ref && !isExpired(next)) {\n\n                // Retrieve the reference target and next referenceContainer (if\n                // this reference points to other references) and continue\n                // following the path. If the reference resolves to a missing\n                // path or leaf node, it will be handled in the next call to\n                // walkPath.\n                refTarget = getReferenceTarget(cacheRoot, next, modelRoot);\n\n                next = refTarget[0];\n                fromReference = true;\n                nextOptimizedPath = refTarget[1];\n                nextReferenceContainer = refTarget[2];\n                nextOptimizedLength = nextOptimizedPath.length;\n                refTarget[0] = refTarget[1] = refTarget[2] = undefined;\n            }\n\n            // Continue following the path\n\n            nextJSON = walkPathAndBuildOutput(\n                cacheRoot, next, nextJSON, path, nextDepth, seed,\n                results, requestedPath, requestedLength, nextOptimizedPath,\n                nextOptimizedLength, fromReference, nextReferenceContainer,\n                modelRoot, expired, branchSelector, boxValues, materialized,\n                hasDataSource, treatErrorsAsValues, allowFromWhenceYouCame\n            );\n\n            if (!seed) {\n                continue;\n            }\n\n            // Inspect the return value from the step and determine whether to\n            // create or write into the JSON branch at this level.\n            //\n            // 1. If the next node was a leaf value, nextJSON is the value.\n            // 2. If the next node was a missing path, nextJSON is undefined.\n            // 3. If the next node was a branch, then nextJSON will either be an\n            //    Object or undefined. If nextJSON is undefined, all paths under\n            //    this step resolved to missing paths. If it's an Object, then\n            //    at least one path resolved to a successful leaf value.\n            //\n            // This check defers creating branches until we see at least one\n            // cache hit. Otherwise, don't waste the cycles creating a branch\n            // if everything underneath is a cache miss.\n\n            if (undefined !== nextJSON) {\n                // The json value will initially be undefined. If we're here,\n                // then at least one leaf value was encountered, so create a\n                // branch to contain it.\n                if (undefined === json || null === json) {\n                    f_meta = {};\n                    f_meta[Æ’m_version] = node[Æ’_version];\n                    f_meta[Æ’m_abs_path] = node[Æ’_abs_path];\n                    f_meta[Æ’m_deref_to] = refContainerRefPath;\n                    f_meta[Æ’m_deref_from] = refContainerAbsPath;\n                    // Enable developers to instrument branch node creation by\n                    // providing a custom function. If they do, delegate branch\n                    // node creation to them.\n                    if (branchSelector) {\n                        json = branchSelector(new FalcorJSON(f_meta));\n                    } else {\n                        json = Object.create(new FalcorJSON(f_meta));\n                    }\n                }\n\n                // Set the reported branch or leaf into this branch.\n                json[nextKey] = nextJSON;\n            }\n        }\n        // Re-enter the inner loop and continue iterating the Range, or exit\n        // here if we encountered a Key.\n        while (keyIsRange && ++nextKey <= rangeEnd);\n\n        // If we've exhausted the Keyset (or never encountered one at all),\n        // exit the outer loop.\n        if (++keysetIndex === keysetLength) {\n            break iteratingKeyset;\n        }\n\n        // Otherwise get the next Key or Range from the Keyset and re-enter the\n        // outer loop from the top.\n        keyset = keysOrRanges[keysetIndex];\n    } while (true);\n\n    // `json` will either be a branch, or undefined if all paths were cache misses\n    return json;\n}\n/* eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/json/walkPath.js","var arr = new Array(2);\nvar clone = require(\"../../clone\");\nvar $ref = require(\"../../../types/ref\");\nvar inlineValue = require(\"./inlineValue\");\nvar promote = require(\"../../../lru/promote\");\nvar isExpired = require(\"../../isExpired\");\nvar createHardlink = require(\"../../createHardlink\");\nvar CircularReferenceError = require(\"../../../errors/CircularReferenceError\");\n\nmodule.exports = getReferenceTarget;\n\n/* eslint-disable no-undef */\n/* eslint-disable no-console */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-constant-condition */\nfunction getReferenceTarget(root, ref, modelRoot, seed, boxValues, materialized) {\n\n    promote(modelRoot, ref);\n\n    var context,\n        key, type, depth = 0,\n        followedRefsCount = 0,\n        node = root, path = ref.value,\n        copy = path, length = path.length;\n\n    do {\n        if (depth === 0 && undefined !== (context = ref[Æ’_context])) {\n            node = context;\n            depth = length;\n        } else {\n            key = path[depth++];\n            if (undefined === (node = node[key])) {\n                break;\n            }\n        }\n\n        if (depth === length) {\n            type = node.$type;\n            // If the reference points to an expired\n            // value node, don't create a hard-link.\n            if (undefined !== type && isExpired(node)) {\n                break;\n            }\n            // If a reference points to itself, throw an error.\n            else if (node === ref) {\n                throw new CircularReferenceError(path);\n            }\n            // If the node we land on isn't the existing ref context,\n            // create a hard-link between the reference and the node\n            // it points to.\n            else if (node !== context) {\n                createHardlink(ref, node);\n            }\n\n            // If the reference points to another ref, follow the new ref\n            // by resetting the relevant state and continuing from the top.\n            if (type === $ref) {\n\n                promote(modelRoot, node);\n\n                seed && inlineValue(clone(node), path, length, seed);\n\n                depth = 0;\n                ref = node;\n                node = root;\n                path = copy = ref.value;\n                length = path.length;\n\n                if (DEBUG) {\n                    // If we follow too many references, we might have an indirect\n                    // circular reference chain. Warn about this (but don't throw).\n                    if (++followedRefsCount % 50 === 0) {\n                        try {\n                            throw new Error(\n                                \"Followed \" + followedRefsCount + \" references. \" +\n                                \"This might indicate the presence of an indirect \" +\n                                \"circular reference chain.\"\n                            );\n                        } catch (e) {\n                            if (console) {\n                                var reportFn = ((\n                                    typeof console.warn === \"function\" && console.warn) || (\n                                    typeof console.log === \"function\" && console.log));\n                                if (reportFn) {\n                                    reportFn.call(console, e.toString());\n                                }\n                            }\n                        }\n                    }\n                }\n\n                continue;\n            }\n            break;\n        } else if (undefined !== node.$type) {\n            break;\n        }\n    } while (true);\n\n    if (depth < length && undefined !== node) {\n        length = depth;\n    }\n\n    depth = -1;\n    path = new Array(length);\n    while (++depth < length) {\n        path[depth] = copy[depth];\n    }\n\n    arr[0] = node;\n    arr[1] = path;\n\n    return arr;\n}\n/* eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/jsonGraph/getReferenceTarget.js","var clone = require(\"../../clone\");\nvar $ref = require(\"../../../types/ref\");\nvar $atom = require(\"../../../types/atom\");\nvar $error = require(\"../../../types/error\");\nvar inlineValue = require(\"./inlineValue\");\n\nmodule.exports = onJSONGraphValue;\n\nfunction onJSONGraphValue(node, type, depth, seed, results,\n                          requestedPath, optimizedPath, optimizedLength,\n                          fromReference, boxValues, materialized) {\n\n    var value = node && node.value;\n    var requiresMaterializedToReport = type && value === undefined;\n\n    if (requiresMaterializedToReport) {\n        if (materialized) {\n            value = { $type: $atom };\n        } else {\n            return undefined;\n        }\n    }\n    // boxValues always clones the node\n    else if (boxValues ||\n            /*\n             * JSON Graph should always clone errors, refs, atoms we didn't\n             * create, and atoms we created to wrap Object values.\n             */\n             $ref === type ||\n             $error === type ||\n             !node[Æ’_wrapped_value] ||\n             \"object\" === typeof value) {\n        value = clone(node);\n    }\n\n    if (results && requestedPath) {\n        results.hasValue = true;\n        inlineValue(value, optimizedPath, optimizedLength,\n                    seed, boxValues, materialized);\n        (seed.paths || (seed.paths = [])).push(\n            requestedPath.slice(0, depth + !!fromReference) // depth + 1 if fromReference === true\n        );\n    }\n\n    return value;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/jsonGraph/onValue.js","var isArray = Array.isArray;\nvar clone = require(\"../../clone\");\nvar $ref = require(\"../../../types/ref\");\nvar onValue = require(\"./onValue\");\nvar onMissing = require(\"../onMissing\");\nvar inlineValue = require(\"./inlineValue\");\nvar onValueType = require(\"../onValueType\");\nvar isExpired = require(\"../../isExpired\");\nvar getReferenceTarget = require(\"./getReferenceTarget\");\nvar NullInPathError = require(\"../../../errors/NullInPathError\");\nvar InvalidKeySetError = require(\"../../../errors/InvalidKeySetError\");\n\nmodule.exports = walkPathAndBuildOutput;\n\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-constant-condition */\nfunction walkPathAndBuildOutput(cacheRoot, node, path,\n                                depth, seed, results,\n                                requestedPath, requestedLength,\n                                optimizedPath, optimizedLength,\n                                fromReference, modelRoot, expired,\n                                boxValues, materialized, hasDataSource,\n                                treatErrorsAsValues) {\n\n    var type, refTarget;\n\n    // ============ Check for base cases ================\n\n    // If there's nowhere to go, we've reached a terminal node, or hit\n    // the end of the path, stop now. Either build missing paths or report the value.\n    if (node === undefined || (\n        type = node.$type) || (\n        depth === requestedLength)) {\n        return onValueType(node, type,\n                           path, depth, seed, results,\n                           requestedPath, requestedLength,\n                           optimizedPath, optimizedLength,\n                           fromReference, modelRoot, expired,\n                           boxValues, materialized, hasDataSource,\n                           treatErrorsAsValues, onValue, onMissing);\n    }\n\n    var next, nextKey,\n        keyset, keyIsRange,\n        nextDepth = depth + 1,\n        rangeEnd, keysOrRanges,\n        keysetIndex = -1, keysetLength = 0,\n        nextOptimizedLength, nextOptimizedPath,\n        optimizedLengthNext = optimizedLength + 1;\n\n    keyset = path[depth];\n\n    // If `null` appears before the end of the path, throw an error.\n    // If `null` is at the end of the path, but the reference doesn't\n    // point to a sentinel value, throw an error.\n    //\n    // Inserting `null` at the end of the path indicates the target of a ref\n    // should be returned, rather than the ref itself. When `null` is the last\n    // key, the path is lengthened by one, ensuring that if a ref is encountered\n    // just before the `null` key, the reference is followed before terminating.\n    if (null === keyset) {\n        if (nextDepth < requestedLength) {\n            throw new NullInPathError();\n        }\n        return undefined;\n    }\n\n    // Iterate over every key in the keyset. This loop is perhaps a bit clever,\n    // but we do it this way because this is a performance-sensitive code path.\n    // This loop simulates a recursive function if we encounter a Keyset that\n    // contains Keys or Ranges. This is accomplished by a nifty dance between an\n    // outer loop and an inner loop.\n    //\n    // The outer loop is responsible for identifying if the value at this depth\n    // is a Key, Range, or Keyset. If it encounters a Keyset, the `keysetIndex`,\n    // `keysetLength`, and `keysOrRanges` variables are assigned and the outer\n    // loop restarts. If it encounters a Key or Range, `nextKey`, `keyIsRange`,\n    // and `rangeEnd` are assigned values which signal whether the inner loop\n    // should iterate a Range or exit after the first run.\n    //\n    // The inner loop steps `nextKey` one level down in the cache. If a Range\n    // was encountered in the outer loop, the inner loop will iterate until the\n    // Range has been exhausted. If a Key was encountered, the inner loop exits\n    // after the first execution.\n    //\n    // After the inner loop exits, the outer loop iterates the `keysetIndex`\n    // until the Keyset is exhausted. `keysetIndex` and `keysetLength` are\n    // initialized to -1 and 0 respectively, so if a Keyset wasn't encountered\n    // at this depth in the path, then the outer loop exits after one execution.\n\n    iteratingKeyset: do {\n\n        // If the keyset is a primitive value, we've found our `nextKey`.\n        if (\"object\" !== typeof keyset) {\n            nextKey = keyset;\n            rangeEnd = undefined;\n            keyIsRange = false;\n        }\n        // If we encounter a Keyset, either iterate through the Keys and Ranges,\n        // or throw an error if we're already iterating a Keyset. Keysets cannot\n        // contain other Keysets.\n        else if (isArray(keyset)) {\n            // If we've already encountered an Array keyset, throw an error.\n            if (keysOrRanges !== undefined) {\n                throw new InvalidKeySetError(path, keysOrRanges);\n            }\n            keysetIndex = 0;\n            keysOrRanges = keyset;\n            keysetLength = keyset.length;\n            // If an Array of keys or ranges is empty, terminate the graph walk\n            // and return the json constructed so far. An example of an empty\n            // Keyset is: ['lolomo', [], 'summary']. This should short circuit\n            // without building missing paths.\n            if (0 === keysetLength) {\n                break iteratingKeyset;\n            }\n            keyset = keysOrRanges[keysetIndex];\n            // Assign `keyset` to the first value in the Keyset. Re-entering the\n            // outer loop mimics a singly-recursive function call.\n            continue iteratingKeyset;\n        }\n        // If the Keyset isn't a primitive or Array, then it must be a Range.\n        else {\n            rangeEnd = keyset.to;\n            nextKey = keyset.from || 0;\n            if (\"number\" !== typeof rangeEnd) {\n                rangeEnd = nextKey + (keyset.length || 0) - 1;\n            }\n            if ((rangeEnd - nextKey) < 0) {\n                break iteratingKeyset;\n            }\n            keyIsRange = true;\n        }\n\n        // Now that we have the next key, step down one level in the cache.\n        do {\n            fromReference = false;\n            nextOptimizedPath = optimizedPath;\n            nextOptimizedLength = optimizedLengthNext;\n\n            next = node[nextKey];\n            requestedPath[depth] = nextKey;\n            optimizedPath[optimizedLength] = nextKey;\n\n            // If we encounter a ref, inline the reference target and continue\n            // evaluating the path.\n            if (next &&\n                nextDepth < requestedLength &&\n                // If the reference is expired, it will be invalidated and\n                // reported as missing in the next call to walkPath below.\n                next.$type === $ref && !isExpired(next)) {\n\n                // Write the cloned ref value into the jsonGraph at the\n                // optimized path. JSONGraph must always clone references.\n                seed && inlineValue(clone(next), optimizedPath, nextOptimizedLength, seed);\n\n                // Retrieve the reference target and next referenceContainer (if\n                // this reference points to other references) and continue\n                // following the path. If the reference resolves to a missing\n                // path or leaf node, it will be handled in the next call to\n                // walkPath.\n                refTarget = getReferenceTarget(cacheRoot, next, modelRoot, seed, boxValues, materialized);\n\n                next = refTarget[0];\n                fromReference = true;\n                nextOptimizedPath = refTarget[1];\n                nextOptimizedLength = nextOptimizedPath.length;\n                refTarget[0] = refTarget[1] = undefined;\n            }\n\n            walkPathAndBuildOutput(\n                cacheRoot, next, path, nextDepth, seed,\n                results, requestedPath, requestedLength, nextOptimizedPath,\n                nextOptimizedLength, fromReference, modelRoot, expired,\n                boxValues, materialized, hasDataSource, treatErrorsAsValues\n            );\n        }\n        // Re-enter the inner loop and continue iterating the Range, or exit\n        // here if we encountered a Key.\n        while (keyIsRange && ++nextKey <= rangeEnd);\n\n        // If we've exhausted the Keyset (or never encountered one at all),\n        // exit the outer loop.\n        if (++keysetIndex === keysetLength) {\n            break iteratingKeyset;\n        }\n\n        // Otherwise get the next Key or Range from the Keyset and re-enter the\n        // outer loop from the top.\n        keyset = keysOrRanges[keysetIndex];\n    } while (true);\n\n    return undefined;\n}\n/* eslint-enable */\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/get/jsonGraph/walkPath.js","var isInternalKey = require(\"../support/isInternalKey\");\n\n/**\n * decends and copies the cache.\n */\nmodule.exports = function getCache(cache) {\n    var out = {};\n    _copyCache(cache, out);\n\n    return out;\n};\n\nfunction cloneBoxedValue(boxedValue) {\n    var clonedValue = {};\n\n    var keys = Object.keys(boxedValue);\n    var key;\n    var i;\n    var l;\n\n    for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n\n        if (!isInternalKey(key)) {\n            clonedValue[key] = boxedValue[key];\n        }\n    }\n\n    return clonedValue;\n}\n\nfunction _copyCache(node, out, fromKey) {\n    // copy and return\n\n    // only copy objects\n    if (!node || typeof node !== \"object\") {\n        return;\n    }\n\n    Object.\n        keys(node).\n        filter(function(k) {\n            // Its not an internal key and the node has a value.  In the cache\n            // there are 3 possibilities for values.\n            // 1: A branch node.\n            // 2: A $type-value node.\n            // 3: undefined\n            // We will strip out 3\n            return !isInternalKey(k) && node[k] !== undefined;\n        }).\n        forEach(function(key) {\n            var cacheNext = node[key];\n            var outNext = out[key];\n\n            if (!outNext) {\n                outNext = out[key] = {};\n            }\n\n            // Paste the node into the out cache.\n            if (cacheNext.$type) {\n                var isObject = cacheNext.value && typeof cacheNext.value === \"object\";\n                var isUserCreatedcacheNext = !cacheNext[Æ’_wrapped_value];\n                var value;\n                if (isObject || isUserCreatedcacheNext) {\n                    value = cloneBoxedValue(cacheNext);\n                } else {\n                    value = cacheNext.value;\n                }\n\n                out[key] = value;\n                return;\n            }\n\n            _copyCache(cacheNext, outNext, key);\n        });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/getCache.js","var getBoundCacheNode = require(\"./getBoundCacheNode\");\n\nmodule.exports = function _getVersion(model, path) {\n    var node = getBoundCacheNode(model, path);\n    var version = node && node[Æ’_version];\n    return (version == null) ? -1 : version;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/getVersion.js","var isArray = Array.isArray;\nvar isPathValue = require(\"../support/isPathValue\");\nvar isJSONEnvelope = require(\"../support/isJSONEnvelope\");\nvar isJSONGraphEnvelope = require(\"../support/isJSONGraphEnvelope\");\n\nmodule.exports = groupCacheArguments;\n\nfunction groupCacheArguments(args) {\n\n    var groups = [];\n    var argIndex = -1;\n    var argCount = args.length;\n    var group, groupType, arg, argType;\n\n    while (++argIndex < argCount) {\n        arg = args[argIndex];\n        if (isArray(arg)) {\n            arg = { path: arg };\n            argType = \"PathValues\";\n        } else if (isPathValue(arg)) {\n            argType = \"PathValues\";\n        } else if (isJSONGraphEnvelope(arg)) {\n            argType = \"JSONGraphs\";\n        } else if (isJSONEnvelope(arg)) {\n            argType = \"PathMaps\";\n        }\n\n        if (groupType !== argType) {\n            groupType = argType;\n            groups.push(group = {\n                arguments: [],\n                inputType: argType\n            });\n        }\n\n        group.arguments.push(arg);\n    }\n\n    return groups;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/groupCacheArguments.js","var invalidatePathSets = require('./invalidatePathSets');\nvar invalidatePathMaps = require('./invalidatePathMaps');\n\nmodule.exports = {\n    json: invalidate,\n    jsonGraph: invalidate,\n}\n\nfunction invalidate(model, args, seed) {\n    invalidatePathSets(model, args);\n    return {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/invalidate/index.js","var now = require(\"../support/now\");\nvar $now = require(\"../values/expires-now\");\nvar $never = require(\"../values/expires-never\");\n\nmodule.exports = function isAlreadyExpired(node) {\n    var exp = node.$expires;\n    return (exp != null) && (\n        exp !== $never) && (\n        exp !== $now) && (\n        exp < now());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/isAlreadyExpired.js","var $ref = require(\"../types/ref\");\nvar $error = require(\"../types/error\");\nvar getSize = require(\"../support/getSize\");\nvar getTimestamp = require(\"../support/getTimestamp\");\n\nvar wrapNode = require(\"./wrapNode\");\nvar isExpired = require(\"./isExpired\");\nvar insertNode = require(\"./insertNode\");\nvar expireNode = require(\"./expireNode\");\nvar replaceNode = require(\"./replaceNode\");\nvar reconstructPath = require(\"./reconstructPath\");\nvar updateNodeAncestors = require(\"./updateNodeAncestors\");\n\nmodule.exports = function mergeJSONGraphNode(\n    parent, node, message, key, requestedPath, optimizedPath,\n    version, expired, lru, comparator, errorSelector) {\n\n    var sizeOffset;\n\n    var cType, mType,\n        cIsObject, mIsObject,\n        cTimestamp, mTimestamp;\n\n    // If the cache and message are the same, we can probably return early:\n    // - If they're both nullsy,\n    //   - If null then the node needs to be wrapped in an atom and inserted.\n    //     This happens from whole branch merging when a leaf is just a null value\n    //     instead of being wrapped in an atom.\n    //   - If undefined then return null (previous behavior).\n    // - If they're both branches, return the branch.\n    // - If they're both edges, continue below.\n    if (node === message) {\n\n        // There should not be undefined values.  Those should always be\n        // wrapped in an $atom\n        if (message === null) {\n            node = wrapNode(message, undefined, message);\n            parent = updateNodeAncestors(parent, -node.$size, lru, version);\n            node = insertNode(node, parent, key, undefined, optimizedPath);\n            return node;\n        }\n\n        // The message and cache are both undefined, return undefined.\n        else if (message === undefined) {\n            return message;\n        }\n\n        else {\n            cIsObject = !(!node || typeof node !== 'object');\n            if (cIsObject) {\n                // Is the cache node a branch? If so, return the cache branch.\n                cType = node.$type;\n                if (cType == null) {\n                    // Has the branch been introduced to the cache yet? If not,\n                    // give it a parent, key, and absolute path.\n                    if (node[Æ’_parent] == null) {\n                        insertNode(node, parent, key, version, optimizedPath);\n                    }\n                    return node;\n                }\n            }\n        }\n    } else {\n        cIsObject = !(!node || typeof node !== 'object');\n        if (cIsObject) {\n            cType = node.$type;\n        }\n    }\n\n    // If the cache isn't a reference, we might be able to return early.\n    if (cType !== $ref) {\n        mIsObject = !(!message || typeof message !== 'object');\n        if (mIsObject) {\n            mType = message.$type;\n        }\n        if (cIsObject && !cType) {\n            // If the cache is a branch and the message is empty or\n            // also a branch, continue with the cache branch.\n            if (message == null || (mIsObject && !mType)) {\n                return node;\n            }\n        }\n    }\n    // If the cache is a reference, we might not need to replace it.\n    else {\n        // If the cache is a reference, but the message is empty, leave the cache alone...\n        if (message == null) {\n            // ...unless the cache is an expired reference. In that case, expire\n            // the cache node and return undefined.\n            if (isExpired(node)) {\n                expireNode(node, expired, lru);\n                return void 0;\n            }\n            return node;\n        }\n        mIsObject = !(!message || typeof message !== 'object');\n        if (mIsObject) {\n            mType = message.$type;\n            // If the cache and the message are both references,\n            // check if we need to replace the cache reference.\n            if (mType === $ref) {\n                if (node === message) {\n                    // If the cache and message are the same reference,\n                    // we performed a whole-branch merge of one of the\n                    // grandparents. If we've previously graphed this\n                    // reference, break early. Otherwise, continue to\n                    // leaf insertion below.\n                    if (node[Æ’_parent] != null) {\n                        return node;\n                    }\n                } else {\n\n                    cTimestamp = node.$timestamp;\n                    mTimestamp = message.$timestamp;\n\n                    // - If either the cache or message reference is expired,\n                    //   replace the cache reference with the message.\n                    // - If neither of the references are expired, compare their\n                    //   timestamps. If either of them don't have a timestamp,\n                    //   or the message's timestamp is newer, replace the cache\n                    //   reference with the message reference.\n                    // - If the message reference is older than the cache\n                    //   reference, short-circuit.\n                    if (!isExpired(node) && !isExpired(message) && mTimestamp < cTimestamp) {\n                        return void 0;\n                    }\n                }\n            }\n        }\n    }\n\n    // If the cache is a leaf but the message is a branch, merge the branch over the leaf.\n    if (cType && mIsObject && !mType) {\n        return insertNode(replaceNode(node, message, parent, key, lru, version), parent, key, undefined, optimizedPath);\n    }\n    // If the message is a sentinel or primitive, insert it into the cache.\n    else if (mType || !mIsObject) {\n        // If the cache and the message are the same value, we branch-merged one\n        // of the message's ancestors. If this is the first time we've seen this\n        // leaf, give the message a $size and $type, attach its graph pointers,\n        // and update the cache sizes and versions.\n\n        if (mType === $error && errorSelector) {\n            message = errorSelector(reconstructPath(requestedPath, key), message);\n        }\n\n        if (mType && node === message) {\n            if (node[Æ’_parent] == null) {\n                node = wrapNode(node, cType, node.value);\n                parent = updateNodeAncestors(parent, -node.$size, lru, version);\n                node = insertNode(node, parent, key, version, optimizedPath);\n            }\n        }\n        // If the cache and message are different, the cache value is expired,\n        // or the message is a primitive, replace the cache with the message value.\n        // If the message is a sentinel, clone and maintain its type.\n        // If the message is a primitive value, wrap it in an atom.\n        else {\n            var isDistinct = true;\n            // If the cache is a branch, but the message is a leaf, replace the\n            // cache branch with the message leaf.\n            if ((cType && !isExpired(node)) || !cIsObject) {\n                // Compare the current cache value with the new value. If either of\n                // them don't have a timestamp, or the message's timestamp is newer,\n                // replace the cache value with the message value. If a comparator\n                // is specified, the comparator takes precedence over timestamps.\n                //\n                // Comparing either Number or undefined to undefined always results in false.\n                isDistinct = (getTimestamp(message) < getTimestamp(node)) === false;\n                // If at least one of the cache/message are sentinels, compare them.\n                if (isDistinct && (cType || mType) && comparator) {\n                    isDistinct = !comparator(node, message, optimizedPath.slice(0, optimizedPath.index));\n                }\n            }\n            if (isDistinct) {\n                message = wrapNode(message, mType, mType ? message.value : message);\n                sizeOffset = getSize(node) - getSize(message);\n                node = replaceNode(node, message, parent, key, lru, version);\n                parent = updateNodeAncestors(parent, sizeOffset, lru, version);\n                node = insertNode(node, parent, key, version, optimizedPath);\n            }\n        }\n\n        // Promote the message edge in the LRU.\n        if (isExpired(node)) {\n            expireNode(node, expired, lru);\n        }\n    }\n    else if (node == null) {\n        node = insertNode(message, parent, key, undefined, optimizedPath);\n    }\n\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/mergeJSONGraphNode.js","var getJSON = require('../get/json');\nvar getJSONGraph = require('../get/jsonGraph');\nvar arrayFlatMap = require(\"../../support/array-flat-map\");\nvar groupCacheArguments = require('../groupCacheArguments');\n\nmodule.exports = {\n    json: json,\n    jsonGraph: jsonGraph,\n    setPathMaps: require(\"./setPathMaps\"),\n    setPathValues: require(\"./setPathValues\"),\n    setJSONGraphs: require(\"./setJSONGraphs\")\n};\n\nfunction json(model, args, data, progressive) {\n    args = groupCacheArguments(args);\n    var set = setGroupsIntoCache(model, args);\n    var get = progressive && getJSON(model, set.relative, data);\n    var jsong = getJSONGraph({\n        _root: model._root, _boxed: model._boxed, _materialized: true,\n        _treatErrorsAsValues: model._treatErrorsAsValues }, set.optimized, {});\n    return {\n        args: args,\n        data: data,\n        fragments: jsong.data,\n        missing: set.optimized,\n        relative: set.relative,\n        error: get && get.error,\n        errors: get && get.errors,\n        requested: jsong.requested,\n        hasValue: get && get.hasValue\n    };\n}\n\nfunction jsonGraph(model, args, data) {\n    args = groupCacheArguments(args);\n    var set = setGroupsIntoCache(model, args);\n    var jsong = getJSONGraph({\n        _root: model._root,\n        _boxed: model._boxed, _materialized: true,\n        _treatErrorsAsValues: model._treatErrorsAsValues\n    }, set.optimized, data);\n    return {\n        args: args,\n        data: data,\n        error: jsong.error,\n        fragments: jsong.data,\n        missing: set.optimized,\n        relative: set.relative,\n        hasValue: jsong.hasValue,\n        requested: jsong.requested\n    };\n}\n\nfunction setGroupsIntoCache(model, xs) {\n\n    var groupIndex = -1;\n    var groupCount = xs.length;\n    var requestedPaths = [];\n    var optimizedPaths = [];\n    var modelRoot = model._root;\n    var selector = modelRoot.errorSelector;\n\n    // Takes each of the groups and normalizes their input into\n    // requested paths and optimized paths.\n    while (++groupIndex < groupCount) {\n\n        var group = xs[groupIndex];\n        var inputType = group.inputType;\n        var groupedArgs = group.arguments;\n\n        if (groupedArgs.length > 0) {\n            var operation = module.exports[\"set\" + inputType];\n            var resultPaths = operation(model, groupedArgs, selector);\n            optimizedPaths.push.apply(optimizedPaths, resultPaths[1]);\n            if (inputType === \"PathValues\") {\n                requestedPaths.push.apply(requestedPaths, groupedArgs.map(pluckPaths));\n            } else if (inputType === \"JSONGraphs\") {\n                requestedPaths.push.apply(requestedPaths, arrayFlatMap(groupedArgs, pluckPaths));\n            } else {\n                requestedPaths.push.apply(requestedPaths, resultPaths[0]);\n            }\n        }\n    }\n\n    return { optimized: optimizedPaths, relative: requestedPaths };\n};\n\nfunction pluckPaths(x) {\n    return x.path || x.paths;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/set/index.js","module.exports = function transferBackReferences(fromNode, destNode) {\n    var fromNodeRefsLength = fromNode[Æ’_refs_length] || 0,\n        destNodeRefsLength = destNode[Æ’_refs_length] || 0,\n        i = -1;\n    while (++i < fromNodeRefsLength) {\n        var ref = fromNode[Æ’_ref + i];\n        if (ref !== void 0) {\n            ref[Æ’_context] = destNode;\n            destNode[Æ’_ref + (destNodeRefsLength + i)] = ref;\n            fromNode[Æ’_ref + i] = void 0;\n        }\n    }\n    destNode[Æ’_refs_length] = fromNodeRefsLength + destNodeRefsLength;\n    fromNode[Æ’_refs_length] = void 0;\n    return destNode;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/transferBackReferences.js","module.exports = function unlinkBackReferences(node) {\n    var i = -1, n = node[Æ’_refs_length] || 0;\n    while (++i < n) {\n        var ref = node[Æ’_ref + i];\n        if (ref != null) {\n            ref[Æ’_context] = ref[Æ’_ref_index] = node[Æ’_ref + i] = void 0;\n        }\n    }\n    node[Æ’_refs_length] = void 0;\n    return node;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/unlinkBackReferences.js","module.exports = function unlinkForwardReference(reference) {\n    var destination = reference[Æ’_context];\n    if (destination) {\n        var i = (reference[Æ’_ref_index] || 0) - 1,\n            n = (destination[Æ’_refs_length] || 0) - 1;\n        while (++i <= n) {\n            destination[Æ’_ref + i] = destination[Æ’_ref + (i + 1)];\n        }\n        destination[Æ’_refs_length] = n;\n        reference[Æ’_ref_index] = reference[Æ’_context] = destination = void 0;\n    }\n    return reference;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cache/unlinkForwardReference.js","module.exports = hasValidParentReference;\n\nfunction hasValidParentReference() {\n    var reference = this._referenceContainer;\n\n    // Always true when this mode is false.\n    if (!this._allowFromWhenceYouCame) {\n        return true;\n    }\n\n    // If fromWhenceYouCame is true and the first set of keys did not have\n    // a reference, this case can happen.  They are always valid.\n    if (reference === true) {\n        return true;\n    }\n\n    // was invalid before even derefing.\n    if (reference === false) {\n        return false;\n    }\n\n    // Its been disconnected (set over or collected) from the graph.\n    if (reference && reference[Æ’_parent] === undefined) {\n        return false;\n    }\n\n    // The reference has expired but has not been collected from the graph.\n    if (reference && reference[Æ’_invalidated]) {\n        return false;\n    }\n\n    return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/deref/hasValidParentReference.js","var CONTAINER_DOES_NOT_EXIST = \"e\";\nvar $ref = require(\"../types/ref\");\nvar getCachePosition = require(\"../cache/getCachePosition\");\nvar InvalidDerefInputError = require(\"../errors/InvalidDerefInputError\");\n\nmodule.exports = function deref(boundJSONArg) {\n\n    if (!boundJSONArg || typeof boundJSONArg !== 'object') {\n        throw new InvalidDerefInputError();\n    }\n\n    var referenceContainer, currentRefPath, i, len;\n    var jsonMetadata = boundJSONArg && boundJSONArg[Æ’_meta];\n\n    if (!jsonMetadata || typeof jsonMetadata !== 'object') {\n        return this._clone({\n            _node: undefined\n        });\n    }\n\n    var recycleJSON = this._recycleJSON;\n    var absolutePath = jsonMetadata[Æ’m_abs_path];\n\n    if (!absolutePath) {\n        return this._clone({\n            _node: undefined,\n            _seed: recycleJSON && { json: boundJSONArg } || undefined\n        });\n    } else if (absolutePath.length === 0) {\n        return this._clone({\n            _path: absolutePath,\n            _node: this._root.cache,\n            _referenceContainer: true,\n            _seed: recycleJSON && { json: boundJSONArg } || undefined\n        });\n    }\n\n    var originalRefPath = jsonMetadata[Æ’m_deref_to];\n    var originalAbsPath = jsonMetadata[Æ’m_deref_from];\n\n    // We deref and then ensure that the reference container is attached to\n    // the model.\n    var cacheRoot = this._root.cache;\n    var cacheNode = getCachePosition(cacheRoot, absolutePath);\n    var validContainer = CONTAINER_DOES_NOT_EXIST;\n\n    if (originalAbsPath) {\n\n        validContainer = false;\n\n        i = -1;\n        len = originalAbsPath.length;\n        referenceContainer = cacheRoot;\n        while (++i < len) {\n            referenceContainer = referenceContainer[originalAbsPath[i]];\n            if (!referenceContainer || referenceContainer.$type) {\n                break;\n            }\n        }\n\n        // If the reference container is still a sentinel value then compare\n        // the reference value with refPath.  If they are the same, then the\n        // model is still valid.\n        if (originalRefPath && referenceContainer && referenceContainer.$type === $ref) {\n            i = 0;\n            len = originalRefPath.length;\n            currentRefPath = referenceContainer.value;\n\n            validContainer = true;\n            for (; validContainer && i < len; ++i) {\n                if (currentRefPath[i] !== originalRefPath[i]) {\n                    validContainer = false;\n                }\n            }\n            if (validContainer === false) {\n                cacheNode = undefined;\n            }\n        }\n    }\n\n    // Signal to the deref'd model that it has been disconnected from the\n    // graph or there is no _fromWhenceYouCame\n    if (!validContainer) {\n        referenceContainer = false;\n    }\n\n    // The container did not exist, therefore there is no reference\n    // container and fromWhenceYouCame should always return true.\n    else if (validContainer === CONTAINER_DOES_NOT_EXIST) {\n        referenceContainer = true;\n    }\n\n    return this._clone({\n        _node: cacheNode,\n        _path: absolutePath,\n        _referenceContainer: referenceContainer,\n        _seed: recycleJSON && { json: boundJSONArg } || undefined\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/deref/index.js","var NAME = \"BoundJSONGraphModelError\";\nvar MESSAGE = \"It is not legal to use the JSON Graph \" +\n    \"format from a bound Model. JSON Graph format\" +\n    \" can only be used from a root model.\";\n\n/**\n * When a bound model attempts to retrieve JSONGraph it should throw an\n * error.\n *\n * @private\n */\nfunction BoundJSONGraphModelError() {\n    var err = Error.call(this, MESSAGE);\n    err.name = this.name;\n    this.stack = err.stack;\n    this.message = err.message;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined in the constructor.\nBoundJSONGraphModelError.prototype = Object.create(Error.prototype);\nBoundJSONGraphModelError.prototype.name = NAME;\nBoundJSONGraphModelError.message = MESSAGE;\n\nmodule.exports = BoundJSONGraphModelError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/BoundJSONGraphModelError.js","var NAME = \"InvalidDerefInputError\";\nvar MESSAGE = \"Deref can only be used with a non-primitive object from get, set, or call.\";\n\n/**\n * An invalid deref input is when deref is used with input that is not generated\n * from a get, set, or a call.\n *\n * @param {String} message\n * @private\n */\nfunction InvalidDerefInputError() {\n    var err = Error.call(this, MESSAGE);\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined in the constructor.\nInvalidDerefInputError.prototype = Object.create(Error.prototype);\nInvalidDerefInputError.prototype.name = NAME;\nInvalidDerefInputError.message = MESSAGE;\n\nmodule.exports = InvalidDerefInputError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/InvalidDerefInputError.js","var NAME = \"InvalidModelError\";\nvar MESSAGE = \"The boundPath of the model is not valid since a value or error was found before the path end.\";\n\n/**\n * An InvalidModelError can only happen when a user binds, whether sync\n * or async to shorted value.  See the unit tests for examples.\n *\n * @param {String} message\n * @private\n */\nfunction InvalidModelError(boundPath, shortedPath) {\n    var err = Error.call(this, MESSAGE);\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    this.boundPath = boundPath;\n    this.shortedPath = shortedPath;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined in the constructor.\nInvalidModelError.prototype = Object.create(Error.prototype);\nInvalidModelError.prototype.name = NAME;\nInvalidModelError.message = MESSAGE;\n\nmodule.exports = InvalidModelError;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/InvalidModelError.js","var NAME = \"MaxRetryExceededError\";\nvar MESSAGE = \"The allowed number of retries have been exceeded.\";\n\n/**\n * A request can only be retried up to a specified limit.  Once that\n * limit is exceeded, then an error will be thrown.\n *\n * @private\n */\nfunction MaxRetryExceededError(maxRetryCount, absolute, relative, optimized) {\n    var err = Error.call(this,\n        \"Exceeded the max retry count (\" + maxRetryCount + \") for these paths: \\n\" +\n        (absolute &&\n        \"absolute: [\\n\\t\" + printPaths(absolute) + \"\\n]\\n\" || \"\") +\n        (relative &&\n        \"relative: [\\n\\t\" + printPaths(relative) + \"\\n]\\n\" || \"\") +\n        (optimized &&\n        \"optimized: [\\n\\t\" + printPaths(optimized) + \"\\n]\\n\" || \"\")\n    );\n    err.name = NAME;\n    this.stack = err.stack;\n    this.message = err.message;\n    return this;\n}\n\n// instanceof will be an error, but stack will be correct because its defined\n// in the constructor.\nMaxRetryExceededError.prototype = Object.create(Error.prototype);\nMaxRetryExceededError.prototype.name = NAME;\nMaxRetryExceededError.is = function(e) {\n    return e && e.name === NAME;\n};\n\nmodule.exports = MaxRetryExceededError;\n\nfunction printPaths(paths) {\n    return paths.map(function(path) {\n        return JSON.stringify(path);\n    }).join(',\\n\\t');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/errors/MaxRetryExceededError.js","var Source = require('./Source');\nvar Subscriber = require('./Subscriber');\nvar lruCollect = require('../lru/collect');\nvar collapse = require(\"@graphistry/falcor-path-utils\").collapse;\nvar InvalidSourceError = require(\"../errors/InvalidSourceError\");\nvar MaxRetryExceededError = require('../errors/MaxRetryExceededError');\n\nmodule.exports = Call;\n\nfunction Call(type, model, _args) {\n    Source.call(this, type);\n    if (model && _args) {\n        this.type = type;\n        this.source = this;\n        this.model = model;\n        this._args = _args;\n    }\n}\n\nCall.prototype = Object.create(Source.prototype);\n\nCall.prototype.lift = function(operator, source) {\n    source = new Call(source || this);\n    source.operator = operator;\n    source.type = this.type;\n    source.model = this.model;\n    source._args = this._args;\n    return source;\n}\n\nCall.prototype.operator = function(subscriber) {\n    return this._subscribe(subscriber);\n}\n\nCall.prototype._subscribe = function(subscriber) {\n    subscriber.onNext({\n        model: this.model,\n        type: this.type, args: this._args,\n        version: this.model._root.version\n    });\n    subscriber.onCompleted();\n    return subscriber;\n}\n\nCall.prototype._toJSON = function(data, errors) {\n    return this.lift(new CallOperator(\n        this.operator.data || data,\n        this.operator.errors || errors,\n        'json', this.operator.progressive\n    ), this.source);\n}\n\nCall.prototype._toJSONG = function(data, errors) {\n    return this.lift(new CallOperator(\n        this.operator.data || data,\n        this.operator.errors || errors,\n        'jsonGraph', this.operator.progressive\n    ), this.source);\n}\n\nCall.prototype.retry = function(maxRetryCount) {\n    return this.lift(new CallOperator(\n        this.operator.data,\n        this.operator.errors,\n        this.operator.operation,\n        this.operator.progresive,\n        maxRetryCount\n    ), this.source);\n}\n\nCall.prototype.progressively = function() {\n    return this.lift(new CallOperator(\n        this.operator.data,\n        this.operator.errors,\n        this.operator.operation,\n        true\n    ), this.source);\n}\n\nfunction CallOperator(data, errors, operation, progressive, maxRetryCount) {\n    if (data === undefined) { data = {}; }\n    if (errors === undefined) { errors = []; }\n    this.data = data;\n    this.errors = errors;\n    this.operation = operation;\n    this.progressive = progressive;\n    this.maxRetryCount = maxRetryCount;\n}\n\nCallOperator.prototype.call = function(source, destination) {\n    return source.subscribe(new CallSubscriber(\n        destination, this.data, this.errors, this.operation, this.progressive\n    ));\n}\n\nvar _id = 0;\n\nfunction CallSubscriber(destination, data, errors, operation, progressive, maxRetryCount) {\n    Subscriber.call(this, destination);\n    this.id = _id++;\n    this.data = data;\n    this.retryCount = -1;\n    this.errors = errors;\n    this.hasValue = false;\n    this.completed = false;\n    this.operation = operation;\n    this.progressive = progressive;\n    this.maxRetryCount = maxRetryCount;\n}\n\nCallSubscriber.prototype = Object.create(Subscriber.prototype);\nCallSubscriber.prototype.operations = {\n    get: require('../cache/get'),\n    set: require('../cache/set'),\n    call: require('../cache/call'),\n    invalidate: require('../cache/invalidate')\n};\n\nCallSubscriber.prototype.dispose =\nCallSubscriber.prototype.unsubscribe = function() {\n\n    // console.log('disposing call:', this.id);\n\n    var model = this.model;\n    var version = this.version;\n    var request = this.request;\n\n    this.args = null;\n    this.data = null;\n    this.model = null;\n    this.errors = null;\n    this.errored = false;\n    this.started = false;\n    this.hasValue = false;\n    this.completed = false;\n\n    Subscriber.prototype.dispose.call(this);\n\n    if (request) {\n        this.request = null;\n        request.dispose();\n    }\n\n    if (model) {\n\n        var modelRoot = model._root;\n        var cache = modelRoot.cache;\n        var shouldCollectCache = modelRoot.syncRefCount <= 0 &&\n                                 version !== modelRoot.version;\n\n        // Prune the cache via the LRU if this is the last request.\n        if (shouldCollectCache) {\n\n            if (cache) {\n                lruCollect(modelRoot,\n                           modelRoot.expired,\n                           cache.$size || 0,\n                           modelRoot.maxSize,\n                           modelRoot.collectRatio,\n                           modelRoot.version);\n            }\n\n            var rootOnChangesCompletedHandler = modelRoot.onChangesCompleted;\n\n            if (rootOnChangesCompletedHandler) {\n                rootOnChangesCompletedHandler.call(modelRoot.topLevelModel);\n            }\n        }\n    }\n}\n\nCallSubscriber.prototype.next =\nCallSubscriber.prototype.onNext = function(seed) {\n\n    // debugger\n\n    if (!this.started) {\n        this.args = seed.args;\n        this.type = seed.type;\n        this.model = seed.model;\n        this.version = seed.version;\n        this.maxRetryCount = this.maxRetryCount || this.model._root.maxRetryCount;\n        return;\n    }\n\n    var missing, fragments;\n    var type = seed.type;\n    var args = seed.args || seed.paths;\n\n    var data = this.data;\n    var model = this.model;\n    var errors = this.errors;\n    var results = this.results;\n    var version = this.version;\n    var hasValue = this.hasValue;\n    var operation = this.operation;\n    var progressive = this.progressive;\n\n    var seedIsImmutable = progressive && data && !model._recycleJSON;\n\n    // If we request paths as JSON in progressive mode, ensure each progressive\n    // valueNode is immutable. If not in progressive mode, we can write into the\n    // same JSON tree until the request is completed.\n    if (seedIsImmutable) {\n        data = {};\n    }\n\n    if (args && args.length) {\n\n        // if (this.type === 'set') {\n        //     debugger\n        // }\n\n        results = this.operations[type]\n            [operation](model, args, data, progressive || !model._source);\n\n        // We must communicate critical errors from get, such as bound path is\n        // broken or this is a JSONGraph request with a bound path.\n        if (results.error) {\n            throw results.error;\n            // return this.onError(results.error);\n            // this.errored = true;\n            // this.error = results.error;\n            // return Subscriber.prototype.onError.call(this, results.error);\n        }\n\n        errors && results.errors &&\n            errors.push.apply(errors, results.errors);\n\n        if (fragments = results.fragments) {\n            this.fragments = fragments;\n        }\n\n        this.relative = results.relative;\n        this.requested = results.requested;\n        this.missing = missing = results.missing;\n        this.hasValue = hasValue || (hasValue = results.hasValue);\n    }\n\n    // We are done when there are no missing paths or\n    // the model does not have a dataSource to fetch from.\n    this.completed = !missing || !missing.length || !model._source;\n\n    if (type !== 'set') {\n        this.args = args || this.args;\n        if (seedIsImmutable) {\n            this.data = mergeInto(data, this.data);\n        }\n    }\n\n    if (progressive && hasValue && data && (data.json || data.jsonGraph)) {\n        // console.log('onNexting call:', this.id);\n        tryOnNext(data, operation, model._root, this.destination);\n    }\n\n    // We are done when there are no missing paths or\n    // the model does not have a dataSource to fetch from.\n    // var completed = errored || !missing || !missing.length || !model._source;\n    // if (completed || (progressive && hasValue)) {\n    //     if (hasValue && data && (data.json || data.jsonGraph)) {\n    //         if (operation === 'jsonGraph' && data.paths) {\n    //             data.paths = collapse(data.paths);\n    //         }\n    //         if (seedIsImmutable && type === 'get') {\n    //             data = this.data = mergeInto(data, this.data);\n    //         }\n    //         tryOnNext(modelRoot, this.destination, data);\n    //     }\n    //     if (completed) {\n    //         this.running = false;\n    //         if (errored || errors && errors.length) {\n    //             this.destination.onError(\n    //                 errors && errors.length && errors || this.error\n    //             );\n    //         } else {\n    //             this.destination.onCompleted();\n    //         }\n    //         return;\n    //     }\n    // }\n}\n\nCallSubscriber.prototype.error =\nCallSubscriber.prototype.onError = function(error) {\n    if (error instanceof InvalidSourceError) {\n        return Subscriber.prototype.onError.call(this, error);\n    }\n    this.errored = true;\n    this.onCompleted(error);\n}\n\nCallSubscriber.prototype.complete =\nCallSubscriber.prototype.onCompleted = function(error) {\n\n    // debugger\n\n    var data, type, errors, errored;\n\n    if (!this.started && (this.started = true)) {\n        // console.log('starting call:', this.id);\n        this.onNext(this);\n    } else if (errored = this.errored) {\n        this.onNext({ type: 'get', paths: this.relative });\n    }\n\n    if (errored || this.completed) {\n        if (!this.progressive && this.hasValue && (\n            (data = this.data) && data.json || data.jsonGraph)) {\n            // console.log('onNexting call:', this.id);\n            tryOnNext(data, this.operation, this.model._root, this.destination);\n        }\n        errors = this.errors;\n        if (errored || error || errors && errors.length) {\n            // console.log('onError call:', this.id);\n            return Subscriber.prototype.onError.call(\n                this,  errors.length && errors || error\n            );\n        }\n        // console.log('onCompleted call:', this.id);\n        return Subscriber.prototype.onCompleted.call(this);\n    }\n\n    if (++this.retryCount >= this.maxRetryCount) {\n        // return this.onError(new MaxRetryExceededError(\n        return Subscriber.prototype.onError.call(this, new MaxRetryExceededError(\n            this.retryCount,\n            this.requested,\n            this.relative,\n            this.missing\n        ));\n    }\n\n    // if (this.type === 'set') {\n    //     debugger\n    // }\n\n    // console.log('requesting call:', this.id);\n\n    this.request = this.model._root.requests[this.type](\n        this.model,\n        this.missing,\n        this.relative,\n        this.fragments\n    ).subscribe(this);\n}\n\nfunction tryOnNext(data, operation, modelRoot, destination) {\n    // debugger\n    if (operation === 'jsonGraph' && data.paths) {\n        data.paths = collapse(data.paths);\n    }\n    try {\n        ++modelRoot.syncRefCount;\n        destination.onNext(data);\n    } catch(e) {\n        throw e;\n    } finally {\n        --modelRoot.syncRefCount;\n    }\n}\n\nfunction mergeInto(dest, node) {\n\n    var destValue, nodeValue,\n        key, keys = Object.keys(node),\n        index = -1, length = keys.length;\n\n    while (++index < length) {\n\n        key = keys[index];\n\n        if (key === Æ’_meta) {\n            dest[Æ’_meta] = node[Æ’_meta];\n        } else {\n\n            nodeValue = node[key];\n            destValue = dest[key];\n\n            if (destValue !== nodeValue) {\n                if (destValue === undefined || \"object\" !== typeof nodeValue) {\n                    dest[key] = nodeValue;\n                }\n                else {\n                    mergeInto(destValue, nodeValue);\n                }\n            }\n        }\n    }\n\n    return dest;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Call.js","var Request = require('./Request');\nvar Subscriber = require('./Subscriber');\nvar Subscription = require('./Subscription');\n\nmodule.exports = Dedupe;\n\nfunction Dedupe(queue, source, scheduler, requested, optimized) {\n    this.queue = queue;\n    this.dataSource = source;\n    this.scheduler = scheduler;\n    this.requested = requested;\n    this.optimized = optimized;\n}\n\nDedupe.prototype.subscribe = function(destination) {\n\n    var queue = this.queue;\n    var source = this.dataSource;\n    var requested = this.requested;\n    var optimized = this.optimized;\n    var scheduler = this.scheduler;\n\n    var requestsIndex = -1;\n    var requests  = queue.subscriptions;\n    var requestsCount = requests.length;\n    var subscription = new Subscription([], destination);\n\n    while (++requestsIndex < requestsCount) {\n\n        var request = requests[requestsIndex];\n\n        if (request.type !== 'get') {\n            continue;\n        }\n\n        if (request = request.batch(requested, optimized, requested = [], optimized = [])) {\n            subscription.add(request.subscribe(new Subscriber(destination, request)));\n        }\n\n        if (!optimized.length) {\n            break;\n        }\n    }\n\n    if (optimized.length) {\n        request = requests[requestsIndex] =\n            new Request('get', queue, source, scheduler).batch(requested, optimized);\n        subscription.add(request.subscribe(new Subscriber(destination, request)));\n        request.connect();\n    }\n\n    return subscription;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Dedupe.js","var Source = require('./Source');\nvar Dedupe = require('./Dedupe');\nvar Request = require('./Request');\nvar Subscriber = require('./Subscriber');\nvar Subscription = require('./Subscription');\nvar ImmediateScheduler = require(\"../schedulers/ImmediateScheduler\");\n\nmodule.exports = Queue;\n\nfunction Queue(modelRoot) {\n    Subscription.call(this, []);\n    this.modelRoot = modelRoot;\n}\n\nQueue.prototype = Object.create(Subscription.prototype);\n\nQueue.prototype.set = isolateSet;\nQueue.prototype.call = isolateCall;\nQueue.prototype.get = batchAndDedupeGet;\n\nfunction isolateSet(model, optimized, requested, env) {\n    var queue = this;\n    return new Source(function(destination) {\n\n        var request = new Request('set', queue, model._source, new ImmediateScheduler())\n            .batch(requested, optimized || env.paths, env.jsonGraph);\n\n        var subscriber = request.subscribe(new Subscriber(destination, request));\n\n        queue.add(request.connect());\n\n        return subscriber;\n    });\n}\n\nfunction isolateCall(model, optimized, requested, env) {\n    var queue = this;\n    return new Source(function(destination) {\n\n        var request = new Request('call', queue, model._source, new ImmediateScheduler())\n            .batch(null, null, env);\n\n        var subscriber = request.subscribe(new Subscriber(destination, request));\n\n        queue.add(request.connect());\n\n        return subscriber;\n    });\n}\n\nfunction batchAndDedupeGet(model, optimized, requested) {\n    return new Dedupe(\n        this, model._source, model._scheduler, requested, optimized\n    );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Queue.js","var Subscriber = require('./Subscriber');\nvar Subscription = require('./Subscription');\n\nmodule.exports = Subject;\n\nfunction Subject(observers, parent) {\n    Subscriber.call(this, null, parent);\n    this.observers = observers || [];\n}\n\nSubject.prototype = Object.create(Subscriber.prototype);\n\nSubject.prototype.onNext = function(value) {\n    this.observers.slice(0).forEach(function(observer) {\n        observer.onNext(value);\n    });\n}\n\nSubject.prototype.onError = function(error) {\n    var observers = this.observers.slice(0);\n    this.dispose();\n    observers.forEach(function(observer) {\n        observer.onError(error);\n    });\n}\n\nSubject.prototype.onCompleted = function() {\n    var observers = this.observers.slice(0);\n    this.dispose();\n    observers.forEach(function(observer) {\n        observer.onCompleted();\n    });\n}\n\nSubject.prototype.subscribe = function(subscriber) {\n    this.observers.push(subscriber);\n    this.subscriptions.push(subscriber = new Subscription([subscriber], this));\n    return subscriber;\n}\n\nSubject.prototype.dispose =\nSubject.prototype.unsubscribe = function () {\n    this.observers = [];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/request/Subject.js","function TimeoutScheduler(delay) {\n    this.delay = delay;\n}\n\nvar TimerDisposable = function TimerDisposable(id) {\n    this.id = id;\n    this.disposed = false;\n};\n\nTimeoutScheduler.prototype.schedule = function schedule(action) {\n    return new TimerDisposable(setTimeout(action, this.delay));\n};\n\nTimerDisposable.prototype.dispose =\nTimerDisposable.prototype.unsubscribe = function() {\n    if (!this.disposed) {\n        clearTimeout(this.id);\n        this.id = null;\n        this.disposed = true;\n    }\n};\n\nmodule.exports = TimeoutScheduler;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/schedulers/TimeoutScheduler.js","module.exports = function arrayFlatMap(array, selector) {\n    var index = -1;\n    var i = -1;\n    var n = array.length;\n    var array2 = [];\n    while (++i < n) {\n        var array3 = selector(array[i], i, array);\n        var j = -1;\n        var k = array3.length;\n        while (++j < k) {\n            array2[++index] = array3[j];\n        }\n    }\n    return array2;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/array-flat-map.js","var isArray = Array.isArray;\n\nmodule.exports = clone;\n\nfunction clone(source) {\n    var dest = source;\n    if (!(!dest || typeof dest !== 'object')) {\n        dest = isArray(source) ? [] : {};\n        for (var key in source) {\n            if (key.charAt(0) === Æ’_) {\n                continue;\n            }\n            dest[key] = source[key];\n        }\n    }\n    return dest;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/clone.js","var isObject = require(\"./isObject\");\nmodule.exports = function getSize(node) {\n    return isObject(node) && node.$expires || undefined;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/getExpires.js","var isObject = require(\"./../support/isObject\");\n\nmodule.exports = function getType(node, anyType) {\n    var type = isObject(node) && node.$type || void 0;\n    if (anyType && type) {\n        return \"branch\";\n    }\n    return type;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/getType.js","var isObject = require(\"./isObject\");\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nmodule.exports = function(obj, prop) {\n  return isObject(obj) && hasOwn.call(obj, prop);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/hasOwn.js","/**\n * Determined if the key passed in is an internal key.\n *\n * @param {String} x The key\n * @private\n * @returns {Boolean}\n */\nmodule.exports = function isInternalKey(x) {\n    return x === \"$size\" ||\n        x === Æ’_wrapped_value ||\n        x.charAt(0) === Æ’_;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isInternalKey.js","var isArray = Array.isArray;\nvar isObject = require(\"./../support/isObject\");\n\nmodule.exports = function isPathValue(pathValue) {\n    return isObject(pathValue) && (\n        isArray(pathValue.path) || (\n            typeof pathValue.path === \"string\"\n        ));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isPathValue.js","var objTypeof = \"object\";\nmodule.exports = function isPrimitive(value) {\n    return value == null || typeof value !== objTypeof;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/support/isPrimitive.js","module.exports = require('./lib/index');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/symbol-observable/index.js\n// module id = 120\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ponyfill = require('./ponyfill');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root; /* global window */\n\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/symbol-observable/lib/index.js\n// module id = 121\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/symbol-observable/lib/ponyfill.js\n// module id = 122\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tconfigurable: false,\r\n\t\t\tget: function() { return module.l; }\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tconfigurable: false,\r\n\t\t\tget: function() { return module.i; }\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 123\n// module chunks = 0"],"sourceRoot":""}