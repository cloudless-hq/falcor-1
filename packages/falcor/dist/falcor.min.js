(function(b,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("falcor",[],d):"object"===typeof exports?exports.falcor=d():b.falcor=d()})(this,function(){return function(b){function d(c){if(a[c])return a[c].exports;var g=a[c]={i:c,l:!1,exports:{}};b[c].call(g.exports,g,g.exports,d);g.l=!0;return g.exports}var a={};d.m=b;d.c=a;d.i=function(a){return a};d.d=function(a,g,f){Object.defineProperty(a,g,{configurable:!1,enumerable:!0,get:f})};
d.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(c,"a",c);return c};d.o=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)};d.p="";return d(d.s=130)}([function(b,d){b.exports="ref"},function(b,d){b.exports=function(a){return null!==a&&"object"===typeof a}},function(b,d,a){var c=a(37),g=a(42),f=a(41);b.exports=function(a){a=a.$expires;return null!=a&&a!==f&&(a===g||a<c())}},function(b,d){b.exports=function(a){return!!a&&"function"===typeof a}},
function(b,d,a){b.exports=a(73)},function(b,d,a){(function(c){function g(a){this._subscribe=a}var f=a(22),k=a(83),h=a(129);g.prototype[k.observable]=function(){return h(this)};g.prototype._toJSONG=function(){return this};g.prototype.progressively=function(){return this};g.prototype.subscribe=g.prototype.forEach=function(a,c,g){var e=a;e&&"object"===typeof e?e.onNext||e.onError||e.onCompleted||(e={onNext:(e.next||f).bind(e),onError:(e.error||f).bind(e),onCompleted:(e.complete||f).bind(e)}):e={onNext:a||
f,onError:c||f,onCompleted:g||f};a=this._subscribe(e);switch(typeof a){case "function":return{dispose:a,unsubscribe:a};case "object":return a||{dispose:f,unsubscribe:f};default:return{dispose:f,unsubscribe:f}}};g.prototype.then=function(a,f){var e=this;e._promise||(e._promise=new c.Promise(function(a,c){var f=!1,g=[];e.subscribe(function(a){g[g.length]=a},function(a){f=!0;c(a)},function(){var c=g;1>=g.length&&(c=g[0]);!1===f&&a(c)})}));return e._promise.then(a,f)};b.exports=g}).call(d,a(66))},function(b,
d,a){var c=a(53);b.exports=function(a,f,k){a["\u001e\u0192alcor_invalidated"]||(a["\u001e\u0192alcor_invalidated"]=!0,f.push(a),c(k,a));return a}},function(b,d,a){var c=a(1);b.exports=function(a){return c(a)&&a.$size||0}},function(b,d){b.exports=function(a){return null==a||"object"!==typeof a}},function(b,d){function a(a){var c=Error.call(this,"An exception was thrown when making a request.");c.name="InvalidSourceError";this.stack=c.stack;this.message=c.message;this.innerError=a;return this}a.prototype=
Object.create(Error.prototype);a.prototype.name="InvalidSourceError";a.is=function(a){return a&&"InvalidSourceError"===a.name};b.exports=a},function(b,d){function a(){var a=Error.call(this,"`null` is not allowed in branch key positions.");a.name="NullInPathError";this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="NullInPathError";a.message="`null` is not allowed in branch key positions.";b.exports=a},function(b,d,a){b.exports=function(a,
g){var c=g["\u001e\u0192alcor_refs_length"]||0;g["\u001e\u0192alcor_ref"+c]=a;g["\u001e\u0192alcor_refs_length"]=c+1;a["\u001e\u0192alcor_ref_index"]=c;a["\u001e\u0192alcor_context"]=g}},function(b,d,a){b.exports=function(a){for(var c,f=Object.keys(a),k={},h=-1,l=f.length;++h<l;)c=f[h],"\u001e"!==c.charAt(0)&&(k[c]=a[c]);return k}},function(b,d,a){function c(a,k){var f=a,l,b=0,e=k.length;if(0<e){do for(f=f[k[b]];f&&(l=f.$type)===g;)f=c(a,f.value);while(++b<e&&f&&!l)}return f}var g=a(0);b.exports=
c},function(b,d,a){var c=a(41);b.exports=function(a,f){if(f.$expires!==c){var g=a["\u001e\u0192alcor_head"];if(!g)a["\u001e\u0192alcor_head"]=a["\u001e\u0192alcor_tail"]=f;else if(g!==f){var h=f["\u001e\u0192alcor_prev"],l=f["\u001e\u0192alcor_next"];l&&(l["\u001e\u0192alcor_prev"]=h);h&&(h["\u001e\u0192alcor_next"]=l);f["\u001e\u0192alcor_prev"]=void 0;a["\u001e\u0192alcor_head"]=f;f["\u001e\u0192alcor_next"]=g;g["\u001e\u0192alcor_prev"]=f;f===a["\u001e\u0192alcor_tail"]&&(a["\u001e\u0192alcor_tail"]=
h)}}}},function(b,d,a){var c=a(1),g=Object.prototype.hasOwnProperty;b.exports=function(a,k){return c(a)&&g.call(a,k)}},function(b,d,a){var c=a(38),g=a(64);b.exports=function(a,k,h,l){var f=a;do{var e=f["\u001e\u0192alcor_parent"];0>=(f.$size=(f.$size||0)-k)&&null!=e?c(f,e,f["\u001e\u0192alcor_key"],h):f["\u001e\u0192alcor_version"]!==l&&g(f,l);f=e}while(f);return a}},function(b,d){b.exports="error"},function(b,d,a){var c=a(13);b.exports=function(a,f){f=f||a._path;var g=a._node;if(!g||void 0===g["\u001e\u0192alcor_parent"]||
g["\u001e\u0192alcor_invalidated"])a._node=null,0===f.length?g=a._root.cache:(g=c(a._root.cache,f),f===a._path&&(a._node=g));return g}},function(b,d,a){function c(a,f,e,k,h,l,b,v,p,u,q,d,D,E,H,J,M){var m={},n=f<a.length-1,y=a[f],x=t(y,m),r=d.index;do{q.depth=f;var z=g(e,k,h,l,b,v,x,n,!1,q,d,D,E,H,J,M);q[f]=x;q.index=f;var w=z[0],A=z[1],B=z[4];B[B.index++]=x;w&&(n?c(a,f+1,e,A,w,l,z[3],z[2],p,u,q,B,D,E,H,J,M):(p.push(q.slice(0,q.index+1)),u.push(B.slice(0,B.index))));x=t(y,m);if(m.done)break;d.index=
r}while(1)}function g(a,c,n,y,b,t,p,d,F,B,w,G,D,E,H,J){for(F=n.$type;F===k;){a:{c=a;b=y;w=B;var m=G,r=D,x=E,z=H,A=J,C,K,O=n.value;F=O.slice(0);if(l(n))v(n,r,x),n=void 0,C=c,K=b,F.index=O.length;else{var P=0,L=n,I=O.length-1;C=n=c;K=t=b;do{var N=O[P],Q=P<I;F.index=P;K=g(c,C,n,b,K,t,N,Q,!0,w,F,m,r,x,z,A);n=K[0];F=K[4];if(e(n)){F.index=P;w=K;break a}C=K[1];t=K[2];K=K[3]}while(P++<I);F.index=P;L["\u001e\u0192alcor_context"]!==n&&h(L,n)}f[0]=n;f[1]=C;f[2]=t;f[3]=K;f[4]=F;w=f}n=w[0];if(e(n))return w;c=
w[1];t=w[2];b=w[3];w=w[4];F=n.$type}if(void 0===F){if(null==p){if(d)throw new q;n&&(p=n["\u001e\u0192alcor_key"])}else c=n,b=t,n=c[p],t=b&&b[p];n=u(c,n,t,p,B,w,G,D,E,H,J)}f[0]=n;f[1]=c;f[2]=t;f[3]=b;f[4]=w;return f}var f=Array(5),k=a(0),h=a(11),l=a(123),p=a(3),e=a(8),v=a(6),t=a(4).iterateKeySet,u=a(125),q=a(10);b.exports=function(a,e,g,k){var h=a._root,m=h.expired,b=h.version++,n=h.cache;a=n["\u001e\u0192alcor_version"];for(var t=[],l=[],y=[],v=[],u=-1,q=e.length;++u<q;)for(var r=e[u],d=r.paths,r=
r.jsonGraph,M=-1,R=d.length;++M<R;){var S=d[M];l.index=0;c(S,0,n,n,n,r,r,r,y,v,t,l,b,m,h,k,g)}f[0]=void 0;f[1]=void 0;f[2]=void 0;f[3]=void 0;f[4]=void 0;e=n["\u001e\u0192alcor_version"];g=h.onChange;p(g)&&a!==e&&g();return[y,v]}},function(b,d,a){var c=a(1);b.exports=function(a){return c(a)&&"json"in a}},function(b,d,a){var c=Array.isArray,g=a(1);b.exports=function(a){return g(a)&&(c(a.path)||"string"===typeof a.path)}},function(b,d){b.exports=function(){}},function(b,d){b.exports="atom"},function(b,
d,a){function c(a,h,b,p){if(b===p)return!0;var e,k=-1,t=0,l=b+1,q,r,m;e=h[b];if(null===e)return a===f;a:do{if("object"!==typeof e)b=e,r=void 0,q=!1;else if(g(e)){if(void 0!==m)break a;k=0;m=e;t=e.length;if(0===t)break a;e=m[k];continue a}else{r=e.to;b=e.from||0;"number"!==typeof r&&(r=b+(e.length||0)-1);if(0>r-b)break a;q=!0}do if(l===p){if(null!==a[b])return!1}else if(e=a[b],null===e||void 0===e||!1===c(e,h,l,p))return!1;while(q&&++b<=r);if(++k===t)break a;e=m[k]}while(1);return!0}var g=Array.isArray,
f=a(25);b.exports=c},function(b,d){b.exports={$__null__$:null}},function(b,d){function a(a,g){a=Error.call(this,"The KeySet "+JSON.stringify(g)+" in path "+JSON.stringify(a)+" contains a KeySet. Keysets can only contain Keys or Ranges");a.name="InvalidKeySetError";this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="InvalidKeySetError";a.is=function(a){return a&&"InvalidKeySetError"===a.name};b.exports=a},function(b,d,a){b.exports={getWithPathsAsPathMap:a(92),
getWithPathsAsJSONGraph:a(96)}},function(b,d,a){function c(a){this["\u001e\u0192alcor_metadata"]=a||{}}function g(a){if(typeof a===p){if(1!==arguments.length)return a;a=this}else a||(a=this);if(a.self!==a&&a.global!==a&&a.window!==a){var c=k(a,g);c["\u001e\u0192alcor_metadata"]&&delete c["\u001e\u0192alcor_metadata"];return c}}function f(a,g){var e=arguments.length;a=0===e?this:a;if(!a||typeof a!==l)return a;if(a.self!==a&&a.global!==a&&a.window!==a){var e=k(a,0<e&&g||f),h=e["\u001e\u0192alcor_metadata"];
h&&(delete e["\u001e\u0192alcor_metadata"],h.version=a["\u001e\u0192alcor_metadata"].version,e.__proto__=new c(h));return e}}function k(a,c){var f=arguments.length;a=0===f?this:a;if(!a||typeof a!==l)return a;if(a.self!==a&&a.global!==a&&a.window!==a){var g,e,b,m;c=0<f&&c||k;if(h(a))for(f=-1,g=a.length,m=Array(g);++f<g;)m[f]=a[f];else{m={};f=-1;e=a["\u001e\u0192alcor_metadata"];b=Object.keys(a);g=b.length;if(e){var n=e.$code,y=e.abs_path,p=e.deref_to,v=e.deref_from;m["\u001e\u0192alcor_metadata"]=
e={};n&&(e.$code=n);y&&(e.abs_path=y);p&&(e.deref_to=p);v&&(e.deref_from=v)}for(;++f<g;)e=b[f],"\u001e\u0192alcor_metadata"!==e&&(m[e]=c(a[e],c))}return m}}c.prototype=Object.create(Object.prototype,Object.assign({toJSON:{value:g},toProps:{value:f},serialize:{value:k},$__hash:{enumerable:!1,get:function(){var a=this["\u001e\u0192alcor_metadata"];return a&&a.$code||""}},$__version:{enumerable:!1,get:function(){var a=this["\u001e\u0192alcor_metadata"];return a&&a.version||0}}},"concat copyWithin entries every fill filter find findIndex forEach includes indexOf join keys lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift values".split(" ").reduce(function(a,
c){var f=Array.prototype[c];a[c]={writable:!0,enumerable:!1,value:function(){return f.apply(this,arguments)}};return a},{})));var h=Array.isArray,l="object",p="string";b.exports=c},function(b,d){b.exports=function(a,c,g,f){var k=0,h;h=f.jsonGraph;h||(h={},f.jsonGraph=h);do{f=c[k++];if(k>=g){h=h[f]=a;break}h=h[f]||(h[f]={})}while(1);return h}},function(b,d){var a=Array.isArray;b.exports=function(c,g,f,k,h,b,p){for(var e,l=-1,t=h-g,u=t&&Array(t)||void 0;++l<t;){e=c[l+g];var q;q=e;if("object"!==typeof q||
null===q)q=!1;else if(a(q))q=0===q.length;else{var r=q.to,m=q.from||0;"number"!==typeof r&&(r=m+(q.length||0));q=m>=r}if(q)return;u[l]=e}c=null===e;r=g;g=h;l=k;k=f.requestedMissingPaths||(f.requestedMissingPaths=[]);e=!0;do{if(t<h||!e){q=-1;m=r;for(r=Array(g);++q<m;)r[q]=l[q];for(l=-1;q<g;)r[q++]=u[++l];k.push(r)}else k.push(u);if(e=!e)break;r=p;g=p+t-Number(c);l=b;k=f.optimizedMissingPaths||(f.optimizedMissingPaths=[])}while(1)}},function(b,d,a){var c=a(23),g=a(14),f=a(2),k=a(6);b.exports=function(a,
b,p,e,v,t,u,q,r,m,n,y,x,z,d,C,F,B,w){if(!a||!b){if(d&&!C){if(v)return t.hasValue=!0,{$type:c};return}return w(p,e,t,u,q,r,m)}if(f(a))return a["\u001e\u0192alcor_invalidated"]||k(a,x,y),w(p,e,t,u,q,r,m);g(y,a);if(v)return n&&(u[e]=null),B(a,b,e,v,t,u,r,m,n,z,d,F)}},function(b,d,a){var c=a(38),g=a(16);b.exports=function(a,k,b,l,p,e){var f=p;"number"!==typeof f&&(f=.75);p="number"===typeof e;var f=l*f,h,u,q;for(u=k.pop();u;)q=u.$size||0,b-=q,!0===p?g(u,q,a,e):(h=u["\u001e\u0192alcor_parent"])&&c(u,h,
u["\u001e\u0192alcor_key"],a),u=k.pop();if(b>=l){for(u=k=a["\u001e\u0192alcor_tail"];b>=f&&u;)k=k["\u001e\u0192alcor_prev"],q=u.$size||0,b-=q,!0===p&&g(u,q,a,e),u=k;a["\u001e\u0192alcor_tail"]=a["\u001e\u0192alcor_prev"]=u;null==u?a["\u001e\u0192alcor_head"]=a["\u001e\u0192alcor_next"]=void 0:u["\u001e\u0192alcor_next"]=void 0}}},function(b,d,a){d=a(5);var c=a(56),g=a(109),f=a(22),k={dispose:f,unsubscribe:f},h=a(32),l=a(7),p=a(3),e=b.exports=function(a,c,f,g,e,k,b){c&&c[0]&&Array.isArray(c[0].$keys)&&
(c=c[0]);this.model=a;this.currentRemainingPaths=c;this.isJSONGraph=f||!1;this.isProgressive=g||!1;this.forceCollect=e||!1;this.recycleJSON=void 0!==b?b:a._recycleJSON;c=a._root.cache["\u001e\u0192alcor_version"];this.initialCacheVersion="number"===typeof k?k:"number"===typeof c?c:a._root.version};e.prototype=Object.create(d.prototype);e.prototype._toJSONG=function(){return new e(this.model,this.currentRemainingPaths,!0,this.isProgressive,this.forceCollect,this.initialCacheVersion,this.recycleJSON)};
e.prototype.progressively=function(){return new e(this.model,this.currentRemainingPaths,this.isJSONGraph,!0,this.forceCollect,this.initialCacheVersion,this.recycleJSON)};e.prototype._subscribe=function(a){var f=[],e=this.model,b=this.recycleJSON,v=this.isProgressive,m=this.currentRemainingPaths,n=a.isJSONG=this.isJSONGraph,y=[n||v||!b?{}:e._seed||(e._seed={})],v=c(e,m,a,v,n,y,f,b);return v?g(this,e,v,a,f,1,this.initialCacheVersion,m,b):(a=e._root,b=a.cache,f=b["\u001e\u0192alcor_version"],this.forceCollect&&
h(a,a.expired,l(b),e._maxSize,e._collectRatio,f),e=a.onChangesCompleted,this.initialCacheVersion!==f&&0>=a.syncRefCount&&p(e)&&e.call(a.topLevelModel),k)}},function(b,d,a){function c(a,f,b,h,n,m,l,p,t,u,q,r,d,M){var y;if(v(a)&&!a.$type){y=[];var D=0;k(a)&&(y[D++]="length");for(var x in a)"\u001e"!==x[0]&&"$"!==x[0]&&e(a,x)&&(y[D++]=x)}else y=void 0;if(y&&y.length){D=0;x=y.length;var z=t.index;do{var w=y[D],A=a[w],B=v(A)&&!A.$type;p.depth=f;var E=g(b,h,n,w,A,B,!1,p,t,u,q,r,d,M);p[f]=w;p.index=f;var F=
E[0],C=E[1],E=E[2];E[E.index++]=w;F&&(B?c(A,f+1,b,C,F,m,l,p,E,u,q,r,d,M):(m.push(p.slice(0,p.index+1)),l.push(E.slice(0,E.index))));if(++D>=x)break;t.index=z}while(1)}}function g(a,c,e,b,k,p,v,u,d,D,E,H,J,M){for(var y=e.$type;y===h;){a:{c=k;d=a;var y=u,x,z=D,w=E,A=H,B=J,F=M,C,G=e.value;x=G.slice(0);if(t(e))r(e,w,A),e=void 0,C=d,x.index=G.length;else{var I=e;e=e["\u001e\u0192alcor_context"];if(null!=e)C=e["\u001e\u0192alcor_parent"]||d,x.index=G.length;else{var N=0,Q=G.length-1;x.index=N;C=e=d;do{C=
g(d,C,e,G[N],c,N<Q,!0,y,x,z,w,A,B,F);e=C[0];x=C[2];if(q(e)){x.index=N;d=C;break a}C=C[1]}while(N++<Q);x.index=N;I["\u001e\u0192alcor_context"]!==e&&l(I,e)}}f[0]=e;f[1]=C;f[2]=x;d=f}e=d[0];if(q(e))return d;c=d[1];d=d[2];y=e&&e.$type}if(void 0===y){if(null==b){if(p)throw new n;e&&(b=e["\u001e\u0192alcor_key"])}else c=e,e=c[b];e=m(c,e,b,k,p,v,u,d,D,E,H,J,M)}f[0]=e;f[1]=c;f[2]=d;return f}var f=Array(3),k=Array.isArray,h=a(0),l=a(11),p=a(13),e=a(15),v=a(1),t=a(2),u=a(3),q=a(8),r=a(6),m=a(61),n=a(10);b.exports=
function(a,e,g,b){var k=a._root,h=k.expired,m=k.version++,n=a._path,y=k.cache,l=p(y,n),t=l["\u001e\u0192alcor_parent"]||y;a=y["\u001e\u0192alcor_version"];for(var v=[],q=[],d=[],r=n.length,x=-1,z=e.length;++x<z;){var A=e[x],Z=n.slice(0);Z.index=r;c(A.json,0,y,t,l,q,d,v,Z,m,h,k,b,g)}f[0]=void 0;f[1]=void 0;f[2]=void 0;e=y["\u001e\u0192alcor_version"];k=k.onChange;u(k)&&a!==e&&k();return[q,d]}},function(b,d,a){function c(a,f,e,k,b,h,l,p,t,v,q,d,r,H,J){var n={},m=e<f.length-1,y=f[e],x=u(y,n),D=v.index;
do{t.depth=e;t[e]=x;t.index=e;var z=g(k,b,h,x,a,m,!1,t,v,q,d,r,H,J);t[e]=x;t.index=e;var w=z[0],A=z[1],z=z[2];z[z.index++]=x;w&&(m?c(a,f,e+1,k,A,w,l,p,t,z,q,d,r,H,J):(l.push(t.slice(0,t.index+1)),p.push(z.slice(0,z.index))));x=u(y,n);if(n.done)break;v.index=D}while(1)}function g(a,c,e,b,l,u,d,F,B,w,G,D,E,H){for(var m=e.$type;m===k;){a:{c=l;B=a;var m=F,n,y=w,x=G,z=D,A=E,C=H,K,O=e.value;n=O.slice(0);if(p(e))t(e,x,z),e=void 0,K=B,n.index=O.length;else{var P=e;e=e["\u001e\u0192alcor_context"];if(null!=
e)K=e["\u001e\u0192alcor_parent"]||B,n.index=O.length;else{var L=0,I=O.length-1;K=e=B;do{var N=O[L],Q=L<I;n.index=L;K=g(B,K,e,N,c,Q,!0,m,n,y,x,z,A,C);e=K[0];n=K[2];if(v(e)){n.index=L;B=K;break a}K=K[1]}while(L++<I);n.index=L;P["\u001e\u0192alcor_context"]!==e&&h(P,e)}}f[0]=e;f[1]=K;f[2]=n;B=f}e=B[0];if(v(e))return B;c=B[1];B=B[2];m=e.$type}if(!u||void 0===m){if(null==b){if(u)throw new r;e&&(b=e["\u001e\u0192alcor_key"])}else c=e,e=c[b];e=q(c,e,b,l,u,d,F,B,w,G,D,E,H)}f[0]=e;f[1]=c;f[2]=B;return f}
var f=Array(3),k=a(0),h=a(11),l=a(13),p=a(2),e=a(3),v=a(8),t=a(6),u=a(4).iterateKeySet,q=a(61),r=a(10);b.exports=function(a,g,b,k){var h=a._root,m=h.expired,n=h.version++,p=a._path,t=h.cache,y=l(t,p),v=y["\u001e\u0192alcor_parent"]||t;a=t["\u001e\u0192alcor_version"];for(var u=[],q=[],d=[],r=p.length,x=-1,R=g.length;++x<R;){var S=g[x],W=S.path,S=S.value,Y=p.slice(0);Y.index=r;c(S,W,0,t,v,y,q,d,u,Y,n,m,h,k,b)}f[0]=void 0;f[1]=void 0;f[2]=void 0;g=t["\u001e\u0192alcor_version"];h=h.onChange;e(h)&&a!==
g&&h();return[q,d]}},function(b,d,a){var c=Array.isArray,g=a(1);b.exports=function(a){return g(a)&&c(a.paths)&&(g(a.jsonGraph)||g(a.jsong)||g(a.json)||g(a.values)||g(a.value))}},function(b,d){b.exports=Date.now},function(b,d,a){var c=a(0),g=a(53),f=a(1),k=a(127),h=a(128);b.exports=function(a,b,e,v){if(f(a)){var p=a.$type;p&&(p===c&&h(a),g(v,a));k(a);b[e]=a["\u001e\u0192alcor_parent"]=void 0;return!0}return!1}},function(b,d,a){var c=a(15),g=a(38);b.exports=function k(a,b,p,e){if(g(a,b,p,e)){if(null==
a.$type)for(var h in a)"\u001e"!==h[0]&&"$"!==h[0]&&c(a,h)&&k(a[h],a,h,e);return!0}return!1}},function(b,d,a){var c=Array.isArray,g=a(21),f=a(36),k=a(20);b.exports=function(a,b,p){for(var e=0,h=a.length;e<h;++e){var l=a[e],u=!1;c(l)&&b.path?u=!0:c(l.$keys)&&b.flatBuffer?u=!0:g(l)&&b.pathValue?u=!0:f(l)&&b.jsonGraph?u=!0:k(l)&&b.json?u=!0:"function"===typeof l&&e+1===h&&b.selector&&(u=!0);if(!u)return Error("Unrecognized argument "+typeof l+" ["+String(l)+"] to Model#"+p+"")}return!0}},function(b,
d){b.exports=1},function(b,d){b.exports=0},function(b,d){b.exports=function(a){for(var c=5381,g=a.length;g;)c=33*c^a.charCodeAt(--g);return c>>>0}},function(b,d){function a(a,c){var f=c.from=a.from||0;a=c.to=a.to||"number"===typeof a.length&&c.from+a.length-1||0;c.rangeOffset=c.from;c.loaded=!0;f>a&&(c.empty=!0)}var c=Array.isArray;b.exports=function(g,f){if(void 0===f.isArray){f.done=!1;var b=f.isObject=!(!g||"object"!==typeof g);f.isArray=b&&c(g);f.arrayOffset=0}if(f.isArray){var h;do{f.loaded&&
f.rangeOffset>f.to&&(++f.arrayOffset,f.loaded=!1);if(f.arrayOffset>=g.length){f.done=!0;break}b=g[f.arrayOffset];"object"===typeof b?(f.loaded||a(b,f),f.empty||(h=f.rangeOffset++)):(++f.arrayOffset,h=b)}while(void 0===h);return h}if(f.isObject){f.loaded||a(g,f);if(f.rangeOffset>f.to){f.done=!0;return}return f.rangeOffset++}f.done=!0;return g}},function(b,d){b.exports=function(a,c){var b=[],f=a.length;for(c=c||0;c<f;c++)b[c]=a[c];return b}},function(b,d){b.exports={$ref:"ref",$atom:"atom",$error:"error"}},
function(b,d,a){function c(a,e,b){var g,m=k(String(e)),n=Object.create(null),p=[],l=-1,t=0,v=[],u=0,q,d,w,G,D,E;w=[];G=-1;if(e<b-1){for(D=f(a,w);++G<D;)g=w[G],q=c(a[g],e+1,b),d=q.code,n[d]?q=n[d]:(p[t++]=d,q=n[d]={keys:[],sets:q.sets}),m=k(m+g+d),h(g)&&q.keys.push(parseInt(g,10))||q.keys.push(g);for(;++l<t;)if(g=p[l],q=n[g],w=q.keys,D=w.length,0<D)for(a=q.sets,e=-1,b=a.length,G=w[0];++e<b;){g=a[e];q=-1;d=g.length;E=Array(d+1);for(E[0]=1<D&&w||G;++q<d;)E[q+1]=g[q];v[u++]=E}}else for(D=f(a,w),1<D?v[u++]=
[w]:v[u++]=w;++G<D;)m=k(m+w[G]);return{code:m,sets:v}}function g(a,c){return a-c}function f(a,c,e){var f=0;if(a===v)c[f++]=null;else{for(var b in a)c[f++]=b;1<f&&c.sort(e)}return f}function k(a){for(var c=5381,e=-1,f=a.length;++e<f;)c=(c<<5)+c+a.charCodeAt(e);return String(c)}function h(a){var c=a,f=typeof a;if("string"===f){c=a.length;if(0===c||17<c||!e.test(a))return!1;if(16>c)return!0;c=+a}else if("number"!==f)return!1;return 0===c%1&&9007199254740991>=p(c)}var l=Array.isArray,p=Math.abs,e=/^(0|(\-?[1-9][0-9]*))$/,
v=a(25);b.exports=function(a){var e,f=[],b=0,k;for(k in a){var n;if(n=h(k))n=e=a[k],n=null!==n&&"object"===typeof n;if(n){n=c(e,0,parseInt(k,10)).sets;for(var p=-1,t=n.length;++p<t;){for(var d=b++,v=n[p],C=-1,F=v.length;++C<F;){var B=v[C];if(l(B)){var w=v,G=C;for(var D=-1,E=B.length-1,H=0<E;++D<=E;){var J=B[D];if(!h(J)){H=!1;break}B[D]=parseInt(J,10)}!0===H&&(B.sort(g),D=B[0],H=B[E],H-D<=E&&(B={from:D,to:H}));w[G]=B}}f[d]=v}}}return f};b.exports._isSafeNumber=h},function(b,d,a){function c(a,b,l,p){if(l===
p)return!0;var e,k=-1,h=0,d,q=l+1,r,m,n;e=b[l];if(null===e)return f;a=a||{};a:do{if("object"!==typeof e)l=e,m=void 0,r=!1;else if(g(e)){if(void 0!==n)break a;k=0;n=e;h=e.length;if(0===h)break a;e=n[k];continue a}else{m=e.to;l=e.from||0;"number"!==typeof m&&(m=l+(e.length||0)-1);if(0>m-l)break a;r=!0}do q===p?a[l]=null:(e=a[l],(d=c(e,b,q,p))?e||(a[l]=d):a[l]=null);while(r&&++l<=m);if(++k===h)break a;e=n[k]}while(1);return a}var g=Array.isArray,f=a(25);b.exports=function(a){return a.reduce(function(a,
f){return c(a,f,0,f.length)},{})}},function(b,d){function a(a){a=Error.call(this,"Encountered circular reference "+JSON.stringify(a));a.name="CircularReferenceError";this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="CircularReferenceError";b.exports=a},function(b,d){function a(){var a=Error.call(this,"The allowed number of retries have been exceeded.");a.name="MaxRetryExceededError";this.stack=a.stack;this.message=a.message;return this}
a.prototype=Object.create(Error.prototype);a.prototype.name="MaxRetryExceededError";a.is=function(a){return a&&"MaxRetryExceededError"===a.name};b.exports=a},function(b,d,a){var c=Array(3),g=a(0),f=a(14),k=a(2),h=a(11),l=a(49);b.exports=function(a,e,b){f(b,e);var p,d,v=0,r=a,m=e.value,n=m,y=m.length;do{if(0===v&&void 0!==(p=e["\u001e\u0192alcor_context"]))r=p,v=y;else if(d=m[v++],void 0===(r=r[d]))break;if(v===y){d=r.$type;if(void 0!==d&&k(r))break;else{if(r===e)throw new l(m);r!==p&&h(e,r)}if(d===
g)f(b,r),v=0,e=r,r=a,m=n=e.value,y=m.length;else break}else if(void 0!==r.$type)break}while(1);v<y&&void 0!==r&&(y=v);v=-1;for(m=Array(y);++v<y;)m[v]=n[v];c[0]=r;c[1]=m;c[2]=e;return c}},function(b,d,a){var c=a(12),g=a(93),f=a(23),k=a(17);b.exports=function(a,b,p,e,d,t,u,q,r,m,n,y){if(k===b&&!y)return g(a,p,d,t,r,m);p=a&&a.value;if(b&&void 0===p){if(n)return d.hasValue=!0,{$type:f}}else return d.hasValue=!0,m?c(a):p}},function(b,d,a){b.exports=function(a,b){var c=b["\u001e\u0192alcor_prev"],g=b["\u001e\u0192alcor_next"];
g&&(g["\u001e\u0192alcor_prev"]=c);c&&(c["\u001e\u0192alcor_next"]=g);b["\u001e\u0192alcor_prev"]=b["\u001e\u0192alcor_next"]=void 0;b===a["\u001e\u0192alcor_head"]&&(a["\u001e\u0192alcor_head"]=g);b===a["\u001e\u0192alcor_tail"]&&(a["\u001e\u0192alcor_tail"]=c)}},function(b,d){b.exports={GetRequest:"GET"}},function(b,d){d=function(a){this.disposed=!1;this.currentDisposable=a};d.prototype={unsubscribe:function(){return this.dispose()},dispose:function(){if(!this.disposed&&this.currentDisposable){this.disposed=
!0;var a=this.currentDisposable;this.currentDisposable=null;a.dispose?a.dispose():a.unsubscribe?a.unsubscribe():"function"===typeof a&&a()}}};b.exports=d},function(b,d,a){d=a(27);var c=a(111),g=a(4).collapse,f=d.getWithPathsAsPathMap,k=d.getWithPathsAsJSONGraph;b.exports=function(a,b,p,e,d,t,u,q){var h,m,n,l,v=e&&!d&&t,z=!d&&!e&&q;v?(l=t[0],t[0]={}):z&&t[0]&&(h=t[0].json)&&(m=h["\u001e\u0192alcor_metadata"])&&(n=m.$code);b=d?k(a,b,t):f(a,b,t,!q);if(b.criticalError)return p.onError(b.criticalError),
null;q=b.hasValue;var A=b.values[0],C=!!(A&&A.json||A.jsonGraph),F=!b.requestedMissingPaths||!b.requestedMissingPaths.length||!a._source;if(b.errors)for(var B=b.errors,w=u.length,G=0,D=B.length;G<D;++G,++w)u[w]=B[G];v&&l&&(A=c(A,l));if(q&&e||C&&F)try{if(d&&A){var E=A.paths;E&&0<E.length&&(A.paths=g(E))}++a._root.syncRefCount;p.onNext(A)}catch(H){throw H;}finally{--a._root.syncRefCount}if(F){if(u.length)p.onError(u);else p.onCompleted();return null}z&&t[0]&&(h=t[0].json)&&(m=h["\u001e\u0192alcor_metadata"])&&
(m.$code=n);return b}},function(b,d){b.exports={path:!0,pathSyntax:!0,flatBuffer:!0}},function(b,d,a){d=a(5);var c=Array.isArray,g=a(21),f=a(36),k=a(20),h=a(114),l=b.exports=function(a,e,b,h,l){this._model=a;this._isJSONGraph=b||!1;this._isProgressive=h||!1;this._initialArgs=e;this._value=[{}];b=a._root.cache["\u001e\u0192alcor_version"];this.initialCacheVersion="number"===typeof l?l:"number"===typeof b?b:a._root.version;a=[];var p,d;l=-1;for(b=e.length;++l<b;){h=e[l];var m;c(h)?m="PathValues":g(h)?
m="PathValues":f(h)?m="JSONGs":k(h)&&(m="PathMaps");d!==m&&(d=m,p={inputType:m,arguments:[]},a.push(p));p.arguments.push(h)}this._groups=a};l.prototype=Object.create(d.prototype);l.prototype._subscribe=function(a){return h(this._model,a,this._groups,this._isJSONGraph,this._isProgressive,0,this.initialCacheVersion)};l.prototype._toJSONG=function(){return new l(this._model,this._initialArgs,!0,this._isProgressive,this.initialCacheVersion)};l.prototype.progressively=function(){return new l(this._model,
this._initialArgs,this._isJSONGraph,!0,this.initialCacheVersion)}},function(b,d,a){var c=a(1);b.exports=function(a){return c(a)&&a.$timestamp||void 0}},function(b,d,a){b.exports=function(a,b,f,k,h){a["\u001e\u0192alcor_key"]=f;a["\u001e\u0192alcor_parent"]=b;void 0!==k&&(a["\u001e\u0192alcor_version"]=k);a["\u001e\u0192alcor_abs_path"]||(a["\u001e\u0192alcor_abs_path"]=h.slice(0,h.index).concat(f));return b[f]=a}},function(b,d,a){var c=a(0),g=a(17),f=a(122),k=a(7),h=a(59),l=a(2),p=a(8),e=a(3),v=a(65),
t=a(6),u=a(60),q=a(63),r=a(16),m=a(62);b.exports=function(a,b,d,z,A,C,F,B,w,G,D,E,H){var n=f(b,C);if(A||C){if(n&&l(b)&&(n="expired",t(b,G,D)),n&&n!==c||p(b))b=q(b,{},a,d,D,w),b=u(b,a,d,w,B)}else A=f(z),C=!1===h(z)<h(b),(n||A)&&e(E)&&(C=!E(b,z,B.slice(0,B.index))),C&&(A===g&&e(H)&&(z=H(m(F,d),z)),z=v(z,A,A?z.value:z),F=k(b)-k(z),b=q(b,z,a,d,D,w),a=r(a,F,D,w),b=u(b,a,d,w,B));return b}},function(b,d){b.exports=function(a,c){a=a.slice(0,a.depth);a[a.length]=c;return a}},function(b,d,a){var c=a(1),g=a(126),
f=a(39),k=a(64);b.exports=function(a,b,p,e,d,t){if(a===b)return a;c(a)&&(g(a,b),f(a,p,e,d),k(b,t));return p[e]=b}},function(b,d,a){b.exports=function(a,b){var c=[a],g=0;do{var h=c[g];if(h&&h["\u001e\u0192alcor_version"]!==b){h["\u001e\u0192alcor_version"]=b;c[g++]=h["\u001e\u0192alcor_parent"];for(var l=-1,p=h["\u001e\u0192alcor_refs_length"]||0;++l<p;)c[g++]=h["\u001e\u0192alcor_ref"+l]}}while(-1<--g);return a}},function(b,d,a){var c=a(37),g=a(42),f=a(120),k=Array.isArray,h=a(7),l=a(121),p=a(23);
b.exports=function(a,b,d){var e=0;if(b){var v=a["\u001e\u0192alcor_wrapped_value"];a=f(a);e=h(a);a.$type=b;a["\u001e\u0192alcor_prev"]=void 0;a["\u001e\u0192alcor_next"]=void 0;a["\u001e\u0192alcor_wrapped_value"]=v||!1}else a={$type:p,value:d,"\u001e\u0192alcor_prev":void 0,"\u001e\u0192alcor_next":void 0,"\u001e\u0192alcor_wrapped_value":!0};if(null==d)e=51;else if(null==e||0>=e)switch(typeof d){case "object":e=k(d)?50+d.length:51;break;case "string":e=50+d.length;break;default:e=51}b=l(a);"number"===
typeof b&&b<g&&(a.$expires=c()+-1*b);a.$size=e;return a}},function(b,d){d=function(){return this}();try{d=d||Function("return this")()||(0,eval)("this")}catch(a){"object"===typeof window&&(d=window)}b.exports=d},function(b,d,a){function c(a){return new g(a)}var g=a(80);d=a(28);c.Model=g;c.FalcorJSON=d;c.toProps=d.prototype.toProps;b.exports=c},function(b,d,a){var c=a(47),g=a(48);b.exports=function(a){var b=a.reduce(function(a,c){var b=c.length;a[b]||(a[b]=[]);a[b].push(c);return a},{});Object.keys(b).forEach(function(a){b[a]=
g(b[a])});return c(b)}},function(b,d,a){function c(a){if(void 0!==a){for(var b="",f=a.$keys,d=-1,p=f.length;++d<p;){var e=f[d];if(null===e)b=""+g(""+b+"null");else{"object"===typeof e&&(e="{from:"+e.from+",length:"+e.length+"}");var v=c(a[d]),b=void 0===v?""+g(""+b+e):""+g(""+b+e+v.$code)}}a.$code=b;return a}}var g=a(43);b.exports=c},function(b,d){b.exports={innerReferences:"References with inner references are not allowed.",circularReference:"There appears to be a circular reference, maximum reference following exceeded."}},
function(b,d){function a(c,b,f){f=f||[];b=b||[];for(var g=[],h=c.$keys,d=h.length,p=-1;++p<d;){var e=c[p],v=h[p];e?a(e,b,f.concat([v])):g.push(v)}1===g.length?b.push(f.concat(g)):1<g.length&&b.push(f.concat([g]));return b}b.exports=a},function(b,d,a){var c=a(45),g=a(46).$ref,f=a(70);b.exports=function(a,b,d){for(var k=a,e=-1,h=b.length,l,u=0;++e<h;){l=b[e];l=(k=k[l])&&k.$type;if(!k||l&&l!==g)break;if(l&&l===g&&e+1<h)throw a=Error(f.innerReferences),a.throwToNext=!0,a;if(e+1===h&&(l===g&&(e=-1,b=k.value,
h=b.length,k=a,u++),u>d))throw Error(f.circularReference);}return[k,c(b)]}},function(b,d,a){b.exports={toTree:a(48),toPaths:a(47),collapse:a(68),pathCount:a(75),getHashCode:a(43),toFlatBuffer:a(79),iterateKeySet:a(44),hasIntersection:a(24),optimizePathSets:a(74),flatBufferToPaths:a(71),computeFlatBufferHash:a(69),pathsComplementFromTree:a(77),pathsComplementFromLengthTree:a(76)}},function(b,d,a){function c(a,b,d,t,u,q,r){if(void 0===a)u[u.length]=k(q,d,t);else if(!(null===a||a.$type&&a.$type!==h||
"object"!==typeof a||a.$type===h&&t===d.length)){var e=d[t];t+=1;var n=!1,p=e;"object"===typeof e&&(n={},p=g(e,n));var v,z;do{v=a[p];var A=q.length;null!==p&&(q[A]=p);v&&v.$type===h&&t<d.length?(z=l(b,v.value,r),v=z[0],z=f(z[1])):z=q;c(v,b,d,t,u,z,r);q.length=A;n&&!n.done&&(p=g(e,n))}while(n&&!n.done)}}var g=a(44),f=a(45),k=a(78),h=a(46).$ref,l=a(72);b.exports=function(a,b,f){var e=[];b.forEach(function(b){c(a,a,b,0,e,[],f)});return e}},function(b,d){function a(a){if(null==a)return 1;if(Array.isArray(a))throw Error("Unexpected Array found in keySet: "+
JSON.stringify(a));if("object"===typeof a){var b=a.to,c=a.length;if(null!=b){if(isNaN(b)||parseInt(b,10)!==b)throw Error("Invalid range, 'to' is not an integer: "+JSON.stringify(a));c=a.from||0;if(isNaN(c)||parseInt(c,10)!==c)throw Error("Invalid range, 'from' is not an integer: "+JSON.stringify(a));a=c<=b?b-c+1:0}else if(null!=c){if(isNaN(c)||parseInt(c,10)!==c)throw Error("Invalid range, 'length' is not an integer: "+JSON.stringify(a));a=c}else throw Error("Invalid range, expected 'to' or 'length': "+
JSON.stringify(a));return a}return 1}b.exports=function(b){if(0===b.length)throw Error("All paths must have length larger than zero.");for(var c=1,f=0;f<b.length;f++){var k=b[f];if(Array.isArray(k)){for(var h=0,d=0;d<k.length;d++)h+=a(k[d]);c*=h}else c*=a(k)}return c}},function(b,d,a){var c=a(24);b.exports=function(a,b){for(var f=[],g=-1,d=0,p=a.length;d<p;++d){var e=a[d];c(b[e.length],e,0,e.length)||(f[++g]=e)}return f}},function(b,d,a){var c=a(24);b.exports=function(a,b){for(var f=[],g=-1,d=0,p=
a.length;d<p;++d)c(b,a[d],0,a[d].length)||(f[++g]=a[d]);return f}},function(b,d){b.exports=function(a,b,g){var c=[],k,h;k=0;for(h=a.length;k<h;++k)c[k]=a[k];a=g||0;for(h=b.length;a<h;++a,++k)c[k]=b[a];return c}},function(b,d){function a(b,k,h,d){if(h!==d){b=b||{};var f=b.$keys||(b.$keys=[]),e=b.$keysMap||(b.$keysMap={}),l,t=-1,u=0,q,r=h+1,m;l=k[h];if(null===l)return g;a:do{if("object"!==typeof l)q=l,"undefined"===typeof(h=e[q])&&(h=f.length),f[h]=q,e[q]=h,l=a(b[h],k,r,d),void 0!==l&&(b[h]=l);else if(c(l)){if(void 0!==
m)break a;t=0;m=l;u=l.length;if(0===u)break a;l=m[t];continue a}else{h=l.to;q=l.from||0;"number"!==typeof h&&(h=q+(l.length||0)-1);if(0>h-q)break a;l={from:q,length:h-q+1};q="{from:"+q+",length:"+(h-q+1)+"}";"undefined"===typeof(h=e[q])&&(h=f.length);f[h]=l;e[q]=h;l=a(b[h],k,r,d);void 0!==l&&(b[h]=l)}if(++t===u)break a;l=m[t]}while(1);return b}}var c=Array.isArray,g={$keys:[null],$keysMap:{"null":0}};b.exports=function(b){return b.reduce(function(b,c){return a(b,c,0,c.length)},{})}},function(b,d,
a){function c(a){a=a||{};this._root=a._root||new g(a,this);this._path=a.path||a._path||[];this._node=a._node||this._root.cache;this._source=a.source||a._source;this._recycleJSON=a.recycleJSON||a._recycleJSON;this._request=a.request||a._request||new k(this,a.scheduler||new v);this._maxSize="number"===typeof a.maxSize?a.maxSize:a._maxSize||c.prototype._maxSize;a._seed&&(this._seed=a._seed,this._recycleJSON=!0);this._collectRatio="number"===typeof a.collectRatio?a.collectRatio:a._collectRatio||c.prototype._collectRatio;
if(a.boxed||a.hasOwnProperty("_boxed"))this._boxed=a.boxed||a._boxed;if(a.materialized||a.hasOwnProperty("_materialized"))this._materialized=a.materialized||a._materialized;"boolean"===typeof a.treatErrorsAsValues?this._treatErrorsAsValues=a.treatErrorsAsValues:a.hasOwnProperty("_treatErrorsAsValues")?this._treatErrorsAsValues=a._treatErrorsAsValues:this._recycleJSON&&(this._treatErrorsAsValues=!0);this._allowFromWhenceYouCame=a.allowFromWhenceYouCame||a._allowFromWhenceYouCame||!1;a.cache&&this.setCache(a.cache)}
var g=a(82),f=a(81),k=a(103),h=a(5),l=a(107),p=a(108),e=a(117),v=a(116),t=a(32),u=a(7),q=a(1),r=a(3),m=a(8),n=a(20),y=a(13),x=a(36),z=a(34),A=a(19),C=a(40),F=function(){},B=a(89),w=a(27),G=a(57);b.exports=c;c.prototype.constructor=c;c.prototype._materialized=!1;c.prototype._boxed=!1;c.prototype._progressive=!1;c.prototype._treatErrorsAsValues=!1;c.prototype._maxSize=Math.pow(2,53)-1;c.prototype._collectRatio=.75;c.prototype.get=a(110);c.prototype.set=a(112);c.prototype.preload=function(){var a=C(arguments,
G,"preload");if(!0!==a)return new h(function(b){b.onError(a)});var b=Array.prototype.slice.call(arguments),c=this;return new h(function(a){return c.get.apply(c,b).subscribe(function(){},function(b){a.onError(b)},function(){a.onCompleted()})})};c.prototype.call=function(){var a,b=-1,c=arguments.length;for(a=Array(c);++b<c;){var e=arguments[b];a[b]=e;var f=typeof e;if(1<b&&!Array.isArray(e)||0===b&&!Array.isArray(e)&&"string"!==f||1===b&&!Array.isArray(e)&&!m(e))return new h(function(a){a.onError(Error("Invalid argument"))})}return new l(this,
a[0],a[1],a[2],a[3])};c.prototype.invalidate=function(){var a,b=-1,c=arguments.length;for(a=[];++b<c;)a[b]=arguments[b];(new p(this,a)).subscribe(F,function(a){throw a;})};c.prototype.deref=a(85);c.prototype._hasValidParentReference=a(84);c.prototype.getValue=a(90);c.prototype.setValue=a(118);c.prototype.setCache=function(a){var b=this._root.cache;if(a!==b){var c=this._root,e=this._path;this._path=[];this._root.cache={};"undefined"!==typeof b&&t(c,c.expired,u(b),0);var f;x(a)?f=A(this,[a])[0]:n(a)?
f=z(this,[a])[0]:q(a)&&(f=z(this,[{json:a}])[0]);f&&w.getWithPathsAsPathMap(this,f,[],!0);this._path=e}else"undefined"===typeof b&&(this._root.cache={});return this};c.prototype.getCache=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];if(0===b.length)return B(this._root.cache);var c=[{}],e=this._path;w.getWithPathsAsJSONGraph(this,b,c);this._path=e;return c[0].jsonGraph};c.prototype.getVersion=function(a){a=void 0===a?[]:a;if(!1===Array.isArray(a))throw Error("Model#getVersion must be called with an Array path.");
this._path.length&&(a=this._path.concat(a));return this._getVersion(this,a)};c.prototype._syncCheck=function(a){if(this._source&&0>=this._root.syncRefCount&&!1===this._root.unsafeMode)throw Error("Model#"+a+" may only be called within the context of a request selector.");return!0};c.prototype._clone=function(a){var b=new c(this);if(a)for(var e in a){var f=a[e];"delete"===f?delete b[e]:"_path"===e?(b[e]=f,!1===a.hasOwnProperty("_node")&&delete b._node):b[e]=f}0<b._path.length&&(b.setCache=void 0);
return b};c.prototype.batch=function(a){var b;"number"===typeof a?b=new e(Math.round(Math.abs(a))):a?r(a.schedule)?b=a:r(a)&&(b={scheudle:a}):b=new e(1);a=this._clone();a._request=new k(a,b);return a};c.prototype.unbatch=function(){var a=this._clone();a._request=new k(a,new v);return a};c.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})};c.prototype.asDataSource=function(){return new f(this)};c.prototype._materialize=function(){return this._clone({_materialized:!0})};
c.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})};c.prototype.boxValues=function(){return this._clone({_boxed:!0})};c.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})};c.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})};c.prototype.toJSON=function(){return{$type:"ref",value:this._path}};c.prototype.getPath=function(){return this._path.slice(0)};c.prototype._fromWhenceYouCame=function(a){return this._clone({_allowFromWhenceYouCame:void 0===
a?!0:a})};c.prototype._optimizePath=function(a){a=y(this._root.cache,a);return(a&&a["\u001e\u0192alcor_abs_path"]||[]).slice(0)};c.prototype._getVersion=a(91);c.prototype._getPathValuesAsPathMap=w.getWithPathsAsPathMap;c.prototype._getPathValuesAsJSONG=w.getWithPathsAsJSONGraph;c.prototype._setPathValues=a(35);c.prototype._setPathMaps=a(34);c.prototype._setJSONGs=a(19);c.prototype._setCache=a(34);c.prototype._invalidatePathValues=a(101);c.prototype._invalidatePathMaps=a(100)},function(b,d){function a(a){this._model=
a._materialize().boxValues().treatErrorsAsValues()}a.prototype.get=function(a){return this._model.get.apply(this._model,a)._toJSONG()};a.prototype.set=function(a){return this._model.set(a)._toJSONG()};a.prototype.call=function(a,b,f,d){a=[a,b,f].concat(d);return this._model.call.apply(this._model,a)._toJSONG()};b.exports=a},function(b,d,a){function c(a,b){a=a||{};this.syncRefCount=this.version=0;this.expired=a.expired||[];this.unsafeMode=a.unsafeMode||!1;this.cache={};this.topLevelModel=b;f(a.comparator)&&
(this.comparator=a.comparator);f(a.branchSelector)&&(this.branchSelector=a.branchSelector);f(a.errorSelector)&&(this.errorSelector=a.errorSelector);f(a.branchSelector)&&(this.branchSelector=a.branchSelector);f(a.onChange)&&(this.onChange=a.onChange);f(a.onChangesCompleted)&&(this.onChangesCompleted=a.onChangesCompleted)}var g=a(15),f=a(3);c.prototype.errorSelector=function(a,b){return b};c.prototype.comparator=function(a,b){return g(a,"value")&&g(b,"value")?a.value===b.value&&a.$type===b.$type&&a.$expires===
b.$expires:a===b};b.exports=c},function(b,d,a){(function(a){function c(a){a.Symbol||(a.Symbol=function(a){return"@@Symbol("+a+"):"+l++ +"}"});return a.Symbol}function f(a){return"@@"+a}var d={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},h=d[typeof self]&&self||d[typeof window]&&window;a=d[typeof a]&&a;!a||a.global!==a&&a.window!==a||(h=a);var l=0;b.exports=function(a){a=c(a);a.observable||(a.observable="function"===typeof a.for?a.for("observable"):"@@observable");a.for||
(a["for"]=f);return a}(h)}).call(d,a(66))},function(b,d,a){b.exports=function(){var a=this._referenceContainer;return this._allowFromWhenceYouCame&&!0!==a?!1===a||a&&void 0===a["\u001e\u0192alcor_parent"]||a&&a["\u001e\u0192alcor_invalidated"]?!1:!0:!0}},function(b,d,a){var c=a(0),g=a(13),f=a(87);b.exports=function(a){if(!a||"object"!==typeof a)throw new f;var b,d,k,e;k=a&&a["\u001e\u0192alcor_metadata"];if(!k||"object"!==typeof k)return this._clone({_node:void 0});var v=this._recycleJSON,t=k.abs_path;
if(!t)return this._clone({_node:void 0,_seed:v&&{json:a}||void 0});if(0===t.length)return this._clone({_path:t,_node:this._root.cache,_referenceContainer:!0,_seed:v&&{json:a}||void 0});var u=k.deref_to;d=k.deref_from;var q=this._root.cache,r=g(q,t),m="e";if(d){m=!1;k=-1;e=d.length;for(b=q;++k<e&&(b=b[d[k]],b&&!b.$type););if(u&&b&&b.$type===c){k=0;e=u.length;d=b.value;for(m=!0;m&&k<e;++k)d[k]!==u[k]&&(m=!1);!1===m&&(r=void 0)}}m?"e"===m&&(b=!0):b=!1;return this._clone({_node:r,_path:t,_referenceContainer:b,
_seed:v&&{json:a}||void 0})}},function(b,d){function a(){var a=Error.call(this,"It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.");a.name=this.name;this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="BoundJSONGraphModelError";a.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.";b.exports=a},
function(b,d){function a(){var a=Error.call(this,"Deref can only be used with a non-primitive object from get, set, or call.");a.name="InvalidDerefInputError";this.stack=a.stack;this.message=a.message;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="InvalidDerefInputError";a.message="Deref can only be used with a non-primitive object from get, set, or call.";b.exports=a},function(b,d){function a(a,b){var c=Error.call(this,"The boundPath of the model is not valid since a value or error was found before the path end.");
c.name="InvalidModelError";this.stack=c.stack;this.message=c.message;this.boundPath=a;this.shortedPath=b;return this}a.prototype=Object.create(Error.prototype);a.prototype.name="InvalidModelError";a.message="The boundPath of the model is not valid since a value or error was found before the path end.";b.exports=a},function(b,d,a){function c(a,b,d){"object"===typeof a&&Object.keys(a).filter(function(b){return!g(b)&&void 0!==a[b]}).forEach(function(f){var d=a[f],e=b[f];e||(e=b[f]={});if(d.$type){e=
!d["\u001e\u0192alcor_wrapped_value"];if(d.value&&"object"===typeof d.value||e){var e={},k=Object.keys(d),h,l,q;l=0;for(q=k.length;l<q;l++)h=k[l],g(h)||(e[h]=d[h]);d=e}else d=d.value;b[f]=d}else c(d,e,f)})}var g=a(124);b.exports=function(a){var b={};c(a,b);return b}},function(b,d,a){var c=a(33),g=a(5);b.exports=function(a){for(var b=0,f=a.length;++b<f;)if("object"===typeof a[b])return new g(function(a){a.onError(Error("Paths must be simple paths"))});var d=this;return new g(function(b){return(new c(d,
[a],!1,!1,!1,void 0,!1)).subscribe(function(c){c=c.json;for(var e=-1,f=a.length;c&&++e<f;)c=c[a[e]];b.onNext(c)},function(a){b.onError(a)},function(){b.onCompleted()})})}},function(b,d,a){var c=a(18);b.exports=function(a,b){a=(a=c(a,b))&&a["\u001e\u0192alcor_version"];return null==a?-1:a}},function(b,d,a){var c=Array.isArray,g=a(95),f=a(94),k=a(18),h=a(88),l=a(4).toFlatBuffer,p=a(4).computeFlatBufferHash;b.exports=function(a,b,d,u){var e,t,m=a._path,n=a._root,y=n.cache,x,v=m.length;if(v){if((e=k(a))&&
e.$type)return{criticalError:new h(m,m)};x=[];for(t=0;t<v;++t)x[t]=m[t];t=a._referenceContainer}else e=y,x=[];var m=[],A=a._boxed,C=n.expired,F=a._materialized,B=!!a._source,w=n.branchSelector,G=a._treatErrorsAsValues,D=a._allowFromWhenceYouCame,E=d[0],H=E&&E.json;d={values:d};if(a._recycleJSON&&!0!==u)c(u=b)&&(u=p(l(b))),H=f(y,e,H,u,0,E,d,m,x,v,!1,t,n,C,w,A,F,B,G,D);else for(var J=-1,M=b.length;++J<M;)u=b[J],a=u.length,H=g(y,e,H,u,0,E,d,m,a,x,v,!1,t,n,C,w,A,F,B,G,D);d.hasValue&&(E.json=H);return d}},
function(b,d,a){var c=a(12);b.exports=function(a,b,d,h,l,p){var e=-1;b+=!!l;l=Array(b);for(a=p?c(a):a.value;++e<b;)l[e]=h[e];(d.errors||(d.errors=[])).push({path:l,value:a})}},function(b,d,a){function c(a,b,d,y,p,q,A,C,F,B,w,G,D,E,H,J,M,R,S,W){var n,m;if(void 0===b||void 0!==(n=b.$type)||void 0===y)return l(b,n,y,p,q,A,C,p,F,B,w,D,E,J,M,R,S,f,g);var x,r,z="",L,I,N,Q=y.$keys,aa=p+1,T,U,V,ca,X,da=B+1,fa,ga;W&&G&&(ga=G.value,fa=G["\u001e\u0192alcor_abs_path"]);if(d&&(x=d["\u001e\u0192alcor_metadata"])){if(!(H||
d instanceof h))delete d["\u001e\u0192alcor_metadata"],d.__proto__=new h(x);else if(x.version===b["\u001e\u0192alcor_version"]&&x.$code===y.$code&&x.abs_path===b["\u001e\u0192alcor_abs_path"])return A.hasValue=!0,d;r=x.keys;x.version=b["\u001e\u0192alcor_version"];x.abs_path=b["\u001e\u0192alcor_abs_path"];x.deref_to=ga;x.deref_from=fa}n={};var ha=-1,ja=Q.length,ba,ea,ia;a:for(;++ha<ja;)if(w=Q[ha],ba=y[ha],ia=!1,null===w){if(void 0!==ba)throw new t;z=""+u(""+z+"null")}else{if("object"!==typeof w)I=
w,T=void 0,N=!1,ea=I;else{T=w.to;I=w.from||0;"number"!==typeof T&&(T=I+(w.length||0)-1);if(0>T-I)break a;N=!0;ea="{from:"+I+",length:"+(T-I+1)+"}"}do if(w=!1,U=d&&d[I],X=F,ca=da,V=G,L=b[I],C[p]=I,F[B]=I,L&&void 0!==ba&&L.$type===k&&!e(L)&&(m=v(a,L,D),L=m[0],w=!0,X=m[1],V=m[2],ca=X.length,m[0]=m[1]=m[2]=void 0),U=c(a,L,U,ba,aa,q,A,C,X,ca,w,V,D,E,H,J,M,R,S,W),void 0!==U){void 0===x&&(x={},x.version=b["\u001e\u0192alcor_version"],x.abs_path=b["\u001e\u0192alcor_abs_path"],x.deref_to=ga,x.deref_from=
fa);if(void 0===d||null===d)H?(d=H(x),d["\u001e\u0192alcor_metadata"]||(d["\u001e\u0192alcor_metadata"]=x)):d=Object.create(new h(x));n[I]=!0;r&&r.hasOwnProperty(I)&&(r[I]=!1);d[I]=U}else d&&d.hasOwnProperty(I)&&delete d[I],ia=!0;while(N&&++I<=T);z=!0===ia||void 0===ba?""+u(""+z+ea):""+u(""+z+ea+ba.$code)}if(x&&(x.$code=z,x.keys=n,r))for(I in r)r[I]&&delete d[I];return d}function g(a,b,c,e,f,d,g){a=a?q(a):[[]];var h=e.slice(0,f);a.forEach(function(a){f=b+a.length;p(h.concat(a),b,c,e,f,d,g)})}var f=
a(52),k=a(0),h=a(28),l=a(31),p=a(30),e=a(2),v=a(51),t=a(10);a(26);var u=a(4).getHashCode,q=a(4).flatBufferToPaths;b.exports=c},function(b,d,a){function c(a,b,d,n,y,x,z,A,C,F,B,w,G,D,E,H,J,M,R,S,W){var m,q;if(void 0===b||(m=b.$type)||y===C)return p(b,m,n,y,x,z,A,C,F,B,w,D,E,J,M,R,S,f,l);var r,O,P=y+1,L,I,N,Q,aa=-1,T=0,U,V,ca=B+1,X,da;w=n[y];if(null===w){if(P<C)throw new t;return d}W&&G&&(da=G.value,X=G["\u001e\u0192alcor_abs_path"]);a:do{if("object"!==typeof w)m=w,L=void 0,O=!1;else if(g(w)){if(void 0!==
I)throw new u(n,I);aa=0;I=w;T=w.length;if(0===T)break a;w=I[aa];continue a}else{L=w.to;m=w.from||0;"number"!==typeof L&&(L=m+(w.length||0)-1);if(0>L-m)break a;O=!0}do if(w=!1,N=d&&d[m],V=F,U=ca,Q=G,r=b[m],A[y]=m,F[B]=m,r&&P<C&&r.$type===k&&!e(r)&&(q=v(a,r,D),r=q[0],w=!0,V=q[1],Q=q[2],U=V.length,q[0]=q[1]=q[2]=void 0),N=c(a,r,N,n,P,x,z,A,C,V,U,w,Q,D,E,H,J,M,R,S,W),void 0!==N){if(void 0===d||null===d)w={},w.version=b["\u001e\u0192alcor_version"],w.abs_path=b["\u001e\u0192alcor_abs_path"],w.deref_to=
da,w.deref_from=X,H?(d=H(w),d["\u001e\u0192alcor_metadata"]||(d["\u001e\u0192alcor_metadata"]=w)):d=new h(w);d[m]=N}while(O&&++m<=L);if(++aa===T)break a;w=I[aa]}while(1);return d}var g=Array.isArray,f=a(52),k=a(0),h=a(28),l=a(30),p=a(31),e=a(2),v=a(51),t=a(10),u=a(26);b.exports=c},function(b,d,a){var c=a(99),g=a(86);b.exports=function(a,b,d){var f,h,e=a._root,k,t,u=a._path.length;if(u)return{criticalError:new g};t=[];h=f=e.cache;k=[];var q=a._boxed,r=e.expired,m=a._materialized,n=!!a._source;a=a._treatErrorsAsValues;
for(var y=d[0],x={values:d},z,A=-1,C=b.length;++A<C;)z=b[A],d=z.length,c(h,f,z,0,y,x,k,d,t,u,!1,e,r,q,m,n,a);return x}},function(b,d,a){var c=Array(2),g=a(12),f=a(0),k=a(29),h=a(14),l=a(2),p=a(11),e=a(49);b.exports=function(a,b,d,q,r,m){h(d,b);var n,y;r=0;m=a;var x=b.value,t=x,v=x.length;do{if(0===r&&void 0!==(n=b["\u001e\u0192alcor_context"]))m=n,r=v;else if(y=x[r++],void 0===(m=m[y]))break;if(r===v){y=m.$type;if(void 0!==y&&l(m))break;else{if(m===b)throw new e(x);m!==n&&p(b,m)}if(y===f)h(d,m),k(g(m),
x,v,q),r=0,b=m,m=a,x=t=b.value,v=x.length;else break}else if(void 0!==m.$type)break}while(1);r<v&&void 0!==m&&(v=r);r=-1;for(x=Array(v);++r<v;)x[r]=t[r];c[0]=m;c[1]=x;return c}},function(b,d,a){var c=a(12),g=a(0),f=a(23),k=a(17),h=a(29);b.exports=function(a,b,e,d,t,u,q,r,m,n,y){var l=a&&a.value;if(b&&void 0===l)if(y)l={$type:f};else return;else if(n||g===b||k===b||!a["\u001e\u0192alcor_wrapped_value"]||"object"===typeof l)l=c(a);t&&u&&(t.hasValue=!0,h(l,q,r,d,n,y),(d.paths||(d.paths=[])).push(u.slice(0,
e+!!m)));return l}},function(b,d,a){function c(a,b,d,y,x,z,A,C,F,B,w,G,D,E,H,J,M){var m,n;if(void 0===b||(m=b.$type)||y===C)return e(b,m,d,y,x,z,A,C,F,B,w,G,D,E,H,J,M,h,l);var r,Y,Z=y+1,K,O,P=-1,L=0,I,N,Q=B+1;w=d[y];if(null===w){if(Z<C)throw new u;}else{a:do{if("object"!==typeof w)m=w,K=void 0,Y=!1;else if(g(w)){if(void 0!==O)throw new q(d,O);P=0;O=w;L=w.length;if(0===L)break a;w=O[P];continue a}else{K=w.to;m=w.from||0;"number"!==typeof K&&(K=m+(w.length||0)-1);if(0>K-m)break a;Y=!0}do w=!1,N=F,I=
Q,r=b[m],A[y]=m,F[B]=m,r&&Z<C&&r.$type===k&&!v(r)&&(p(f(r),F,I,x),n=t(a,r,G,x,E,H),r=n[0],w=!0,N=n[1],I=N.length,n[0]=n[1]=void 0),c(a,r,d,Z,x,z,A,C,N,I,w,G,D,E,H,J,M);while(Y&&++m<=K);if(++P===L)break a;w=O[P]}while(1)}}var g=Array.isArray,f=a(12),k=a(0),h=a(98),l=a(30),p=a(29),e=a(31),v=a(2),t=a(97),u=a(10),q=a(26);b.exports=c},function(b,d,a){function c(a,b,f,d,h,k,l,t,r,u){if(!q(a)&&!a.$type)for(var y in a)if("\u001e"!==y[0]&&"$"!==y[0]&&e(a,y)){var x=a[y],z=v(x)&&!x.$type,w=g(f,d,h,y,x,z,!1,
k,l,t,r,u),A=w[0],w=w[1];A&&(z?c(x,b+1,f,w,A,k,l,t,r,u):n(A,w,y,t)&&m(w,p(A),t,k))}}function g(a,b,c,e,d,m,h,n,p,v,u,H){for(h=c.$type;h===k;){a:{b=d;h=a;var y=n,x=p,w=v,z=u,A=H;if(t(c))r(c,x,w),b=[void 0,h];else{l(w,c);var C=c,B=c.value,D;c=c["\u001e\u0192alcor_context"];if(null!=c)D=c["\u001e\u0192alcor_parent"]||h;else{var E=0,F=B.length-1;D=c=h;do{D=g(h,D,c,B[E],b,E<F,!0,y,x,w,z,A);c=D[0];if(q(c)){b=D;break a}D=D[1]}while(E++<F);C["\u001e\u0192alcor_context"]!==c&&f(C,c)}b=[c,D]}}c=b[0];if(q(c))return b;
b=b[1];h=c&&c.$type}if(void 0!==h)return[c,b];if(null==e){if(m)throw Error("`null` is not allowed in branch key positions.");}else b=c,c=b[e];return[c,b]}var f=a(11),k=a(0),h=a(18),l=a(14),p=a(7),e=a(15),v=a(1),t=a(2),u=a(3),q=a(8),r=a(6),m=a(16),n=a(39);b.exports=function(a,b){var e=a._root,f=e.expired,d=e.version++,g=e._comparator,m=e._errorSelector,n=e.cache,k=h(a),l=k["\u001e\u0192alcor_parent"]||n;a=n["\u001e\u0192alcor_version"];for(var p=-1,y=b.length;++p<y;)c(b[p].json,0,n,l,k,d,f,e,g,m);
b=n["\u001e\u0192alcor_version"];e=e.onChange;u(e)&&a!==b&&e()}},function(b,d,a){function c(a,b,e,f,d,h,k,p){var m={},n=b<a.length-1,y=a[b],t=u(y,m);do{var v=g(e,f,d,t,n,!1,h,k,p),x=v[0],v=v[1];x&&(n?c(a,b+1,e,v,x,h,k,p):r(x,v,t,p)&&q(v,l(x),p,h));t=u(y,m)}while(!m.done)}function g(a,b,c,e,d,k,l,q,r){for(k=c.$type;k===f;){a:{b=a;var m=l,n=q,y=r;if(p(c))t(c,n,y),b=[void 0,b];else{h(y,c);k=c;var u=c.value,x;c=c["\u001e\u0192alcor_context"];if(null!=c)x=c["\u001e\u0192alcor_parent"]||b;else{var z=0,
A=u.length-1;x=c=b;do{x=g(b,x,c,u[z],z<A,!0,m,n,y);c=x[0];if(v(c)){b=x;break a}x=x[1]}while(z++<A);k["\u001e\u0192alcor_context"]!==c&&(b=c["\u001e\u0192alcor_refs_length"]||0,c["\u001e\u0192alcor_refs_length"]=b+1,c["\u001e\u0192alcor_ref"+b]=k,k["\u001e\u0192alcor_context"]=c,k["\u001e\u0192alcor_ref_index"]=b)}b=[c,x]}}c=b[0];if(v(c))return b;b=b[1];k=c.$type}if(void 0!==k)return[c,b];if(null==e){if(d)throw Error("`null` is not allowed in branch key positions.");}else b=c,c=b[e];return[c,b]}var f=
a(0),k=a(18),h=a(14),l=a(7),p=a(2),e=a(3),v=a(8),t=a(6),u=a(4).iterateKeySet,q=a(16),r=a(39);b.exports=function(a,b){var f=a._root,d=f.expired,g=f.version++,h=f.cache,m=k(a),l=m["\u001e\u0192alcor_parent"]||h;a=h["\u001e\u0192alcor_version"];for(var n=-1,p=b.length;++n<p;)c(b[n],0,h,l,m,g,d,f);b=h["\u001e\u0192alcor_version"];f=f.onChange;e(f)&&a!==b&&f()}},function(b,d,a){function c(a,b){var c=!1;return function(){c||a._disposed||(c=!0,a._callbacks[b]=null,a._optimizedPaths[b]=[],a._requestedPaths[b]=
[],0===--a._count&&(a._disposable.dispose(),a.requestQueue.removeRequest(a)))}}function g(a){for(var b=[],c=-1,e=0,f=a.length;e<f;++e)for(var d=a[e],g=0,h=d.length;g<h;++g)b[++c]=d[g];return b}function f(a){if(!a)return{dispose:t,unsubscribe:t};a.unsubscribe?a.dispose||(a.dispose=a.unsubscribe):a.unsubscribe=a.dispose;return a}var k=a(104),h=a(105),l=0,p=a(54).GetRequest,e=a(19),v=a(35),t=a(22),u=a(17),q=[],r=a(9);d=function(a,b){this.scheduled=this.sent=!1;this.requestQueue=b;this.id=++l;this.type=
p;this._scheduler=a;this._pathMap={};this._optimizedPaths=[];this._requestedPaths=[];this._callbacks=[];this._count=0;this._collapsed=this._disposable=null;this._disposed=!1};d.prototype={batch:function(a,b,e){var d=this,g=d._optimizedPaths,k=d._requestedPaths,l=d._callbacks,m=g.length;g[m]=b;k[m]=a;l[m]=e;++d._count;if(!d.scheduled){d.scheduled=!0;var n;a=d._scheduler.schedule(function(){d._disposable=n=f(h(d,g,function(a,b){var c,e,f;d.requestQueue.removeRequest(d);d._disposed=!0;if(a instanceof
r)for(c=0,f=l.length;c<f;++c)(e=l[c])&&e(a);else if(d._count)for(d._merge(k,a,b),c=0,f=l.length;c<f;++c)(e=l[c])&&e(a,b)}))});d._disposable=f(n||a)}return c(d,m)},add:function(a,b,e){var d=k(a,b,this._pathMap),f;d?(f=d[2],a=d[1]):(f=a,a=b);var g=!1,h=!1;a.length<b.length&&(g=!0,b=this._callbacks.length,this._callbacks[b]=e,this._requestedPaths[b]=d[0],this._optimizedPaths[b]=[],++this._count,h=c(this,b));return[g,f,a,h]},_merge:function(a,b,c){var d=this.requestQueue.model,f=d._root,h=f.errorSelector,
f=f.comparator,k=d._path;d._path=q;a=g(a);if(b){var l=b;l instanceof Error?l={message:l.message}:l.$type||(l={$type:u,value:l});b=a.map(function(a){return{path:a,value:l}});v(d,b,h,f)}else e(d,[{paths:a,jsonGraph:c.jsonGraph}],h,f);d._path=k}};b.exports=d},function(b,d,a){function c(a,b){this.model=a;this.scheduler=b;this.requests=this._requests=[]}var g=a(54),f=a(106),k=a(102),h=a(4).collapse;c.prototype={setScheduler:function(a){this.scheduler=a},set:function(a,b){a.paths=h(a.paths);return f(a,
this.model,b)},get:function(a,b,c){function e(a){n||(--f,0===f&&c(a))}var d=[],f=0,h=this._requests,l,m=a,n=!1,p;a=0;for(l=h.length;a<l&&(p=h[a],p.type!==g.GetRequest||(p.sent?(p=p.add(m,b,e),p[0]&&(m=p[1],b=p[2],d[d.length]=p[3],++f)):(p.batch(m,b,e),b=[],m=[],++f),b.length));++a);b.length&&(p=new k(this.scheduler,this),h[h.length]=p,++f,h=p.batch(m,b,e),d[d.length]=h);return function(){if(!n&&0!==f){n=!0;for(var a=d.length,b=0;b<a;++b)d[b]()}}},removeRequest:function(a){for(var b=this._requests,
c=b.length;0<=--c;)if(b[c].id===a.id){b.splice(c,1);break}}};b.exports=c},function(b,d,a){var c=a(4).hasIntersection;b.exports=function(a,b,d){for(var f=[],g=[],k=[],e=-1,v=-1,t=!1,u=0,q=b.length;u<q;++u){var r=b[u],m=r.length,n=d[m];n&&c(n,r,0,m)?(!t&&0<u&&(g=a.slice(0,u),f=b.slice(0,u)),k[++e]=a[u],t=!0):t&&(f[++v]=r,g[v]=a[u])}return t?[k,f,g]:null}},function(b,d,a){d=a(4);var c=d.toTree,g=d.toPaths,f=a(9);b.exports=function(a,b,d){if(0===a._count)return a.requestQueue.removeRequest(a),null;a.sent=
!0;a.scheduled=!1;for(var h=a._pathMap,e=0,k=Object.keys(b).length;e<k;++e)for(var l=b[e],u=0,q=l.length;u<q;++u){var r=l[u],m=r.length;h[m]?(m=h[m],m[m.length]=r):h[m]=[r]}b=Object.keys(h);e=0;for(k=b.length;e<k;++e)l=b[e],h[l]=c(h[l]);var h=a._collasped=g(h),n,y;try{y=a.requestQueue.model._source.get(h)}catch(x){return d(new f),null}return y.subscribe(function(a){n=a},function(a){d(a,n)},function(){d(null,n)})}},function(b,d,a){var c=a(19),g=a(35),f=a(9),k=[],h={dispose:function(){}};b.exports=
function(a,b,e){var d=a.paths,l=b._root,p=l.errorSelector,q=l.comparator,r=b._path,m,n;try{n=b._source.set(a)}catch(x){return e(new f),h}var y=n.subscribe(function(a){if(!y||!y.disposed){b._path=k;var e=c(b,[{paths:d,jsonGraph:a.jsonGraph}],p,q);a.paths=e[1];b._path=r;m=a}},function(a){y&&y.disposed||(b._path=k,g(b,d.map(function(b){return{path:b,value:a}}),p,q),b._path=r,e(a))},function(){e(null,m)});return y}},function(b,d,a){function c(a,b,c,d,e){this.callPath=b;this.args=c;e&&(this.paths=e);d&&
(this.suffix=d);this.model=a;b=a._root.cache["\u001e\u0192alcor_version"];this.initialCacheVersion="number"===typeof b?b:a._root.version}var g=a(58);d=a(5);var f=a(9);c.prototype=Object.create(d.prototype);c.prototype._subscribe=function(a){var b=this.callPath,c=this.args,d=this.suffix,e=this.paths,k=this.model,t=k._clone({_path:[]}),b=k._path.concat(b),u=this.initialCacheVersion;if(k._source){var q,r;try{r=k._source.call(b,c,d,e)}catch(m){a.onError(new f(m));return}return r.subscribe(function(a){q=
a},function(b){a.onError(b)},function(){var b=q.invalidated;b&&b.length&&(++k._root.syncRefCount,t.invalidate.apply(t,b),--k._root.syncRefCount);return(new g(t.withoutDataSource(),[q],!1,!1,u)).subscribe(function(b){a.onNext(b)},function(b){a.onError(b)},function(){a.onCompleted()})})}a.onError(Error("function does not exist"))};b.exports=c},function(b,d,a){function c(a,b,c){this._model=a;var e=[],d,h,l=-1,n=b.length,p=a._root.cache["\u001e\u0192alcor_version"];for(this.initialCacheVersion="number"===
typeof c?c:"number"===typeof p?p:a._root.version;++l<n;){a=b[l];if(g(a))c="PathValues";else if(f(a))c="PathValues";else if(k(a))c="PathMaps";else throw Error("Invalid Input");h!==c&&(h=c,d={inputType:c,arguments:[]},e.push(d));d.arguments.push(a)}this._groups=e}var g=Array.isArray;d=a(5);var f=a(21),k=a(20),h=a(22),l={dispose:h,unsubscribe:h},p=a(3);c.prototype=Object.create(d.prototype);c.prototype.progressively=function(){return this};c.prototype._toJSONG=function(){return this};c.prototype._subscribe=
function(a){var b=this._model;this._groups.forEach(function(a){(0,b["_invalidate"+a.inputType])(b,a.arguments)});a.onCompleted();a=b._root;var c=a.onChangesCompleted;this.initialCacheVersion!==a.cache["\u001e\u0192alcor_version"]&&0>=a.syncRefCount&&p(c)&&c.call(a.topLevelModel);return l};b.exports=c},function(b,d,a){function c(a,b){var c=[],e,d;e=0;for(d=a.length;e<d;e++)c[e]=a[e];a=0;for(d=b.length;a<d;a++)c[e++]=b[a];return c}var g=a(56),f=a(50),k=a(32),h=a(7),l=a(55),p=a(9),e=a(3);b.exports=function t(a,
b,d,m,n,y,x,z,A){if(10===y)throw new f;var q=b._request,r=d.requestedMissingPaths,u=d.optimizedMissingPaths,w=new l,G=[],D=b._path;if(D.length)for(var E=0,H=r.length;E<H;++E)G[E]=c(D,r[E]);else G=r;var J=a.isProgressive||!A?r:z,q=q.get(G,u,function(c){if(c instanceof p)m.onError(c);else if(c=g(b,J,m,a.isProgressive,a.isJSONGraph,d.values,n,A))w.currentDisposable=t(a,b,c,m,n,y+1,x,z,A);else{c=b._root;var f=c.cache,l=f["\u001e\u0192alcor_version"];k(c,c.expired,h(f),b._maxSize,b._collectRatio,l);f=
c.onChangesCompleted;x!==l&&0>=c.syncRefCount&&e(f)&&f.call(c.topLevelModel)}});w.currentDisposable=q;return w}},function(b,d,a){var c=a(5),g=a(57),f=a(40),k=a(33);b.exports=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];var e=f(b,g,"get");return!0!==e?new c(function(a){a.onError(e)}):new k(this,b)}},function(b,d,a){function c(a,b){for(var d,f,g,p=Object.keys(b),e=-1,v=p.length;++e<v;)g=p[e],"\u001e\u0192alcor_metadata"!==g&&(f=b[g],d=a[g],d!==f&&(void 0===d||"object"!==typeof f?
a[g]=f:c(d,f)));a["\u001e\u0192alcor_metadata"]=b["\u001e\u0192alcor_metadata"];return a}b.exports=c},function(b,d,a){var c=a(115),g=a(40),f=a(58),k=a(5);b.exports=function(){var a=g(arguments,c,"set");if(!0!==a)return new k(function(b){b.onError(a)});for(var b=-1,d=arguments.length,e=[];++b<d;)e[b]=arguments[b];return new f(this,e)}},function(b,d,a){function c(a){return a.path}function g(a){return a.paths}var f=a(119);b.exports=function(a,b){for(var d=a._root.errorSelector,h=-1,e=b.length,k=[],t=
[],u={requestedPaths:k,optimizedPaths:t};++h<e;){var q=b[h],r=q.inputType,q=q.arguments;if(0<q.length){var m=(0,a["_set"+r])(a,q,d);t.push.apply(t,m[1]);"PathValues"===r?k.push.apply(k,q.map(c)):"JSONGs"===r?k.push.apply(k,f(q,g)):k.push.apply(k,m[0])}}return u}},function(b,d,a){function c(a,b){var c=a._path,d={};a._path=f;a._getPathValuesAsJSONG(a._materialize().withoutDataSource(),b,[d]);a._path=c;return d}function g(a,b,c,d,e,f){return(new h(a,c,d,e,!0,f,!1)).subscribe(b)}var f=[],k=a(55),h=a(33),
l=a(113),p=a(27).getWithPathsAsPathMap,e=a(9),v=a(50);b.exports=function u(a,b,d,f,h,x,z){if(10===x)throw new v;var m=l(a,d),n=m.optimizedPaths,q=m.requestedPaths;if(void 0===a._source)return g(a,b,q,f,h,z);if(h){m=p(a,q,[{}],!0);if(m.criticalError)return b.onError(m.criticalError),null;b.onNext(m.values[0])}var m=c(a,n),r=new k,m=a._request.set(m,function(c,k){if(typeof c===e)b.onError(c);else{var l=!1;if(c||n.length===k.paths.length)l=!0;l?r.currentDisposable=g(a,b,q,f,h,z):u(a,b,d,f,h,x+1,z)}});
r.currentDisposable=m;return r}},function(b,d){b.exports={pathValue:!0,pathSyntax:!0,json:!0,jsonGraph:!0}},function(b,d){function a(){}var c={dispose:function(){}};a.prototype.schedule=function(a){a();return c};b.exports=a},function(b,d){function a(a){this.delay=a}var c=function(a){this.id=a;this.disposed=!1};a.prototype.schedule=function(a){a=setTimeout(a,this.delay);return new c(a)};c.prototype.dispose=function(){this.disposed||(clearTimeout(this.id),this.disposed=!0)};b.exports=a},function(b,
d,a){var c=a(5),g=a(21);b.exports=function(a,b){var d=g(a)?a:{path:a,value:b};a=0;var f=d.path;for(b=f.length;++a<b;)if("object"===typeof f[a])return new c(function(a){a.onError(Error("Paths must be simple paths"))});var k=this;return new c(function(a){return k.set(d).subscribe(function(b){b=b.json;for(var c=-1,d=f.length;b&&++c<d;)b=b[f[c]];a.onNext(b)},function(b){a.onError(b)},function(){a.onCompleted()})})}},function(b,d){b.exports=function(a,b){for(var c=-1,d=-1,k=a.length,h=[];++d<k;)for(var l=
b(a[d],d,a),p=-1,e=l.length;++p<e;)h[++c]=l[p];return h}},function(b,d,a){var c=a(15),g=Array.isArray,f=a(1);b.exports=function(a){var b=a;if(f(b)){var b=g(a)?[]:{},d;for(d in a)"\u001e"!==d.charAt(0)&&c(a,d)&&(b[d]=a[d])}return b}},function(b,d,a){var c=a(1);b.exports=function(a){return c(a)&&a.$expires||void 0}},function(b,d,a){var c=a(1);b.exports=function(a,b){a=c(a)&&a.$type||void 0;return b&&a?"branch":a}},function(b,d,a){var c=a(37),g=a(42),f=a(41);b.exports=function(a){a=a.$expires;return null!=
a&&a!==f&&a!==g&&a<c()}},function(b,d,a){b.exports=function(a){return"$size"===a||"\u001e\u0192alcor_wrapped_value"===a||"\u001e"===a.charAt(0)}},function(b,d,a){var c=a(0),g=a(17),f=a(7),k=a(59),h=a(1),l=a(2),p=a(3),e=a(65),v=a(60),t=a(6),u=a(63),q=a(16),r=a(62);b.exports=function(a,b,d,x,z,A,C,F,B,w,G){var m,n,y,J,M,R;if(b===d){if(null===d)return b=e(d,void 0,d),a=q(a,-b.$size,B,C),b=v(b,a,x,void 0,A);if(void 0===d)return d;if(y=h(b))if(m=b.$type,null==m)return null==b["\u001e\u0192alcor_parent"]&&
v(b,a,x,C,A),b}else if(y=h(b))m=b.$type;if(m!==c){if(J=h(d))n=d.$type;if(y&&!m&&(null==d||J&&!n))return b}else{if(null==d){if(l(b)){t(b,F,B);return}return b}if(J=h(d))if(n=d.$type,n===c)if(b===d){if(null!=b["\u001e\u0192alcor_parent"])return b}else if(M=b.$timestamp,R=d.$timestamp,!l(b)&&!l(d)&&R<M)return}if(m&&J&&!n)return v(u(b,d,a,x,B,C),a,x,void 0,A);n||!J?(n===g&&p(G)&&(d=G(r(z,x),d)),n&&b===d?null==b["\u001e\u0192alcor_parent"]&&(b=e(b,m,b.value),a=q(a,-b.$size,B,C),b=v(b,a,x,C,A)):(z=!0,(m&&
!l(b)||!y)&&(z=!1===k(d)<k(b))&&(m||n)&&p(w)&&(z=!w(b,d,A.slice(0,A.index))),z&&(d=e(d,n,n?d.value:d),w=f(b)-f(d),b=u(b,d,a,x,B,C),a=q(a,w,B,C),b=v(b,a,x,C,A))),l(b)&&t(b,F,B)):null==b&&(b=v(d,a,x,void 0,A));return b}},function(b,d,a){b.exports=function(a,b){for(var c=a["\u001e\u0192alcor_refs_length"]||0,d=b["\u001e\u0192alcor_refs_length"]||0,g=-1;++g<c;){var l=a["\u001e\u0192alcor_ref"+g];void 0!==l&&(l["\u001e\u0192alcor_context"]=b,b["\u001e\u0192alcor_ref"+(d+g)]=l,a["\u001e\u0192alcor_ref"+
g]=void 0)}b["\u001e\u0192alcor_refs_length"]=c+d;a["\u001e\u0192alcor_refs_length"]=void 0;return b}},function(b,d,a){b.exports=function(a){for(var b=-1,c=a["\u001e\u0192alcor_refs_length"]||0;++b<c;){var d=a["\u001e\u0192alcor_ref"+b];null!=d&&(d["\u001e\u0192alcor_context"]=d["\u001e\u0192alcor_ref_index"]=a["\u001e\u0192alcor_ref"+b]=void 0)}a["\u001e\u0192alcor_refs_length"]=void 0;return a}},function(b,d,a){b.exports=function(a){var b=a["\u001e\u0192alcor_context"];if(b){for(var c=(a["\u001e\u0192alcor_ref_index"]||
0)-1,d=(b["\u001e\u0192alcor_refs_length"]||0)-1;++c<=d;)b["\u001e\u0192alcor_ref"+c]=b["\u001e\u0192alcor_ref"+(c+1)];b["\u001e\u0192alcor_refs_length"]=d;a["\u001e\u0192alcor_ref_index"]=a["\u001e\u0192alcor_context"]=void 0}return a}},function(b,d){function a(a){this.esObserver=a}function c(a){this.subscription=a}a.prototype={onNext:function(a){"function"===typeof this.esObserver.next&&this.esObserver.next(a)},onError:function(a){"function"===typeof this.esObserver.error&&this.esObserver.error(a)},
onCompleted:function(){"function"===typeof this.esObserver.complete&&this.esObserver.complete()}};c.prototype.unsubscribe=function(){this.subscription.dispose()};b.exports=function(b){return{subscribe:function(d){return new c(b.subscribe(new a(d)))}}}},function(b,d,a){b.exports=a(67)}])});
//# sourceMappingURL=falcor.min.js.map
